var zO=Object.defineProperty,WO=Object.defineProperties;var KO=Object.getOwnPropertyDescriptors;var f0=Object.getOwnPropertySymbols,QO=Object.getPrototypeOf,YO=Object.prototype.hasOwnProperty,JO=Object.prototype.propertyIsEnumerable,XO=Reflect.get;var p0=(t,e,n)=>e in t?zO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,U=(t,e)=>{for(var n in e||={})YO.call(e,n)&&p0(t,n,e[n]);if(f0)for(var n of f0(e))JO.call(e,n)&&p0(t,n,e[n]);return t},Oe=(t,e)=>WO(t,KO(e));var ui=(t,e,n)=>XO(QO(t),n,e);var v=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(l){i(l)}},o=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});var m0=null;var Tm=1,Dm=Symbol("SIGNAL");function be(t){let e=m0;return m0=t,e}var g0={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ZO(t){if(!(Rm(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Tm)){if(!t.producerMustRecompute(t)&&!Sm(t)){t.dirty=!1,t.lastCleanEpoch=Tm;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Tm}}function y0(t){return t&&(t.nextProducerIndex=0),be(t)}function _0(t,e){if(be(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Rm(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Am(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Sm(t){Gl(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(ZO(n),r!==n.version))return!0}return!1}function v0(t){if(Gl(t),Rm(t))for(let e=0;e<t.producerNode.length;e++)Am(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Am(t,e){if(e1(t),Gl(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Am(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Gl(i),i.producerIndexOfThis[r]=e}}function Rm(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Gl(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function e1(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function t1(){throw new Error}var n1=t1;function w0(t){n1=t}function ie(t){return typeof t=="function"}function _o(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var zl=_o(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function is(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var nt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ie(r))try{r()}catch(s){e=s instanceof zl?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{I0(s)}catch(o){e=e??[],o instanceof zl?e=[...e,...o.errors]:e.push(o)}}if(e)throw new zl(e)}}add(e){var n;if(e&&e!==this)if(this.closed)I0(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&is(n,e)}remove(e){let{_finalizers:n}=this;n&&is(n,e),e instanceof t&&e._removeParent(this)}};nt.EMPTY=(()=>{let t=new nt;return t.closed=!0,t})();var xm=nt.EMPTY;function Wl(t){return t instanceof nt||t&&"closed"in t&&ie(t.remove)&&ie(t.add)&&ie(t.unsubscribe)}function I0(t){ie(t)?t():t.unsubscribe()}var Mn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var vo={setTimeout(t,e,...n){let{delegate:r}=vo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=vo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Kl(t){vo.setTimeout(()=>{let{onUnhandledError:e}=Mn;if(e)e(t);else throw t})}function ss(){}var E0=Nm("C",void 0,void 0);function b0(t){return Nm("E",void 0,t)}function C0(t){return Nm("N",t,void 0)}function Nm(t,e,n){return{kind:t,value:e,error:n}}var os=null;function wo(t){if(Mn.useDeprecatedSynchronousErrorHandling){let e=!os;if(e&&(os={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=os;if(os=null,n)throw r}}else t()}function T0(t){Mn.useDeprecatedSynchronousErrorHandling&&os&&(os.errorThrown=!0,os.error=t)}var as=class extends nt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Wl(e)&&e.add(this)):this.destination=s1}static create(e,n,r){return new Io(e,n,r)}next(e){this.isStopped?Pm(C0(e),this):this._next(e)}error(e){this.isStopped?Pm(b0(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Pm(E0,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},r1=Function.prototype.bind;function Mm(t,e){return r1.call(t,e)}var km=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ql(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ql(r)}else Ql(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ql(n)}}},Io=class extends as{constructor(e,n,r){super();let i;if(ie(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Mn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Mm(e.next,s),error:e.error&&Mm(e.error,s),complete:e.complete&&Mm(e.complete,s)}):i=e}this.destination=new km(i)}};function Ql(t){Mn.useDeprecatedSynchronousErrorHandling?T0(t):Kl(t)}function i1(t){throw t}function Pm(t,e){let{onStoppedNotification:n}=Mn;n&&vo.setTimeout(()=>n(t,e))}var s1={closed:!0,next:ss,error:i1,complete:ss};var Eo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function rn(t){return t}function Om(...t){return Fm(t)}function Fm(t){return t.length===0?rn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var X=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=a1(n)?n:new Io(n,r,i);return wo(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=D0(r),new r((i,s)=>{let o=new Io({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Eo](){return this}pipe(...n){return Fm(n)(this)}toPromise(n){return n=D0(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function D0(t){var e;return(e=t??Mn.Promise)!==null&&e!==void 0?e:Promise}function o1(t){return t&&ie(t.next)&&ie(t.error)&&ie(t.complete)}function a1(t){return t&&t instanceof as||o1(t)&&Wl(t)}function Lm(t){return ie(t?.lift)}function _e(t){return e=>{if(Lm(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function de(t,e,n,r,i){return new Vm(t,e,n,r,i)}var Vm=class extends as{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function bo(){return _e((t,e)=>{let n=null;t._refCount++;let r=de(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Co=class extends X{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Lm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new nt;let n=this.getSubject();e.add(this.source.subscribe(de(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=nt.EMPTY)}return e}refCount(){return bo()(this)}};var S0=_o(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var St=(()=>{class t extends X{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Yl(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new S0}next(n){wo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){wo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){wo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?xm:(this.currentObservers=null,s.push(n),new nt(()=>{this.currentObservers=null,is(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new X;return n.source=this,n}}return t.create=(e,n)=>new Yl(e,n),t})(),Yl=class extends St{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:xm}};var ut=class extends St{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Um={now(){return(Um.delegate||Date).now()},delegate:void 0};var Jl=class extends nt{constructor(e,n){super()}schedule(e,n=0){return this}};var Cc={setInterval(t,e,...n){let{delegate:r}=Cc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Cc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var To=class extends Jl{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Cc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Cc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,is(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Do=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Do.now=Um.now;var So=class extends Do{constructor(e,n=Do.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Ao=new So(To),jm=Ao;var Xl=class extends To{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Zl=class extends So{};var Bm=new Zl(Xl);var sn=new X(t=>t.complete());function ed(t){return t&&ie(t.schedule)}function A0(t){return t[t.length-1]}function td(t){return ie(A0(t))?t.pop():void 0}function li(t){return ed(A0(t))?t.pop():void 0}function $m(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function x0(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(f){o(f)}}function c(d){try{l(r.throw(d))}catch(f){o(f)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function R0(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function cs(t){return this instanceof cs?(this.v=t,this):new cs(t)}function N0(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(m){r[m]&&(i[m]=function(y){return new Promise(function(E,x){s.push([m,y,E,x])>1||a(m,y)})})}function a(m,y){try{c(r[m](y))}catch(E){f(s[0][3],E)}}function c(m){m.value instanceof cs?Promise.resolve(m.value.v).then(l,d):f(s[0][2],m)}function l(m){a("next",m)}function d(m){a("throw",m)}function f(m,y){m(y),s.shift(),s.length&&a(s[0][0],s[0][1])}}function M0(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof R0=="function"?R0(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var nd=t=>t&&typeof t.length=="number"&&typeof t!="function";function rd(t){return ie(t?.then)}function id(t){return ie(t[Eo])}function sd(t){return Symbol.asyncIterator&&ie(t?.[Symbol.asyncIterator])}function od(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function c1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ad=c1();function cd(t){return ie(t?.[ad])}function ud(t){return N0(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield cs(n.read());if(i)return yield cs(void 0);yield yield cs(r)}}finally{n.releaseLock()}})}function ld(t){return ie(t?.getReader)}function Ye(t){if(t instanceof X)return t;if(t!=null){if(id(t))return u1(t);if(nd(t))return l1(t);if(rd(t))return d1(t);if(sd(t))return P0(t);if(cd(t))return h1(t);if(ld(t))return f1(t)}throw od(t)}function u1(t){return new X(e=>{let n=t[Eo]();if(ie(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function l1(t){return new X(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function d1(t){return new X(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Kl)})}function h1(t){return new X(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function P0(t){return new X(e=>{p1(t,e).catch(n=>e.error(n))})}function f1(t){return P0(ud(t))}function p1(t,e){var n,r,i,s;return x0(this,void 0,void 0,function*(){try{for(n=M0(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function Gt(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function di(t,e=0){return _e((n,r)=>{n.subscribe(de(r,i=>Gt(r,t,()=>r.next(i),e),()=>Gt(r,t,()=>r.complete(),e),i=>Gt(r,t,()=>r.error(i),e)))})}function hi(t,e=0){return _e((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function k0(t,e){return Ye(t).pipe(hi(e),di(e))}function O0(t,e){return Ye(t).pipe(hi(e),di(e))}function F0(t,e){return new X(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function L0(t,e){return new X(n=>{let r;return Gt(n,e,()=>{r=t[ad](),Gt(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>ie(r?.return)&&r.return()})}function dd(t,e){if(!t)throw new Error("Iterable cannot be null");return new X(n=>{Gt(n,e,()=>{let r=t[Symbol.asyncIterator]();Gt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function V0(t,e){return dd(ud(t),e)}function U0(t,e){if(t!=null){if(id(t))return k0(t,e);if(nd(t))return F0(t,e);if(rd(t))return O0(t,e);if(sd(t))return dd(t,e);if(cd(t))return L0(t,e);if(ld(t))return V0(t,e)}throw od(t)}function Je(t,e){return e?U0(t,e):Ye(t)}function Z(...t){let e=li(t);return Je(t,e)}function Ro(t,e){let n=ie(t)?t:()=>t,r=i=>i.error(n());return new X(e?i=>e.schedule(r,0,i):r)}function Hm(t){return!!t&&(t instanceof X||ie(t.lift)&&ie(t.subscribe))}var Rr=_o(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function j0(t){return t instanceof Date&&!isNaN(t)}function se(t,e){return _e((n,r)=>{let i=0;n.subscribe(de(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:m1}=Array;function g1(t,e){return m1(e)?t(...e):t(e)}function hd(t){return se(e=>g1(t,e))}var{isArray:y1}=Array,{getPrototypeOf:_1,prototype:v1,keys:w1}=Object;function fd(t){if(t.length===1){let e=t[0];if(y1(e))return{args:e,keys:null};if(I1(e)){let n=w1(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function I1(t){return t&&typeof t=="object"&&_1(t)===v1}function pd(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function md(...t){let e=li(t),n=td(t),{args:r,keys:i}=fd(t);if(r.length===0)return Je([],e);let s=new X(E1(r,e,i?o=>pd(i,o):rn));return n?s.pipe(hd(n)):s}function E1(t,e,n=rn){return r=>{B0(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)B0(e,()=>{let l=Je(t[c],e),d=!1;l.subscribe(de(r,f=>{s[c]=f,d||(d=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function B0(t,e,n){t?Gt(n,t,e):e()}function $0(t,e,n,r,i,s,o,a){let c=[],l=0,d=0,f=!1,m=()=>{f&&!c.length&&!l&&e.complete()},y=x=>l<r?E(x):c.push(x),E=x=>{s&&e.next(x),l++;let R=!1;Ye(n(x,d++)).subscribe(de(e,F=>{i?.(F),s?y(F):e.next(F)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;c.length&&l<r;){let F=c.shift();o?Gt(e,o,()=>E(F)):E(F)}m()}catch(F){e.error(F)}}))};return t.subscribe(de(e,y,()=>{f=!0,m()})),()=>{a?.()}}function rt(t,e,n=1/0){return ie(e)?rt((r,i)=>se((s,o)=>e(r,s,i,o))(Ye(t(r,i))),n):(typeof e=="number"&&(n=e),_e((r,i)=>$0(r,i,t,n)))}function qm(t=1/0){return rt(rn,t)}function H0(){return qm(1)}function fi(...t){return H0()(Je(t,li(t)))}function gd(t){return new X(e=>{Ye(t()).subscribe(e)})}function Gm(...t){let e=td(t),{args:n,keys:r}=fd(t),i=new X(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let d=0;d<o;d++){let f=!1;Ye(n[d]).subscribe(de(s,m=>{f||(f=!0,l--),a[d]=m},()=>c--,void 0,()=>{(!c||!f)&&(l||s.next(r?pd(r,a):a),s.complete())}))}});return e?i.pipe(hd(e)):i}function q0(t=0,e,n=jm){let r=-1;return e!=null&&(ed(e)?n=e:r=e),new X(i=>{let s=j0(t)?+t-n.now():t;s<0&&(s=0);let o=0;return n.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function on(t,e){return _e((n,r)=>{let i=0;n.subscribe(de(r,s=>t.call(e,s,i++)&&r.next(s)))})}function an(t){return _e((e,n)=>{let r=null,i=!1,s;r=e.subscribe(de(n,void 0,void 0,o=>{s=Ye(t(o,an(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function G0(t,e,n,r,i){return(s,o)=>{let a=n,c=e,l=0;s.subscribe(de(o,d=>{let f=l++;c=a?t(c,d,f):(a=!0,d),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function xo(t,e){return ie(e)?rt(t,e,1):rt(t,1)}function pi(t){return _e((e,n)=>{let r=!1;e.subscribe(de(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function lt(t){return t<=0?()=>sn:_e((e,n)=>{let r=0;e.subscribe(de(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function z0(){return _e((t,e)=>{t.subscribe(de(e,ss))})}function Tc(t){return se(()=>t)}function zm(t,e){return e?n=>fi(e.pipe(lt(1),z0()),n.pipe(zm(t))):rt((n,r)=>Ye(t(n,r)).pipe(lt(1),Tc(n)))}function Wm(t,e=Ao){let n=q0(t,e);return zm(()=>n)}function yd(t=b1){return _e((e,n)=>{let r=!1;e.subscribe(de(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function b1(){return new Rr}function Dc(t){return _e((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Qn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?on((i,s)=>t(i,s,r)):rn,lt(1),n?pi(e):yd(()=>new Rr))}function No(t){return t<=0?()=>sn:_e((e,n)=>{let r=[];e.subscribe(de(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Km(t,e){let n=arguments.length>=2;return r=>r.pipe(t?on((i,s)=>t(i,s,r)):rn,No(1),n?pi(e):yd(()=>new Rr))}function _d(t,e){return _e(G0(t,e,arguments.length>=2,!0))}function Qm(...t){let e=li(t);return _e((n,r)=>{(e?fi(t,n,e):fi(t,n)).subscribe(r)})}function yn(t,e){return _e((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(de(r,c=>{i?.unsubscribe();let l=0,d=s++;Ye(t(c,d)).subscribe(i=de(r,f=>r.next(e?e(c,f,d,l++):f),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Ym(t){return _e((e,n)=>{Ye(t).subscribe(de(n,()=>n.complete(),ss)),!n.closed&&e.subscribe(n)})}function dt(t,e,n){let r=ie(t)||e||n?{next:t,error:e,complete:n}:t;return r?_e((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(de(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):rn}var NT="https://g.co/ng/security#xss",Q=class extends Error{constructor(e,n){super(Zg(e,n)),this.code=e}};function Zg(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Uc(t){return{toString:t}.toString()}var vd="__parameters__";function C1(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function MT(t,e,n){return Uc(()=>{let r=C1(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,d){let f=c.hasOwnProperty(vd)?c[vd]:Object.defineProperty(c,vd,{value:[]})[vd];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var kn=globalThis;function Ve(t){for(let e in t)if(t[e]===Ve)return e;throw Error("Could not find renamed property on target object.")}function T1(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Ut(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Ut).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function W0(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var D1=Ve({__forward_ref__:Ve});function qo(t){return t.__forward_ref__=qo,t.toString=function(){return Ut(this())},t}function Lt(t){return PT(t)?t():t}function PT(t){return typeof t=="function"&&t.hasOwnProperty(D1)&&t.__forward_ref__===qo}function G(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Is(t){return{providers:t.providers||[],imports:t.imports||[]}}function Qd(t){return K0(t,OT)||K0(t,FT)}function kT(t){return Qd(t)!==null}function K0(t,e){return t.hasOwnProperty(e)?t[e]:null}function S1(t){let e=t&&(t[OT]||t[FT]);return e||null}function Q0(t){return t&&(t.hasOwnProperty(Y0)||t.hasOwnProperty(A1))?t[Y0]:null}var OT=Ve({\u0275prov:Ve}),Y0=Ve({\u0275inj:Ve}),FT=Ve({ngInjectableDef:Ve}),A1=Ve({ngInjectorDef:Ve}),W=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=G({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function LT(t){return t&&!!t.\u0275providers}var R1=Ve({\u0275cmp:Ve}),x1=Ve({\u0275dir:Ve}),N1=Ve({\u0275pipe:Ve}),M1=Ve({\u0275mod:Ve}),Ad=Ve({\u0275fac:Ve}),Sc=Ve({__NG_ELEMENT_ID__:Ve}),J0=Ve({__NG_ENV_ID__:Ve});function Yd(t){return typeof t=="string"?t:t==null?"":String(t)}function P1(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Yd(t)}function k1(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new Q(-200,t)}function ey(t,e){throw new Q(-201,!1)}var he=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(he||{}),fg;function VT(){return fg}function zt(t){let e=fg;return fg=t,e}function UT(t,e,n){let r=Qd(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&he.Optional)return null;if(e!==void 0)return e;ey(t,"Injector")}var O1={},Ac=O1,pg="__NG_DI_FLAG__",Rd="ngTempTokenPath",F1="ngTokenPath",L1=/\n/gm,V1="\u0275",X0="__source",Oo;function U1(){return Oo}function mi(t){let e=Oo;return Oo=t,e}function j1(t,e=he.Default){if(Oo===void 0)throw new Q(-203,!1);return Oo===null?UT(t,void 0,e):Oo.get(t,e&he.Optional?null:void 0,e)}function Y(t,e=he.Default){return(VT()||j1)(Lt(t),e)}function j(t,e=he.Default){return Y(t,Jd(e))}function Jd(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function mg(t){let e=[];for(let n=0;n<t.length;n++){let r=Lt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new Q(900,!1);let i,s=he.Default;for(let o=0;o<r.length;o++){let a=r[o],c=B1(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(Y(i,s))}else e.push(Y(r))}return e}function jT(t,e){return t[pg]=e,t.prototype[pg]=e,t}function B1(t){return t[pg]}function $1(t,e,n,r){let i=t[Rd];throw e[X0]&&i.unshift(e[X0]),t.message=H1(`
`+t.message,i,n,r),t[F1]=i,t[Rd]=null,t}function H1(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==V1?t.slice(2):t;let i=Ut(e);if(Array.isArray(e))i=e.map(Ut).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Ut(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(L1,`
  `)}`}var ze=jT(MT("Optional"),8);var BT=jT(MT("SkipSelf"),4);function hs(t,e){let n=t.hasOwnProperty(Ad);return n?t[Ad]:null}function ty(t,e){t.forEach(n=>Array.isArray(n)?ty(n,e):e(n))}function $T(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function xd(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function q1(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function G1(t,e,n){let r=jc(t,e);return r>=0?t[r|1]=n:(r=~r,q1(t,r,e,n)),r}function Jm(t,e){let n=jc(t,e);if(n>=0)return t[n|1]}function jc(t,e){return z1(t,e,1)}function z1(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Lo={},_n=[],Vo=new W(""),HT=new W("",-1),qT=new W(""),Nd=class{get(e,n=Ac){if(n===Ac){let r=new Error(`NullInjectorError: No provider for ${Ut(e)}!`);throw r.name="NullInjectorError",r}return n}},GT=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(GT||{}),Xn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Xn||{}),jt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(jt||{});function W1(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function gg(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];K1(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function zT(t){return t===3||t===4||t===6}function K1(t){return t.charCodeAt(0)===64}function Rc(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Z0(t,n,i,null,e[++r]):Z0(t,n,i,null,null))}}return t}function Z0(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var WT="ng-template";function Q1(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&W1(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(ny(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function ny(t){return t.type===4&&t.value!==WT}function Y1(t,e,n){let r=t.type===4&&!n?WT:t.value;return e===r}function J1(t,e,n){let r=4,i=t.attrs,s=i!==null?eF(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Pn(r)&&!Pn(c))return!1;if(o&&Pn(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!Y1(t,c,n)||c===""&&e.length===1){if(Pn(r))return!1;o=!0}}else if(r&8){if(i===null||!Q1(t,i,c,n)){if(Pn(r))return!1;o=!0}}else{let l=e[++a],d=X1(c,i,ny(t),n);if(d===-1){if(Pn(r))return!1;o=!0;continue}if(l!==""){let f;if(d>s?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(Pn(r))return!1;o=!0}}}}return Pn(r)||o}function Pn(t){return(t&1)===0}function X1(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return tF(e,t)}function Z1(t,e,n=!1){for(let r=0;r<e.length;r++)if(J1(t,e[r],n))return!0;return!1}function eF(t){for(let e=0;e<t.length;e++){let n=t[e];if(zT(n))return e}return t.length}function tF(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function eT(t,e){return t?":not("+e.trim()+")":e}function nF(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Pn(o)&&(e+=eT(s,i),i=""),r=o,s=s||!Pn(r);n++}return i!==""&&(e+=eT(s,i)),e}function rF(t){return t.map(nF).join(",")}function iF(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Pn(i))break;i=s}r++}return{attrs:e,classes:n}}function je(t){return Uc(()=>{let e=XT(t),n=Oe(U({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===GT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Xn.Emulated,styles:t.styles||_n,_:null,schemas:t.schemas||null,tView:null,id:""});ZT(n);let r=t.dependencies;return n.directiveDefs=nT(r,!1),n.pipeDefs=nT(r,!0),n.id=aF(n),n})}function sF(t){return fs(t)||KT(t)}function oF(t){return t!==null}function Es(t){return Uc(()=>({type:t.type,bootstrap:t.bootstrap||_n,declarations:t.declarations||_n,imports:t.imports||_n,exports:t.exports||_n,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function tT(t,e){if(t==null)return Lo;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=jt.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==jt.None?[r,a]:r,e[s]=o):n[s]=r}return n}function cn(t){return Uc(()=>{let e=XT(t);return ZT(e),e})}function Xd(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function fs(t){return t[R1]||null}function KT(t){return t[x1]||null}function QT(t){return t[N1]||null}function YT(t){let e=fs(t)||KT(t)||QT(t);return e!==null?e.standalone:!1}function JT(t,e){let n=t[M1]||null;if(!n&&e===!0)throw new Error(`Type ${Ut(t)} does not have '\u0275mod' property.`);return n}function XT(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Lo,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||_n,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:tT(t.inputs,e),outputs:tT(t.outputs),debugInfo:null}}function ZT(t){t.features?.forEach(e=>e(t))}function nT(t,e){if(!t)return null;let n=e?QT:sF;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(oF)}function aF(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Wt(t){return{\u0275providers:t}}function cF(...t){return{\u0275providers:eD(!0,t),\u0275fromNgModule:!0}}function eD(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return ty(e,o=>{let a=o;yg(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&tD(i,s),n}function tD(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];ry(i,s=>{e(s,r)})}}function yg(t,e,n,r){if(t=Lt(t),!t)return!1;let i=null,s=Q0(t),o=!s&&fs(t);if(!s&&!o){let c=t.ngModule;if(s=Q0(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)yg(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{ty(s.imports,d=>{yg(d,e,n,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&tD(l,e)}if(!a){let l=hs(i)||(()=>new i);e({provide:i,useFactory:l,deps:_n},i),e({provide:qT,useValue:i,multi:!0},i),e({provide:Vo,useValue:()=>Y(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=t;ry(c,d=>{e(d,l)})}}else return!1;return i!==t&&t.providers!==void 0}function ry(t,e){for(let n of t)LT(n)&&(n=n.\u0275providers),Array.isArray(n)?ry(n,e):e(n)}var uF=Ve({provide:String,useValue:Ve});function nD(t){return t!==null&&typeof t=="object"&&uF in t}function lF(t){return!!(t&&t.useExisting)}function dF(t){return!!(t&&t.useFactory)}function Uo(t){return typeof t=="function"}function hF(t){return!!t.useClass}var Zd=new W(""),bd={},fF={},Xm;function iy(){return Xm===void 0&&(Xm=new Nd),Xm}var wn=class{},xc=class extends wn{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,vg(e,o=>this.processProvider(o)),this.records.set(HT,Mo(void 0,this)),i.has("environment")&&this.records.set(wn,Mo(void 0,this));let s=this.records.get(Zd);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(qT,_n,he.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=be(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),be(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=mi(this),r=zt(void 0),i;try{return e()}finally{mi(n),zt(r)}}get(e,n=Ac,r=he.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(J0))return e[J0](this);r=Jd(r);let i,s=mi(this),o=zt(void 0);try{if(!(r&he.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=_F(e)&&Qd(e);l&&this.injectableDefInScope(l)?c=Mo(_g(e),bd):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&he.Self?iy():this.parent;return n=r&he.Optional&&n===Ac?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Rd]=a[Rd]||[]).unshift(Ut(e)),s)throw a;return $1(a,e,"R3InjectorError",this.source)}else throw a}finally{zt(o),mi(s)}}resolveInjectorInitializers(){let e=be(null),n=mi(this),r=zt(void 0),i;try{let s=this.get(Vo,_n,he.Self);for(let o of s)o()}finally{mi(n),zt(r),be(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Ut(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Q(205,!1)}processProvider(e){e=Lt(e);let n=Uo(e)?e:Lt(e&&e.provide),r=mF(e);if(!Uo(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Mo(void 0,bd,!0),i.factory=()=>mg(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=be(null);try{return n.value===bd&&(n.value=fF,n.value=n.factory()),typeof n.value=="object"&&n.value&&yF(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{be(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Lt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function _g(t){let e=Qd(t),n=e!==null?e.factory:hs(t);if(n!==null)return n;if(t instanceof W)throw new Q(204,!1);if(t instanceof Function)return pF(t);throw new Q(204,!1)}function pF(t){if(t.length>0)throw new Q(204,!1);let n=S1(t);return n!==null?()=>n.factory(t):()=>new t}function mF(t){if(nD(t))return Mo(void 0,t.useValue);{let e=rD(t);return Mo(e,bd)}}function rD(t,e,n){let r;if(Uo(t)){let i=Lt(t);return hs(i)||_g(i)}else if(nD(t))r=()=>Lt(t.useValue);else if(dF(t))r=()=>t.useFactory(...mg(t.deps||[]));else if(lF(t))r=()=>Y(Lt(t.useExisting));else{let i=Lt(t&&(t.useClass||t.provide));if(gF(t))r=()=>new i(...mg(t.deps));else return hs(i)||_g(i)}return r}function Mo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function gF(t){return!!t.deps}function yF(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function _F(t){return typeof t=="function"||typeof t=="object"&&t instanceof W}function vg(t,e){for(let n of t)Array.isArray(n)?vg(n,e):n&&LT(n)?vg(n.\u0275providers,e):e(n)}function bs(t,e){t instanceof xc&&t.assertNotDestroyed();let n,r=mi(t),i=zt(void 0);try{return e()}finally{mi(r),zt(i)}}function vF(){return VT()!==void 0||U1()!=null}function wF(t){return typeof t=="function"}var Pr=0,ve=1,te=2,At=3,On=4,Vn=5,Md=6,Nc=7,Fn=8,jo=9,Ln=10,ht=11,Mc=12,rT=13,Go=14,Zn=15,eh=16,Po=17,Bo=18,th=19,iD=20,gi=21,Zm=22,ps=23,In=25,sD=1;var ms=7,Pd=8,kd=9,vn=10,sy=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(sy||{});function ls(t){return Array.isArray(t)&&typeof t[sD]=="object"}function kr(t){return Array.isArray(t)&&t[sD]===!0}function oD(t){return(t.flags&4)!==0}function nh(t){return t.componentOffset>-1}function oy(t){return(t.flags&1)===1}function yi(t){return!!t.template}function IF(t){return(t[te]&512)!==0}var wg=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function aD(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Cs(){return cD}function cD(t){return t.type.prototype.ngOnChanges&&(t.setInput=bF),EF}Cs.ngInherit=!0;function EF(){let t=lD(this),e=t?.current;if(e){let n=t.previous;if(n===Lo)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function bF(t,e,n,r,i){let s=this.declaredInputs[r],o=lD(t)||CF(t,{previous:Lo,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new wg(l&&l.currentValue,n,c===Lo),aD(t,e,i,n)}var uD="__ngSimpleChanges__";function lD(t){return t[uD]||null}function CF(t,e){return t[uD]=e}var iT=null;var Yn=function(t,e,n){iT?.(t,e,n)},TF="svg",DF="math",SF=!1;function AF(){return SF}function er(t){for(;Array.isArray(t);)t=t[Pr];return t}function dD(t,e){return er(e[t])}function En(t,e){return er(e[t.index])}function hD(t,e){return t.data[e]}function ay(t,e){return t[e]}function wi(t,e){let n=e[t];return ls(n)?n:n[Pr]}function cy(t){return(t[te]&128)===128}function RF(t){return kr(t[At])}function Od(t,e){return e==null?null:t[e]}function fD(t){t[Po]=0}function xF(t){t[te]&1024||(t[te]|=1024,cy(t)&&Pc(t))}function NF(t,e){for(;t>0;)e=e[Go],t--;return e}function uy(t){return!!(t[te]&9216||t[ps]?.dirty)}function Ig(t){t[Ln].changeDetectionScheduler?.notify(1),uy(t)?Pc(t):t[te]&64&&(AF()?(t[te]|=1024,Pc(t)):t[Ln].changeDetectionScheduler?.notify())}function Pc(t){t[Ln].changeDetectionScheduler?.notify();let e=kc(t);for(;e!==null&&!(e[te]&8192||(e[te]|=8192,!cy(e)));)e=kc(e)}function pD(t,e){if((t[te]&256)===256)throw new Q(911,!1);t[gi]===null&&(t[gi]=[]),t[gi].push(e)}function MF(t,e){if(t[gi]===null)return;let n=t[gi].indexOf(e);n!==-1&&t[gi].splice(n,1)}function kc(t){let e=t[At];return kr(e)?e[At]:e}var fe={lFrame:ID(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function PF(){return fe.lFrame.elementDepthCount}function kF(){fe.lFrame.elementDepthCount++}function OF(){fe.lFrame.elementDepthCount--}function mD(){return fe.bindingsEnabled}function FF(){return fe.skipHydrationRootTNode!==null}function LF(t){return fe.skipHydrationRootTNode===t}function VF(){fe.skipHydrationRootTNode=null}function Me(){return fe.lFrame.lView}function Kt(){return fe.lFrame.tView}function tr(t){return fe.lFrame.contextLView=t,t[Fn]}function nr(t){return fe.lFrame.contextLView=null,t}function Qt(){let t=gD();for(;t!==null&&t.type===64;)t=t.parent;return t}function gD(){return fe.lFrame.currentTNode}function UF(){let t=fe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Bc(t,e){let n=fe.lFrame;n.currentTNode=t,n.isParent=e}function yD(){return fe.lFrame.isParent}function jF(){fe.lFrame.isParent=!1}function BF(){return fe.lFrame.contextLView}function ly(){let t=fe.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function $F(t){return fe.lFrame.bindingIndex=t}function rh(){return fe.lFrame.bindingIndex++}function HF(t){let e=fe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function qF(){return fe.lFrame.inI18n}function GF(t,e){let n=fe.lFrame;n.bindingIndex=n.bindingRootIndex=t,Eg(e)}function zF(){return fe.lFrame.currentDirectiveIndex}function Eg(t){fe.lFrame.currentDirectiveIndex=t}function WF(t){let e=fe.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function _D(t){fe.lFrame.currentQueryIndex=t}function KF(t){let e=t[ve];return e.type===2?e.declTNode:e.type===1?t[Vn]:null}function vD(t,e,n){if(n&he.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&he.Host);)if(i=KF(s),i===null||(s=s[Go],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=fe.lFrame=wD();return r.currentTNode=e,r.lView=t,!0}function dy(t){let e=wD(),n=t[ve];fe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function wD(){let t=fe.lFrame,e=t===null?null:t.child;return e===null?ID(t):e}function ID(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function ED(){let t=fe.lFrame;return fe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var bD=ED;function hy(){let t=ED();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function QF(t){return(fe.lFrame.contextLView=NF(t,fe.lFrame.contextLView))[Fn]}function zo(){return fe.lFrame.selectedIndex}function gs(t){fe.lFrame.selectedIndex=t}function fy(){let t=fe.lFrame;return hD(t.tView,t.selectedIndex)}function YF(){return fe.lFrame.currentNamespace}var CD=!0;function py(){return CD}function my(t){CD=t}function JF(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=cD(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function gy(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),d!=null&&(t.destroyHooks??=[]).push(n,d)}}function Cd(t,e,n){TD(t,e,3,n)}function Td(t,e,n,r){(t[te]&3)===n&&TD(t,e,n,r)}function eg(t,e){let n=t[te];(n&3)===e&&(n&=16383,n+=1,t[te]=n)}function TD(t,e,n,r){let i=r!==void 0?t[Po]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Po]+=65536),(a<s||s==-1)&&(XF(t,n,e,c),t[Po]=(t[Po]&4294901760)+c+2),c++}function sT(t,e){Yn(4,t,e);let n=be(null);try{e.call(t)}finally{be(n),Yn(5,t,e)}}function XF(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[te]>>14<t[Po]>>16&&(t[te]&3)===e&&(t[te]+=16384,sT(a,s)):sT(a,s)}var Fo=-1,ys=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function ZF(t){return t instanceof ys}function eL(t){return(t.flags&8)!==0}function tL(t){return(t.flags&16)!==0}function DD(t){return t!==Fo}function Fd(t){return t&32767}function nL(t){return t>>16}function Ld(t,e){let n=nL(t),r=e;for(;n>0;)r=r[Go],n--;return r}var bg=!0;function Vd(t){let e=bg;return bg=t,e}var rL=256,SD=rL-1,AD=5,iL=0,Jn={};function sL(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Sc)&&(r=n[Sc]),r==null&&(r=n[Sc]=iL++);let i=r&SD,s=1<<i;e.data[t+(i>>AD)]|=s}function Ud(t,e){let n=RD(t,e);if(n!==-1)return n;let r=e[ve];r.firstCreatePass&&(t.injectorIndex=e.length,tg(r.data,t),tg(e,null),tg(r.blueprint,null));let i=yy(t,e),s=t.injectorIndex;if(DD(i)){let o=Fd(i),a=Ld(i,e),c=a[ve].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function tg(t,e){t.push(0,0,0,0,0,0,0,0,e)}function RD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function yy(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=kD(i),r===null)return Fo;if(n++,i=i[Go],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Fo}function Cg(t,e,n){sL(t,e,n)}function oL(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(zT(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function xD(t,e,n){if(n&he.Optional||t!==void 0)return t;ey(e,"NodeInjector")}function ND(t,e,n,r){if(n&he.Optional&&r===void 0&&(r=null),!(n&(he.Self|he.Host))){let i=t[jo],s=zt(void 0);try{return i?i.get(e,r,n&he.Optional):UT(e,r,n&he.Optional)}finally{zt(s)}}return xD(r,e,n)}function MD(t,e,n,r=he.Default,i){if(t!==null){if(e[te]&2048&&!(r&he.Self)){let o=dL(t,e,n,r,Jn);if(o!==Jn)return o}let s=PD(t,e,n,r,Jn);if(s!==Jn)return s}return ND(e,n,r,i)}function PD(t,e,n,r,i){let s=uL(n);if(typeof s=="function"){if(!vD(e,t,r))return r&he.Host?xD(i,n,r):ND(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&he.Optional))ey(n);else return o}finally{bD()}}else if(typeof s=="number"){let o=null,a=RD(t,e),c=Fo,l=r&he.Host?e[Zn][Vn]:null;for((a===-1||r&he.SkipSelf)&&(c=a===-1?yy(t,e):e[a+8],c===Fo||!aT(r,!1)?a=-1:(o=e[ve],a=Fd(c),e=Ld(c,e)));a!==-1;){let d=e[ve];if(oT(s,a,d.data)){let f=aL(a,e,n,o,r,l);if(f!==Jn)return f}c=e[a+8],c!==Fo&&aT(r,e[ve].data[a+8]===l)&&oT(s,a,e)?(o=d,a=Fd(c),e=Ld(c,e)):a=-1}}return i}function aL(t,e,n,r,i,s){let o=e[ve],a=o.data[t+8],c=r==null?nh(a)&&bg:r!=o&&(a.type&3)!==0,l=i&he.Host&&s===a,d=cL(a,o,n,c,l);return d!==null?$o(e,o,d,a):Jn}function cL(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,d=s>>20,f=r?a:a+d,m=i?a+d:l;for(let y=f;y<m;y++){let E=o[y];if(y<c&&n===E||y>=c&&E.type===n)return y}if(i){let y=o[c];if(y&&yi(y)&&y.type===n)return c}return null}function $o(t,e,n,r){let i=t[n],s=e.data;if(ZF(i)){let o=i;o.resolving&&k1(P1(s[n]));let a=Vd(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?zt(o.injectImpl):null,d=vD(t,r,he.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&JF(n,s[n],e)}finally{l!==null&&zt(l),Vd(a),o.resolving=!1,bD()}}return i}function uL(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Sc)?t[Sc]:void 0;return typeof e=="number"?e>=0?e&SD:lL:e}function oT(t,e,n){let r=1<<t;return!!(n[e+(t>>AD)]&r)}function aT(t,e){return!(t&he.Self)&&!(t&he.Host&&e)}var ds=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return MD(this._tNode,this._lView,e,Jd(r),n)}};function lL(){return new ds(Qt(),Me())}function Wo(t){return Uc(()=>{let e=t.prototype.constructor,n=e[Ad]||Tg(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Ad]||Tg(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Tg(t){return PT(t)?()=>{let e=Tg(Lt(t));return e&&e()}:hs(t)}function dL(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[te]&2048&&!(o[te]&512);){let a=PD(s,o,n,r|he.Self,Jn);if(a!==Jn)return a;let c=s.parent;if(!c){let l=o[iD];if(l){let d=l.get(n,Jn,r);if(d!==Jn)return d}c=kD(o),o=o[Go]}s=c}return i}function kD(t){let e=t[ve],n=e.type;return n===2?e.declTNode:n===1?t[Vn]:null}function _y(t){return oL(Qt(),t)}function cT(t,e=null,n=null,r){let i=OD(t,e,n,r);return i.resolveInjectorInitializers(),i}function OD(t,e=null,n=null,r,i=new Set){let s=[n||_n,cF(t)];return r=r||(typeof t=="object"?void 0:Ut(t)),new xc(s,e||iy(),r||null,i)}var Rt=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return cT({name:""},i,r,"");{let s=r.name??"";return cT({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=Ac,e.NULL=new Nd,e.\u0275prov=G({token:e,providedIn:"any",factory:()=>Y(HT)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var hL="ngOriginalError";function ng(t){return t[hL]}var xr=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&ng(e);for(;n&&ng(n);)n=ng(n);return n||null}},FD=new W("",{providedIn:"root",factory:()=>j(xr).handleError.bind(void 0)}),LD=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=fL,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Dg=class extends LD{constructor(e){super(),this._lView=e}onDestroy(e){return pD(this._lView,e),()=>MF(this._lView,e)}};function fL(){return new Dg(Me())}function pL(){return ih(Qt(),Me())}function ih(t,e){return new Ii(En(t,e))}var Ii=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=pL;let t=e;return t})();var Sg=class extends St{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,vF()&&(this.destroyRef=j(LD,{optional:!0})??void 0)}emit(e){let n=be(null);try{super.next(e)}finally{be(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=rg(s),i&&(i=rg(i)),o&&(o=rg(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof nt&&e.add(a),a}};function rg(t){return e=>{setTimeout(t,void 0,e)}}var Vt=Sg;function VD(t){return(t.flags&128)===128}var UD=new Map,mL=0;function gL(){return mL++}function yL(t){UD.set(t[th],t)}function _L(t){UD.delete(t[th])}var uT="__ngContext__";function _s(t,e){ls(e)?(t[uT]=e[th],yL(e)):t[uT]=e}function jD(t){return $D(t[Mc])}function BD(t){return $D(t[On])}function $D(t){for(;t!==null&&!kr(t);)t=t[On];return t}var Ag;function HD(t){Ag=t}function vL(){if(Ag!==void 0)return Ag;if(typeof document<"u")return document;throw new Q(210,!1)}var vy=new W("",{providedIn:"root",factory:()=>wL}),wL="ng",wy=new W(""),Ei=new W("",{providedIn:"platform",factory:()=>"unknown"});var Iy=new W("",{providedIn:"root",factory:()=>vL().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var IL="h",EL="b";var bL=()=>null;function Ey(t,e,n=!1){return bL(t,e,n)}var qD=!1,CL=new W("",{providedIn:"root",factory:()=>qD});var wd;function TL(){if(wd===void 0&&(wd=null,kn.trustedTypes))try{wd=kn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return wd}function lT(t){return TL()?.createScriptURL(t)||t}var jd=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${NT})`}};function $c(t){return t instanceof jd?t.changingThisBreaksApplicationSecurity:t}function by(t,e){let n=DL(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${NT})`)}return n===e}function DL(t){return t instanceof jd&&t.getTypeName()||null}var SL=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function GD(t){return t=String(t),t.match(SL)?t:"unsafe:"+t}var sh=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(sh||{});function AL(t){let e=WD();return e?e.sanitize(sh.URL,t)||"":by(t,"URL")?$c(t):GD(Yd(t))}function RL(t){let e=WD();if(e)return lT(e.sanitize(sh.RESOURCE_URL,t)||"");if(by(t,"ResourceURL"))return lT($c(t));throw new Q(904,!1)}function xL(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?RL:AL}function zD(t,e,n){return xL(e,n)(t)}function WD(){let t=Me();return t&&t[Ln].sanitizer}function KD(t){return t instanceof Function?t():t}var Nr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Nr||{}),NL;function Cy(t,e){return NL(t,e)}function ko(t,e,n,r,i){if(r!=null){let s,o=!1;kr(r)?s=r:ls(r)&&(o=!0,r=r[Pr]);let a=er(r);t===0&&n!==null?i==null?ZD(e,n,a):Bd(e,n,a,i||null,!0):t===1&&n!==null?Bd(e,n,a,i||null,!0):t===2?KL(e,a,o):t===3&&e.destroyNode(a),s!=null&&YL(e,t,s,n,i)}}function ML(t,e){return t.createText(e)}function PL(t,e,n){t.setValue(e,n)}function QD(t,e,n){return t.createElement(e,n)}function kL(t,e){YD(t,e),e[Pr]=null,e[Vn]=null}function OL(t,e,n,r,i,s){r[Pr]=i,r[Vn]=e,oh(t,r,n,1,i,s)}function YD(t,e){e[Ln].changeDetectionScheduler?.notify(1),oh(t,e,e[ht],2,null,null)}function FL(t){let e=t[Mc];if(!e)return ig(t[ve],t);for(;e;){let n=null;if(ls(e))n=e[Mc];else{let r=e[vn];r&&(n=r)}if(!n){for(;e&&!e[On]&&e!==t;)ls(e)&&ig(e[ve],e),e=e[At];e===null&&(e=t),ls(e)&&ig(e[ve],e),n=e&&e[On]}e=n}}function LL(t,e,n,r){let i=vn+r,s=n.length;r>0&&(n[i-1][On]=e),r<s-vn?(e[On]=n[i],$T(n,vn+r,e)):(n.push(e),e[On]=null),e[At]=n;let o=e[eh];o!==null&&n!==o&&VL(o,e);let a=e[Bo];a!==null&&a.insertView(t),Ig(e),e[te]|=128}function VL(t,e){let n=t[kd],i=e[At][At][Zn];e[Zn]!==i&&(t[te]|=sy.HasTransplantedViews),n===null?t[kd]=[e]:n.push(e)}function JD(t,e){let n=t[kd],r=n.indexOf(e);n.splice(r,1)}function Rg(t,e){if(t.length<=vn)return;let n=vn+e,r=t[n];if(r){let i=r[eh];i!==null&&i!==t&&JD(i,r),e>0&&(t[n-1][On]=r[On]);let s=xd(t,vn+e);kL(r[ve],r);let o=s[Bo];o!==null&&o.detachView(s[ve]),r[At]=null,r[On]=null,r[te]&=-129}return r}function XD(t,e){if(!(e[te]&256)){let n=e[ht];n.destroyNode&&oh(t,e,n,3,null,null),FL(e)}}function ig(t,e){if(e[te]&256)return;let n=be(null);try{e[te]&=-129,e[te]|=256,e[ps]&&v0(e[ps]),jL(t,e),UL(t,e),e[ve].type===1&&e[ht].destroy();let r=e[eh];if(r!==null&&kr(e[At])){r!==e[At]&&JD(r,e);let i=e[Bo];i!==null&&i.detachView(t)}_L(e)}finally{be(n)}}function UL(t,e){let n=t.cleanup,r=e[Nc];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Nc]=null);let i=e[gi];if(i!==null){e[gi]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function jL(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof ys)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Yn(4,a,c);try{c.call(a)}finally{Yn(5,a,c)}}else{Yn(4,i,s);try{s.call(i)}finally{Yn(5,i,s)}}}}}function BL(t,e,n){return $L(t,e.parent,n)}function $L(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Pr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Xn.None||s===Xn.Emulated)return null}return En(r,n)}}function Bd(t,e,n,r,i){t.insertBefore(e,n,r,i)}function ZD(t,e,n){t.appendChild(e,n)}function dT(t,e,n,r,i){r!==null?Bd(t,e,n,r,i):ZD(t,e,n)}function HL(t,e,n,r){t.removeChild(e,n,r)}function Ty(t,e){return t.parentNode(e)}function qL(t,e){return t.nextSibling(e)}function GL(t,e,n){return WL(t,e,n)}function zL(t,e,n){return t.type&40?En(t,n):null}var WL=zL,hT;function Dy(t,e,n,r){let i=BL(t,r,e),s=e[ht],o=r.parent||e[Vn],a=GL(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)dT(s,i,n[c],a,!1);else dT(s,i,n,a,!1);hT!==void 0&&hT(s,r,e,n,i)}function Dd(t,e){if(e!==null){let n=e.type;if(n&3)return En(e,t);if(n&4)return xg(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Dd(t,r);{let i=t[e.index];return kr(i)?xg(-1,i):er(i)}}else{if(n&32)return Cy(e,t)()||er(t[e.index]);{let r=eS(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=kc(t[Zn]);return Dd(i,r)}else return Dd(t,e.next)}}}return null}function eS(t,e){if(e!==null){let r=t[Zn][Vn],i=e.projection;return r.projection[i]}return null}function xg(t,e){let n=vn+t+1;if(n<e.length){let r=e[n],i=r[ve].firstChild;if(i!==null)return Dd(r,i)}return e[ms]}function KL(t,e,n){let r=Ty(t,e);r&&HL(t,r,e,n)}function Sy(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],c=n.type;if(o&&e===0&&(a&&_s(er(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)Sy(t,e,n.child,r,i,s,!1),ko(e,t,i,a,s);else if(c&32){let l=Cy(n,r),d;for(;d=l();)ko(e,t,i,d,s);ko(e,t,i,a,s)}else c&16?QL(t,e,r,n,i,s):ko(e,t,i,a,s);n=o?n.projectionNext:n.next}}function oh(t,e,n,r,i,s){Sy(n,r,t.firstChild,e,i,s,!1)}function QL(t,e,n,r,i,s){let o=n[Zn],c=o[Vn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];ko(e,t,i,d,s)}else{let l=c,d=o[At];VD(r)&&(l.flags|=128),Sy(t,e,l,d,i,s,!0)}}function YL(t,e,n,r,i){let s=n[ms],o=er(n);s!==o&&ko(e,t,r,s,i);for(let a=vn;a<n.length;a++){let c=n[a];oh(c[ve],c,t,e,r,s)}}function JL(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Nr.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Nr.Important),t.setStyle(n,r,i,s))}}function XL(t,e,n){t.setAttribute(e,"style",n)}function tS(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function nS(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&gg(t,e,r),i!==null&&tS(t,e,i),s!==null&&XL(t,e,s)}var bi={};function Fe(t=1){rS(Kt(),Me(),zo()+t,!1)}function rS(t,e,n,r){if(!r)if((e[te]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Cd(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Td(e,s,0,n)}gs(n)}function $(t,e=he.Default){let n=Me();if(n===null)return Y(t,e);let r=Qt();return MD(r,n,Lt(t),e)}function iS(t,e,n,r,i,s){let o=be(null);try{let a=null;i&jt.SignalBased&&(a=e[r][Dm]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&jt.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):aD(e,a,r,s)}finally{be(o)}}function ZL(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)gs(~i);else{let s=i,o=n[++r],a=n[++r];GF(o,s);let c=e[s];a(2,c)}}}finally{gs(-1)}}function ah(t,e,n,r,i,s,o,a,c,l,d){let f=e.blueprint.slice();return f[Pr]=i,f[te]=r|4|128|8|64,(l!==null||t&&t[te]&2048)&&(f[te]|=2048),fD(f),f[At]=f[Go]=t,f[Fn]=n,f[Ln]=o||t&&t[Ln],f[ht]=a||t&&t[ht],f[jo]=c||t&&t[jo]||null,f[Vn]=s,f[th]=gL(),f[Md]=d,f[iD]=l,f[Zn]=e.type==2?t[Zn]:f,f}function ch(t,e,n,r,i){let s=t.data[e];if(s===null)s=eV(t,e,n,r,i),qF()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=UF();s.injectorIndex=o===null?-1:o.injectorIndex}return Bc(s,!0),s}function eV(t,e,n,r,i){let s=gD(),o=yD(),a=o?s:s&&s.parent,c=t.data[e]=sV(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function sS(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function oS(t,e,n,r,i){let s=zo(),o=r&2;try{gs(-1),o&&e.length>In&&rS(t,e,In,!1),Yn(o?2:0,i),n(r,i)}finally{gs(s),Yn(o?3:1,i)}}function aS(t,e,n){if(oD(e)){let r=be(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{be(r)}}}function cS(t,e,n){mD()&&(dV(t,e,n,En(n,e)),(n.flags&64)===64&&pS(t,e,n))}function uS(t,e,n=En){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function lS(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Ay(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Ay(t,e,n,r,i,s,o,a,c,l,d){let f=In+r,m=f+i,y=tV(f,m),E=typeof l=="function"?l():l;return y[ve]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:E,incompleteFirstPass:!1,ssrId:d}}function tV(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:bi);return n}function nV(t,e,n,r){let s=r.get(CL,qD)||n===Xn.ShadowDom,o=t.selectRootElement(e,s);return rV(o),o}function rV(t){iV(t)}var iV=()=>null;function sV(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return FF()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function fT(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=jt.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?pT(r,n,l,a,c):pT(r,n,l,a)}return r}function pT(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function oV(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,l=null;for(let d=r;d<i;d++){let f=s[d],m=n?n.get(f):null,y=m?m.inputs:null,E=m?m.outputs:null;c=fT(0,f.inputs,d,c,y),l=fT(1,f.outputs,d,l,E);let x=c!==null&&o!==null&&!ny(e)?EV(c,d,o):null;a.push(x)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function aV(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function dS(t,e,n,r,i,s,o,a){let c=En(e,n),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(Ry(t,n,d,r,i),nh(e)&&cV(n,e.index)):e.type&3?(r=aV(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function cV(t,e){let n=wi(e,t);n[te]&16||(n[te]|=64)}function hS(t,e,n,r){if(mD()){let i=r===null?null:{"":-1},s=fV(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&fS(t,e,n,o,i,a),i&&pV(n,r,i)}n.mergedAttrs=Rc(n.mergedAttrs,n.attrs)}function fS(t,e,n,r,i,s){for(let l=0;l<r.length;l++)Cg(Ud(n,e),t,r[l].type);gV(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,c=sS(t,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];n.mergedAttrs=Rc(n.mergedAttrs,d.hostAttrs),yV(t,n,e,c,d),mV(c,d,i),d.contentQueries!==null&&(n.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(n.flags|=64);let f=d.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}oV(t,n,s)}function uV(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;lV(o)!=a&&o.push(a),o.push(n,r,s)}}function lV(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function dV(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;nh(n)&&_V(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Ud(n,e),_s(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],l=$o(e,t,a,n);if(_s(l,e),o!==null&&IV(e,a-i,l,c,n,o),yi(c)){let d=wi(n.index,e);d[Fn]=$o(e,t,a,n)}}}function pS(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=zF();try{gs(s);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];Eg(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&hV(c,l)}}finally{gs(-1),Eg(o)}}function hV(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function fV(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(Z1(e,o.selectors,!1))if(r||(r=[]),yi(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;Ng(t,e,c)}else r.unshift(o),Ng(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Ng(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function pV(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new Q(-301,!1);r.push(e[i],s)}}}function mV(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;yi(e)&&(n[""]=t)}}function gV(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function yV(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=hs(i.type,!0)),o=new ys(s,yi(i),$);t.blueprint[r]=o,n[r]=o,uV(t,e,r,sS(t,n,i.hostVars,bi),i)}function _V(t,e,n){let r=En(e,t),i=lS(n),s=t[Ln].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=uh(t,ah(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function vV(t,e,n,r,i,s){let o=En(t,e);wV(e[ht],o,s,t.value,n,r,i)}function wV(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?Yd(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function IV(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],d=o[a++],f=o[a++];iS(r,n,c,l,d,f)}}function EV(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function mS(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function gS(t,e){let n=t.contentQueries;if(n!==null){let r=be(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];_D(s),a.contentQueries(2,e[o],o)}}}finally{be(r)}}}function uh(t,e){return t[Mc]?t[rT][On]=e:t[Mc]=e,t[rT]=e,e}function Mg(t,e,n){_D(0);let r=be(null);try{e(t,n)}finally{be(r)}}function bV(t){return t[Nc]||(t[Nc]=[])}function CV(t){return t.cleanup||(t.cleanup=[])}function yS(t,e){let n=t[jo],r=n?n.get(xr,null):null;r&&r.handleError(e)}function Ry(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],l=e[o],d=t.data[o];iS(d,l,r,a,c,i)}}function TV(t,e,n){let r=dD(e,t);PL(t[ht],r,n)}function DV(t,e){let n=wi(e,t),r=n[ve];SV(r,n);let i=n[Pr];i!==null&&n[Md]===null&&(n[Md]=Ey(i,n[jo])),xy(r,n,n[Fn])}function SV(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function xy(t,e,n){dy(e);try{let r=t.viewQuery;r!==null&&Mg(1,r,n);let i=t.template;i!==null&&oS(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Bo]?.finishViewCreation(t),t.staticContentQueries&&gS(t,e),t.staticViewQueries&&Mg(2,t.viewQuery,n);let s=t.components;s!==null&&AV(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[te]&=-5,hy()}}function AV(t,e){for(let n=0;n<e.length;n++)DV(t,e[n])}function RV(t,e,n,r){let i=be(null);try{let s=e.tView,a=t[te]&4096?4096:16,c=ah(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[eh]=l;let d=t[Bo];return d!==null&&(c[Bo]=d.createEmbeddedView(s)),xy(s,c,n),c}finally{be(i)}}function mT(t,e){return!e||e.firstChild===null||VD(t)}function xV(t,e,n,r=!0){let i=e[ve];if(LL(i,e,t,n),r){let o=xg(n,t),a=e[ht],c=Ty(a,t[ms]);c!==null&&OL(i,t[Vn],a,e,c,o)}let s=e[Md];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function $d(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(er(s)),kr(s)&&NV(s,r);let o=n.type;if(o&8)$d(t,e,n.child,r);else if(o&32){let a=Cy(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=eS(e,n);if(Array.isArray(a))r.push(...a);else{let c=kc(e[Zn]);$d(c[ve],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function NV(t,e){for(let n=vn;n<t.length;n++){let r=t[n],i=r[ve].firstChild;i!==null&&$d(r[ve],r,i,e)}t[ms]!==t[Pr]&&e.push(t[ms])}var _S=[];function MV(t){return t[ps]??PV(t)}function PV(t){let e=_S.pop()??Object.create(OV);return e.lView=t,e}function kV(t){t.lView[ps]!==t&&(t.lView=null,_S.push(t))}var OV=Oe(U({},g0),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Pc(t.lView)},consumerOnSignalRead(){this.lView[ps]=this}}),vS=100;function wS(t,e=!0,n=0){let r=t[Ln],i=r.rendererFactory,s=!1;s||i.begin?.();try{FV(t,n)}catch(o){throw e&&yS(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function FV(t,e){Pg(t,e);let n=0;for(;uy(t);){if(n===vS)throw new Q(103,!1);n++,Pg(t,1)}}function LV(t,e,n,r){let i=e[te];if((i&256)===256)return;let s=!1;!s&&e[Ln].inlineEffectRunner?.flush(),dy(e);let o=null,a=null;!s&&VV(t)&&(a=MV(e),o=y0(a));try{fD(e),$F(t.bindingStartIndex),n!==null&&oS(t,e,n,2,r);let c=(i&3)===3;if(!s)if(c){let f=t.preOrderCheckHooks;f!==null&&Cd(e,f,null)}else{let f=t.preOrderHooks;f!==null&&Td(e,f,0,null),eg(e,0)}if(UV(e),IS(e,0),t.contentQueries!==null&&gS(t,e),!s)if(c){let f=t.contentCheckHooks;f!==null&&Cd(e,f)}else{let f=t.contentHooks;f!==null&&Td(e,f,1),eg(e,1)}ZL(t,e);let l=t.components;l!==null&&bS(e,l,0);let d=t.viewQuery;if(d!==null&&Mg(2,d,r),!s)if(c){let f=t.viewCheckHooks;f!==null&&Cd(e,f)}else{let f=t.viewHooks;f!==null&&Td(e,f,2),eg(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Zm]){for(let f of e[Zm])f();e[Zm]=null}s||(e[te]&=-73)}catch(c){throw Pc(e),c}finally{a!==null&&(_0(a,o),kV(a)),hy()}}function VV(t){return t.type!==2}function IS(t,e){for(let n=jD(t);n!==null;n=BD(n))for(let r=vn;r<n.length;r++){let i=n[r];ES(i,e)}}function UV(t){for(let e=jD(t);e!==null;e=BD(e)){if(!(e[te]&sy.HasTransplantedViews))continue;let n=e[kd];for(let r=0;r<n.length;r++){let i=n[r],s=i[At];xF(i)}}}function jV(t,e,n){let r=wi(e,t);ES(r,n)}function ES(t,e){cy(t)&&Pg(t,e)}function Pg(t,e){let r=t[ve],i=t[te],s=t[ps],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Sm(s)),s&&(s.dirty=!1),t[te]&=-9217,o)LV(r,t,r.template,t[Fn]);else if(i&8192){IS(t,1);let a=r.components;a!==null&&bS(t,a,1)}}function bS(t,e,n){for(let r=0;r<e.length;r++)jV(t,e[r],n)}function Ny(t){for(t[Ln].changeDetectionScheduler?.notify();t;){t[te]|=64;let e=kc(t);if(IF(t)&&!e)return t;t=e}return null}var vs=class{get rootNodes(){let e=this._lView,n=e[ve];return $d(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Fn]}set context(e){this._lView[Fn]=e}get destroyed(){return(this._lView[te]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[At];if(kr(e)){let n=e[Pd],r=n?n.indexOf(this):-1;r>-1&&(Rg(e,r),xd(n,r))}this._attachedToViewContainer=!1}XD(this._lView[ve],this._lView)}onDestroy(e){pD(this._lView,e)}markForCheck(){Ny(this._cdRefInjectingView||this._lView)}detach(){this._lView[te]&=-129}reattach(){Ig(this._lView),this._lView[te]|=128}detectChanges(){this._lView[te]|=1024,wS(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,YD(this._lView[ve],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Q(902,!1);this._appRef=e,Ig(this._lView)}},lh=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=HV;let t=e;return t})(),BV=lh,$V=class extends BV{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=RV(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new vs(i)}};function HV(){return qV(Qt(),Me())}function qV(t,e){return t.type&4?new $V(e,t,ih(t,e)):null}var vX=new RegExp(`^(\\d+)*(${EL}|${IL})*(.*)`);var GV=()=>null;function gT(t,e){return GV(t,e)}var kg=class{},Og=class{},Hd=class{};function zV(t){let e=Error(`No component factory found for ${Ut(t)}.`);return e[WV]=t,e}var WV="ngComponent";var Fg=class{resolveComponentFactory(e){throw zV(e)}},dh=(()=>{let e=class e{};e.NULL=new Fg;let t=e;return t})(),Oc=class{},Ts=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>KV();let t=e;return t})();function KV(){let t=Me(),e=Qt(),n=wi(e.index,t);return(ls(n)?n:t)[ht]}var QV=(()=>{let e=class e{};e.\u0275prov=G({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),sg={};var yT=new Set;function CS(t){yT.has(t)||(yT.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function _T(...t){}function YV(){let t=typeof kn.requestAnimationFrame=="function",e=kn[t?"requestAnimationFrame":"setTimeout"],n=kn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var Te=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Vt(!1),this.onMicrotaskEmpty=new Vt(!1),this.onStable=new Vt(!1),this.onError=new Vt(!1),typeof Zone>"u")throw new Q(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=YV().nativeRequestAnimationFrame,ZV(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new Q(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new Q(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,JV,_T,_T);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},JV={};function My(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function XV(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(kn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Lg(t),t.isCheckStableRunning=!0,My(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Lg(t))}function ZV(t){let e=()=>{XV(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(eU(a))return n.invokeTask(i,s,o,a);try{return vT(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),wT(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return vT(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),wT(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Lg(t),My(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Lg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function vT(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function wT(t){t._nesting--,My(t)}function eU(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var TS=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=G({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Vg(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=W0(i,a);else if(s==2){let c=a,l=e[++o];r=W0(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var qd=class extends dh{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=fs(e);return new Fc(n,this.ngModule)}};function IT(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function tU(t){let e=t.toLowerCase();return e==="svg"?TF:e==="math"?DF:null}var Ug=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Jd(r);let i=this.injector.get(e,sg,r);return i!==sg||n===sg?i:this.parentInjector.get(e,n,r)}},Fc=class extends Hd{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=IT(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return IT(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=rF(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=be(null);try{i=i||this.ngModule;let o=i instanceof wn?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Ug(e,o):e,c=a.get(Oc,null);if(c===null)throw new Q(407,!1);let l=a.get(QV,null),d=a.get(TS,null),f=a.get(kg,null),m={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:d,changeDetectionScheduler:f},y=c.createRenderer(null,this.componentDef),E=this.componentDef.selectors[0][0]||"div",x=r?nV(y,r,this.componentDef.encapsulation,a):QD(y,E,tU(E)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let F=null;x!==null&&(F=Ey(x,a,!0));let q=Ay(0,null,null,1,0,null,null,null,null,null,null),B=ah(null,q,null,R,null,null,m,y,a,null,F);dy(B);let z,xe;try{let re=this.componentDef,C,_=null;re.findHostDirectiveDefs?(C=[],_=new Map,re.findHostDirectiveDefs(re,C,_),C.push(re)):C=[re];let w=nU(B,x),b=rU(w,x,re,C,B,m,y);xe=hD(q,In),x&&oU(y,re,x,r),n!==void 0&&aU(xe,this.ngContentSelectors,n),z=sU(b,re,C,_,B,[cU]),xy(q,B,null)}finally{hy()}return new jg(this.componentType,z,ih(xe,B),B,xe)}finally{be(s)}}},jg=class extends Og{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new vs(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Ry(s[ve],s,i,e,n),this.previousInputValues.set(e,n);let o=wi(this._tNode.index,s);Ny(o)}}get injector(){return new ds(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function nU(t,e){let n=t[ve],r=In;return t[r]=e,ch(n,r,2,"#host",null)}function rU(t,e,n,r,i,s,o){let a=i[ve];iU(r,t,e,o);let c=null;e!==null&&(c=Ey(e,i[jo]));let l=s.rendererFactory.createRenderer(e,n),d=16;n.signals?d=4096:n.onPush&&(d=64);let f=ah(i,lS(n),null,d,i[t.index],t,s,l,null,null,c);return a.firstCreatePass&&Ng(a,t,r.length-1),uh(i,f),i[t.index]=f}function iU(t,e,n,r){for(let i of t)e.mergedAttrs=Rc(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Vg(e,e.mergedAttrs,!0),n!==null&&nS(r,n,e))}function sU(t,e,n,r,i,s){let o=Qt(),a=i[ve],c=En(o,i);fS(a,i,o,n,null,r);for(let d=0;d<n.length;d++){let f=o.directiveStart+d,m=$o(i,a,f,o);_s(m,i)}pS(a,i,o),c&&_s(c,i);let l=$o(i,a,o.directiveStart+o.componentOffset,o);if(t[Fn]=i[Fn]=l,s!==null)for(let d of s)d(l,e);return aS(a,o,i),l}function oU(t,e,n,r){if(r)gg(t,n,["ng-version","17.3.9"]);else{let{attrs:i,classes:s}=iF(e.selectors[0]);i&&gg(t,n,i),s&&s.length>0&&tS(t,n,s.join(" "))}}function aU(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function cU(){let t=Qt();gy(Me()[ve],t)}var Ko=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=uU;let t=e;return t})();function uU(){let t=Qt();return dU(t,Me())}var lU=Ko,DS=class extends lU{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return ih(this._hostTNode,this._hostLView)}get injector(){return new ds(this._hostTNode,this._hostLView)}get parentInjector(){let e=yy(this._hostTNode,this._hostLView);if(DD(e)){let n=Ld(e,this._hostLView),r=Fd(e),i=n[ve].data[r+8];return new ds(i,n)}else return new ds(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=ET(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-vn}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=gT(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,mT(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!wF(e),a;if(o)a=n;else{let E=n||{};a=E.index,r=E.injector,i=E.projectableNodes,s=E.environmentInjector||E.ngModuleRef}let c=o?e:new Fc(fs(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let x=(o?l:this.parentInjector).get(wn,null);x&&(s=x)}let d=fs(c.componentType??{}),f=gT(this._lContainer,d?.id??null),m=f?.firstChild??null,y=c.create(l,i,m,s);return this.insertImpl(y.hostView,a,mT(this._hostTNode,f)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(RF(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[At],l=new DS(c,c[Vn],c[At]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return xV(o,i,s,r),e.attachToViewContainerRef(),$T(og(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=ET(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Rg(this._lContainer,n);r&&(xd(og(this._lContainer),n),XD(r[ve],r))}detach(e){let n=this._adjustIndex(e,-1),r=Rg(this._lContainer,n);return r&&xd(og(this._lContainer),n)!=null?new vs(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function ET(t){return t[Pd]}function og(t){return t[Pd]||(t[Pd]=[])}function dU(t,e){let n,r=e[t.index];return kr(r)?n=r:(n=mS(r,e,null,t),e[t.index]=n,uh(e,n)),fU(n,e,t,r),new DS(n,t,e)}function hU(t,e){let n=t[ht],r=n.createComment(""),i=En(e,t),s=Ty(n,i);return Bd(n,s,r,qL(n,i),!1),r}var fU=gU,pU=()=>!1;function mU(t,e,n){return pU(t,e,n)}function gU(t,e,n,r){if(t[ms])return;let i;n.type&8?i=er(r):i=hU(e,n),t[ms]=i}function yU(t){return typeof t=="function"&&t[Dm]!==void 0}function SS(t){return yU(t)&&typeof t.set=="function"}function _U(t){return Object.getPrototypeOf(t.prototype).constructor}function Ds(t){let e=_U(t.type),n=!0,r=[t];for(;e;){let i;if(yi(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Q(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=Id(t.inputs),o.inputTransforms=Id(t.inputTransforms),o.declaredInputs=Id(t.declaredInputs),o.outputs=Id(t.outputs);let a=i.hostBindings;a&&bU(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&IU(t,c),l&&EU(t,l),vU(t,i),T1(t.outputs,i.outputs),yi(i)&&i.data.animation){let d=t.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Ds&&(n=!1)}}e=Object.getPrototypeOf(e)}wU(r)}function vU(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function wU(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Rc(i.hostAttrs,n=Rc(n,i.hostAttrs))}}function Id(t){return t===Lo?{}:t===_n?[]:t}function IU(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function EU(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function bU(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function Py(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var _i=class{},Lc=class{};var Bg=class extends _i{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new qd(this);let i=JT(e);this._bootstrapComponents=KD(i.bootstrap),this._r3Injector=OD(e,n,[{provide:_i,useValue:this},{provide:dh,useValue:this.componentFactoryResolver},...r],Ut(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},$g=class extends Lc{constructor(e){super(),this.moduleType=e}create(e){return new Bg(this.moduleType,e,[])}};var Gd=class extends _i{constructor(e){super(),this.componentFactoryResolver=new qd(this),this.instance=null;let n=new xc([...e.providers,{provide:_i,useValue:this},{provide:dh,useValue:this.componentFactoryResolver}],e.parent||iy(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ky(t,e,n=null){return new Gd({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var hh=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ut(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function AS(t){return TU(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function CU(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function TU(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function Oy(t,e,n){return t[e]=n}function DU(t,e){return t[e]}function vi(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function SU(t,e,n,r){let i=vi(t,e,n);return vi(t,e+1,r)||i}function AU(t){return(t.flags&32)===32}function RU(t,e,n,r,i,s,o,a,c){let l=e.consts,d=ch(e,t,4,o||null,Od(l,a));hS(e,n,d,Od(l,c)),gy(e,d);let f=d.tView=Ay(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function Ci(t,e,n,r,i,s,o,a){let c=Me(),l=Kt(),d=t+In,f=l.firstCreatePass?RU(d,l,c,e,n,r,i,s,o):l.data[d];Bc(f,!1);let m=xU(l,c,f,t);py()&&Dy(l,c,m,f),_s(m,c);let y=mS(m,c,m,f);return c[d]=y,uh(c,y),mU(y,f,c),oy(f)&&cS(l,c,f),o!=null&&uS(c,f,a),Ci}var xU=NU;function NU(t,e,n,r){return my(!0),e[ht].createComment("")}function fh(t,e,n,r){let i=Me(),s=rh();if(vi(i,s,e)){let o=Kt(),a=fy();vV(a,i,t,e,n,r)}return fh}function MU(t,e,n,r){return vi(t,rh(),n)?e+Yd(n)+r:bi}function Ed(t,e){return t<<17|e<<2}function ws(t){return t>>17&32767}function PU(t){return(t&2)==2}function kU(t,e){return t&131071|e<<17}function Hg(t){return t|2}function Ho(t){return(t&131068)>>2}function ag(t,e){return t&-131069|e<<2}function OU(t){return(t&1)===1}function qg(t){return t|1}function FU(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=ws(o),c=Ho(o);t[r]=n;let l=!1,d;if(Array.isArray(n)){let f=n;d=f[1],(d===null||jc(f,d)>0)&&(l=!0)}else d=n;if(i)if(c!==0){let m=ws(t[a+1]);t[r+1]=Ed(m,a),m!==0&&(t[m+1]=ag(t[m+1],r)),t[a+1]=kU(t[a+1],r)}else t[r+1]=Ed(a,0),a!==0&&(t[a+1]=ag(t[a+1],r)),a=r;else t[r+1]=Ed(c,0),a===0?a=r:t[c+1]=ag(t[c+1],r),c=r;l&&(t[r+1]=Hg(t[r+1])),bT(t,d,r,!0),bT(t,d,r,!1),LU(e,d,t,r,s),o=Ed(a,c),s?e.classBindings=o:e.styleBindings=o}function LU(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&jc(s,e)>=0&&(n[r+1]=qg(n[r+1]))}function bT(t,e,n,r){let i=t[n+1],s=e===null,o=r?ws(i):Ho(i),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],l=t[o+1];VU(c,e)&&(a=!0,t[o+1]=r?qg(l):Hg(l)),o=r?ws(l):Ho(l)}a&&(t[n+1]=r?Hg(i):qg(i))}function VU(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?jc(t,e)>=0:!1}function xt(t,e,n){let r=Me(),i=rh();if(vi(r,i,e)){let s=Kt(),o=fy();dS(s,o,r,t,e,r[ht],n,!1)}return xt}function CT(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Ry(t,n,s[o],o,r)}function Fy(t,e){return UU(t,e,null,!0),Fy}function UU(t,e,n,r){let i=Me(),s=Kt(),o=HF(2);if(s.firstUpdatePass&&BU(s,t,o,r),e!==bi&&vi(i,o,e)){let a=s.data[zo()];zU(s,a,i,i[ht],t,i[o+1]=WU(e,n),r,o)}}function jU(t,e){return e>=t.expandoStartIndex}function BU(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[zo()],o=jU(t,n);KU(s,r)&&e===null&&!o&&(e=!1),e=$U(i,s,e,r),FU(i,s,e,n,o,r)}}function $U(t,e,n,r){let i=WF(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=cg(null,t,e,n,r),n=Vc(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=cg(i,t,e,n,r),s===null){let c=HU(t,e,r);c!==void 0&&Array.isArray(c)&&(c=cg(null,t,e,c[1],r),c=Vc(c,e.attrs,r),qU(t,e,r,c))}else s=GU(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function HU(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Ho(r)!==0)return t[ws(r)]}function qU(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[ws(i)]=r}function GU(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=Vc(r,o,n)}return Vc(r,e.attrs,n)}function cg(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=Vc(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Vc(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),G1(t,o,n?!0:e[++s]))}return t===void 0?null:t}function zU(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],d=OU(l)?TT(c,e,n,i,Ho(l),o):void 0;if(!zd(d)){zd(s)||PU(l)&&(s=TT(c,null,n,i,a,o));let f=dD(zo(),n);JL(r,o,f,i,s)}}function TT(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),d=l?c[1]:c,f=d===null,m=n[i+1];m===bi&&(m=f?_n:void 0);let y=f?Jm(m,r):d===r?m:void 0;if(l&&!zd(y)&&(y=Jm(c,r)),zd(y)&&(a=y,o))return a;let E=t[i+1];i=o?ws(E):Ho(E)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Jm(c,r))}return a}function zd(t){return t!==void 0}function WU(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Ut($c(t)))),t}function KU(t,e){return(t.flags&(e?8:16))!==0}function QU(t,e,n,r,i,s){let o=e.consts,a=Od(o,i),c=ch(e,t,2,r,a);return hS(e,n,c,Od(o,s)),c.attrs!==null&&Vg(c,c.attrs,!1),c.mergedAttrs!==null&&Vg(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function M(t,e,n,r){let i=Me(),s=Kt(),o=In+t,a=i[ht],c=s.firstCreatePass?QU(o,s,i,e,n,r):s.data[o],l=YU(s,i,c,a,e,t);i[o]=l;let d=oy(c);return Bc(c,!0),nS(a,l,c),!AU(c)&&py()&&Dy(s,i,l,c),PF()===0&&_s(l,i),kF(),d&&(cS(s,i,c),aS(s,c,i)),r!==null&&uS(i,c),M}function N(){let t=Qt();yD()?jF():(t=t.parent,Bc(t,!1));let e=t;LF(e)&&VF(),OF();let n=Kt();return n.firstCreatePass&&(gy(n,t),oD(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&eL(e)&&CT(n,e,Me(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&tL(e)&&CT(n,e,Me(),e.stylesWithoutHost,!1),N}function ce(t,e,n,r){return M(t,e,n,r),N(),ce}var YU=(t,e,n,r,i,s)=>(my(!0),QD(r,i,YF()));function Ti(){return Me()}var us=void 0;function JU(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var XU=["en",[["a","p"],["AM","PM"],us],[["AM","PM"],us,us],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],us,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],us,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",us,"{1} 'at' {0}",us],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",JU],ug={};function Yt(t){let e=ZU(t),n=DT(e);if(n)return n;let r=e.split("-")[0];if(n=DT(r),n)return n;if(r==="en")return XU;throw new Q(701,!1)}function DT(t){return t in ug||(ug[t]=kn.ng&&kn.ng.common&&kn.ng.common.locales&&kn.ng.common.locales[t]),ug[t]}var Ke=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Ke||{});function ZU(t){return t.toLowerCase().replace(/_/g,"-")}var Wd="en-US",e2="USD";var t2=Wd;function n2(t){typeof t=="string"&&(t2=t.toLowerCase().replace(/_/g,"-"))}function Ie(t,e,n,r){let i=Me(),s=Kt(),o=Qt();return RS(s,i,i[ht],o,t,e,r),Ie}function r2(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Nc],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function RS(t,e,n,r,i,s,o){let a=oy(r),l=t.firstCreatePass&&CV(t),d=e[Fn],f=bV(e),m=!0;if(r.type&3||o){let x=En(r,e),R=o?o(x):x,F=f.length,q=o?z=>o(er(z[r.index])):r.index,B=null;if(!o&&a&&(B=r2(t,e,i,r.index)),B!==null){let z=B.__ngLastListenerFn__||B;z.__ngNextListenerFn__=s,B.__ngLastListenerFn__=s,m=!1}else{s=AT(r,e,d,s,!1);let z=n.listen(R,i,s);f.push(s,z),l&&l.push(i,q,F,F+1)}}else s=AT(r,e,d,s,!1);let y=r.outputs,E;if(m&&y!==null&&(E=y[i])){let x=E.length;if(x)for(let R=0;R<x;R+=2){let F=E[R],q=E[R+1],xe=e[F][q].subscribe(s),re=f.length;f.push(s,xe),l&&l.push(i,r.index,re,-(re+1))}}}function ST(t,e,n,r){let i=be(null);try{return Yn(6,e,n),n(r)!==!1}catch(s){return yS(t,s),!1}finally{Yn(7,e,n),be(i)}}function AT(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?wi(t.index,e):e;Ny(a);let c=ST(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)c=ST(e,n,l,o)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&o.preventDefault(),c}}function Di(t=1){return QF(t)}function i2(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Or(t){let e=BF();return ay(e,In+t)}function V(t,e=""){let n=Me(),r=Kt(),i=t+In,s=r.firstCreatePass?ch(r,i,1,e,null):r.data[i],o=s2(r,n,s,e,t);n[i]=o,py()&&Dy(r,n,o,s),Bc(s,!1)}var s2=(t,e,n,r,i)=>(my(!0),ML(e[ht],r));function Si(t){return Ai("",t,""),Si}function Ai(t,e,n){let r=Me(),i=MU(r,t,e,n);return i!==bi&&TV(r,zo(),i),Ai}function Ss(t,e,n){SS(e)&&(e=e());let r=Me(),i=rh();if(vi(r,i,e)){let s=Kt(),o=fy();dS(s,o,r,t,e,r[ht],n,!1)}return Ss}function Qo(t,e){let n=SS(t);return n&&t.set(e),n}function As(t,e){let n=Me(),r=Kt(),i=Qt();return RS(r,n,n[ht],i,t,e),As}function o2(t,e,n){let r=Kt();if(r.firstCreatePass){let i=yi(t);Gg(n,r.data,r.blueprint,i,!0),Gg(e,r.data,r.blueprint,i,!1)}}function Gg(t,e,n,r,i){if(t=Lt(t),Array.isArray(t))for(let s=0;s<t.length;s++)Gg(t[s],e,n,r,i);else{let s=Kt(),o=Me(),a=Qt(),c=Uo(t)?t:Lt(t.provide),l=rD(t),d=a.providerIndexes&1048575,f=a.directiveStart,m=a.providerIndexes>>20;if(Uo(t)||!t.multi){let y=new ys(l,i,$),E=dg(c,e,i?d:d+m,f);E===-1?(Cg(Ud(a,o),s,c),lg(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),o.push(y)):(n[E]=y,o[E]=y)}else{let y=dg(c,e,d+m,f),E=dg(c,e,d,d+m),x=y>=0&&n[y],R=E>=0&&n[E];if(i&&!R||!i&&!x){Cg(Ud(a,o),s,c);let F=u2(i?c2:a2,n.length,i,r,l);!i&&R&&(n[E].providerFactory=F),lg(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(F),o.push(F)}else{let F=xS(n[i?E:y],l,!i&&r);lg(s,t,y>-1?y:E,F)}!i&&r&&R&&n[E].componentProviders++}}}function lg(t,e,n,r){let i=Uo(e),s=hF(e);if(i||s){let c=(s?Lt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(n);d===-1?l.push(n,[r,c]):l[d+1].push(r,c)}else l.push(n,c)}}}function xS(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function dg(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function a2(t,e,n,r){return zg(this.multi,[])}function c2(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=$o(n,n[ve],this.providerFactory.index,r);s=a.slice(0,o),zg(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],zg(i,s);return s}function zg(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function u2(t,e,n,r,i){let s=new ys(t,n,$);return s.multi=[],s.index=e,s.componentProviders=0,xS(s,i,r&&!n),s}function ph(t,e=[]){return n=>{n.providersResolver=(r,i)=>o2(r,i?i(t):t,e)}}var l2=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=eD(!1,r.type),s=i.length>0?ky([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=G({token:e,providedIn:"environment",factory:()=>new e(Y(wn))});let t=e;return t})();function Be(t){CS("NgStandalone"),t.getStandaloneInjector=e=>e.get(l2).getOrCreateStandaloneInjector(t)}function rr(t,e,n){let r=ly()+t,i=Me();return i[r]===bi?Oy(i,r,n?e.call(n):e()):DU(i,r)}function NS(t,e){let n=t[e];return n===bi?void 0:n}function d2(t,e,n,r,i,s){let o=e+n;return vi(t,o,i)?Oy(t,o+1,s?r.call(s,i):r(i)):NS(t,o+1)}function h2(t,e,n,r,i,s,o){let a=e+n;return SU(t,a,i,s)?Oy(t,a+2,o?r.call(o,i,s):r(i,s)):NS(t,a+2)}function Bt(t,e){let n=Kt(),r,i=t+In;n.firstCreatePass?(r=f2(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=hs(r.type,!0)),o,a=zt($);try{let c=Vd(!1),l=s();return Vd(c),i2(n,Me(),i,l),l}finally{zt(a)}}function f2(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function Jt(t,e,n){let r=t+In,i=Me(),s=ay(i,r);return PS(i,r)?d2(i,ly(),e,s.transform,n,s):s.transform(n)}function MS(t,e,n,r){let i=t+In,s=Me(),o=ay(s,i);return PS(s,i)?h2(s,ly(),e,o.transform,n,r,o):o.transform(n,r)}function PS(t,e){return t[ve].data[e].pure}var Mr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},kS=new Mr("17.3.9"),mh=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var OS=new W("");function Ri(t){return!!t&&typeof t.then=="function"}function Ly(t){return!!t&&typeof t.subscribe=="function"}var FS=new W(""),LS=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=j(FS,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Ri(o))r.push(o);else if(Ly(o)){let a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Vy=new W("");function p2(){w0(()=>{throw new Q(600,!1)})}function m2(t){return t.isBoundToModule}function g2(t,e,n){try{let r=n();return Ri(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Hc=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=j(FD),this.afterRenderEffectManager=j(TS),this.externalTestViews=new Set,this.beforeRender=new St,this.afterTick=new St,this.componentTypes=[],this.components=[],this.isStable=j(hh).hasPendingTasks.pipe(se(r=>!r)),this._injector=j(wn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Hd;if(!this._injector.get(LS).done){let y=!s&&YT(r),E=!1;throw new Q(405,E)}let a;s?a=r:a=this._injector.get(dh).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=m2(a)?void 0:this._injector.get(_i),l=i||a.selector,d=a.create(Rt.NULL,[],l,c),f=d.location.nativeElement,m=d.injector.get(OS,null);return m?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),hg(this.components,d),m?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new Q(101,!1);let i=be(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,be(i)}}detectChangesInAttachedViews(r){let i=0,s=this.afterRenderEffectManager;for(;;){if(i===vS)throw new Q(103,!1);if(r){let o=i===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:c}of this._views)y2(a,o,c)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Wg(o))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Wg(o))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;hg(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Vy,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>hg(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new Q(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function hg(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function y2(t,e,n){!e&&!Wg(t)||_2(t,n,e)}function Wg(t){return uy(t)}function _2(t,e,n){let r;n?(r=0,t[te]|=1024):t[te]&64?r=0:r=1,wS(t,e,r)}var Kg=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Uy=(()=>{let e=class e{compileModuleSync(r){return new $g(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=JT(r),o=KD(s.declarations).reduce((a,c)=>{let l=fs(c);return l&&a.push(new Fc(l)),a},[]);return new Kg(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var v2=(()=>{let e=class e{constructor(){this.zone=j(Te),this.applicationRef=j(Hc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function w2(t){return[{provide:Te,useFactory:t},{provide:Vo,multi:!0,useFactory:()=>{let e=j(v2,{optional:!0});return()=>e.initialize()}},{provide:Vo,multi:!0,useFactory:()=>{let e=j(C2);return()=>{e.initialize()}}},{provide:FD,useFactory:I2}]}function I2(){let t=j(Te),e=j(xr);return n=>t.runOutsideAngular(()=>e.handleError(n))}function E2(t){let e=w2(()=>new Te(b2(t)));return Wt([[],e])}function b2(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var C2=(()=>{let e=class e{constructor(){this.subscription=new nt,this.initialized=!1,this.zone=j(Te),this.pendingTasks=j(hh)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Te.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Te.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function T2(){return typeof $localize<"u"&&$localize.locale||Wd}var qc=new W("",{providedIn:"root",factory:()=>j(qc,he.Optional|he.SkipSelf)||T2()}),VS=new W("",{providedIn:"root",factory:()=>e2});var US=new W("");var Sd=null;function D2(t=[],e){return Rt.create({name:e,providers:[{provide:Zd,useValue:"platform"},{provide:US,useValue:new Set([()=>Sd=null])},...t]})}function S2(t=[]){if(Sd)return Sd;let e=D2(t);return Sd=e,p2(),A2(e),e}function A2(t){t.get(wy,null)?.forEach(n=>n())}var xi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=R2;let t=e;return t})();function R2(t){return x2(Qt(),Me(),(t&16)===16)}function x2(t,e,n){if(nh(t)&&!n){let r=wi(t.index,e);return new vs(r,r)}else if(t.type&47){let r=e[Zn];return new vs(r,e)}return null}var Qg=class{constructor(){}supports(e){return AS(e)}create(e){return new Yg(e)}},N2=(t,e)=>e,Yg=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||N2}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<RT(r,i,s)?n:r,a=RT(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,d=c-i;if(l!=d){for(let m=0;m<l;m++){let y=m<s.length?s[m]:s[m]=0,E=y+m;d<=E&&E<l&&(s[m]=y+1)}let f=o.previousIndex;s[f]=d-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!AS(e))throw new Q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,CU(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Jg(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Kd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Kd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Jg=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Xg=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Kd=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Xg,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function RT(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function xT(){return new jy([new Qg])}var jy=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||xT()),deps:[[e,new BT,new ze]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new Q(901,!1)}};e.\u0275prov=G({token:e,providedIn:"root",factory:xT});let t=e;return t})();function jS(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=S2(r),s=[E2(),...n||[]],a=new Gd({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(Te);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(xr,null),d;c.runOutsideAngular(()=>{d=c.onError.subscribe({next:y=>{l.handleError(y)}})});let f=()=>a.destroy(),m=i.get(US);return m.add(f),a.onDestroy(()=>{d.unsubscribe(),m.delete(f)}),g2(l,c,()=>{let y=a.get(LS);return y.runInitializers(),y.donePromise.then(()=>{let E=a.get(qc,Wd);n2(E||Wd);let x=a.get(Hc);return e!==void 0&&x.bootstrap(e),x})})})}catch(e){return Promise.reject(e)}}function Rs(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function By(t){let e=be(null);try{return t()}finally{be(e)}}var KS=null;function jr(){return KS}function QS(t){KS??=t}var Ch=class{};var Cn=new W(""),Jy=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:()=>j(M2),providedIn:"platform"});let t=e;return t})();var M2=(()=>{let e=class e extends Jy{constructor(){super(),this._doc=j(Cn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return jr().getBaseHref(this._doc)}onPopState(r){let i=jr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=jr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Xy(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function BS(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Lr(t){return t&&t[0]!=="?"?"?"+t:t}var Ni=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:()=>j(JS),providedIn:"root"});let t=e;return t})(),YS=new W(""),JS=(()=>{let e=class e extends Ni{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??j(Cn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Xy(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Lr(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Lr(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Lr(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(Y(Jy),Y(YS,8))},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),XS=(()=>{let e=class e extends Ni{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=Xy(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Lr(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Lr(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(Y(Jy),Y(YS,8))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})(),zc=(()=>{let e=class e{constructor(r){this._subject=new Vt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=O2(BS($S(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Lr(i))}normalize(r){return e.stripTrailingSlash(k2(this._basePath,$S(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Lr(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Lr(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Lr,e.joinWithSlash=Xy,e.stripTrailingSlash=BS,e.\u0275fac=function(i){return new(i||e)(Y(Ni))},e.\u0275prov=G({token:e,factory:()=>P2(),providedIn:"root"});let t=e;return t})();function P2(){return new zc(Y(Ni))}function k2(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function $S(t){return t.replace(/\/index.html$/,"")}function O2(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var ZS={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},eA=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(eA||{});var $t=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}($t||{}),Ue=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(Ue||{}),un=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(un||{}),ln={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function F2(t){return Yt(t)[Ke.LocaleId]}function L2(t,e,n){let r=Yt(t),i=[r[Ke.DayPeriodsFormat],r[Ke.DayPeriodsStandalone]],s=bn(i,e);return bn(s,n)}function V2(t,e,n){let r=Yt(t),i=[r[Ke.DaysFormat],r[Ke.DaysStandalone]],s=bn(i,e);return bn(s,n)}function U2(t,e,n){let r=Yt(t),i=[r[Ke.MonthsFormat],r[Ke.MonthsStandalone]],s=bn(i,e);return bn(s,n)}function j2(t,e){let r=Yt(t)[Ke.Eras];return bn(r,e)}function gh(t,e){let n=Yt(t);return bn(n[Ke.DateFormat],e)}function yh(t,e){let n=Yt(t);return bn(n[Ke.TimeFormat],e)}function _h(t,e){let r=Yt(t)[Ke.DateTimeFormat];return bn(r,e)}function Vr(t,e){let n=Yt(t),r=n[Ke.NumberSymbols][e];if(typeof r>"u"){if(e===ln.CurrencyDecimal)return n[Ke.NumberSymbols][ln.Decimal];if(e===ln.CurrencyGroup)return n[Ke.NumberSymbols][ln.Group]}return r}function B2(t,e){return Yt(t)[Ke.NumberFormats][e]}function $2(t){return Yt(t)[Ke.Currencies]}function tA(t){if(!t[Ke.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[Ke.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function H2(t){let e=Yt(t);return tA(e),(e[Ke.ExtraData][2]||[]).map(r=>typeof r=="string"?$y(r):[$y(r[0]),$y(r[1])])}function q2(t,e,n){let r=Yt(t);tA(r);let i=[r[Ke.ExtraData][0],r[Ke.ExtraData][1]],s=bn(i,e)||[];return bn(s,n)||[]}function bn(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function $y(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}function G2(t,e,n="en"){let r=$2(n)[t]||ZS[t]||[],i=r[1];return e==="narrow"&&typeof i=="string"?i:r[0]||t}var z2=2;function W2(t){let e,n=ZS[t];return n&&(e=n[2]),typeof e=="number"?e:z2}var K2=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,vh={},Q2=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Ur=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(Ur||{}),Se=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(Se||{}),De=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(De||{});function Y2(t,e,n,r){let i=sj(t);e=Fr(n,e)||e;let o=[],a;for(;e;)if(a=Q2.exec(e),a){o=o.concat(a.slice(1));let d=o.pop();if(!d)break;e=d}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=rA(r,c),i=ij(i,r,!0));let l="";return o.forEach(d=>{let f=nj(d);l+=f?f(i,n,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Th(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Fr(t,e){let n=F2(t);if(vh[n]??={},vh[n][e])return vh[n][e];let r="";switch(e){case"shortDate":r=gh(t,un.Short);break;case"mediumDate":r=gh(t,un.Medium);break;case"longDate":r=gh(t,un.Long);break;case"fullDate":r=gh(t,un.Full);break;case"shortTime":r=yh(t,un.Short);break;case"mediumTime":r=yh(t,un.Medium);break;case"longTime":r=yh(t,un.Long);break;case"fullTime":r=yh(t,un.Full);break;case"short":let i=Fr(t,"shortTime"),s=Fr(t,"shortDate");r=wh(_h(t,un.Short),[i,s]);break;case"medium":let o=Fr(t,"mediumTime"),a=Fr(t,"mediumDate");r=wh(_h(t,un.Medium),[o,a]);break;case"long":let c=Fr(t,"longTime"),l=Fr(t,"longDate");r=wh(_h(t,un.Long),[c,l]);break;case"full":let d=Fr(t,"fullTime"),f=Fr(t,"fullDate");r=wh(_h(t,un.Full),[d,f]);break}return r&&(vh[n][e]=r),r}function wh(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function Un(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function J2(t,e){return Un(t,3).substring(0,e)}function st(t,e,n=0,r=!1,i=!1){return function(s,o){let a=X2(t,s);if((n>0||a>-n)&&(a+=n),t===Se.Hours)a===0&&n===-12&&(a=12);else if(t===Se.FractionalSeconds)return J2(a,e);let c=Vr(o,ln.MinusSign);return Un(a,e,c,r,i)}}function X2(t,e){switch(t){case Se.FullYear:return e.getFullYear();case Se.Month:return e.getMonth();case Se.Date:return e.getDate();case Se.Hours:return e.getHours();case Se.Minutes:return e.getMinutes();case Se.Seconds:return e.getSeconds();case Se.FractionalSeconds:return e.getMilliseconds();case Se.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function $e(t,e,n=$t.Format,r=!1){return function(i,s){return Z2(i,s,t,e,n,r)}}function Z2(t,e,n,r,i,s){switch(n){case De.Months:return U2(e,i,r)[t.getMonth()];case De.Days:return V2(e,i,r)[t.getDay()];case De.DayPeriods:let o=t.getHours(),a=t.getMinutes();if(s){let l=H2(e),d=q2(e,i,r),f=l.findIndex(m=>{if(Array.isArray(m)){let[y,E]=m,x=o>=y.hours&&a>=y.minutes,R=o<E.hours||o===E.hours&&a<E.minutes;if(y.hours<E.hours){if(x&&R)return!0}else if(x||R)return!0}else if(m.hours===o&&m.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return L2(e,i,r)[o<12?0:1];case De.Eras:return j2(e,r)[t.getFullYear()<=0?0:1];default:let c=n;throw new Error(`unexpected translation type ${c}`)}}function Ih(t){return function(e,n,r){let i=-1*r,s=Vr(n,ln.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case Ur.Short:return(i>=0?"+":"")+Un(o,2,s)+Un(Math.abs(i%60),2,s);case Ur.ShortGMT:return"GMT"+(i>=0?"+":"")+Un(o,1,s);case Ur.Long:return"GMT"+(i>=0?"+":"")+Un(o,2,s)+":"+Un(Math.abs(i%60),2,s);case Ur.Extended:return r===0?"Z":(i>=0?"+":"")+Un(o,2,s)+":"+Un(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}var ej=0,bh=4;function tj(t){let e=Th(t,ej,1).getDay();return Th(t,0,1+(e<=bh?bh:bh+7)-e)}function nA(t){let e=t.getDay(),n=e===0?-3:bh-e;return Th(t.getFullYear(),t.getMonth(),t.getDate()+n)}function Hy(t,e=!1){return function(n,r){let i;if(e){let s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();i=1+Math.floor((o+s)/7)}else{let s=nA(n),o=tj(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return Un(i,t,Vr(r,ln.MinusSign))}}function Eh(t,e=!1){return function(n,r){let s=nA(n).getFullYear();return Un(s,t,Vr(r,ln.MinusSign),e)}}var qy={};function nj(t){if(qy[t])return qy[t];let e;switch(t){case"G":case"GG":case"GGG":e=$e(De.Eras,Ue.Abbreviated);break;case"GGGG":e=$e(De.Eras,Ue.Wide);break;case"GGGGG":e=$e(De.Eras,Ue.Narrow);break;case"y":e=st(Se.FullYear,1,0,!1,!0);break;case"yy":e=st(Se.FullYear,2,0,!0,!0);break;case"yyy":e=st(Se.FullYear,3,0,!1,!0);break;case"yyyy":e=st(Se.FullYear,4,0,!1,!0);break;case"Y":e=Eh(1);break;case"YY":e=Eh(2,!0);break;case"YYY":e=Eh(3);break;case"YYYY":e=Eh(4);break;case"M":case"L":e=st(Se.Month,1,1);break;case"MM":case"LL":e=st(Se.Month,2,1);break;case"MMM":e=$e(De.Months,Ue.Abbreviated);break;case"MMMM":e=$e(De.Months,Ue.Wide);break;case"MMMMM":e=$e(De.Months,Ue.Narrow);break;case"LLL":e=$e(De.Months,Ue.Abbreviated,$t.Standalone);break;case"LLLL":e=$e(De.Months,Ue.Wide,$t.Standalone);break;case"LLLLL":e=$e(De.Months,Ue.Narrow,$t.Standalone);break;case"w":e=Hy(1);break;case"ww":e=Hy(2);break;case"W":e=Hy(1,!0);break;case"d":e=st(Se.Date,1);break;case"dd":e=st(Se.Date,2);break;case"c":case"cc":e=st(Se.Day,1);break;case"ccc":e=$e(De.Days,Ue.Abbreviated,$t.Standalone);break;case"cccc":e=$e(De.Days,Ue.Wide,$t.Standalone);break;case"ccccc":e=$e(De.Days,Ue.Narrow,$t.Standalone);break;case"cccccc":e=$e(De.Days,Ue.Short,$t.Standalone);break;case"E":case"EE":case"EEE":e=$e(De.Days,Ue.Abbreviated);break;case"EEEE":e=$e(De.Days,Ue.Wide);break;case"EEEEE":e=$e(De.Days,Ue.Narrow);break;case"EEEEEE":e=$e(De.Days,Ue.Short);break;case"a":case"aa":case"aaa":e=$e(De.DayPeriods,Ue.Abbreviated);break;case"aaaa":e=$e(De.DayPeriods,Ue.Wide);break;case"aaaaa":e=$e(De.DayPeriods,Ue.Narrow);break;case"b":case"bb":case"bbb":e=$e(De.DayPeriods,Ue.Abbreviated,$t.Standalone,!0);break;case"bbbb":e=$e(De.DayPeriods,Ue.Wide,$t.Standalone,!0);break;case"bbbbb":e=$e(De.DayPeriods,Ue.Narrow,$t.Standalone,!0);break;case"B":case"BB":case"BBB":e=$e(De.DayPeriods,Ue.Abbreviated,$t.Format,!0);break;case"BBBB":e=$e(De.DayPeriods,Ue.Wide,$t.Format,!0);break;case"BBBBB":e=$e(De.DayPeriods,Ue.Narrow,$t.Format,!0);break;case"h":e=st(Se.Hours,1,-12);break;case"hh":e=st(Se.Hours,2,-12);break;case"H":e=st(Se.Hours,1);break;case"HH":e=st(Se.Hours,2);break;case"m":e=st(Se.Minutes,1);break;case"mm":e=st(Se.Minutes,2);break;case"s":e=st(Se.Seconds,1);break;case"ss":e=st(Se.Seconds,2);break;case"S":e=st(Se.FractionalSeconds,1);break;case"SS":e=st(Se.FractionalSeconds,2);break;case"SSS":e=st(Se.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Ih(Ur.Short);break;case"ZZZZZ":e=Ih(Ur.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Ih(Ur.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Ih(Ur.Long);break;default:return null}return qy[t]=e,e}function rA(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function rj(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function ij(t,e,n){let r=n?-1:1,i=t.getTimezoneOffset(),s=rA(e,i);return rj(t,r*(s-i))}function sj(t){if(HS(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,s=1,o=1]=t.split("-").map(a=>+a);return Th(i,s-1,o)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(K2))return oj(r)}let e=new Date(t);if(!HS(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function oj(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let o=Number(t[4]||0)-n,a=Number(t[5]||0)-r,c=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return s.call(e,o,a,c,l),e}function HS(t){return t instanceof Date&&!isNaN(t.valueOf())}var aj=/^(\d+)?\.((\d+)(-(\d+))?)?$/,qS=22,Dh=".",Gc="0",cj=";",uj=",",Gy="#",GS="\xA4";function lj(t,e,n,r,i,s,o=!1){let a="",c=!1;if(!isFinite(t))a=Vr(n,ln.Infinity);else{let l=pj(t);o&&(l=fj(l));let d=e.minInt,f=e.minFrac,m=e.maxFrac;if(s){let q=s.match(aj);if(q===null)throw new Error(`${s} is not a valid digit info`);let B=q[1],z=q[3],xe=q[5];B!=null&&(d=zy(B)),z!=null&&(f=zy(z)),xe!=null?m=zy(xe):z!=null&&f>m&&(m=f)}mj(l,f,m);let y=l.digits,E=l.integerLen,x=l.exponent,R=[];for(c=y.every(q=>!q);E<d;E++)y.unshift(0);for(;E<0;E++)y.unshift(0);E>0?R=y.splice(E,y.length):(R=y,y=[0]);let F=[];for(y.length>=e.lgSize&&F.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)F.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&F.unshift(y.join("")),a=F.join(Vr(n,r)),R.length&&(a+=Vr(n,i)+R.join("")),x&&(a+=Vr(n,ln.Exponential)+"+"+x)}return t<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function dj(t,e,n,r,i){let s=B2(e,eA.Currency),o=hj(s,Vr(e,ln.MinusSign));return o.minFrac=W2(r),o.maxFrac=o.minFrac,lj(t,o,e,ln.CurrencyGroup,ln.CurrencyDecimal,i).replace(GS,n).replace(GS,"").trim()}function hj(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(cj),i=r[0],s=r[1],o=i.indexOf(Dh)!==-1?i.split(Dh):[i.substring(0,i.lastIndexOf(Gc)+1),i.substring(i.lastIndexOf(Gc)+1)],a=o[0],c=o[1]||"";n.posPre=a.substring(0,a.indexOf(Gy));for(let d=0;d<c.length;d++){let f=c.charAt(d);f===Gc?n.minFrac=n.maxFrac=d+1:f===Gy?n.maxFrac=d+1:n.posSuf+=f}let l=a.split(uj);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,s){let d=i.length-n.posPre.length-n.posSuf.length,f=s.indexOf(Gy);n.negPre=s.substring(0,f).replace(/'/g,""),n.negSuf=s.slice(f+d).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function fj(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function pj(t){let e=Math.abs(t)+"",n=0,r,i,s,o,a;for((i=e.indexOf(Dh))>-1&&(e=e.replace(Dh,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===Gc;s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Gc;)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>qS&&(r=r.splice(0,qS-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function mj(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen,s=Math.min(Math.max(e,i),n),o=s+t.integerLen,a=r[o];if(o>0){r.splice(Math.max(t.integerLen,o));for(let f=o;f<r.length;f++)r[f]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let f=1;f<o;f++)r[f]=0}if(a>=5)if(o-1<0){for(let f=0;f>o;f--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let c=s!==0,l=e+t.integerLen,d=r.reduceRight(function(f,m,y,E){return m=m+f,E[y]=m<10?m:m-10,c&&(E[y]===0&&y>=l?E.pop():c=!1),m>=10?1:0},0);d&&(r.unshift(d),t.integerLen++)}function zy(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}function iA(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Wy=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},sA=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new Wy(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let c=i.get(o);i.move(c,a),zS(c,s)}});for(let s=0,o=i.length;s<o;s++){let c=i.get(s).context;c.index=s,c.count=o,c.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);zS(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)($(Ko),$(lh),$(jy))},e.\u0275dir=cn({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function zS(t,e){t.context.$implicit=e.item}var Yo=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Ky,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){WS("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){WS("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)($(Ko),$(lh))},e.\u0275dir=cn({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Ky=class{constructor(){this.$implicit=null,this.ngIf=null}};function WS(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Ut(e)}'.`)}function Zy(t,e){return new Q(2100,!1)}var Qy=class{createSubscription(e,n){return By(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){By(()=>e.unsubscribe())}},Yy=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},gj=new Yy,yj=new Qy,Mi=(()=>{let e=class e{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(Ri(r))return gj;if(Ly(r))return yj;throw Zy(e,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(i){return new(i||e)($(xi,16))},e.\u0275pipe=Xd({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})();var _j="mediumDate",vj=new W(""),wj=new W(""),oA=(()=>{let e=class e{constructor(r,i,s){this.locale=r,this.defaultTimezone=i,this.defaultOptions=s}transform(r,i,s,o){if(r==null||r===""||r!==r)return null;try{let a=i??this.defaultOptions?.dateFormat??_j,c=s??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return Y2(r,a,o||this.locale,c)}catch(a){throw Zy(e,a.message)}}};e.\u0275fac=function(i){return new(i||e)($(qc,16),$(vj,24),$(wj,24))},e.\u0275pipe=Xd({name:"date",type:e,pure:!0,standalone:!0});let t=e;return t})();var Pi=(()=>{let e=class e{constructor(r,i="USD"){this._locale=r,this._defaultCurrencyCode=i}transform(r,i=this._defaultCurrencyCode,s="symbol",o,a){if(!Ij(r))return null;a||=this._locale,typeof s=="boolean"&&(s=s?"symbol":"code");let c=i||this._defaultCurrencyCode;s!=="code"&&(s==="symbol"||s==="symbol-narrow"?c=G2(c,s==="symbol"?"wide":"narrow",a):c=s);try{let l=Ej(r);return dj(l,a,c,i,o)}catch(l){throw Zy(e,l.message)}}};e.\u0275fac=function(i){return new(i||e)($(qc,16),$(VS,16))},e.\u0275pipe=Xd({name:"currency",type:e,pure:!0,standalone:!0});let t=e;return t})();function Ij(t){return!(t==null||t===""||t!==t)}function Ej(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var dn=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Es({type:e}),e.\u0275inj=Is({});let t=e;return t})(),aA="browser",bj="server";function e_(t){return t===bj}var Sh=class{};var r_=class extends Ch{constructor(){super(...arguments),this.supportsDOMEvents=!0}},i_=class t extends r_{static makeCurrent(){QS(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Cj();return n==null?null:Tj(n)}resetBaseElement(){Wc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return iA(document.cookie,e)}},Wc=null;function Cj(){return Wc=Wc||document.querySelector("base"),Wc?Wc.getAttribute("href"):null}function Tj(t){return new URL(t,document.baseURI).pathname}var Dj=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})(),s_=new W(""),dA=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new Q(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(Y(s_),Y(Te))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})(),Ah=class{constructor(e){this._doc=e}},t_="ng-app-id",hA=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=e_(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${t_}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(t_),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(t_,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(Y(Cn),Y(vy),Y(Iy,8),Y(Ei))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})(),n_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},a_=/%COMP%/g,fA="%COMP%",Sj=`_nghost-${fA}`,Aj=`_ngcontent-${fA}`,Rj=!0,xj=new W("",{providedIn:"root",factory:()=>Rj});function Nj(t){return Aj.replace(a_,t)}function Mj(t){return Sj.replace(a_,t)}function pA(t,e){return e.map(n=>n.replace(a_,t))}var cA=(()=>{let e=class e{constructor(r,i,s,o,a,c,l,d=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=e_(c),this.defaultRenderer=new Kc(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Xn.ShadowDom&&(i=Oe(U({},i),{encapsulation:Xn.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Rh?s.applyToHost(r):s instanceof Qc&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(i.encapsulation){case Xn.Emulated:o=new Rh(l,d,i,this.appId,f,a,c,m);break;case Xn.ShadowDom:return new o_(l,d,r,i,a,c,this.nonce,m);default:o=new Qc(l,d,i,f,a,c,m);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(Y(dA),Y(hA),Y(vy),Y(xj),Y(Cn),Y(Ei),Y(Te),Y(Iy))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})(),Kc=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(n_[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(uA(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(uA(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Q(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=n_[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=n_[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Nr.DashCase|Nr.Important)?e.style.setProperty(n,r,i&Nr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Nr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=jr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function uA(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var o_=class extends Kc{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=pA(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Qc=class extends Kc{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?pA(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Rh=class extends Qc{constructor(e,n,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,n,r,s,o,a,c,l),this.contentAttr=Nj(l),this.hostAttr=Mj(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},Pj=(()=>{let e=class e extends Ah{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(Y(Cn))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})(),lA=["alt","control","meta","shift"],kj={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Oj={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Fj=(()=>{let e=class e extends Ah{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>jr().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),lA.forEach(d=>{let f=i.indexOf(d);f>-1&&(i.splice(f,1),a+=d+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=kj[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),lA.forEach(a=>{if(a!==s){let c=Oj[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(Y(Cn))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})();function mA(t,e){return jS(U({rootComponent:t},Lj(e)))}function Lj(t){return{appProviders:[...$j,...t?.providers??[]],platformProviders:Bj}}function Vj(){i_.makeCurrent()}function Uj(){return new xr}function jj(){return HD(document),document}var Bj=[{provide:Ei,useValue:aA},{provide:wy,useValue:Vj,multi:!0},{provide:Cn,useFactory:jj,deps:[]}];var $j=[{provide:Zd,useValue:"root"},{provide:xr,useFactory:Uj,deps:[]},{provide:s_,useClass:Pj,multi:!0,deps:[Cn,Te,Ei]},{provide:s_,useClass:Fj,multi:!0,deps:[Cn]},cA,hA,dA,{provide:Oc,useExisting:cA},{provide:Sh,useClass:Dj,deps:[]},[]];var gA=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(Y(Cn))},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ue="primary",lu=Symbol("RouteTitle"),h_=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ta(t){return new h_(t)}function qj(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Gj(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!ir(t[n],e[n]))return!1;return!0}function ir(t,e){let n=t?f_(t):void 0,r=e?f_(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!EA(t[i],e[i]))return!1;return!0}function f_(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function EA(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function bA(t){return t.length>0?t[t.length-1]:null}function Fi(t){return Hm(t)?t:Ri(t)?Je(Promise.resolve(t)):Z(t)}var zj={exact:TA,subset:DA},CA={exact:Wj,subset:Kj,ignored:()=>!0};function yA(t,e,n){return zj[n.paths](t.root,e.root,n.matrixParams)&&CA[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Wj(t,e){return ir(t,e)}function TA(t,e,n){if(!Ms(t.segments,e.segments)||!Mh(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!TA(t.children[r],e.children[r],n))return!1;return!0}function Kj(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>EA(t[n],e[n]))}function DA(t,e,n){return SA(t,e,e.segments,n)}function SA(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Ms(i,n)||e.hasChildren()||!Mh(i,n,r))}else if(t.segments.length===n.length){if(!Ms(t.segments,n)||!Mh(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!DA(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Ms(t.segments,i)||!Mh(t.segments,i,r)||!t.children[ue]?!1:SA(t.children[ue],e,s,r)}}function Mh(t,e,n){return e.every((r,i)=>CA[n](t[i].parameters,r.parameters))}var ki=class{constructor(e=new Ne([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ta(this.queryParams),this._queryParamMap}toString(){return Jj.serialize(this)}},Ne=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ph(this)}},Ns=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ta(this.parameters),this._parameterMap}toString(){return RA(this)}};function Qj(t,e){return Ms(t,e)&&t.every((n,r)=>ir(n.parameters,e[r].parameters))}function Ms(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function Yj(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ue&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ue&&(n=n.concat(e(i,r)))}),n}var U_=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:()=>new Oh,providedIn:"root"});let t=e;return t})(),Oh=class{parse(e){let n=new m_(e);return new ki(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Yc(e.root,!0)}`,r=eB(e.queryParams),i=typeof e.fragment=="string"?`#${Xj(e.fragment)}`:"";return`${n}${r}${i}`}},Jj=new Oh;function Ph(t){return t.segments.map(e=>RA(e)).join("/")}function Yc(t,e){if(!t.hasChildren())return Ph(t);if(e){let n=t.children[ue]?Yc(t.children[ue],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==ue&&r.push(`${i}:${Yc(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=Yj(t,(r,i)=>i===ue?[Yc(t.children[ue],!1)]:[`${i}:${Yc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ue]!=null?`${Ph(t)}/${n[0]}`:`${Ph(t)}/(${n.join("//")})`}}function AA(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xh(t){return AA(t).replace(/%3B/gi,";")}function Xj(t){return encodeURI(t)}function p_(t){return AA(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function kh(t){return decodeURIComponent(t)}function _A(t){return kh(t.replace(/\+/g,"%20"))}function RA(t){return`${p_(t.path)}${Zj(t.parameters)}`}function Zj(t){return Object.entries(t).map(([e,n])=>`;${p_(e)}=${p_(n)}`).join("")}function eB(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${xh(n)}=${xh(i)}`).join("&"):`${xh(n)}=${xh(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var tB=/^[^\/()?;#]+/;function c_(t){let e=t.match(tB);return e?e[0]:""}var nB=/^[^\/()?;=#]+/;function rB(t){let e=t.match(nB);return e?e[0]:""}var iB=/^[^=?&#]+/;function sB(t){let e=t.match(iB);return e?e[0]:""}var oB=/^[^&#]+/;function aB(t){let e=t.match(oB);return e?e[0]:""}var m_=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ne([],{}):new Ne([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ue]=new Ne(e,n)),r}parseSegment(){let e=c_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Q(4009,!1);return this.capture(e),new Ns(kh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=rB(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=c_(this.remaining);i&&(r=i,this.capture(r))}e[kh(n)]=kh(r)}parseQueryParam(e){let n=sB(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=aB(this.remaining);o&&(r=o,this.capture(r))}let i=_A(n),s=_A(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=c_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Q(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ue);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[ue]:new Ne([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Q(4011,!1)}};function xA(t){return t.segments.length>0?new Ne([],{[ue]:t}):t}function NA(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=NA(i);if(r===ue&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new Ne(t.segments,e);return cB(n)}function cB(t){if(t.numberOfChildren===1&&t.children[ue]){let e=t.children[ue];return new Ne(t.segments.concat(e.segments),e.children)}return t}function na(t){return t instanceof ki}function uB(t,e,n=null,r=null){let i=MA(t);return PA(i,e,n,r)}function MA(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new Ne(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=xA(r);return e??i}function PA(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return u_(i,i,i,n,r);let s=lB(e);if(s.toRoot())return u_(i,i,new Ne([],{}),n,r);let o=dB(s,i,t),a=o.processChildren?Zc(o.segmentGroup,o.index,s.commands):OA(o.segmentGroup,o.index,s.commands);return u_(i,o.segmentGroup,a,n,r)}function Fh(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function nu(t){return typeof t=="object"&&t!=null&&t.outlets}function u_(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let o;t===e?o=n:o=kA(t,e,n);let a=xA(NA(o));return new ki(a,s,i)}function kA(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=kA(s,e,n)}),new Ne(t.segments,r)}var Lh=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Fh(r[0]))throw new Q(4003,!1);let i=r.find(nu);if(i&&i!==bA(r))throw new Q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function lB(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Lh(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Lh(n,e,r)}var Zo=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function dB(t,e,n){if(t.isAbsolute)return new Zo(e,!0,0);if(!n)return new Zo(e,!1,NaN);if(n.parent===null)return new Zo(n,!0,0);let r=Fh(t.commands[0])?0:1,i=n.segments.length-1+r;return hB(n,i,t.numberOfDoubleDots)}function hB(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Q(4005,!1);i=r.segments.length}return new Zo(r,!1,i-s)}function fB(t){return nu(t[0])?t[0].outlets:{[ue]:t}}function OA(t,e,n){if(t??=new Ne([],{}),t.segments.length===0&&t.hasChildren())return Zc(t,e,n);let r=pB(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new Ne(t.segments.slice(0,r.pathIndex),{});return s.children[ue]=new Ne(t.segments.slice(r.pathIndex),t.children),Zc(s,0,i)}else return r.match&&i.length===0?new Ne(t.segments,{}):r.match&&!t.hasChildren()?g_(t,e,n):r.match?Zc(t,0,i):g_(t,e,n)}function Zc(t,e,n){if(n.length===0)return new Ne(t.segments,{});{let r=fB(n),i={};if(Object.keys(r).some(s=>s!==ue)&&t.children[ue]&&t.numberOfChildren===1&&t.children[ue].segments.length===0){let s=Zc(t.children[ue],e,n);return new Ne(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=OA(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Ne(t.segments,i)}}function pB(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(nu(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!wA(c,l,o))return s;r+=2}else{if(!wA(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function g_(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(nu(s)){let c=mB(s.outlets);return new Ne(r,c)}if(i===0&&Fh(n[0])){let c=t.segments[e];r.push(new Ns(c.path,vA(n[0]))),i++;continue}let o=nu(s)?s.outlets[ue]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Fh(a)?(r.push(new Ns(o,vA(a))),i+=2):(r.push(new Ns(o,{})),i++)}return new Ne(r,{})}function mB(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=g_(new Ne([],{}),0,r))}),e}function vA(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function wA(t,e,n){return t==n.path&&ir(e,n.parameters)}var eu="imperative",vt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(vt||{}),Tn=class{constructor(e,n){this.id=e,this.url=n}},ru=class extends Tn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=vt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},sr=class extends Tn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=vt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},fn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(fn||{}),y_=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(y_||{}),Oi=class extends Tn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=vt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ps=class extends Tn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=vt.NavigationSkipped}},iu=class extends Tn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=vt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Vh=class extends Tn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=vt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},__=class extends Tn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=vt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},v_=class extends Tn{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=vt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},w_=class extends Tn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=vt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},I_=class extends Tn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=vt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},E_=class{constructor(e){this.route=e,this.type=vt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},b_=class{constructor(e){this.route=e,this.type=vt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},C_=class{constructor(e){this.snapshot=e,this.type=vt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},T_=class{constructor(e){this.snapshot=e,this.type=vt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},D_=class{constructor(e){this.snapshot=e,this.type=vt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},S_=class{constructor(e){this.snapshot=e,this.type=vt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var su=class{},ou=class{constructor(e){this.url=e}};var A_=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new qh,this.attachRef=null}},qh=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new A_,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Uh=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=R_(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=R_(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=x_(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return x_(e,this._root).map(n=>n.value)}};function R_(t,e){if(t===e.value)return e;for(let n of e.children){let r=R_(t,n);if(r)return r}return null}function x_(t,e){if(t===e.value)return[e];for(let n of e.children){let r=x_(t,n);if(r.length)return r.unshift(e),r}return[]}var hn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Xo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var jh=class extends Uh{constructor(e,n){super(e),this.snapshot=n,B_(this,e)}toString(){return this.snapshot.toString()}};function FA(t){let e=gB(t),n=new ut([new Ns("",{})]),r=new ut({}),i=new ut({}),s=new ut({}),o=new ut(""),a=new ks(n,r,s,o,i,ue,t,e.root);return a.snapshot=e.root,new jh(new hn(a,[]),e)}function gB(t){let e={},n={},r={},i="",s=new au([],e,r,i,n,ue,t,null,{});return new Bh("",new hn(s,[]))}var ks=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(se(l=>l[lu]))??Z(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(se(e=>ta(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(se(e=>ta(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function j_(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:U(U({},e.params),t.params),data:U(U({},e.data),t.data),resolve:U(U(U(U({},t.data),e.data),i?.data),t._resolvedData)}:r={params:U({},t.params),data:U({},t.data),resolve:U(U({},t.data),t._resolvedData??{})},i&&VA(i)&&(r.resolve[lu]=i.title),r}var au=class{get title(){return this.data?.[lu]}constructor(e,n,r,i,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ta(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ta(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Bh=class extends Uh{constructor(e,n){super(n),this.url=e,B_(this,n)}toString(){return LA(this._root)}};function B_(t,e){e.value._routerState=t,e.children.forEach(n=>B_(t,n))}function LA(t){let e=t.children.length>0?` { ${t.children.map(LA).join(", ")} } `:"";return`${t.value}${e}`}function l_(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ir(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),ir(e.params,n.params)||t.paramsSubject.next(n.params),Gj(e.url,n.url)||t.urlSubject.next(n.url),ir(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function N_(t,e){let n=ir(t.params,e.params)&&Qj(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||N_(t.parent,e.parent))}function VA(t){return typeof t.title=="string"||t.title===null}var $_=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ue,this.activateEvents=new Vt,this.deactivateEvents=new Vt,this.attachEvents=new Vt,this.detachEvents=new Vt,this.parentContexts=j(qh),this.location=j(Ko),this.changeDetector=j(xi),this.environmentInjector=j(wn),this.inputBinder=j(H_,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Q(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new Q(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new M_(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=cn({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Cs]});let t=e;return t})(),M_=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===ks?this.route:e===qh?this.childContexts:this.parent.get(e,n)}},H_=new W("");function yB(t,e,n){let r=cu(t,e._root,n?n._root:void 0);return new jh(r,e)}function cu(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=_B(t,e,n);return new hn(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>cu(t,a)),o}}let r=vB(e.value),i=e.children.map(s=>cu(t,s));return new hn(r,i)}}function _B(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return cu(t,r,i);return cu(t,r)})}function vB(t){return new ks(new ut(t.url),new ut(t.params),new ut(t.queryParams),new ut(t.fragment),new ut(t.data),t.outlet,t.component,t)}var UA="ngNavigationCancelingError";function jA(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=na(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=BA(!1,fn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function BA(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[UA]=!0,n.cancellationCode=e,n}function wB(t){return $A(t)&&na(t.url)}function $A(t){return!!t&&t[UA]}var IB=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=je({type:e,selectors:[["ng-component"]],standalone:!0,features:[Be],decls:1,vars:0,template:function(i,s){i&1&&ce(0,"router-outlet")},dependencies:[$_],encapsulation:2});let t=e;return t})();function EB(t,e){return t.providers&&!t._injector&&(t._injector=ky(t.providers,e,`Route: ${t.path}`)),t._injector??e}function q_(t){let e=t.children&&t.children.map(q_),n=e?Oe(U({},t),{children:e}):U({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ue&&(n.component=IB),n}function or(t){return t.outlet||ue}function bB(t,e){let n=t.filter(r=>or(r)===e);return n.push(...t.filter(r=>or(r)!==e)),n}function du(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var CB=(t,e,n,r)=>se(i=>(new P_(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),P_=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),l_(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Xo(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Xo(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Xo(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Xo(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new S_(s.value.snapshot))}),e.children.length&&this.forwardEvent(new T_(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(l_(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),l_(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=du(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},$h=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ea=class{constructor(e,n){this.component=e,this.route=n}};function TB(t,e,n){let r=t._root,i=e?e._root:null;return Jc(r,i,n,[r.value])}function DB(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ia(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!kT(t)?t:e.get(t):r}function Jc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Xo(e);return t.children.forEach(o=>{SB(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>tu(a,n.getContext(o),i)),i}function SB(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=AB(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new $h(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Jc(t,e,a?a.children:null,r,i):Jc(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ea(a.outlet.component,o))}else o&&tu(e,a,i),i.canActivateChecks.push(new $h(r)),s.component?Jc(t,null,a?a.children:null,r,i):Jc(t,null,n,r,i);return i}function AB(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Ms(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ms(t.url,e.url)||!ir(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!N_(t,e)||!ir(t.queryParams,e.queryParams);case"paramsChange":default:return!N_(t,e)}}function tu(t,e,n){let r=Xo(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?tu(o,e.children.getContext(s),n):tu(o,null,n):tu(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ea(e.outlet.component,i)):n.canDeactivateChecks.push(new ea(null,i)):n.canDeactivateChecks.push(new ea(null,i))}function hu(t){return typeof t=="function"}function RB(t){return typeof t=="boolean"}function xB(t){return t&&hu(t.canLoad)}function NB(t){return t&&hu(t.canActivate)}function MB(t){return t&&hu(t.canActivateChild)}function PB(t){return t&&hu(t.canDeactivate)}function kB(t){return t&&hu(t.canMatch)}function HA(t){return t instanceof Rr||t?.name==="EmptyError"}var Nh=Symbol("INITIAL_VALUE");function ra(){return yn(t=>md(t.map(e=>e.pipe(lt(1),Qm(Nh)))).pipe(se(e=>{for(let n of e)if(n!==!0){if(n===Nh)return Nh;if(n===!1||n instanceof ki)return n}return!0}),on(e=>e!==Nh),lt(1)))}function OB(t,e){return rt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?Z(Oe(U({},n),{guardsResult:!0})):FB(o,r,i,t).pipe(rt(a=>a&&RB(a)?LB(r,s,t,e):Z(a)),se(a=>Oe(U({},n),{guardsResult:a})))})}function FB(t,e,n,r){return Je(t).pipe(rt(i=>$B(i.component,i.route,n,e,r)),Qn(i=>i!==!0,!0))}function LB(t,e,n,r){return Je(e).pipe(xo(i=>fi(UB(i.route.parent,r),VB(i.route,r),BB(t,i.path,n),jB(t,i.route,n))),Qn(i=>i!==!0,!0))}function VB(t,e){return t!==null&&e&&e(new D_(t)),Z(!0)}function UB(t,e){return t!==null&&e&&e(new C_(t)),Z(!0)}function jB(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let i=r.map(s=>gd(()=>{let o=du(e)??n,a=ia(s,o),c=NB(a)?a.canActivate(e,t):bs(o,()=>a(e,t));return Fi(c).pipe(Qn())}));return Z(i).pipe(ra())}function BB(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>DB(o)).filter(o=>o!==null).map(o=>gd(()=>{let a=o.guards.map(c=>{let l=du(o.node)??n,d=ia(c,l),f=MB(d)?d.canActivateChild(r,t):bs(l,()=>d(r,t));return Fi(f).pipe(Qn())});return Z(a).pipe(ra())}));return Z(s).pipe(ra())}function $B(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Z(!0);let o=s.map(a=>{let c=du(e)??i,l=ia(a,c),d=PB(l)?l.canDeactivate(t,e,n,r):bs(c,()=>l(t,e,n,r));return Fi(d).pipe(Qn())});return Z(o).pipe(ra())}function HB(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return Z(!0);let s=i.map(o=>{let a=ia(o,t),c=xB(a)?a.canLoad(e,n):bs(t,()=>a(e,n));return Fi(c)});return Z(s).pipe(ra(),qA(r))}function qA(t){return Om(dt(e=>{if(na(e))throw jA(t,e)}),se(e=>e===!0))}function qB(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return Z(!0);let s=i.map(o=>{let a=ia(o,t),c=kB(a)?a.canMatch(e,n):bs(t,()=>a(e,n));return Fi(c)});return Z(s).pipe(ra(),qA(r))}var uu=class{constructor(e){this.segmentGroup=e||null}},Hh=class extends Error{constructor(e){super(),this.urlTree=e}};function Jo(t){return Ro(new uu(t))}function GB(t){return Ro(new Q(4e3,!1))}function zB(t){return Ro(BA(!1,fn.GuardRejected))}var k_=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Z(r);if(i.numberOfChildren>1||!i.children[ue])return GB(e.redirectTo);i=i.children[ue]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Hh(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new ki(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Ne(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new Q(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},O_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function WB(t,e,n,r,i){let s=G_(t,e,n);return s.matched?(r=EB(e,r),qB(r,e,n,i).pipe(se(o=>o===!0?s:U({},O_)))):Z(s)}function G_(t,e,n){if(e.path==="**")return KB(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?U({},O_):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||qj)(n,t,e);if(!i)return U({},O_);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?U(U({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function KB(t){return{matched:!0,parameters:t.length>0?bA(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function IA(t,e,n,r){return n.length>0&&JB(t,n,r)?{segmentGroup:new Ne(e,YB(r,new Ne(n,t.children))),slicedSegments:[]}:n.length===0&&XB(t,n,r)?{segmentGroup:new Ne(t.segments,QB(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ne(t.segments,t.children),slicedSegments:n}}function QB(t,e,n,r){let i={};for(let s of n)if(Gh(t,e,s)&&!r[or(s)]){let o=new Ne([],{});i[or(s)]=o}return U(U({},r),i)}function YB(t,e){let n={};n[ue]=e;for(let r of t)if(r.path===""&&or(r)!==ue){let i=new Ne([],{});n[or(r)]=i}return n}function JB(t,e,n){return n.some(r=>Gh(t,e,r)&&or(r)!==ue)}function XB(t,e,n){return n.some(r=>Gh(t,e,r))}function Gh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function ZB(t,e,n,r){return or(t)!==r&&(r===ue||!Gh(e,n,t))?!1:G_(e,t,n).matched}function e$(t,e,n){return e.length===0&&!t.children[n]}var F_=class{};function t$(t,e,n,r,i,s,o="emptyOnly"){return new L_(t,e,n,r,i,o,s).recognize()}var n$=31,L_=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new k_(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Q(4002,`'${e.segmentGroup}'`)}recognize(){let e=IA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(se(n=>{let r=new au([],Object.freeze({}),Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,{},ue,this.rootComponentType,null,{}),i=new hn(r,n),s=new Bh("",i),o=uB(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,ue).pipe(an(r=>{if(r instanceof Hh)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof uu?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=j_(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(se(s=>s instanceof hn?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Je(i).pipe(xo(s=>{let o=r.children[s],a=bB(n,s);return this.processSegmentGroup(e,a,o,s)}),_d((s,o)=>(s.push(...o),s)),pi(null),Km(),rt(s=>{if(s===null)return Jo(r);let o=GA(s);return r$(o),Z(o)}))}processSegment(e,n,r,i,s,o){return Je(n).pipe(xo(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(an(c=>{if(c instanceof uu)return Z(null);throw c}))),Qn(a=>!!a),an(a=>{if(HA(a))return e$(r,i,s)?Z(new F_):Jo(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return ZB(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Jo(i):Jo(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:d}=G_(n,i,s);if(!a)return Jo(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>n$&&(this.allowRedirects=!1));let f=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,f).pipe(rt(m=>this.processSegment(e,r,n,m.concat(d),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=WB(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(yn(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(yn(({routes:c})=>{let l=r._loadedInjector??e,{consumedSegments:d,remainingSegments:f,parameters:m}=a,y=new au(d,m,Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,s$(r),or(r),r.component??r._loadedComponent??null,r,o$(r)),{segmentGroup:E,slicedSegments:x}=IA(n,d,f,c);if(x.length===0&&E.hasChildren())return this.processChildren(l,c,E).pipe(se(F=>F===null?null:new hn(y,F)));if(c.length===0&&x.length===0)return Z(new hn(y,[]));let R=or(r)===s;return this.processSegment(l,c,E,x,R?ue:s,!0).pipe(se(F=>new hn(y,F instanceof hn?[F]:[])))}))):Jo(n)))}getChildConfig(e,n,r){return n.children?Z({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Z({routes:n._loadedRoutes,injector:n._loadedInjector}):HB(e,n,r,this.urlSerializer).pipe(rt(i=>i?this.configLoader.loadChildren(e,n).pipe(dt(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):zB(n))):Z({routes:[],injector:e})}};function r$(t){t.sort((e,n)=>e.value.outlet===ue?-1:n.value.outlet===ue?1:e.value.outlet.localeCompare(n.value.outlet))}function i$(t){let e=t.value.routeConfig;return e&&e.path===""}function GA(t){let e=[],n=new Set;for(let r of t){if(!i$(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=GA(r.children);e.push(new hn(r.value,i))}return e.filter(r=>!n.has(r))}function s$(t){return t.data||{}}function o$(t){return t.resolve||{}}function a$(t,e,n,r,i,s){return rt(o=>t$(t,e,n,r,o.extractedUrl,i,s).pipe(se(({state:a,tree:c})=>Oe(U({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function c$(t,e){return rt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Z(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of zA(c))o.add(l);let a=0;return Je(o).pipe(xo(c=>s.has(c)?u$(c,r,t,e):(c.data=j_(c,c.parent,t).resolve,Z(void 0))),dt(()=>a++),No(1),rt(c=>a===o.size?Z(n):sn))})}function zA(t){let e=t.children.map(n=>zA(n)).flat();return[t,...e]}function u$(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!VA(i)&&(s[lu]=i.title),l$(s,t,e,r).pipe(se(o=>(t._resolvedData=o,t.data=j_(t,t.parent,n).resolve,null)))}function l$(t,e,n,r){let i=f_(t);if(i.length===0)return Z({});let s={};return Je(i).pipe(rt(o=>d$(t[o],e,n,r).pipe(Qn(),dt(a=>{s[o]=a}))),No(1),Tc(s),an(o=>HA(o)?sn:Ro(o)))}function d$(t,e,n,r){let i=du(e)??r,s=ia(t,i),o=s.resolve?s.resolve(e,n):bs(i,()=>s(e,n));return Fi(o)}function d_(t){return yn(e=>{let n=t(e);return n?Je(n).pipe(se(()=>e)):Z(e)})}var WA=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===ue);return i}getResolvedTitleForRoute(r){return r.data[lu]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:()=>j(h$),providedIn:"root"});let t=e;return t})(),h$=(()=>{let e=class e extends WA{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(Y(gA))},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),z_=new W("",{providedIn:"root",factory:()=>({})}),W_=new W(""),f$=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=j(Uy)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Z(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Fi(r.loadComponent()).pipe(se(KA),dt(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Dc(()=>{this.componentLoaders.delete(r)})),s=new Co(i,()=>new St).pipe(bo());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Z({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=p$(i,this.compiler,r,this.onLoadEndListener).pipe(Dc(()=>{this.childrenLoaders.delete(i)})),a=new Co(o,()=>new St).pipe(bo());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function p$(t,e,n,r){return Fi(t.loadChildren()).pipe(se(KA),rt(i=>i instanceof Lc||Array.isArray(i)?Z(i):Je(e.compileModuleAsync(i))),se(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(W_,[],{optional:!0,self:!0}).flat()),{routes:o.map(q_),injector:s}}))}function m$(t){return t&&typeof t=="object"&&"default"in t}function KA(t){return m$(t)?t.default:t}var K_=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:()=>j(g$),providedIn:"root"});let t=e;return t})(),g$=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),y$=new W("");var _$=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new St,this.transitionAbortSubject=new St,this.configLoader=j(f$),this.environmentInjector=j(wn),this.urlSerializer=j(U_),this.rootContexts=j(qh),this.location=j(zc),this.inputBindingEnabled=j(H_,{optional:!0})!==null,this.titleStrategy=j(WA),this.options=j(z_,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=j(K_),this.createViewTransition=j(y$,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Z(void 0),this.rootComponentType=null;let r=s=>this.events.next(new E_(s)),i=s=>this.events.next(new b_(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(Oe(U(U({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new ut({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:eu,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(on(o=>o.id!==0),se(o=>Oe(U({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),yn(o=>{let a=!1,c=!1;return Z(o).pipe(yn(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",fn.SupersededByNewNavigation),sn;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Oe(U({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!d&&f!=="reload"){let m="";return this.events.next(new Ps(l.id,this.urlSerializer.serialize(l.rawUrl),m,y_.IgnoredSameUrlNavigation)),l.resolve(null),sn}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Z(l).pipe(yn(m=>{let y=this.transitions?.getValue();return this.events.next(new ru(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),y!==this.transitions?.getValue()?sn:Promise.resolve(m)}),a$(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),dt(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=Oe(U({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let y=new Vh(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:m,extractedUrl:y,source:E,restoredState:x,extras:R}=l,F=new ru(m,this.urlSerializer.serialize(y),E,x);this.events.next(F);let q=FA(this.rootComponentType).snapshot;return this.currentTransition=o=Oe(U({},l),{targetSnapshot:q,urlAfterRedirects:y,extras:Oe(U({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,Z(o)}else{let m="";return this.events.next(new Ps(l.id,this.urlSerializer.serialize(l.extractedUrl),m,y_.IgnoredByUrlHandlingStrategy)),l.resolve(null),sn}}),dt(l=>{let d=new __(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),se(l=>(this.currentTransition=o=Oe(U({},l),{guards:TB(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),OB(this.environmentInjector,l=>this.events.next(l)),dt(l=>{if(o.guardsResult=l.guardsResult,na(l.guardsResult))throw jA(this.urlSerializer,l.guardsResult);let d=new v_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),on(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",fn.GuardRejected),!1)),d_(l=>{if(l.guards.canActivateChecks.length)return Z(l).pipe(dt(d=>{let f=new w_(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),yn(d=>{let f=!1;return Z(d).pipe(c$(this.paramsInheritanceStrategy,this.environmentInjector),dt({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",fn.NoDataFromResolver)}}))}),dt(d=>{let f=new I_(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),d_(l=>{let d=f=>{let m=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(f.routeConfig).pipe(dt(y=>{f.component=y}),se(()=>{})));for(let y of f.children)m.push(...d(y));return m};return md(d(l.targetSnapshot.root)).pipe(pi(null),lt(1))}),d_(()=>this.afterPreactivation()),yn(()=>{let{currentSnapshot:l,targetSnapshot:d}=o,f=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return f?Je(f).pipe(se(()=>o)):Z(o)}),se(l=>{let d=yB(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=Oe(U({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,o}),dt(()=>{this.events.next(new su)}),CB(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),lt(1),dt({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new sr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Ym(this.transitionAbortSubject.pipe(dt(l=>{throw l}))),Dc(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",fn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),an(l=>{if(c=!0,$A(l))this.events.next(new Oi(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),wB(l)?this.events.next(new ou(l.url)):o.resolve(!1);else{this.events.next(new iu(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(l))}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return sn}))}))}cancelNavigationTransition(r,i,s){let o=new Oi(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function v$(t){return t!==eu}var w$=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:()=>j(I$),providedIn:"root"});let t=e;return t})(),V_=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},I$=(()=>{let e=class e extends V_{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Wo(e)))(s||e)}})(),e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),QA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:()=>j(E$),providedIn:"root"});let t=e;return t})(),E$=(()=>{let e=class e extends QA{constructor(){super(...arguments),this.location=j(zc),this.urlSerializer=j(U_),this.options=j(z_,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=j(K_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ki,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=FA(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof ru)this.stateMemento=this.createStateMemento();else if(r instanceof Ps)this.rawUrlTree=i.initialUrl;else if(r instanceof Vh){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof su?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Oi&&(r.code===fn.GuardRejected||r.code===fn.NoDataFromResolver)?this.restoreHistory(i):r instanceof iu?this.restoreHistory(i,!0):r instanceof sr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=U(U({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=U(U({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Wo(e)))(s||e)}})(),e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Xc=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Xc||{});function b$(t,e){t.events.pipe(on(n=>n instanceof sr||n instanceof Oi||n instanceof iu||n instanceof Ps),se(n=>n instanceof sr||n instanceof Ps?Xc.COMPLETE:(n instanceof Oi?n.code===fn.Redirect||n.code===fn.SupersededByNewNavigation:!1)?Xc.REDIRECTING:Xc.FAILED),on(n=>n!==Xc.REDIRECTING),lt(1)).subscribe(()=>{e()})}function C$(t){throw t}var T$={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},D$={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},wt=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=j(mh),this.stateManager=j(QA),this.options=j(z_,{optional:!0})||{},this.pendingTasks=j(hh),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=j(_$),this.urlSerializer=j(U_),this.location=j(zc),this.urlHandlingStrategy=j(K_),this._events=new St,this.errorHandler=this.options.errorHandler||C$,this.navigated=!1,this.routeReuseStrategy=j(w$),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=j(W_,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!j(H_,{optional:!0}),this.eventsSubscription=new nt,this.isNgZoneEnabled=j(Te)instanceof Te&&Te.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Oi&&i.code!==fn.Redirect&&i.code!==fn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof sr)this.navigated=!0;else if(i instanceof ou){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||v$(s.source)};this.scheduleNavigation(a,eu,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}A$(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),eu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=U({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(q_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,d=l?this.currentUrlTree.fragment:a,f=null;switch(c){case"merge":f=U(U({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let m;try{let y=s?s.snapshot:this.routerState.snapshot.root;m=MA(y)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),m=this.currentUrlTree.root}return PA(m,r,f,d??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=na(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,eu,null,i)}navigate(r,i={skipLocationChange:!1}){return S$(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=U({},T$):i===!1?s=U({},D$):s=i,na(r))return yA(this.currentUrlTree,r,s);let o=this.parseUrl(r);return yA(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,d;a?(c=a.resolve,l=a.reject,d=a.promise):d=new Promise((m,y)=>{c=m,l=y});let f=this.pendingTasks.add();return b$(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(m=>Promise.reject(m))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function S$(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new Q(4008,!1)}function A$(t){return!(t instanceof su)&&!(t instanceof ou)}var Li=(()=>{let e=class e{constructor(r,i,s,o,a,c){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new St,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(d=>{d instanceof sr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,s,o,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(r!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:zD(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)($(wt),$(ks),_y("tabindex"),$(Ts),$(Ii),$(Ni))},e.\u0275dir=cn({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&Ie("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&fh("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[jt.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Rs],skipLocationChange:[jt.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Rs],replaceUrl:[jt.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Rs],routerLink:"routerLink"},standalone:!0,features:[Py,Cs]});let t=e;return t})();var R$=new W("");function YA(t,...e){return Wt([{provide:W_,multi:!0,useValue:t},[],{provide:ks,useFactory:x$,deps:[wt]},{provide:Vy,multi:!0,useFactory:M$},e.map(n=>n.\u0275providers)])}function x$(t){return t.routerState.root}function N$(t,e){return{\u0275kind:t,\u0275providers:e}}function M$(){let t=j(Rt);return e=>{let n=t.get(Hc);if(e!==n.components[0])return;let r=t.get(wt),i=t.get(P$);t.get(k$)===1&&r.initialNavigation(),t.get(O$,null,he.Optional)?.setUpPreloading(),t.get(R$,null,he.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var P$=new W("",{factory:()=>new St}),k$=new W("",{providedIn:"root",factory:()=>1});var O$=new W("");function JA(){return N$(6,[{provide:Ni,useClass:XS}])}var Y_={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var k=function(t,e){if(!t)throw Os(e)},Os=function(t){return new Error("Firebase Database ("+Y_.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var ZA=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},F$=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Wh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,d=s>>2,f=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;c||(y=64,o||(m=64)),r.push(n[d],n[f],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ZA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):F$(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new J_;let m=s<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),f!==64){let E=l<<6&192|f;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},J_=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Z_=function(t){let e=ZA(t);return Wh.encodeByteArray(e,!0)},fu=function(t){return Z_(t).replace(/\./g,"")},pu=function(t){try{return Wh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function eR(t){return tR(void 0,t)}function tR(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!L$(n)||(t[n]=tR(t[n],e[n]));return t}function L$(t){return t!=="__proto__"}function V$(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var U$=()=>V$().__FIREBASE_DEFAULTS__,j$=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},B$=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&pu(t[1]);return e&&JSON.parse(e)},Kh=()=>{try{return U$()||j$()||B$()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ev=t=>{var e,n;return(n=(e=Kh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},aa=t=>{let e=ev(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},tv=()=>{var t;return(t=Kh())===null||t===void 0?void 0:t.config},nv=t=>{var e;return(e=Kh())===null||e===void 0?void 0:e[`_${t}`]};var Vi=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function ca(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[fu(JSON.stringify(n)),fu(JSON.stringify(o)),""].join(".")}function ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mu(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ft())}function $$(){var t;let e=(t=Kh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nR(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Qh(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rR(){let t=ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ar(){return Y_.NODE_CLIENT===!0||Y_.NODE_ADMIN===!0}function iR(){return!$$()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rv(){try{return typeof indexedDB=="object"}catch{return!1}}function sR(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var H$="FirebaseError",Ht=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=H$,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Br.prototype.create)}},Br=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?q$(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ht(i,a,r)}};function q$(t,e){return t.replace(G$,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var G$=/\{\$([^}]+)}/g;function oa(t){return JSON.parse(t)}function pt(t){return JSON.stringify(t)}var oR=function(t){let e={},n={},r={},i="";try{let s=t.split(".");e=oa(pu(s[0])||""),n=oa(pu(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var aR=function(t){let e=oR(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},cR=function(t){let e=oR(t).claims;return typeof e=="object"&&e.admin===!0};function cr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Fs(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function gu(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function yu(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Ls(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(XA(s)&&XA(o)){if(!Ls(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function XA(t){return t!==null&&typeof t=="object"}function Vs(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ua(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function la(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}var zh=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let f=0;f<16;f++)r[f]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let f=0;f<16;f++)r[f]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let f=16;f<80;f++){let m=r[f-3]^r[f-8]^r[f-14]^r[f-16];r[f]=(m<<1|m>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,d;for(let f=0;f<80;f++){f<40?f<20?(l=a^s&(o^a),d=1518500249):(l=s^o^a,d=1859775393):f<60?(l=s&o|a&(s|o),d=2400959708):(l=s^o^a,d=3395469782);let m=(i<<5|i>>>27)+l+c+d+r[f]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=m}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function uR(t,e){let n=new X_(t,e);return n.subscribe.bind(n)}var X_=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");z$(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Q_),i.error===void 0&&(i.error=Q_),i.complete===void 0&&(i.complete=Q_);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function z$(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Q_(){}function Yh(t,e){return`${t} failed: ${e} argument `}var lR=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,k(r<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},_u=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var LZ=4*60*60*1e3;function We(t){return t&&t._delegate?t._delegate:t}var Nt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Us="[DEFAULT]";var Jh=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Vi;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(K$(e))try{this.getOrInitializeService({instanceIdentifier:Us})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Us){return this.instances.has(e)}getOptions(e=Us){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:W$(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Us){return this.component?this.component.multipleInstances?e:Us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function W$(t){return t===Us?void 0:t}function K$(t){return t.instantiationMode==="EAGER"}var vu=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Jh(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var Q$=[],pe=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(pe||{}),Y$={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},J$=pe.INFO,X$={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},Z$=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=X$[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ur=class{constructor(e){this.name=e,this._logLevel=J$,this._logHandler=Z$,this._userLogHandler=null,Q$.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Y$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}};var eH=(t,e)=>e.some(n=>t instanceof n),dR,hR;function tH(){return dR||(dR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nH(){return hR||(hR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var fR=new WeakMap,sv=new WeakMap,pR=new WeakMap,iv=new WeakMap,av=new WeakMap;function rH(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(lr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&fR.set(n,t)}).catch(()=>{}),av.set(e,t),e}function iH(t){if(sv.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});sv.set(t,e)}var ov={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||pR.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return lr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function mR(t){ov=t(ov)}function sH(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Xh(this),e,...n);return pR.set(r,e.sort?e.sort():[e]),lr(r)}:nH().includes(t)?function(...e){return t.apply(Xh(this),e),lr(fR.get(this))}:function(...e){return lr(t.apply(Xh(this),e))}}function oH(t){return typeof t=="function"?sH(t):(t instanceof IDBTransaction&&iH(t),eH(t,tH())?new Proxy(t,ov):t)}function lr(t){if(t instanceof IDBRequest)return rH(t);if(iv.has(t))return iv.get(t);let e=oH(t);return e!==t&&(iv.set(t,e),av.set(e,t)),e}var Xh=t=>av.get(t);function yR(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=lr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(lr(o.result),c.oldVersion,c.newVersion,lr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var aH=["get","getKey","getAll","getAllKeys","count"],cH=["put","add","delete","clear"],cv=new Map;function gR(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(cv.get(e))return cv.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=cH.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||aH.includes(n)))return;let s=function(o,...a){return v(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return cv.set(e,s),s}mR(t=>Oe(U({},t),{get:(e,n,r)=>gR(e,n)||t.get(e,n,r),has:(e,n)=>!!gR(e,n)||t.has(e,n)}));var lv=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(uH(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function uH(t){let e=t.getComponent();return e?.type==="VERSION"}var dv="@firebase/app",_R="0.10.4";var js=new ur("@firebase/app"),lH="@firebase/app-compat",dH="@firebase/analytics-compat",hH="@firebase/analytics",fH="@firebase/app-check-compat",pH="@firebase/app-check",mH="@firebase/auth",gH="@firebase/auth-compat",yH="@firebase/database",_H="@firebase/database-compat",vH="@firebase/functions",wH="@firebase/functions-compat",IH="@firebase/installations",EH="@firebase/installations-compat",bH="@firebase/messaging",CH="@firebase/messaging-compat",TH="@firebase/performance",DH="@firebase/performance-compat",SH="@firebase/remote-config",AH="@firebase/remote-config-compat",RH="@firebase/storage",xH="@firebase/storage-compat",NH="@firebase/firestore",MH="@firebase/vertexai-preview",PH="@firebase/firestore-compat",kH="firebase",OH="10.12.1";var hv="[DEFAULT]",FH={[dv]:"fire-core",[lH]:"fire-core-compat",[hH]:"fire-analytics",[dH]:"fire-analytics-compat",[pH]:"fire-app-check",[fH]:"fire-app-check-compat",[mH]:"fire-auth",[gH]:"fire-auth-compat",[yH]:"fire-rtdb",[_H]:"fire-rtdb-compat",[vH]:"fire-fn",[wH]:"fire-fn-compat",[IH]:"fire-iid",[EH]:"fire-iid-compat",[bH]:"fire-fcm",[CH]:"fire-fcm-compat",[TH]:"fire-perf",[DH]:"fire-perf-compat",[SH]:"fire-rc",[AH]:"fire-rc-compat",[RH]:"fire-gcs",[xH]:"fire-gcs-compat",[NH]:"fire-fst",[PH]:"fire-fst-compat",[MH]:"fire-vertex","fire-js":"fire-js",[kH]:"fire-js-all"};var wu=new Map,LH=new Map,fv=new Map;function vR(t,e){try{t.container.addComponent(e)}catch(n){js.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Dn(t){let e=t.name;if(fv.has(e))return js.debug(`There were multiple attempts to register component ${e}.`),!1;fv.set(e,t);for(let n of wu.values())vR(n,t);for(let n of LH.values())vR(n,t);return!0}function $r(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function jn(t){return t.settings!==void 0}var VH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ui=new Br("app","Firebase",VH);var pv=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Nt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ui.create("app-deleted",{appName:this._name})}};var Sn=OH;function yv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:hv,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ui.create("bad-app-name",{appName:String(i)});if(n||(n=tv()),!n)throw Ui.create("no-options");let s=wu.get(i);if(s){if(Ls(n,s.options)&&Ls(r,s.config))return s;throw Ui.create("duplicate-app",{appName:i})}let o=new vu(i);for(let c of fv.values())o.addComponent(c);let a=new pv(n,r,o);return wu.set(i,a),a}function dr(t=hv){let e=wu.get(t);if(!e&&t===hv&&tv())return yv();if(!e)throw Ui.create("no-app",{appName:t});return e}function Zh(){return Array.from(wu.values())}function Pe(t,e,n){var r;let i=(r=FH[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),js.warn(a.join(" "));return}Dn(new Nt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var UH="firebase-heartbeat-database",jH=1,Iu="firebase-heartbeat-store",uv=null;function bR(){return uv||(uv=yR(UH,jH,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Iu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ui.create("idb-open",{originalErrorMessage:t.message})})),uv}function BH(t){return v(this,null,function*(){try{let n=(yield bR()).transaction(Iu),r=yield n.objectStore(Iu).get(CR(t));return yield n.done,r}catch(e){if(e instanceof Ht)js.warn(e.message);else{let n=Ui.create("idb-get",{originalErrorMessage:e?.message});js.warn(n.message)}}})}function wR(t,e){return v(this,null,function*(){try{let r=(yield bR()).transaction(Iu,"readwrite");yield r.objectStore(Iu).put(e,CR(t)),yield r.done}catch(n){if(n instanceof Ht)js.warn(n.message);else{let r=Ui.create("idb-set",{originalErrorMessage:n?.message});js.warn(r.message)}}})}function CR(t){return`${t.name}!${t.options.appId}`}var $H=1024,HH=30*24*60*60*1e3,mv=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new gv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=IR();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=HH}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return v(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=IR(),{heartbeatsToSend:r,unsentEntries:i}=qH(this._heartbeatsCache.heartbeats),s=fu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function IR(){return new Date().toISOString().substring(0,10)}function qH(t,e=$H){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),ER(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ER(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var gv=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return rv()?sR().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield BH(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return wR(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return wR(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function ER(t){return fu(JSON.stringify({version:2,heartbeats:t})).length}function GH(t){Dn(new Nt("platform-logger",e=>new lv(e),"PRIVATE")),Dn(new Nt("heartbeat",e=>new mv(e),"PRIVATE")),Pe(dv,_R,t),Pe(dv,_R,"esm2017"),Pe("fire-js","")}GH("");var zH="firebase",WH="10.12.1";Pe(zH,WH,"app");var Bn=new Mr("ANGULARFIRE2_VERSION");function ji(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Hr=(t,e)=>{let n=e?[e]:Zh(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},hr=class{constructor(){return Hr(KH)}},KH="app-check";function da(){}var ef=class{zone;delegate;constructor(e,n=Bm){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},_v=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",da,{},da,da)),n.pipe(dt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},fr=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new ef(Zone.current)),this.insideAngular=n.run(()=>new ef(Zone.current,Ao)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(Y(Te))};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function tf(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function QH(t){return tf().ngZone.runOutsideAngular(()=>t())}function Bs(t){return tf().ngZone.run(()=>t())}function YH(t){return JH(tf())(t)}function JH(t){return function(n){return n=n.lift(new _v(t.ngZone)),n.pipe(hi(t.outsideAngular),di(t.insideAngular))}}var XH=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Bs(()=>t.apply(void 0,r))},Xe=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Bs(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",da,{},da,da))),r[s]=XH(r[s],n));let i=QH(()=>t.apply(this,r));if(!e)if(i instanceof X){let s=tf();return i.pipe(hi(s.outsideAngular),di(s.insideAngular))}else return Bs(()=>i);return i instanceof X?i.pipe(YH):i instanceof Promise?Bs(()=>new Promise((s,o)=>i.then(a=>Bs(()=>s(a)),a=>Bs(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Bs(()=>i)};var pn=class{constructor(e){return e}},$n=class{constructor(){return Zh()}};function ZH(t){return t&&t.length===1?t[0]:new pn(dr())}var vv=new W("angularfire2._apps"),eq={provide:pn,useFactory:ZH,deps:[[new ze,vv]]},tq={provide:$n,deps:[[new ze,vv]]};function nq(t){return(e,n)=>{let r=n.get(Ei);Pe("angularfire",Bn.full,"core"),Pe("angularfire",Bn.full,"app"),Pe("angular",kS.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new pn(i)}}function TR(t,...e){return Wt([eq,tq,{provide:vv,useFactory:nq(t),multi:!0,deps:[Te,Rt,fr,...e]}])}var DR=Xe(yv,!0);function HR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var qR=HR,GR=new Br("auth","Firebase",HR());var cf=new ur("@firebase/auth");function rq(t,...e){cf.logLevel<=pe.WARN&&cf.warn(`Auth (${Sn}): ${t}`,...e)}function rf(t,...e){cf.logLevel<=pe.ERROR&&cf.error(`Auth (${Sn}): ${t}`,...e)}function mr(t,...e){throw $v(t,...e)}function $s(t,...e){return $v(t,...e)}function zR(t,e,n){let r=Object.assign(Object.assign({},qR()),{[e]:n});return new Br("auth","Firebase",r).create(e,{appName:t.name})}function zr(t){return zR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $v(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return GR.create(t,...e)}function ee(t,e,...n){if(!t)throw $v(e,...n)}function qr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw rf(e),new Error(e)}function $i(t,e){t||qr(e)}function bv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function iq(){return SR()==="http:"||SR()==="https:"}function SR(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function sq(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iq()||nR()||"connection"in navigator)?navigator.onLine:!0}function oq(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Hs=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,$i(n>e,"Short delay should be less than long delay!"),this.isMobile=mu()||Qh()}get(){return sq()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Hv(t,e){$i(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var uf=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var aq={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var cq=new Hs(3e4,6e4);function Hi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function qi(s,o,a,c){return v(this,arguments,function*(t,e,n,r,i={}){return WR(t,i,()=>v(this,null,function*(){let l={},d={};r&&(e==="GET"?d=r:l={body:JSON.stringify(r)});let f=Vs(Object.assign({key:t.config.apiKey},d)).slice(1),m=yield t._getAdditionalHeaders();return m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode),uf.fetch()(KR(t,t.config.apiHost,n,f),Object.assign({method:e,headers:m,referrerPolicy:"no-referrer"},l))}))})}function WR(t,e,n){return v(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},aq),e);try{let i=new Cv(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw nf(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw nf(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw nf(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw nf(t,"user-disabled",o);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw zR(t,d,l);mr(t,d)}}catch(i){if(i instanceof Ht)throw i;mr(t,"network-request-failed",{message:String(i)})}})}function Ru(s,o,a,c){return v(this,arguments,function*(t,e,n,r,i={}){let l=yield qi(t,e,n,r,i);return"mfaPendingCredential"in l&&mr(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function KR(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?Hv(t.config,i):`${t.config.apiScheme}://${i}`}function uq(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Cv=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r($s(this.auth,"network-request-failed")),cq.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function nf(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=$s(t,e,r);return i.customData._tokenResponse=n,i}function AR(t){return t!==void 0&&t.enterprise!==void 0}var Tv=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return uq(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function lq(t,e){return v(this,null,function*(){return qi(t,"GET","/v2/recaptchaConfig",Hi(t,e))})}function dq(t,e){return v(this,null,function*(){return qi(t,"POST","/v1/accounts:delete",e)})}function QR(t,e){return v(this,null,function*(){return qi(t,"POST","/v1/accounts:lookup",e)})}function Eu(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function qv(t,e=!1){return v(this,null,function*(){let n=We(t),r=yield n.getIdToken(e),i=Gv(r);ee(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Eu(wv(i.auth_time)),issuedAtTime:Eu(wv(i.iat)),expirationTime:Eu(wv(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function wv(t){return Number(t)*1e3}function Gv(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return rf("JWT malformed, contained fewer than 3 sections"),null;try{let i=pu(n);return i?JSON.parse(i):(rf("Failed to decode base64 JWT payload"),null)}catch(i){return rf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function RR(t){let e=Gv(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Cu(t,e,n=!1){return v(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Ht&&hq(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function hq({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Dv=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),n)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Tu=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Eu(this.lastLoginAt),this.creationTime=Eu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function lf(t){return v(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Cu(t,QR(n,{idToken:r}));ee(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?YR(s.providerUserInfo):[],a=fq(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,d=c?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Tu(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)})}function zv(t){return v(this,null,function*(){let e=We(t);yield lf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function fq(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function YR(t){return t.map(e=>{var{providerId:n}=e,r=$m(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function pq(t,e){return v(this,null,function*(){let n=yield WR(t,{},()=>v(this,null,function*(){let r=Vs({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=KR(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",uf.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function mq(t,e){return v(this,null,function*(){return qi(t,"POST","/v2/accounts:revokeToken",Hi(t,e))})}var bu=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):RR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ee(e.length!==0,"internal-error");let n=RR(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return v(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield pq(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(ee(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ee(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ee(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return qr("not implemented")}};function Bi(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var ha=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=$m(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Dv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Tu(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let n=yield Cu(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return qv(this,e)}reload(){return zv(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield lf(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(jn(this.auth.app))return Promise.reject(zr(this.auth));let e=yield this.getIdToken();return yield Cu(this,dq(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,l,d;let f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,F=(l=n.createdAt)!==null&&l!==void 0?l:void 0,q=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:B,emailVerified:z,isAnonymous:xe,providerData:re,stsTokenManager:C}=n;ee(B&&C,e,"internal-error");let _=bu.fromJSON(this.name,C);ee(typeof B=="string",e,"internal-error"),Bi(f,e.name),Bi(m,e.name),ee(typeof z=="boolean",e,"internal-error"),ee(typeof xe=="boolean",e,"internal-error"),Bi(y,e.name),Bi(E,e.name),Bi(x,e.name),Bi(R,e.name),Bi(F,e.name),Bi(q,e.name);let w=new t({uid:B,auth:e,email:m,emailVerified:z,displayName:f,isAnonymous:xe,photoURL:E,phoneNumber:y,tenantId:x,stsTokenManager:_,createdAt:F,lastLoginAt:q});return re&&Array.isArray(re)&&(w.providerData=re.map(b=>Object.assign({},b))),R&&(w._redirectEventId=R),w}static _fromIdTokenResponse(e,n,r=!1){return v(this,null,function*(){let i=new bu;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield lf(s),s})}static _fromGetAccountInfoResponse(e,n,r){return v(this,null,function*(){let i=n.users[0];ee(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?YR(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new bu;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Tu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var xR=new Map;function Gr(t){$i(t instanceof Function,"Expected a class definition");let e=xR.get(t);return e?($i(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,xR.set(t,e),e)}var gq=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(n,r){return v(this,null,function*(){this.storage[n]=r})}_get(n){return v(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return v(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Sv=gq;function sf(t,e,n){return`firebase:${t}:${e}:${n}`}var df=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=sf(this.userKey,i.apiKey,s),this.fullPersistenceKey=sf("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?ha._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return v(this,null,function*(){if(!n.length)return new t(Gr(Sv),e,r);let i=(yield Promise.all(n.map(l=>v(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Gr(Sv),o=sf(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let d=yield l._get(o);if(d){let f=ha._fromJSON(e,d);l!==s&&(a=f),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>v(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function NR(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ZR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(JR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tx(e))return"Blackberry";if(nx(e))return"Webos";if(Wv(e))return"Safari";if((e.includes("chrome/")||XR(e))&&!e.includes("edge/"))return"Chrome";if(ex(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function JR(t=ft()){return/firefox\//i.test(t)}function Wv(t=ft()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function XR(t=ft()){return/crios\//i.test(t)}function ZR(t=ft()){return/iemobile/i.test(t)}function ex(t=ft()){return/android/i.test(t)}function tx(t=ft()){return/blackberry/i.test(t)}function nx(t=ft()){return/webos/i.test(t)}function vf(t=ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function yq(t=ft()){var e;return vf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _q(){return rR()&&document.documentMode===10}function rx(t=ft()){return vf(t)||ex(t)||nx(t)||tx(t)||/windows phone/i.test(t)||ZR(t)}function vq(){try{return!!(window&&window!==window.top)}catch{return!1}}function ix(t,e=[]){let n;switch(t){case"Browser":n=NR(ft());break;case"Worker":n=`${NR(ft())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Sn}/${r}`}var Av=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function wq(n){return v(this,arguments,function*(t,e={}){return qi(t,"GET","/v2/passwordPolicy",Hi(t,e))})}var Iq=6,Rv=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Iq,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var xv=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hf(this),this.idTokenSubscription=new hf(this),this.beforeStateQueue=new Av(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=GR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Gr(n)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield df.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let n=yield QR(this,{idToken:e}),r=yield ha._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var n;if(jn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield lf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=oq()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(jn(this.app))return Promise.reject(zr(this));let n=e?We(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return v(this,null,function*(){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return jn(this.app)?Promise.reject(zr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return jn(this.app)?Promise.reject(zr(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(Gr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield wq(this),n=new Rv(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Br("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield mq(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Gr(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=yield df.create(this,[Gr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ix(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return v(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&rq(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Gs(t){return We(t)}var hf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=uR(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var wf={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Eq(t){wf=t}function sx(t){return wf.loadJS(t)}function bq(){return wf.recaptchaEnterpriseScript}function Cq(){return wf.gapiScript}function ox(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var Tq="recaptcha-enterprise",Dq="NO_RECAPTCHA",Nv=class{constructor(e){this.type=Tq,this.auth=Gs(e)}verify(e="verify",n=!1){return v(this,null,function*(){function r(s){return v(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>v(this,null,function*(){lq(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Tv(c);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(s,o,a){let c=window.grecaptcha;AR(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(Dq)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&AR(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=bq();c.length!==0&&(c+=a),sx(c).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function MR(t,e,n,r=!1){return v(this,null,function*(){let i=new Nv(t),s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function Mv(t,e,n,r){return v(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield MR(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>v(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield MR(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}))})}function Kv(t,e){let n=$r(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Ls(s,e??{}))return i;mr(i,"already-initialized")}return n.initialize({options:e})}function Sq(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Gr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Qv(t,e,n){let r=Gs(t);ee(r._canInitEmulator,r,"emulator-config-failed"),ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=ax(e),{host:o,port:a}=Aq(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||Rq()}function ax(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Aq(t){let e=ax(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:PR(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:PR(o)}}}function PR(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function Rq(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Du=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return qr("not implemented")}_getIdTokenResponse(e){return qr("not implemented")}_linkToIdToken(e,n){return qr("not implemented")}_getReauthenticationResolver(e){return qr("not implemented")}};function xq(t,e){return v(this,null,function*(){return qi(t,"POST","/v1/accounts:signUp",e)})}function Nq(t,e){return v(this,null,function*(){return Ru(t,"POST","/v1/accounts:signInWithPassword",Hi(t,e))})}function Mq(t,e){return v(this,null,function*(){return Ru(t,"POST","/v1/accounts:signInWithEmailLink",Hi(t,e))})}function Pq(t,e){return v(this,null,function*(){return Ru(t,"POST","/v1/accounts:signInWithEmailLink",Hi(t,e))})}var Su=class t extends Du{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mv(e,n,"signInWithPassword",Nq);case"emailLink":return Mq(e,{email:this._email,oobCode:this._password});default:mr(e,"internal-error")}})}_linkToIdToken(e,n){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mv(e,r,"signUpPassword",xq);case"emailLink":return Pq(e,{idToken:n,email:this._email,oobCode:this._password});default:mr(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Iv(t,e){return v(this,null,function*(){return Ru(t,"POST","/v1/accounts:signInWithIdp",Hi(t,e))})}function kq(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Oq(t){let e=ua(la(t)).link,n=e?ua(la(e)).deep_link_id:null,r=ua(la(t)).deep_link_id;return(r?ua(la(r)).link:null)||r||n||e||t}var ff=class t{constructor(e){var n,r,i,s,o,a;let c=ua(la(e)),l=(n=c.apiKey)!==null&&n!==void 0?n:null,d=(r=c.oobCode)!==null&&r!==void 0?r:null,f=kq((i=c.mode)!==null&&i!==void 0?i:null);ee(l&&d&&f,"argument-error"),this.apiKey=l,this.operation=f,this.code=d,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=Oq(e);try{return new t(n)}catch{return null}}};var cx=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Su._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=ff.parseLink(r);return ee(i,"argument-error"),Su._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),pf=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Pv=class extends pf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function Fq(t,e){return v(this,null,function*(){return Ru(t,"POST","/v1/accounts:signUp",Hi(t,e))})}var fa=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return v(this,null,function*(){let s=yield ha._fromIdTokenResponse(e,r,i),o=kR(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=kR(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function kR(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var kv=class t extends Ht{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function ux(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?kv._fromErrorAndOperation(t,s,e,r):s})}function Lq(t,e,n=!1){return v(this,null,function*(){let r=yield Cu(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return fa._forOperation(t,"link",r)})}function Vq(t,e,n=!1){return v(this,null,function*(){let{auth:r}=t;if(jn(r.app))return Promise.reject(zr(r));let i="reauthenticate";try{let s=yield Cu(t,ux(r,i,e,t),n);ee(s.idToken,r,"internal-error");let o=Gv(s.idToken);ee(o,r,"internal-error");let{sub:a}=o;return ee(t.uid===a,r,"user-mismatch"),fa._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&mr(r,"user-mismatch"),s}})}function lx(t,e,n=!1){return v(this,null,function*(){if(jn(t.app))return Promise.reject(zr(t));let r="signIn",i=yield ux(t,r,e),s=yield fa._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function Yv(t,e){return v(this,null,function*(){return lx(Gs(t),e)})}function dx(t){return v(this,null,function*(){let e=Gs(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Jv(t,e,n){return v(this,null,function*(){if(jn(t.app))return Promise.reject(zr(t));let r=Gs(t),o=yield Mv(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Fq).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&dx(t),c}),a=yield fa._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function Xv(t,e,n){return jn(t.app)?Promise.reject(zr(t)):Yv(We(t),cx.credential(e,n)).catch(r=>v(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&dx(t),r}))}function Zv(t,e,n,r){return We(t).onIdTokenChanged(e,n,r)}function ew(t,e,n){return We(t).beforeAuthStateChanged(e,n)}function tw(t,e,n,r){return We(t).onAuthStateChanged(e,n,r)}function nw(t){return We(t).signOut()}var mf="__sak";var gf=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(mf,"1"),this.storage.removeItem(mf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function Uq(){let t=ft();return Wv(t)||vf(t)}var jq=1e3,Bq=10,$q=(()=>{class t extends gf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Uq()&&vq(),this.fallbackToPolling=rx(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(i);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);_q()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,Bq):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},jq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return v(this,null,function*(){yield ui(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return v(this,null,function*(){let r=yield ui(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return v(this,null,function*(){yield ui(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),hx=$q;var Hq=(()=>{class t extends gf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),rw=Hq;function qq(t){return Promise.all(t.map(e=>v(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var Gq=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return v(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(d=>v(this,null,function*(){return d(r.origin,o)})),l=yield qq(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function fx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Ov=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=fx("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){let m=f;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function pr(){return window}function zq(t){pr().location.href=t}function px(){return typeof pr().WorkerGlobalScope<"u"&&typeof pr().importScripts=="function"}function Wq(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function Kq(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Qq(){return px()?self:null}var mx="firebaseLocalStorageDb",Yq=1,yf="firebaseLocalStorage",gx="fbase_key",qs=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function If(t,e){return t.transaction([yf],e?"readwrite":"readonly").objectStore(yf)}function Jq(){let t=indexedDB.deleteDatabase(mx);return new qs(t).toPromise()}function Fv(){let t=indexedDB.open(mx,Yq);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(yf,{keyPath:gx})}catch(i){n(i)}}),t.addEventListener("success",()=>v(this,null,function*(){let r=t.result;r.objectStoreNames.contains(yf)?e(r):(r.close(),yield Jq(),e(yield Fv()))}))})}function OR(t,e,n){return v(this,null,function*(){let r=If(t,!0).put({[gx]:e,value:n});return new qs(r).toPromise()})}function Xq(t,e){return v(this,null,function*(){let n=If(t,!1).get(e),r=yield new qs(n).toPromise();return r===void 0?null:r.value})}function FR(t,e){let n=If(t,!0).delete(e);return new qs(n).toPromise()}var Zq=800,e4=3,t4=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield Fv(),this.db)})}_withRetries(n){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>e4)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return px()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=Gq._getInstance(Qq()),this.receiver._subscribe("keyChanged",(n,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var n,r;if(this.activeServiceWorker=yield Wq(),!this.activeServiceWorker)return;this.sender=new Ov(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||Kq()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Fv();return yield OR(n,mf,"1"),yield FR(n,mf),!0}catch{}return!1})}_withPendingWrite(n){return v(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>OR(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return v(this,null,function*(){let r=yield this._withRetries(i=>Xq(i,n));return this.localCache[n]=r,r})}_remove(n){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>FR(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return v(this,null,function*(){let n=yield this._withRetries(s=>{let o=If(s,!1).getAll();return new qs(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),Zq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),yx=t4;var Ree=ox("rcb"),xee=new Hs(3e4,6e4);function n4(t,e){return e?Gr(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Au=class extends Du{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Iv(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Iv(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Iv(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function r4(t){return lx(t.auth,new Au(t),t.bypassAuthState)}function i4(t){let{auth:e,user:n}=t;return ee(n,e,"internal-error"),Vq(n,new Au(t),t.bypassAuthState)}function s4(t){return v(this,null,function*(){let{auth:e,user:n}=t;return ee(n,e,"internal-error"),Lq(n,new Au(t),t.bypassAuthState)})}var Lv=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return r4;case"linkViaPopup":case"linkViaRedirect":return s4;case"reauthViaPopup":case"reauthViaRedirect":return i4;default:mr(this.auth,"internal-error")}}resolve(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Nee=new Hs(2e3,1e4);var o4="pendingRedirect",of=new Map,Vv=class t extends Lv{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=of.get(this.auth._key());if(!e){try{let r=(yield a4(this.resolver,this.auth))?yield ui(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}of.set(this.auth._key(),e)}return this.bypassAuthState||of.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return ui(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,ui(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function a4(t,e){return v(this,null,function*(){let n=l4(e),r=u4(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function c4(t,e){of.set(t._key(),e)}function u4(t){return Gr(t._redirectPersistence)}function l4(t){return sf(o4,t.config.apiKey,t.name)}function d4(t,e,n=!1){return v(this,null,function*(){if(jn(t.app))return Promise.reject(zr(t));let r=Gs(t),i=n4(r,e),o=yield new Vv(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var h4=10*60*1e3,Uv=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!f4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!_x(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError($s(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=h4&&this.cachedEventUids.clear(),this.cachedEventUids.has(LR(e))}saveEventToCache(e){this.cachedEventUids.add(LR(e)),this.lastProcessedEventTime=Date.now()}};function LR(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function _x({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function f4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _x(t);default:return!1}}function p4(n){return v(this,arguments,function*(t,e={}){return qi(t,"GET","/v1/projects",e)})}var m4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,g4=/^https?/;function y4(t){return v(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield p4(t);for(let n of e)try{if(_4(n))return}catch{}mr(t,"unauthorized-domain")})}function _4(t){let e=bv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!g4.test(n))return!1;if(m4.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var v4=new Hs(3e4,6e4);function VR(){let t=pr().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function w4(t){return new Promise((e,n)=>{var r,i,s;function o(){VR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{VR(),n($s(t,"network-request-failed"))},timeout:v4.get()})}if(!((i=(r=pr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=pr().gapi)===null||s===void 0)&&s.load)o();else{let a=ox("iframefcb");return pr()[a]=()=>{gapi.load?o():n($s(t,"network-request-failed"))},sx(`${Cq()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw af=null,e})}var af=null;function I4(t){return af=af||w4(t),af}var E4=new Hs(5e3,15e3),b4="__/auth/iframe",C4="emulator/auth/iframe",T4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},D4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function S4(t){let e=t.config;ee(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Hv(e,C4):`https://${t.config.authDomain}/${b4}`,r={apiKey:e.apiKey,appName:t.name,v:Sn},i=D4.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Vs(r).slice(1)}`}function A4(t){return v(this,null,function*(){let e=yield I4(t),n=pr().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:S4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:T4,dontclear:!0},r=>new Promise((i,s)=>v(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=$s(t,"network-request-failed"),a=pr().setTimeout(()=>{s(o)},E4.get());function c(){pr().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var R4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},x4=500,N4=600,M4="_blank",P4="http://localhost",_f=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function k4(t,e,n,r=x4,i=N4){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},R4),{width:r.toString(),height:i.toString(),top:s,left:o}),l=ft().toLowerCase();n&&(a=XR(l)?M4:n),JR(l)&&(e=e||P4,c.scrollbars="yes");let d=Object.entries(c).reduce((m,[y,E])=>`${m}${y}=${E},`,"");if(yq(l)&&a!=="_self")return O4(e||"",a),new _f(null);let f=window.open(e||"",a,d);ee(f,t,"popup-blocked");try{f.focus()}catch{}return new _f(f)}function O4(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var F4="__/auth/handler",L4="emulator/auth/handler",V4=encodeURIComponent("fac");function UR(t,e,n,r,i,s){return v(this,null,function*(){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Sn,eventId:i};if(e instanceof pf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",gu(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,f]of Object.entries(s||{}))o[d]=f}if(e instanceof Pv){let d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=yield t._getAppCheckToken(),l=c?`#${V4}=${encodeURIComponent(c)}`:"";return`${U4(t)}?${Vs(a).slice(1)}${l}`})}function U4({config:t}){return t.emulator?Hv(t,L4):`https://${t.authDomain}/${F4}`}var Ev="webStorageSupport",jv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rw,this._completeRedirectFn=d4,this._overrideRedirectResult=c4}_openPopup(e,n,r,i){return v(this,null,function*(){var s;$i((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield UR(e,n,r,bv(),i);return k4(e,o,fx())})}_openRedirect(e,n,r,i){return v(this,null,function*(){yield this._originValidation(e);let s=yield UR(e,n,r,bv(),i);return zq(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):($i(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return v(this,null,function*(){let n=yield A4(e),r=new Uv(e);return n.register("authEvent",i=>(ee(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ev,{type:Ev},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Ev];o!==void 0&&n(!!o),mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=y4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return rx()||Wv()||vf()}},vx=jv;var jR="@firebase/auth",BR="1.7.3";var Bv=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function j4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function B4(t){Dn(new Nt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ee(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ix(t)},l=new xv(r,i,s,c);return Sq(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Dn(new Nt("auth-internal",e=>{let n=Gs(e.getProvider("auth").getImmediate());return(r=>new Bv(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pe(jR,BR,j4(t)),Pe(jR,BR,"esm2017")}var $4=5*60,H4=nv("authIdTokenMaxAge")||$4,$R=null,q4=t=>e=>v(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>H4)return;let i=n?.token;$R!==i&&($R=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function iw(t=dr()){let e=$r(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Kv(t,{popupRedirectResolver:vx,persistence:[yx,hx,rw]}),r=nv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=q4(s.toString());ew(n,o,()=>o(n.currentUser)),Zv(n,a=>o(a))}}let i=ev("auth");return i&&Qv(n,`http://${i}`),n}function G4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Eq({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=$s("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",G4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});B4("Browser");var wx="auth",mn=class{constructor(e){return e}},Wr=class{constructor(){return Hr(wx)}};var sw=new W("angularfire2.auth-instances");function kG(t,e){let n=ji(wx,t,e);return n&&new mn(n)}function OG(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new mn(r)}}var FG={provide:Wr,deps:[[new ze,sw]]},LG={provide:mn,useFactory:kG,deps:[[new ze,sw],pn]};function Ix(t,...e){return Pe("angularfire",Bn.full,"auth"),Wt([LG,FG,{provide:sw,useFactory:OG(t),multi:!0,deps:[Te,Rt,fr,$n,[new ze,hr],...e]}])}var Ex=Xe(Jv,!0);var bx=Xe(iw,!0);var Cx=Xe(tw,!0);var Tx=Xe(Xv,!0);var Dx=Xe(nw,!0);var Sx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ax={};var Gi,aw;(function(){var t;function e(C,_){function w(){}w.prototype=_.prototype,C.D=_.prototype,C.prototype=new w,C.prototype.constructor=C,C.C=function(b,T,S){for(var I=Array(arguments.length-2),Dr=2;Dr<arguments.length;Dr++)I[Dr-2]=arguments[Dr];return _.prototype[T].apply(b,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,_,w){w||(w=0);var b=Array(16);if(typeof _=="string")for(var T=0;16>T;++T)b[T]=_.charCodeAt(w++)|_.charCodeAt(w++)<<8|_.charCodeAt(w++)<<16|_.charCodeAt(w++)<<24;else for(T=0;16>T;++T)b[T]=_[w++]|_[w++]<<8|_[w++]<<16|_[w++]<<24;_=C.g[0],w=C.g[1],T=C.g[2];var S=C.g[3],I=_+(S^w&(T^S))+b[0]+3614090360&4294967295;_=w+(I<<7&4294967295|I>>>25),I=S+(T^_&(w^T))+b[1]+3905402710&4294967295,S=_+(I<<12&4294967295|I>>>20),I=T+(w^S&(_^w))+b[2]+606105819&4294967295,T=S+(I<<17&4294967295|I>>>15),I=w+(_^T&(S^_))+b[3]+3250441966&4294967295,w=T+(I<<22&4294967295|I>>>10),I=_+(S^w&(T^S))+b[4]+4118548399&4294967295,_=w+(I<<7&4294967295|I>>>25),I=S+(T^_&(w^T))+b[5]+1200080426&4294967295,S=_+(I<<12&4294967295|I>>>20),I=T+(w^S&(_^w))+b[6]+2821735955&4294967295,T=S+(I<<17&4294967295|I>>>15),I=w+(_^T&(S^_))+b[7]+4249261313&4294967295,w=T+(I<<22&4294967295|I>>>10),I=_+(S^w&(T^S))+b[8]+1770035416&4294967295,_=w+(I<<7&4294967295|I>>>25),I=S+(T^_&(w^T))+b[9]+2336552879&4294967295,S=_+(I<<12&4294967295|I>>>20),I=T+(w^S&(_^w))+b[10]+4294925233&4294967295,T=S+(I<<17&4294967295|I>>>15),I=w+(_^T&(S^_))+b[11]+2304563134&4294967295,w=T+(I<<22&4294967295|I>>>10),I=_+(S^w&(T^S))+b[12]+1804603682&4294967295,_=w+(I<<7&4294967295|I>>>25),I=S+(T^_&(w^T))+b[13]+4254626195&4294967295,S=_+(I<<12&4294967295|I>>>20),I=T+(w^S&(_^w))+b[14]+2792965006&4294967295,T=S+(I<<17&4294967295|I>>>15),I=w+(_^T&(S^_))+b[15]+1236535329&4294967295,w=T+(I<<22&4294967295|I>>>10),I=_+(T^S&(w^T))+b[1]+4129170786&4294967295,_=w+(I<<5&4294967295|I>>>27),I=S+(w^T&(_^w))+b[6]+3225465664&4294967295,S=_+(I<<9&4294967295|I>>>23),I=T+(_^w&(S^_))+b[11]+643717713&4294967295,T=S+(I<<14&4294967295|I>>>18),I=w+(S^_&(T^S))+b[0]+3921069994&4294967295,w=T+(I<<20&4294967295|I>>>12),I=_+(T^S&(w^T))+b[5]+3593408605&4294967295,_=w+(I<<5&4294967295|I>>>27),I=S+(w^T&(_^w))+b[10]+38016083&4294967295,S=_+(I<<9&4294967295|I>>>23),I=T+(_^w&(S^_))+b[15]+3634488961&4294967295,T=S+(I<<14&4294967295|I>>>18),I=w+(S^_&(T^S))+b[4]+3889429448&4294967295,w=T+(I<<20&4294967295|I>>>12),I=_+(T^S&(w^T))+b[9]+568446438&4294967295,_=w+(I<<5&4294967295|I>>>27),I=S+(w^T&(_^w))+b[14]+3275163606&4294967295,S=_+(I<<9&4294967295|I>>>23),I=T+(_^w&(S^_))+b[3]+4107603335&4294967295,T=S+(I<<14&4294967295|I>>>18),I=w+(S^_&(T^S))+b[8]+1163531501&4294967295,w=T+(I<<20&4294967295|I>>>12),I=_+(T^S&(w^T))+b[13]+2850285829&4294967295,_=w+(I<<5&4294967295|I>>>27),I=S+(w^T&(_^w))+b[2]+4243563512&4294967295,S=_+(I<<9&4294967295|I>>>23),I=T+(_^w&(S^_))+b[7]+1735328473&4294967295,T=S+(I<<14&4294967295|I>>>18),I=w+(S^_&(T^S))+b[12]+2368359562&4294967295,w=T+(I<<20&4294967295|I>>>12),I=_+(w^T^S)+b[5]+4294588738&4294967295,_=w+(I<<4&4294967295|I>>>28),I=S+(_^w^T)+b[8]+2272392833&4294967295,S=_+(I<<11&4294967295|I>>>21),I=T+(S^_^w)+b[11]+1839030562&4294967295,T=S+(I<<16&4294967295|I>>>16),I=w+(T^S^_)+b[14]+4259657740&4294967295,w=T+(I<<23&4294967295|I>>>9),I=_+(w^T^S)+b[1]+2763975236&4294967295,_=w+(I<<4&4294967295|I>>>28),I=S+(_^w^T)+b[4]+1272893353&4294967295,S=_+(I<<11&4294967295|I>>>21),I=T+(S^_^w)+b[7]+4139469664&4294967295,T=S+(I<<16&4294967295|I>>>16),I=w+(T^S^_)+b[10]+3200236656&4294967295,w=T+(I<<23&4294967295|I>>>9),I=_+(w^T^S)+b[13]+681279174&4294967295,_=w+(I<<4&4294967295|I>>>28),I=S+(_^w^T)+b[0]+3936430074&4294967295,S=_+(I<<11&4294967295|I>>>21),I=T+(S^_^w)+b[3]+3572445317&4294967295,T=S+(I<<16&4294967295|I>>>16),I=w+(T^S^_)+b[6]+76029189&4294967295,w=T+(I<<23&4294967295|I>>>9),I=_+(w^T^S)+b[9]+3654602809&4294967295,_=w+(I<<4&4294967295|I>>>28),I=S+(_^w^T)+b[12]+3873151461&4294967295,S=_+(I<<11&4294967295|I>>>21),I=T+(S^_^w)+b[15]+530742520&4294967295,T=S+(I<<16&4294967295|I>>>16),I=w+(T^S^_)+b[2]+3299628645&4294967295,w=T+(I<<23&4294967295|I>>>9),I=_+(T^(w|~S))+b[0]+4096336452&4294967295,_=w+(I<<6&4294967295|I>>>26),I=S+(w^(_|~T))+b[7]+1126891415&4294967295,S=_+(I<<10&4294967295|I>>>22),I=T+(_^(S|~w))+b[14]+2878612391&4294967295,T=S+(I<<15&4294967295|I>>>17),I=w+(S^(T|~_))+b[5]+4237533241&4294967295,w=T+(I<<21&4294967295|I>>>11),I=_+(T^(w|~S))+b[12]+1700485571&4294967295,_=w+(I<<6&4294967295|I>>>26),I=S+(w^(_|~T))+b[3]+2399980690&4294967295,S=_+(I<<10&4294967295|I>>>22),I=T+(_^(S|~w))+b[10]+4293915773&4294967295,T=S+(I<<15&4294967295|I>>>17),I=w+(S^(T|~_))+b[1]+2240044497&4294967295,w=T+(I<<21&4294967295|I>>>11),I=_+(T^(w|~S))+b[8]+1873313359&4294967295,_=w+(I<<6&4294967295|I>>>26),I=S+(w^(_|~T))+b[15]+4264355552&4294967295,S=_+(I<<10&4294967295|I>>>22),I=T+(_^(S|~w))+b[6]+2734768916&4294967295,T=S+(I<<15&4294967295|I>>>17),I=w+(S^(T|~_))+b[13]+1309151649&4294967295,w=T+(I<<21&4294967295|I>>>11),I=_+(T^(w|~S))+b[4]+4149444226&4294967295,_=w+(I<<6&4294967295|I>>>26),I=S+(w^(_|~T))+b[11]+3174756917&4294967295,S=_+(I<<10&4294967295|I>>>22),I=T+(_^(S|~w))+b[2]+718787259&4294967295,T=S+(I<<15&4294967295|I>>>17),I=w+(S^(T|~_))+b[9]+3951481745&4294967295,C.g[0]=C.g[0]+_&4294967295,C.g[1]=C.g[1]+(T+(I<<21&4294967295|I>>>11))&4294967295,C.g[2]=C.g[2]+T&4294967295,C.g[3]=C.g[3]+S&4294967295}r.prototype.u=function(C,_){_===void 0&&(_=C.length);for(var w=_-this.blockSize,b=this.B,T=this.h,S=0;S<_;){if(T==0)for(;S<=w;)i(this,C,S),S+=this.blockSize;if(typeof C=="string"){for(;S<_;)if(b[T++]=C.charCodeAt(S++),T==this.blockSize){i(this,b),T=0;break}}else for(;S<_;)if(b[T++]=C[S++],T==this.blockSize){i(this,b),T=0;break}}this.h=T,this.o+=_},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var _=1;_<C.length-8;++_)C[_]=0;var w=8*this.o;for(_=C.length-8;_<C.length;++_)C[_]=w&255,w/=256;for(this.u(C),C=Array(16),_=w=0;4>_;++_)for(var b=0;32>b;b+=8)C[w++]=this.g[_]>>>b&255;return C};function s(C,_){var w=a;return Object.prototype.hasOwnProperty.call(w,C)?w[C]:w[C]=_(C)}function o(C,_){this.h=_;for(var w=[],b=!0,T=C.length-1;0<=T;T--){var S=C[T]|0;b&&S==_||(w[T]=S,b=!1)}this.g=w}var a={};function c(C){return-128<=C&&128>C?s(C,function(_){return new o([_|0],0>_?-1:0)}):new o([C|0],0>C?-1:0)}function l(C){if(isNaN(C)||!isFinite(C))return f;if(0>C)return R(l(-C));for(var _=[],w=1,b=0;C>=w;b++)_[b]=C/w|0,w*=4294967296;return new o(_,0)}function d(C,_){if(C.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(C.charAt(0)=="-")return R(d(C.substring(1),_));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(_,8)),b=f,T=0;T<C.length;T+=8){var S=Math.min(8,C.length-T),I=parseInt(C.substring(T,T+S),_);8>S?(S=l(Math.pow(_,S)),b=b.j(S).add(l(I))):(b=b.j(w),b=b.add(l(I)))}return b}var f=c(0),m=c(1),y=c(16777216);t=o.prototype,t.m=function(){if(x(this))return-R(this).m();for(var C=0,_=1,w=0;w<this.g.length;w++){var b=this.i(w);C+=(0<=b?b:4294967296+b)*_,_*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(E(this))return"0";if(x(this))return"-"+R(this).toString(C);for(var _=l(Math.pow(C,6)),w=this,b="";;){var T=z(w,_).g;w=F(w,T.j(_));var S=((0<w.g.length?w.g[0]:w.h)>>>0).toString(C);if(w=T,E(w))return S+b;for(;6>S.length;)S="0"+S;b=S+b}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function E(C){if(C.h!=0)return!1;for(var _=0;_<C.g.length;_++)if(C.g[_]!=0)return!1;return!0}function x(C){return C.h==-1}t.l=function(C){return C=F(this,C),x(C)?-1:E(C)?0:1};function R(C){for(var _=C.g.length,w=[],b=0;b<_;b++)w[b]=~C.g[b];return new o(w,~C.h).add(m)}t.abs=function(){return x(this)?R(this):this},t.add=function(C){for(var _=Math.max(this.g.length,C.g.length),w=[],b=0,T=0;T<=_;T++){var S=b+(this.i(T)&65535)+(C.i(T)&65535),I=(S>>>16)+(this.i(T)>>>16)+(C.i(T)>>>16);b=I>>>16,S&=65535,I&=65535,w[T]=I<<16|S}return new o(w,w[w.length-1]&-2147483648?-1:0)};function F(C,_){return C.add(R(_))}t.j=function(C){if(E(this)||E(C))return f;if(x(this))return x(C)?R(this).j(R(C)):R(R(this).j(C));if(x(C))return R(this.j(R(C)));if(0>this.l(y)&&0>C.l(y))return l(this.m()*C.m());for(var _=this.g.length+C.g.length,w=[],b=0;b<2*_;b++)w[b]=0;for(b=0;b<this.g.length;b++)for(var T=0;T<C.g.length;T++){var S=this.i(b)>>>16,I=this.i(b)&65535,Dr=C.i(T)>>>16,sc=C.i(T)&65535;w[2*b+2*T]+=I*sc,q(w,2*b+2*T),w[2*b+2*T+1]+=S*sc,q(w,2*b+2*T+1),w[2*b+2*T+1]+=I*Dr,q(w,2*b+2*T+1),w[2*b+2*T+2]+=S*Dr,q(w,2*b+2*T+2)}for(b=0;b<_;b++)w[b]=w[2*b+1]<<16|w[2*b];for(b=_;b<2*_;b++)w[b]=0;return new o(w,0)};function q(C,_){for(;(C[_]&65535)!=C[_];)C[_+1]+=C[_]>>>16,C[_]&=65535,_++}function B(C,_){this.g=C,this.h=_}function z(C,_){if(E(_))throw Error("division by zero");if(E(C))return new B(f,f);if(x(C))return _=z(R(C),_),new B(R(_.g),R(_.h));if(x(_))return _=z(C,R(_)),new B(R(_.g),_.h);if(30<C.g.length){if(x(C)||x(_))throw Error("slowDivide_ only works with positive integers.");for(var w=m,b=_;0>=b.l(C);)w=xe(w),b=xe(b);var T=re(w,1),S=re(b,1);for(b=re(b,2),w=re(w,2);!E(b);){var I=S.add(b);0>=I.l(C)&&(T=T.add(w),S=I),b=re(b,1),w=re(w,1)}return _=F(C,T.j(_)),new B(T,_)}for(T=f;0<=C.l(_);){for(w=Math.max(1,Math.floor(C.m()/_.m())),b=Math.ceil(Math.log(w)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),S=l(w),I=S.j(_);x(I)||0<I.l(C);)w-=b,S=l(w),I=S.j(_);E(S)&&(S=m),T=T.add(S),C=F(C,I)}return new B(T,C)}t.A=function(C){return z(this,C).h},t.and=function(C){for(var _=Math.max(this.g.length,C.g.length),w=[],b=0;b<_;b++)w[b]=this.i(b)&C.i(b);return new o(w,this.h&C.h)},t.or=function(C){for(var _=Math.max(this.g.length,C.g.length),w=[],b=0;b<_;b++)w[b]=this.i(b)|C.i(b);return new o(w,this.h|C.h)},t.xor=function(C){for(var _=Math.max(this.g.length,C.g.length),w=[],b=0;b<_;b++)w[b]=this.i(b)^C.i(b);return new o(w,this.h^C.h)};function xe(C){for(var _=C.g.length+1,w=[],b=0;b<_;b++)w[b]=C.i(b)<<1|C.i(b-1)>>>31;return new o(w,C.h)}function re(C,_){var w=_>>5;_%=32;for(var b=C.g.length-w,T=[],S=0;S<b;S++)T[S]=0<_?C.i(S+w)>>>_|C.i(S+w+1)<<32-_:C.i(S+w);return new o(T,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,aw=Ax.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=d,Gi=Ax.Integer=o}).apply(typeof Sx<"u"?Sx:typeof self<"u"?self:typeof window<"u"?window:{});var Ef=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Kr={};var cw,uw,pa,lw,xu,bf,dw,hw,fw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,h,p){return u==Array.prototype||u==Object.prototype||(u[h]=p.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ef=="object"&&Ef];for(var h=0;h<u.length;++h){var p=u[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(u,h){if(h)e:{var p=r;u=u.split(".");for(var g=0;g<u.length-1;g++){var D=u[g];if(!(D in p))break e;p=p[D]}u=u[u.length-1],g=p[u],h=h(g),h!=g&&h!=null&&e(p,u,{configurable:!0,writable:!0,value:h})}}function s(u,h){u instanceof String&&(u+="");var p=0,g=!1,D={next:function(){if(!g&&p<u.length){var A=p++;return{value:h(A,u[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(u){return u||function(){return s(this,function(h,p){return p})}});var o=o||{},a=this||self;function c(u){var h=typeof u;return h=h!="object"?h:u?Array.isArray(u)?"array":h:"null",h=="array"||h=="object"&&typeof u.length=="number"}function l(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function d(u,h,p){return u.call.apply(u.bind,arguments)}function f(u,h,p){if(!u)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,g),u.apply(h,D)}}return function(){return u.apply(h,arguments)}}function m(u,h,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function y(u,h){var p=Array.prototype.slice.call(arguments,1);return function(){var g=p.slice();return g.push.apply(g,arguments),u.apply(this,g)}}function E(u,h){function p(){}p.prototype=h.prototype,u.aa=h.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(g,D,A){for(var L=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)L[Le-2]=arguments[Le];return h.prototype[D].apply(g,L)}}function x(u){let h=u.length;if(0<h){let p=Array(h);for(let g=0;g<h;g++)p[g]=u[g];return p}return[]}function R(u,h){for(let p=1;p<arguments.length;p++){let g=arguments[p];if(c(g)){let D=u.length||0,A=g.length||0;u.length=D+A;for(let L=0;L<A;L++)u[D+L]=g[L]}else u.push(g)}}class F{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function q(u){return/^[\s\xa0]*$/.test(u)}function B(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function z(u){return z[" "](u),u}z[" "]=function(){};var xe=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function re(u,h,p){for(let g in u)h.call(p,u[g],g,u)}function C(u,h){for(let p in u)h.call(void 0,u[p],p,u)}function _(u){let h={};for(let p in u)h[p]=u[p];return h}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(u,h){let p,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(p in g)u[p]=g[p];for(let A=0;A<w.length;A++)p=w[A],Object.prototype.hasOwnProperty.call(g,p)&&(u[p]=g[p])}}function T(u){var h=1;u=u.split(":");let p=[];for(;0<h&&u.length;)p.push(u.shift()),h--;return u.length&&p.push(u.join(":")),p}function S(u){a.setTimeout(()=>{throw u},0)}function I(){var u=em;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class Dr{constructor(){this.h=this.g=null}add(h,p){let g=sc.get();g.set(h,p),this.h?this.h.next=g:this.g=g,this.h=g}}var sc=new F(()=>new hO,u=>u.reset());class hO{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let oc,ac=!1,em=new Dr,hC=()=>{let u=a.Promise.resolve(void 0);oc=()=>{u.then(fO)}};var fO=()=>{for(var u;u=I();){try{u.h.call(u.g)}catch(p){S(p)}var h=sc;h.j(u),100>h.h&&(h.h++,u.next=h.g,h.g=u)}ac=!1};function si(){this.s=this.s,this.C=this.C}si.prototype.s=!1,si.prototype.ma=function(){this.s||(this.s=!0,this.N())},si.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function bt(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}bt.prototype.h=function(){this.defaultPrevented=!0};var pO=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return u}();function cc(u,h){if(bt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,g=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget){if(xe){e:{try{z(h.nodeName);var D=!0;break e}catch{}D=!1}D||(h=null)}}else p=="mouseover"?h=u.fromElement:p=="mouseout"&&(h=u.toElement);this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:mO[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&cc.aa.h.call(this)}}E(cc,bt);var mO={2:"touch",3:"pen",4:"mouse"};cc.prototype.h=function(){cc.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var uc="closure_listenable_"+(1e6*Math.random()|0),gO=0;function yO(u,h,p,g,D){this.listener=u,this.proxy=null,this.src=h,this.type=p,this.capture=!!g,this.ha=D,this.key=++gO,this.da=this.fa=!1}function Al(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Rl(u){this.src=u,this.g={},this.h=0}Rl.prototype.add=function(u,h,p,g,D){var A=u.toString();u=this.g[A],u||(u=this.g[A]=[],this.h++);var L=nm(u,h,g,D);return-1<L?(h=u[L],p||(h.fa=!1)):(h=new yO(h,this.src,A,!!g,D),h.fa=p,u.push(h)),h};function tm(u,h){var p=h.type;if(p in u.g){var g=u.g[p],D=Array.prototype.indexOf.call(g,h,void 0),A;(A=0<=D)&&Array.prototype.splice.call(g,D,1),A&&(Al(h),u.g[p].length==0&&(delete u.g[p],u.h--))}}function nm(u,h,p,g){for(var D=0;D<u.length;++D){var A=u[D];if(!A.da&&A.listener==h&&A.capture==!!p&&A.ha==g)return D}return-1}var rm="closure_lm_"+(1e6*Math.random()|0),im={};function fC(u,h,p,g,D){if(g&&g.once)return mC(u,h,p,g,D);if(Array.isArray(h)){for(var A=0;A<h.length;A++)fC(u,h[A],p,g,D);return null}return p=cm(p),u&&u[uc]?u.K(h,p,l(g)?!!g.capture:!!g,D):pC(u,h,p,!1,g,D)}function pC(u,h,p,g,D,A){if(!h)throw Error("Invalid event type");var L=l(D)?!!D.capture:!!D,Le=om(u);if(Le||(u[rm]=Le=new Rl(u)),p=Le.add(h,p,g,L,A),p.proxy)return p;if(g=_O(),p.proxy=g,g.src=u,g.listener=p,u.addEventListener)pO||(D=L),D===void 0&&(D=!1),u.addEventListener(h.toString(),g,D);else if(u.attachEvent)u.attachEvent(yC(h.toString()),g);else if(u.addListener&&u.removeListener)u.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return p}function _O(){function u(p){return h.call(u.src,u.listener,p)}let h=vO;return u}function mC(u,h,p,g,D){if(Array.isArray(h)){for(var A=0;A<h.length;A++)mC(u,h[A],p,g,D);return null}return p=cm(p),u&&u[uc]?u.L(h,p,l(g)?!!g.capture:!!g,D):pC(u,h,p,!0,g,D)}function gC(u,h,p,g,D){if(Array.isArray(h))for(var A=0;A<h.length;A++)gC(u,h[A],p,g,D);else g=l(g)?!!g.capture:!!g,p=cm(p),u&&u[uc]?(u=u.i,h=String(h).toString(),h in u.g&&(A=u.g[h],p=nm(A,p,g,D),-1<p&&(Al(A[p]),Array.prototype.splice.call(A,p,1),A.length==0&&(delete u.g[h],u.h--)))):u&&(u=om(u))&&(h=u.g[h.toString()],u=-1,h&&(u=nm(h,p,g,D)),(p=-1<u?h[u]:null)&&sm(p))}function sm(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[uc])tm(h.i,u);else{var p=u.type,g=u.proxy;h.removeEventListener?h.removeEventListener(p,g,u.capture):h.detachEvent?h.detachEvent(yC(p),g):h.addListener&&h.removeListener&&h.removeListener(g),(p=om(h))?(tm(p,u),p.h==0&&(p.src=null,h[rm]=null)):Al(u)}}}function yC(u){return u in im?im[u]:im[u]="on"+u}function vO(u,h){if(u.da)u=!0;else{h=new cc(h,this);var p=u.listener,g=u.ha||u.src;u.fa&&sm(u),u=p.call(g,h)}return u}function om(u){return u=u[rm],u instanceof Rl?u:null}var am="__closure_events_fn_"+(1e9*Math.random()>>>0);function cm(u){return typeof u=="function"?u:(u[am]||(u[am]=function(h){return u.handleEvent(h)}),u[am])}function Ct(){si.call(this),this.i=new Rl(this),this.M=this,this.F=null}E(Ct,si),Ct.prototype[uc]=!0,Ct.prototype.removeEventListener=function(u,h,p,g){gC(this,u,h,p,g)};function Ot(u,h){var p,g=u.F;if(g)for(p=[];g;g=g.F)p.push(g);if(u=u.M,g=h.type||h,typeof h=="string")h=new bt(h,u);else if(h instanceof bt)h.target=h.target||u;else{var D=h;h=new bt(g,u),b(h,D)}if(D=!0,p)for(var A=p.length-1;0<=A;A--){var L=h.g=p[A];D=xl(L,g,!0,h)&&D}if(L=h.g=u,D=xl(L,g,!0,h)&&D,D=xl(L,g,!1,h)&&D,p)for(A=0;A<p.length;A++)L=h.g=p[A],D=xl(L,g,!1,h)&&D}Ct.prototype.N=function(){if(Ct.aa.N.call(this),this.i){var u=this.i,h;for(h in u.g){for(var p=u.g[h],g=0;g<p.length;g++)Al(p[g]);delete u.g[h],u.h--}}this.F=null},Ct.prototype.K=function(u,h,p,g){return this.i.add(String(u),h,!1,p,g)},Ct.prototype.L=function(u,h,p,g){return this.i.add(String(u),h,!0,p,g)};function xl(u,h,p,g){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();for(var D=!0,A=0;A<h.length;++A){var L=h[A];if(L&&!L.da&&L.capture==p){var Le=L.listener,_t=L.ha||L.src;L.fa&&tm(u.i,L),D=Le.call(_t,g)!==!1&&D}}return D&&!g.defaultPrevented}function _C(u,h,p){if(typeof u=="function")p&&(u=m(u,p));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(u,h||0)}function vC(u){u.g=_C(()=>{u.g=null,u.i&&(u.i=!1,vC(u))},u.l);let h=u.h;u.h=null,u.m.apply(null,h)}class wO extends si{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:vC(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lc(u){si.call(this),this.h=u,this.g={}}E(lc,si);var wC=[];function IC(u){re(u.g,function(h,p){this.g.hasOwnProperty(p)&&sm(h)},u),u.g={}}lc.prototype.N=function(){lc.aa.N.call(this),IC(this)},lc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var um=a.JSON.stringify,IO=a.JSON.parse,EO=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function lm(){}lm.prototype.h=null;function EC(u){return u.h||(u.h=u.i())}function bC(){}var dc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dm(){bt.call(this,"d")}E(dm,bt);function hm(){bt.call(this,"c")}E(hm,bt);var es={},CC=null;function Nl(){return CC=CC||new Ct}es.La="serverreachability";function TC(u){bt.call(this,es.La,u)}E(TC,bt);function hc(u){let h=Nl();Ot(h,new TC(h))}es.STAT_EVENT="statevent";function DC(u,h){bt.call(this,es.STAT_EVENT,u),this.stat=h}E(DC,bt);function Ft(u){let h=Nl();Ot(h,new DC(h,u))}es.Ma="timingevent";function SC(u,h){bt.call(this,es.Ma,u),this.size=h}E(SC,bt);function fc(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},h)}function pc(){this.g=!0}pc.prototype.xa=function(){this.g=!1};function bO(u,h,p,g,D,A){u.info(function(){if(u.g)if(A)for(var L="",Le=A.split("&"),_t=0;_t<Le.length;_t++){var Ce=Le[_t].split("=");if(1<Ce.length){var Tt=Ce[0];Ce=Ce[1];var Dt=Tt.split("_");L=2<=Dt.length&&Dt[1]=="type"?L+(Tt+"="+Ce+"&"):L+(Tt+"=redacted&")}}else L=null;else L=A;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+h+`
`+p+`
`+L})}function CO(u,h,p,g,D,A,L){u.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+h+`
`+p+`
`+A+" "+L})}function po(u,h,p,g){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+DO(u,p)+(g?" "+g:"")})}function TO(u,h){u.info(function(){return"TIMEOUT: "+h})}pc.prototype.info=function(){};function DO(u,h){if(!u.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var g=p[u];if(!(2>g.length)){var D=g[1];if(Array.isArray(D)&&!(1>D.length)){var A=D[0];if(A!="noop"&&A!="stop"&&A!="close")for(var L=1;L<D.length;L++)D[L]=""}}}}return um(p)}catch{return h}}var Ml={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},AC={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fm;function Pl(){}E(Pl,lm),Pl.prototype.g=function(){return new XMLHttpRequest},Pl.prototype.i=function(){return{}},fm=new Pl;function oi(u,h,p,g){this.j=u,this.i=h,this.l=p,this.R=g||1,this.U=new lc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new RC}function RC(){this.i=null,this.g="",this.h=!1}var xC={},pm={};function mm(u,h,p){u.L=1,u.v=Ll(Sr(h)),u.m=p,u.P=!0,NC(u,null)}function NC(u,h){u.F=Date.now(),kl(u),u.A=Sr(u.v);var p=u.A,g=u.R;Array.isArray(g)||(g=[String(g)]),GC(p.i,"t",g),u.C=0,p=u.j.J,u.h=new RC,u.g=u0(u.j,p?h:null,!u.m),0<u.O&&(u.M=new wO(m(u.Y,u,u.g),u.O)),h=u.U,p=u.g,g=u.ca;var D="readystatechange";Array.isArray(D)||(D&&(wC[0]=D.toString()),D=wC);for(var A=0;A<D.length;A++){var L=fC(p,D[A],g||h.handleEvent,!1,h.h||h);if(!L)break;h.g[L.key]=L}h=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,h)):(u.u="GET",u.g.ea(u.A,u.u,null,h)),hc(),bO(u.i,u.u,u.A,u.l,u.R,u.m)}oi.prototype.ca=function(u){u=u.target;let h=this.M;h&&Ar(u)==3?h.j():this.Y(u)},oi.prototype.Y=function(u){try{if(u==this.g)e:{let Dt=Ar(this.g);var h=this.g.Ba();let yo=this.g.Z();if(!(3>Dt)&&(Dt!=3||this.g&&(this.h.h||this.g.oa()||XC(this.g)))){this.J||Dt!=4||h==7||(h==8||0>=yo?hc(3):hc(2)),gm(this);var p=this.g.Z();this.X=p;t:if(MC(this)){var g=XC(this.g);u="";var D=g.length,A=Ar(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ts(this),mc(this);var L="";break t}this.h.i=new a.TextDecoder}for(h=0;h<D;h++)this.h.h=!0,u+=this.h.i.decode(g[h],{stream:!(A&&h==D-1)});g.length=0,this.h.g+=u,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=p==200,CO(this.i,this.u,this.A,this.l,this.R,Dt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Le,_t=this.g;if((Le=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(Le)){var Ce=Le;break t}}Ce=null}if(p=Ce)po(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ym(this,p);else{this.o=!1,this.s=3,Ft(12),ts(this),mc(this);break e}}if(this.P){p=!0;let Nn;for(;!this.J&&this.C<L.length;)if(Nn=SO(this,L),Nn==pm){Dt==4&&(this.s=4,Ft(14),p=!1),po(this.i,this.l,null,"[Incomplete Response]");break}else if(Nn==xC){this.s=4,Ft(15),po(this.i,this.l,L,"[Invalid Chunk]"),p=!1;break}else po(this.i,this.l,Nn,null),ym(this,Nn);if(MC(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||L.length!=0||this.h.h||(this.s=1,Ft(16),p=!1),this.o=this.o&&p,!p)po(this.i,this.l,L,"[Invalid Chunked Response]"),ts(this),mc(this);else if(0<L.length&&!this.W){this.W=!0;var Tt=this.j;Tt.g==this&&Tt.ba&&!Tt.M&&(Tt.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),bm(Tt),Tt.M=!0,Ft(11))}}else po(this.i,this.l,L,null),ym(this,L);Dt==4&&ts(this),this.o&&!this.J&&(Dt==4?s0(this.j,this):(this.o=!1,kl(this)))}else qO(this.g),p==400&&0<L.indexOf("Unknown SID")?(this.s=3,Ft(12)):(this.s=0,Ft(13)),ts(this),mc(this)}}}catch{}finally{}};function MC(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function SO(u,h){var p=u.C,g=h.indexOf(`
`,p);return g==-1?pm:(p=Number(h.substring(p,g)),isNaN(p)?xC:(g+=1,g+p>h.length?pm:(h=h.slice(g,g+p),u.C=g+p,h)))}oi.prototype.cancel=function(){this.J=!0,ts(this)};function kl(u){u.S=Date.now()+u.I,PC(u,u.I)}function PC(u,h){if(u.B!=null)throw Error("WatchDog timer not null");u.B=fc(m(u.ba,u),h)}function gm(u){u.B&&(a.clearTimeout(u.B),u.B=null)}oi.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(TO(this.i,this.A),this.L!=2&&(hc(),Ft(17)),ts(this),this.s=2,mc(this)):PC(this,this.S-u)};function mc(u){u.j.G==0||u.J||s0(u.j,u)}function ts(u){gm(u);var h=u.M;h&&typeof h.ma=="function"&&h.ma(),u.M=null,IC(u.U),u.g&&(h=u.g,u.g=null,h.abort(),h.ma())}function ym(u,h){try{var p=u.j;if(p.G!=0&&(p.g==u||_m(p.h,u))){if(!u.K&&_m(p.h,u)&&p.G==3){try{var g=p.Da.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)$l(p),jl(p);else break e;Em(p),Ft(18)}}else p.za=D[1],0<p.za-p.T&&37500>D[2]&&p.F&&p.v==0&&!p.C&&(p.C=fc(m(p.Za,p),6e3));if(1>=FC(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else rs(p,11)}else if((u.K||p.g==u)&&$l(p),!q(h))for(D=p.Da.g.parse(h),h=0;h<D.length;h++){let Ce=D[h];if(p.T=Ce[0],Ce=Ce[1],p.G==2)if(Ce[0]=="c"){p.K=Ce[1],p.ia=Ce[2];let Tt=Ce[3];Tt!=null&&(p.la=Tt,p.j.info("VER="+p.la));let Dt=Ce[4];Dt!=null&&(p.Aa=Dt,p.j.info("SVER="+p.Aa));let yo=Ce[5];yo!=null&&typeof yo=="number"&&0<yo&&(g=1.5*yo,p.L=g,p.j.info("backChannelRequestTimeoutMs_="+g)),g=p;let Nn=u.g;if(Nn){let ql=Nn.g?Nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ql){var A=g.h;A.g||ql.indexOf("spdy")==-1&&ql.indexOf("quic")==-1&&ql.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(vm(A,A.h),A.h=null))}if(g.D){let Cm=Nn.g?Nn.g.getResponseHeader("X-HTTP-Session-Id"):null;Cm&&(g.ya=Cm,Ge(g.I,g.D,Cm))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),g=p;var L=u;if(g.qa=c0(g,g.J?g.ia:null,g.W),L.K){LC(g.h,L);var Le=L,_t=g.L;_t&&(Le.I=_t),Le.B&&(gm(Le),kl(Le)),g.g=L}else r0(g);0<p.i.length&&Bl(p)}else Ce[0]!="stop"&&Ce[0]!="close"||rs(p,7);else p.G==3&&(Ce[0]=="stop"||Ce[0]=="close"?Ce[0]=="stop"?rs(p,7):Im(p):Ce[0]!="noop"&&p.l&&p.l.ta(Ce),p.v=0)}}hc(4)}catch{}}var AO=class{constructor(u,h){this.g=u,this.map=h}};function kC(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function OC(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function FC(u){return u.h?1:u.g?u.g.size:0}function _m(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function vm(u,h){u.g?u.g.add(h):u.h=h}function LC(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}kC.prototype.cancel=function(){if(this.i=VC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function VC(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let h=u.i;for(let p of u.g.values())h=h.concat(p.D);return h}return x(u.i)}function RO(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var h=[],p=u.length,g=0;g<p;g++)h.push(u[g]);return h}h=[],p=0;for(g in u)h[p++]=u[g];return h}function xO(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var h=[];u=u.length;for(var p=0;p<u;p++)h.push(p);return h}h=[],p=0;for(let g in u)h[p++]=g;return h}}}function UC(u,h){if(u.forEach&&typeof u.forEach=="function")u.forEach(h,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,h,void 0);else for(var p=xO(u),g=RO(u),D=g.length,A=0;A<D;A++)h.call(void 0,g[A],p&&p[A],u)}var jC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function NO(u,h){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var g=u[p].indexOf("="),D=null;if(0<=g){var A=u[p].substring(0,g);D=u[p].substring(g+1)}else A=u[p];h(A,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function ns(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ns){this.h=u.h,Ol(this,u.j),this.o=u.o,this.g=u.g,Fl(this,u.s),this.l=u.l;var h=u.i,p=new _c;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),BC(this,p),this.m=u.m}else u&&(h=String(u).match(jC))?(this.h=!1,Ol(this,h[1]||"",!0),this.o=gc(h[2]||""),this.g=gc(h[3]||"",!0),Fl(this,h[4]),this.l=gc(h[5]||"",!0),BC(this,h[6]||"",!0),this.m=gc(h[7]||"")):(this.h=!1,this.i=new _c(null,this.h))}ns.prototype.toString=function(){var u=[],h=this.j;h&&u.push(yc(h,$C,!0),":");var p=this.g;return(p||h=="file")&&(u.push("//"),(h=this.o)&&u.push(yc(h,$C,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(yc(p,p.charAt(0)=="/"?kO:PO,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",yc(p,FO)),u.join("")};function Sr(u){return new ns(u)}function Ol(u,h,p){u.j=p?gc(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function Fl(u,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);u.s=h}else u.s=null}function BC(u,h,p){h instanceof _c?(u.i=h,LO(u.i,u.h)):(p||(h=yc(h,OO)),u.i=new _c(h,u.h))}function Ge(u,h,p){u.i.set(h,p)}function Ll(u){return Ge(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function gc(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function yc(u,h,p){return typeof u=="string"?(u=encodeURI(u).replace(h,MO),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function MO(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var $C=/[#\/\?@]/g,PO=/[#\?:]/g,kO=/[#\?]/g,OO=/[#\?@]/g,FO=/#/g;function _c(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function ai(u){u.g||(u.g=new Map,u.h=0,u.i&&NO(u.i,function(h,p){u.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=_c.prototype,t.add=function(u,h){ai(this),this.i=null,u=mo(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(h),this.h+=1,this};function HC(u,h){ai(u),h=mo(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function qC(u,h){return ai(u),h=mo(u,h),u.g.has(h)}t.forEach=function(u,h){ai(this),this.g.forEach(function(p,g){p.forEach(function(D){u.call(h,D,g,this)},this)},this)},t.na=function(){ai(this);let u=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let g=0;g<h.length;g++){let D=u[g];for(let A=0;A<D.length;A++)p.push(h[g])}return p},t.V=function(u){ai(this);let h=[];if(typeof u=="string")qC(this,u)&&(h=h.concat(this.g.get(mo(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)h=h.concat(u[p])}return h},t.set=function(u,h){return ai(this),this.i=null,u=mo(this,u),qC(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},t.get=function(u,h){return u?(u=this.V(u),0<u.length?String(u[0]):h):h};function GC(u,h,p){HC(u,h),0<p.length&&(u.i=null,u.g.set(mo(u,h),x(p)),u.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var g=h[p];let A=encodeURIComponent(String(g)),L=this.V(g);for(g=0;g<L.length;g++){var D=A;L[g]!==""&&(D+="="+encodeURIComponent(String(L[g]))),u.push(D)}}return this.i=u.join("&")};function mo(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function LO(u,h){h&&!u.j&&(ai(u),u.i=null,u.g.forEach(function(p,g){var D=g.toLowerCase();g!=D&&(HC(this,g),GC(this,D,p))},u)),u.j=h}function VO(u,h){let p=new pc;if(a.Image){let g=new Image;g.onload=y(ci,p,"TestLoadImage: loaded",!0,h,g),g.onerror=y(ci,p,"TestLoadImage: error",!1,h,g),g.onabort=y(ci,p,"TestLoadImage: abort",!1,h,g),g.ontimeout=y(ci,p,"TestLoadImage: timeout",!1,h,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=u}else h(!1)}function UO(u,h){let p=new pc,g=new AbortController,D=setTimeout(()=>{g.abort(),ci(p,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:g.signal}).then(A=>{clearTimeout(D),A.ok?ci(p,"TestPingServer: ok",!0,h):ci(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),ci(p,"TestPingServer: error",!1,h)})}function ci(u,h,p,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(p)}catch{}}function jO(){this.g=new EO}function BO(u,h,p){let g=p||"";try{UC(u,function(D,A){let L=D;l(D)&&(L=um(D)),h.push(g+A+"="+encodeURIComponent(L))})}catch(D){throw h.push(g+"type="+encodeURIComponent("_badmap")),D}}function vc(u){this.l=u.Ub||null,this.j=u.eb||!1}E(vc,lm),vc.prototype.g=function(){return new Vl(this.l,this.j)},vc.prototype.i=function(u){return function(){return u}}({});function Vl(u,h){Ct.call(this),this.D=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(Vl,Ct),t=Vl.prototype,t.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=h,this.readyState=1,Ic(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(h.body=u),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,wc(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ic(this)),this.g&&(this.readyState=3,Ic(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;zC(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function zC(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?wc(this):Ic(this),this.readyState==3&&zC(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,wc(this))},t.Qa=function(u){this.g&&(this.response=u,wc(this))},t.ga=function(){this.g&&wc(this)};function wc(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ic(u)}t.setRequestHeader=function(u,h){this.u.append(u,h)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=h.next();return u.join(`\r
`)};function Ic(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Vl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function WC(u){let h="";return re(u,function(p,g){h+=g,h+=":",h+=p,h+=`\r
`}),h}function wm(u,h,p){e:{for(g in p){var g=!1;break e}g=!0}g||(p=WC(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Ge(u,h,p))}function Qe(u){Ct.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Qe,Ct);var $O=/^https?$/i,HO=["POST","PUT"];t=Qe.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,h,p,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fm.g(),this.v=this.o?EC(this.o):EC(fm),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(A){KC(this,A);return}if(u=p||"",p=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)p.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())p.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(p.keys()).find(A=>A.toLowerCase()=="content-type"),D=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(HO,h,void 0))||g||D||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,L]of p)this.g.setRequestHeader(A,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{JC(this),this.u=!0,this.g.send(u),this.u=!1}catch(A){KC(this,A)}};function KC(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.m=5,QC(u),Ul(u)}function QC(u){u.A||(u.A=!0,Ot(u,"complete"),Ot(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ot(this,"complete"),Ot(this,"abort"),Ul(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ul(this,!0)),Qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?YC(this):this.bb())},t.bb=function(){YC(this)};function YC(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Ar(u)!=4||u.Z()!=2)){if(u.u&&Ar(u)==4)_C(u.Ea,0,u);else if(Ot(u,"readystatechange"),Ar(u)==4){u.h=!1;try{let L=u.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var g;if(g=L===0){var D=String(u.D).match(jC)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),g=!$O.test(D?D.toLowerCase():"")}p=g}if(p)Ot(u,"complete"),Ot(u,"success");else{u.m=6;try{var A=2<Ar(u)?u.g.statusText:""}catch{A=""}u.l=A+" ["+u.Z()+"]",QC(u)}}finally{Ul(u)}}}}function Ul(u,h){if(u.g){JC(u);let p=u.g,g=u.v[0]?()=>{}:null;u.g=null,u.v=null,h||Ot(u,"ready");try{p.onreadystatechange=g}catch{}}}function JC(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Ar(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Ar(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),IO(h)}};function XC(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function qO(u){let h={};u=(u.g&&2<=Ar(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<u.length;g++){if(q(u[g]))continue;var p=T(u[g]);let D=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let A=h[D]||[];h[D]=A,A.push(p)}C(h,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ec(u,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||h}function ZC(u){this.Aa=0,this.i=[],this.j=new pc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ec("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ec("baseRetryDelayMs",5e3,u),this.cb=Ec("retryDelaySeedMs",1e4,u),this.Wa=Ec("forwardChannelMaxRetries",2,u),this.wa=Ec("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new kC(u&&u.concurrentRequestLimit),this.Da=new jO,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ZC.prototype,t.la=8,t.G=1,t.connect=function(u,h,p,g){Ft(0),this.W=u,this.H=h||{},p&&g!==void 0&&(this.H.OSID=p,this.H.OAID=g),this.F=this.X,this.I=c0(this,null,this.W),Bl(this)};function Im(u){if(e0(u),u.G==3){var h=u.U++,p=Sr(u.I);if(Ge(p,"SID",u.K),Ge(p,"RID",h),Ge(p,"TYPE","terminate"),bc(u,p),h=new oi(u,u.j,h),h.L=2,h.v=Ll(Sr(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=u0(h.j,null),h.g.ea(h.v)),h.F=Date.now(),kl(h)}a0(u)}function jl(u){u.g&&(bm(u),u.g.cancel(),u.g=null)}function e0(u){jl(u),u.u&&(a.clearTimeout(u.u),u.u=null),$l(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Bl(u){if(!OC(u.h)&&!u.s){u.s=!0;var h=u.Ga;oc||hC(),ac||(oc(),ac=!0),em.add(h,u),u.B=0}}function GO(u,h){return FC(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=h.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=fc(m(u.Ga,u,h),o0(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let D=new oi(this,this.j,u),A=this.o;if(this.S&&(A?(A=_(A),b(A,this.S)):A=this.S),this.m!==null||this.O||(D.H=A,A=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var g=this.i[p];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(h+=g,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=n0(this,D,h),p=Sr(this.I),Ge(p,"RID",u),Ge(p,"CVER",22),this.D&&Ge(p,"X-HTTP-Session-Id",this.D),bc(this,p),A&&(this.O?h="headers="+encodeURIComponent(String(WC(A)))+"&"+h:this.m&&wm(p,this.m,A)),vm(this.h,D),this.Ua&&Ge(p,"TYPE","init"),this.P?(Ge(p,"$req",h),Ge(p,"SID","null"),D.T=!0,mm(D,p,null)):mm(D,p,h),this.G=2}}else this.G==3&&(u?t0(this,u):this.i.length==0||OC(this.h)||t0(this))};function t0(u,h){var p;h?p=h.l:p=u.U++;let g=Sr(u.I);Ge(g,"SID",u.K),Ge(g,"RID",p),Ge(g,"AID",u.T),bc(u,g),u.m&&u.o&&wm(g,u.m,u.o),p=new oi(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),h&&(u.i=h.D.concat(u.i)),h=n0(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),vm(u.h,p),mm(p,g,h)}function bc(u,h){u.H&&re(u.H,function(p,g){Ge(h,g,p)}),u.l&&UC({},function(p,g){Ge(h,g,p)})}function n0(u,h,p){p=Math.min(u.i.length,p);var g=u.l?m(u.l.Na,u.l,u):null;e:{var D=u.i;let A=-1;for(;;){let L=["count="+p];A==-1?0<p?(A=D[0].g,L.push("ofs="+A)):A=0:L.push("ofs="+A);let Le=!0;for(let _t=0;_t<p;_t++){let Ce=D[_t].g,Tt=D[_t].map;if(Ce-=A,0>Ce)A=Math.max(0,D[_t].g-100),Le=!1;else try{BO(Tt,L,"req"+Ce+"_")}catch{g&&g(Tt)}}if(Le){g=L.join("&");break e}}}return u=u.i.splice(0,p),h.D=u,g}function r0(u){if(!u.g&&!u.u){u.Y=1;var h=u.Fa;oc||hC(),ac||(oc(),ac=!0),em.add(h,u),u.v=0}}function Em(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=fc(m(u.Fa,u),o0(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,i0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=fc(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ft(10),jl(this),i0(this))};function bm(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function i0(u){u.g=new oi(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var h=Sr(u.qa);Ge(h,"RID","rpc"),Ge(h,"SID",u.K),Ge(h,"AID",u.T),Ge(h,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ge(h,"TO",u.ja),Ge(h,"TYPE","xmlhttp"),bc(u,h),u.m&&u.o&&wm(h,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=Ll(Sr(h)),p.m=null,p.P=!0,NC(p,u)}t.Za=function(){this.C!=null&&(this.C=null,jl(this),Em(this),Ft(19))};function $l(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function s0(u,h){var p=null;if(u.g==h){$l(u),bm(u),u.g=null;var g=2}else if(_m(u.h,h))p=h.D,LC(u.h,h),g=1;else return;if(u.G!=0){if(h.o)if(g==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var D=u.B;g=Nl(),Ot(g,new SC(g,p)),Bl(u)}else r0(u);else if(D=h.s,D==3||D==0&&0<h.X||!(g==1&&GO(u,h)||g==2&&Em(u)))switch(p&&0<p.length&&(h=u.h,h.i=h.i.concat(p)),D){case 1:rs(u,5);break;case 4:rs(u,10);break;case 3:rs(u,6);break;default:rs(u,2)}}}function o0(u,h){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*h}function rs(u,h){if(u.j.info("Error code "+h),h==2){var p=m(u.fb,u),g=u.Xa;let D=!g;g=new ns(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ol(g,"https"),Ll(g),D?VO(g.toString(),p):UO(g.toString(),p)}else Ft(2);u.G=0,u.l&&u.l.sa(h),a0(u),e0(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function a0(u){if(u.G=0,u.ka=[],u.l){let h=VC(u.h);(h.length!=0||u.i.length!=0)&&(R(u.ka,h),R(u.ka,u.i),u.h.i.length=0,x(u.i),u.i.length=0),u.l.ra()}}function c0(u,h,p){var g=p instanceof ns?Sr(p):new ns(p);if(g.g!="")h&&(g.g=h+"."+g.g),Fl(g,g.s);else{var D=a.location;g=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;var A=new ns(null);g&&Ol(A,g),h&&(A.g=h),D&&Fl(A,D),p&&(A.l=p),g=A}return p=u.D,h=u.ya,p&&h&&Ge(g,p,h),Ge(g,"VER",u.la),bc(u,g),g}function u0(u,h,p){if(h&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Ca&&!u.pa?new Qe(new vc({eb:p})):new Qe(u.pa),h.Ha(u.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function l0(){}t=l0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Hl(){}Hl.prototype.g=function(u,h){return new nn(u,h)};function nn(u,h){Ct.call(this),this.g=new ZC(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(u?u["X-WebChannel-Client-Profile"]=h.va:u={"X-WebChannel-Client-Profile":h.va}),this.g.S=u,(u=h&&h.Sb)&&!q(u)&&(this.g.m=u),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!q(h)&&(this.g.D=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new go(this)}E(nn,Ct),nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){Im(this.g)},nn.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=um(u),u=p);h.i.push(new AO(h.Ya++,u)),h.G==3&&Bl(h)},nn.prototype.N=function(){this.g.l=null,delete this.j,Im(this.g),delete this.g,nn.aa.N.call(this)};function d0(u){dm.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(let p in h){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}E(d0,dm);function h0(){hm.call(this),this.status=1}E(h0,hm);function go(u){this.g=u}E(go,l0),go.prototype.ua=function(){Ot(this.g,"a")},go.prototype.ta=function(u){Ot(this.g,new d0(u))},go.prototype.sa=function(u){Ot(this.g,new h0)},go.prototype.ra=function(){Ot(this.g,"b")},Hl.prototype.createWebChannel=Hl.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,fw=Kr.createWebChannelTransport=function(){return new Hl},hw=Kr.getStatEventTarget=function(){return Nl()},dw=Kr.Event=es,bf=Kr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ml.NO_ERROR=0,Ml.TIMEOUT=8,Ml.HTTP_ERROR=6,xu=Kr.ErrorCode=Ml,AC.COMPLETE="complete",lw=Kr.EventType=AC,bC.EventType=dc,dc.OPEN="a",dc.CLOSE="b",dc.ERROR="c",dc.MESSAGE="d",Ct.prototype.listen=Ct.prototype.K,pa=Kr.WebChannel=bC,uw=Kr.FetchXmlHttpFactory=vc,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,cw=Kr.XhrIo=Qe}).apply(typeof Ef<"u"?Ef:typeof self<"u"?self:typeof window<"u"?window:{});var Rx="@firebase/firestore";var yt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");var Ma="10.12.1";var Qs=new ur("@firebase/firestore");function Nu(){return Qs.logLevel}function H(t,...e){if(Qs.logLevel<=pe.DEBUG){let n=e.map(XI);Qs.debug(`Firestore (${Ma}): ${t}`,...n)}}function Qr(t,...e){if(Qs.logLevel<=pe.ERROR){let n=e.map(XI);Qs.error(`Firestore (${Ma}): ${t}`,...n)}}function wa(t,...e){if(Qs.logLevel<=pe.WARN){let n=e.map(XI);Qs.warn(`Firestore (${Ma}): ${t}`,...n)}}function XI(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function ne(t="Unexpected state"){let e=`FIRESTORE (${Ma}) INTERNAL ASSERTION FAILED: `+t;throw Qr(e),new Error(e)}function He(t,e){t||ne()}function oe(t,e){return t}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},K=class extends Ht{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var _r=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Af=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},_w=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yt.UNAUTHENTICATED))}shutdown(){}},vw=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},ww=class{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new _r;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new _r,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>v(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new _r)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(He(typeof r.accessToken=="string"),new Af(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string"),new yt(e)}},Iw=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Ew=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Iw(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},bw=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Cw=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(He(typeof n.token=="string"),this.R=n.token,new bw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function VG(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Rf=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=VG(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function Ae(t,e){return t<e?-1:t>e?1:0}function Ia(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var It=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ae=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new It(0,0))}static max(){return new t(new It(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var xf=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(),r===void 0?r=e.length-n:r>e.length-n&&ne(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},ct=class t extends xf{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new K(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},UG=/^[_a-zA-Z][_a-zA-Z0-9]*$/,gn=class t extends xf{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return UG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new K(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new K(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new K(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new K(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var J=class t{constructor(e){this.path=e}static fromPath(e){return new t(ct.fromString(e))}static fromName(e){return new t(ct.fromString(e).popFirst(5))}static empty(){return new t(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ct.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new ct(e.slice()))}};var Tw=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Tw.UNKNOWN_ID=-1;function jG(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new It(n+1,0):new It(n,r));return new Ys(i,J.empty(),e)}function BG(t){return new Ys(t.readTime,t.key,-1)}var Ys=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ae.min(),J.empty(),-1)}static max(){return new t(ae.max(),J.empty(),-1)}};function $G(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:Ae(t.largestBatchId,e.largestBatchId))}var HG="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Dw=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ju(t){return v(this,null,function*(){if(t.code!==P.FAILED_PRECONDITION||t.message!==HG)throw t;H("LocalStore","Unexpectedly lost primary lease")})}var O=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;n(e[l]).next(d=>{o[l]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function qG(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Xu(t){return t.name==="IndexedDbTransactionError"}var nN=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function rp(t){return t==null}function Lu(t){return t===0&&1/t==-1/0}function GG(t){return typeof t=="number"&&Number.isInteger(t)&&!Lu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var zG=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Dte=[...zG,"documentOverlays"],WG=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],KG=WG,Ste=[...KG,"indexConfiguration","indexState","indexEntries"];function xx(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Pa(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rN(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var et=class t{constructor(e,n){this.comparator=e,this.root=n||vr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,vr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _a(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _a(this.root,e,this.comparator,!1)}getReverseIterator(){return new _a(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _a(this.root,e,this.comparator,!0)}},_a=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},vr=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ne();let e=this.left.check();if(e!==this.right.check())throw ne();return e+(this.isRed()?0:1)}};vr.EMPTY=null,vr.RED=!0,vr.BLACK=!1;vr.EMPTY=new class{constructor(){this.size=0}get key(){throw ne()}get value(){throw ne()}get color(){throw ne()}get left(){throw ne()}get right(){throw ne()}copy(e,n,r,i,s){return this}insert(e,n,r){return new vr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Pt=class t{constructor(e){this.comparator=e,this.data=new et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Nf(this.data.getIterator())}getIteratorFrom(e){return new Nf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Nf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var yr=class t{constructor(e){this.fields=e,e.sort(gn.comparator)}static empty(){return new t([])}unionWith(e){let n=new Pt(gn.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ia(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Mf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var qt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Mf("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};qt.EMPTY_BYTE_STRING=new qt("");var QG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yr(t){if(He(!!t),typeof t=="string"){let e=0,n=QG.exec(t);if(He(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ze(t.seconds),nanos:Ze(t.nanos)}}function Ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zi(t){return typeof t=="string"?qt.fromBase64String(t):qt.fromUint8Array(t)}function ZI(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function eE(t){let e=t.mapValue.fields.__previous_value__;return ZI(e)?eE(e):e}function Vu(t){let e=Yr(t.mapValue.fields.__local_write_time__.timestampValue);return new It(e.seconds,e.nanos)}var Sw=class{constructor(e,n,r,i,s,o,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Pf=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Cf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Js(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ZI(t)?4:iN(t)?9007199254740991:10:ne()}function Er(t,e){if(t===e)return!0;let n=Js(t);if(n!==Js(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Vu(t).isEqual(Vu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Yr(i.timestampValue),a=Yr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return zi(i.bytesValue).isEqual(zi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ze(i.geoPointValue.latitude)===Ze(s.geoPointValue.latitude)&&Ze(i.geoPointValue.longitude)===Ze(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ze(i.integerValue)===Ze(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ze(i.doubleValue),a=Ze(s.doubleValue);return o===a?Lu(o)===Lu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ia(t.arrayValue.values||[],e.arrayValue.values||[],Er);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(xx(o)!==xx(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Er(o[c],a[c])))return!1;return!0}(t,e);default:return ne()}}function Uu(t,e){return(t.values||[]).find(n=>Er(n,e))!==void 0}function Ea(t,e){if(t===e)return 0;let n=Js(t),r=Js(e);if(n!==r)return Ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ae(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Ze(s.integerValue||s.doubleValue),c=Ze(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return Nx(t.timestampValue,e.timestampValue);case 4:return Nx(Vu(t),Vu(e));case 5:return Ae(t.stringValue,e.stringValue);case 6:return function(s,o){let a=zi(s),c=zi(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=Ae(a[l],c[l]);if(d!==0)return d}return Ae(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=Ae(Ze(s.latitude),Ze(o.latitude));return a!==0?a:Ae(Ze(s.longitude),Ze(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){let d=Ea(a[l],c[l]);if(d)return d}return Ae(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Cf.mapValue&&o===Cf.mapValue)return 0;if(s===Cf.mapValue)return 1;if(o===Cf.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let m=Ae(c[f],d[f]);if(m!==0)return m;let y=Ea(a[c[f]],l[d[f]]);if(y!==0)return y}return Ae(c.length,d.length)}(t.mapValue,e.mapValue);default:throw ne()}}function Nx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ae(t,e);let n=Yr(t),r=Yr(e),i=Ae(n.seconds,r.seconds);return i!==0?i:Ae(n.nanos,r.nanos)}function ba(t){return Aw(t)}function Aw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Yr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return zi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=Aw(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Aw(n.fields[o])}`;return i+"}"}(t.mapValue):ne()}function Rw(t){return!!t&&"integerValue"in t}function tE(t){return!!t&&"arrayValue"in t}function Mx(t){return!!t&&"nullValue"in t}function Px(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Df(t){return!!t&&"mapValue"in t}function Pu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Pa(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Pu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Pu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function iN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Hn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Df(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pu(n)}setAll(e){let n=gn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Pu(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Df(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Er(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Df(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Pa(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Pu(this.value))}};function sN(t){let e=[];return Pa(t.fields,(n,r)=>{let i=new gn([n]);if(Df(r)){let s=sN(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new yr(e)}var qn=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ae.min(),ae.min(),ae.min(),Hn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ae.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ae.min(),ae.min(),Hn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ae.min(),ae.min(),Hn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ca=class{constructor(e,n){this.position=e,this.inclusive=n}};function kx(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=Ea(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ox(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Er(t.position[n],e.position[n]))return!1;return!0}var Ta=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function YG(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var kf=class{},mt=class t extends kf{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Nw(e,n,r):n==="array-contains"?new kw(e,r):n==="in"?new Ow(e,r):n==="not-in"?new Fw(e,r):n==="array-contains-any"?new Lw(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Mw(e,r):new Pw(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ea(n,this.value)):n!==null&&Js(this.value)===Js(n)&&this.matchesComparison(Ea(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},br=class t extends kf{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return oN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function oN(t){return t.op==="and"}function aN(t){return JG(t)&&oN(t)}function JG(t){for(let e of t.filters)if(e instanceof br)return!1;return!0}function xw(t){if(t instanceof mt)return t.field.canonicalString()+t.op.toString()+ba(t.value);if(aN(t))return t.filters.map(e=>xw(e)).join(",");{let e=t.filters.map(n=>xw(n)).join(",");return`${t.op}(${e})`}}function cN(t,e){return t instanceof mt?function(r,i){return i instanceof mt&&r.op===i.op&&r.field.isEqual(i.field)&&Er(r.value,i.value)}(t,e):t instanceof br?function(r,i){return i instanceof br&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&cN(o,i.filters[a]),!0):!1}(t,e):void ne()}function uN(t){return t instanceof mt?function(n){return`${n.field.canonicalString()} ${n.op} ${ba(n.value)}`}(t):t instanceof br?function(n){return n.op.toString()+" {"+n.getFilters().map(uN).join(" ,")+"}"}(t):"Filter"}var Nw=class extends mt{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){let n=J.comparator(e.key,this.key);return this.matchesComparison(n)}},Mw=class extends mt{constructor(e,n){super(e,"in",n),this.keys=lN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Pw=class extends mt{constructor(e,n){super(e,"not-in",n),this.keys=lN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function lN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}var kw=class extends mt{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return tE(n)&&Uu(n.arrayValue,this.value)}},Ow=class extends mt{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Uu(this.value.arrayValue,n)}},Fw=class extends mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Uu(this.value.arrayValue,n)}},Lw=class extends mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!tE(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Uu(this.value.arrayValue,r))}};var Vw=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function Fx(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Vw(t,e,n,r,i,s,o)}function nE(t){let e=oe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>xw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),rp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ba(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ba(r)).join(",")),e.ue=n}return e.ue}function rE(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!YG(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!cN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ox(t.startAt,e.startAt)&&Ox(t.endAt,e.endAt)}function Uw(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Da=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function XG(t,e,n,r,i,s,o,a){return new Da(t,e,n,r,i,s,o,a)}function iE(t){return new Da(t)}function Lx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ZG(t){return t.collectionGroup!==null}function ku(t){let e=oe(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Pt(gn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ta(s,r))}),n.has(gn.keyField().canonicalString())||e.ce.push(new Ta(gn.keyField(),r))}return e.ce}function wr(t){let e=oe(t);return e.le||(e.le=ez(e,ku(t))),e.le}function ez(t,e){if(t.limitType==="F")return Fx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Ta(i.field,s)});let n=t.endAt?new Ca(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ca(t.startAt.position,t.startAt.inclusive):null;return Fx(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function jw(t,e,n){return new Da(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ip(t,e){return rE(wr(t),wr(e))&&t.limitType===e.limitType}function dN(t){return`${nE(wr(t))}|lt:${t.limitType}`}function ma(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>uN(i)).join(", ")}]`),rp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ba(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ba(i)).join(",")),`Target(${r})`}(wr(t))}; limitType=${t.limitType})`}function sp(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):J.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of ku(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=kx(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,ku(r),i)||r.endAt&&!function(o,a,c){let l=kx(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,ku(r),i))}(t,e)}function tz(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function hN(t){return(e,n)=>{let r=!1;for(let i of ku(t)){let s=nz(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function nz(t,e,n){let r=t.field.isKeyField()?J.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Ea(c,l):ne()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne()}}var Wi=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Pa(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return rN(this.inner)}size(){return this.innerSize}};var rz=new et(J.comparator);function Jr(){return rz}var fN=new et(J.comparator);function Mu(...t){let e=fN;for(let n of t)e=e.insert(n.key,n);return e}function pN(t){let e=fN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function zs(){return Ou()}function mN(){return Ou()}function Ou(){return new Wi(t=>t.toString(),(t,e)=>t.isEqual(e))}var iz=new et(J.comparator),sz=new Pt(J.comparator);function we(...t){let e=sz;for(let n of t)e=e.add(n);return e}var oz=new Pt(Ae);function az(){return oz}function gN(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lu(e)?"-0":e}}function yN(t){return{integerValue:""+t}}function cz(t,e){return GG(e)?yN(e):gN(t,e)}var Sa=class{constructor(){this._=void 0}};function uz(t,e,n){return t instanceof Aa?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&ZI(s)&&(s=eE(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Xs?vN(t,e):t instanceof Zs?wN(t,e):function(i,s){let o=_N(i,s),a=Vx(o)+Vx(i.Pe);return Rw(o)&&Rw(i.Pe)?yN(a):gN(i.serializer,a)}(t,e)}function lz(t,e,n){return t instanceof Xs?vN(t,e):t instanceof Zs?wN(t,e):n}function _N(t,e){return t instanceof Ra?function(r){return Rw(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Aa=class extends Sa{},Xs=class extends Sa{constructor(e){super(),this.elements=e}};function vN(t,e){let n=IN(e);for(let r of t.elements)n.some(i=>Er(i,r))||n.push(r);return{arrayValue:{values:n}}}var Zs=class extends Sa{constructor(e){super(),this.elements=e}};function wN(t,e){let n=IN(e);for(let r of t.elements)n=n.filter(i=>!Er(i,r));return{arrayValue:{values:n}}}var Ra=class extends Sa{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function Vx(t){return Ze(t.integerValue||t.doubleValue)}function IN(t){return tE(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function dz(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Xs&&i instanceof Xs||r instanceof Zs&&i instanceof Zs?Ia(r.elements,i.elements,Er):r instanceof Ra&&i instanceof Ra?Er(r.Pe,i.Pe):r instanceof Aa&&i instanceof Aa}(t.transform,e.transform)}var Bw=class{constructor(e,n){this.version=e,this.transformResults=n}},Ks=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Sf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var xa=class{};function EN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Of(t.key,Ks.none()):new eo(t.key,t.data,Ks.none());{let n=t.data,r=Hn.empty(),i=new Pt(gn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Xr(t.key,r,new yr(i.toArray()),Ks.none())}}function hz(t,e,n){t instanceof eo?function(i,s,o){let a=i.value.clone(),c=jx(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Xr?function(i,s,o){if(!Sf(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=jx(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(bN(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Fu(t,e,n,r){return t instanceof eo?function(s,o,a,c){if(!Sf(s.precondition,o))return a;let l=s.value.clone(),d=Bx(s.fieldTransforms,c,o);return l.setAll(d),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Xr?function(s,o,a,c){if(!Sf(s.precondition,o))return a;let l=Bx(s.fieldTransforms,c,o),d=o.data;return d.setAll(bN(s)),d.setAll(l),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return Sf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function fz(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=_N(r.transform,i||null);s!=null&&(n===null&&(n=Hn.empty()),n.set(r.field,s))}return n||null}function Ux(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ia(r,i,(s,o)=>dz(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var eo=class extends xa{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Xr=class extends xa{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function bN(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function jx(t,e,n){let r=new Map;He(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,lz(o,a,n[i]))}return r}function Bx(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,uz(s,o,e))}return r}var Of=class extends xa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},$w=class extends xa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Hw=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&hz(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Fu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Fu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=mN();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=EN(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),we())}isEqual(e){return this.batchId===e.batchId&&Ia(this.mutations,e.mutations,(n,r)=>Ux(n,r))&&Ia(this.baseMutations,e.baseMutations,(n,r)=>Ux(n,r))}},qw=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){He(e.mutations.length===r.length);let i=function(){return iz}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Gw=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var zw=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ot,Ee;function pz(t){switch(t){default:return ne();case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0}}function CN(t){if(t===void 0)return Qr("GRPC error has no .code"),P.UNKNOWN;switch(t){case ot.OK:return P.OK;case ot.CANCELLED:return P.CANCELLED;case ot.UNKNOWN:return P.UNKNOWN;case ot.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case ot.INTERNAL:return P.INTERNAL;case ot.UNAVAILABLE:return P.UNAVAILABLE;case ot.UNAUTHENTICATED:return P.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case ot.NOT_FOUND:return P.NOT_FOUND;case ot.ALREADY_EXISTS:return P.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return P.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case ot.ABORTED:return P.ABORTED;case ot.OUT_OF_RANGE:return P.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return P.UNIMPLEMENTED;case ot.DATA_LOSS:return P.DATA_LOSS;default:return ne()}}(Ee=ot||(ot={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";var $x=null;function mz(){return new TextEncoder}var gz=new Gi([4294967295,4294967295],0);function Hx(t){let e=mz().encode(t),n=new aw;return n.update(e),new Uint8Array(n.digest())}function qx(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Gi([n,r],0),new Gi([i,s],0)]}var Ww=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ws(`Invalid padding: ${n}`);if(r<0)throw new Ws(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ws(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ws(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Gi.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Gi.fromNumber(r)));return i.compare(gz)===1&&(i=new Gi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=Hx(e),[r,i]=qx(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=Hx(e),[r,i]=qx(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Ws=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ff=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,ju.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ae.min(),i,new et(Ae),Jr(),we())}},ju=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,we(),we(),we())}};var va=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},Lf=class{constructor(e,n){this.targetId=e,this.me=n}},Vf=class{constructor(e,n,r=qt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Uf=class{constructor(){this.fe=0,this.ge=zx(),this.pe=qt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=we(),n=we(),r=we();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ne()}}),new ju(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=zx()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,He(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Kw=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Jr(),this.qe=Gx(),this.Qe=new et(Ae)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ne()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(Uw(s))if(r===0){let o=new J(s.path);this.Ue(n,o,qn.newNoDocument(o,ae.min()))}else He(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}$x?.et(function(d,f,m,y,E){var x,R,F,q,B,z;let xe={localCacheCount:d,existenceFilterCount:f.count,databaseId:m.database,projectId:m.projectId},re=f.unchangedNames;return re&&(xe.bloomFilter={applied:E===0,hashCount:(x=re?.hashCount)!==null&&x!==void 0?x:0,bitmapLength:(q=(F=(R=re?.bits)===null||R===void 0?void 0:R.bitmap)===null||F===void 0?void 0:F.length)!==null&&q!==void 0?q:0,padding:(z=(B=re?.bits)===null||B===void 0?void 0:B.padding)!==null&&z!==void 0?z:0,mightContain:C=>{var _;return(_=y?.mightContain(C))!==null&&_!==void 0&&_}}),xe}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=zi(r).toUint8Array()}catch(c){if(c instanceof Mf)return wa("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Ww(o,i,s)}catch(c){return wa(c instanceof Ws?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&Uw(a.target)){let c=new J(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,qn.newNoDocument(c,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=we();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Ff(e,n,this.Qe,this.ke,r);return this.ke=Jr(),this.qe=Gx(),this.Qe=new et(Ae),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Uf,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Pt(Ae),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Uf),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function Gx(){return new et(J.comparator)}function zx(){return new et(J.comparator)}var yz={asc:"ASCENDING",desc:"DESCENDING"},_z={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vz={and:"AND",or:"OR"},Qw=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Yw(t,e){return t.useProto3Json||rp(e)?e:{value:e}}function jf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function wz(t,e){return jf(t,e.toTimestamp())}function Ir(t){return He(!!t),ae.fromTimestamp(function(n){let r=Yr(n);return new It(r.seconds,r.nanos)}(t))}function sE(t,e){return Jw(t,e).canonicalString()}function Jw(t,e){let n=function(i){return new ct(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function DN(t){let e=ct.fromString(t);return He(NN(e)),e}function Xw(t,e){return sE(t.databaseId,e.path)}function pw(t,e){let n=DN(e);if(n.get(1)!==t.databaseId.projectId)throw new K(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(AN(n))}function SN(t,e){return sE(t.databaseId,e)}function Iz(t){let e=DN(t);return e.length===4?ct.emptyPath():AN(e)}function Zw(t){return new ct(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function AN(t){return He(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Wx(t,e,n){return{name:Xw(t,e),fields:n.value.mapValue.fields}}function Ez(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,d){return l.useProto3Json?(He(d===void 0||typeof d=="string"),qt.fromBase64String(d||"")):(He(d===void 0||d instanceof Buffer||d instanceof Uint8Array),qt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let d=l.code===void 0?P.UNKNOWN:CN(l.code);return new K(d,l.message||"")}(o);n=new Vf(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=pw(t,r.document.name),s=Ir(r.document.updateTime),o=r.document.createTime?Ir(r.document.createTime):ae.min(),a=new Hn({mapValue:{fields:r.document.fields}}),c=qn.newFoundDocument(i,s,o,a),l=r.targetIds||[],d=r.removedTargetIds||[];n=new va(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=pw(t,r.document),s=r.readTime?Ir(r.readTime):ae.min(),o=qn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new va([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=pw(t,r.document),s=r.removedTargetIds||[];n=new va([],s,i,null)}else{if(!("filter"in e))return ne();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new zw(i,s),a=r.targetId;n=new Lf(a,o)}}return n}function bz(t,e){let n;if(e instanceof eo)n={update:Wx(t,e.key,e.value)};else if(e instanceof Of)n={delete:Xw(t,e.key)};else if(e instanceof Xr)n={update:Wx(t,e.key,e.data),updateMask:Mz(e.fieldMask)};else{if(!(e instanceof $w))return ne();n={verify:Xw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Aa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Xs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Zs)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ra)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ne()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:wz(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ne()}(t,e.precondition)),n}function Cz(t,e){return t&&t.length>0?(He(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Ir(i.updateTime):Ir(s);return o.isEqual(ae.min())&&(o=Ir(s)),new Bw(o,i.transformResults||[])}(n,e))):[]}function Tz(t,e){return{documents:[SN(t,e.path)]}}function Dz(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=SN(t,i);let s=function(l){if(l.length!==0)return xN(br.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(d=>function(m){return{field:ga(m.field),direction:Rz(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=Yw(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function Sz(t){let e=Iz(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){He(r===1);let d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(f){let m=RN(f);return m instanceof br&&aN(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(E){return new Ta(ya(E.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,rp(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){let m=!!f.before,y=f.values||[];return new Ca(y,m)}(n.startAt));let l=null;return n.endAt&&(l=function(f){let m=!f.before,y=f.values||[];return new Ca(y,m)}(n.endAt)),XG(e,i,o,s,a,"F",c,l)}function Az(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function RN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=ya(n.unaryFilter.field);return mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ya(n.unaryFilter.field);return mt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=ya(n.unaryFilter.field);return mt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=ya(n.unaryFilter.field);return mt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ne()}}(t):t.fieldFilter!==void 0?function(n){return mt.create(ya(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ne()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return br.create(n.compositeFilter.filters.map(r=>RN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne()}}(n.compositeFilter.op))}(t):ne()}function Rz(t){return yz[t]}function xz(t){return _z[t]}function Nz(t){return vz[t]}function ga(t){return{fieldPath:t.canonicalString()}}function ya(t){return gn.fromServerFormat(t.fieldPath)}function xN(t){return t instanceof mt?function(n){if(n.op==="=="){if(Px(n.value))return{unaryFilter:{field:ga(n.field),op:"IS_NAN"}};if(Mx(n.value))return{unaryFilter:{field:ga(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Px(n.value))return{unaryFilter:{field:ga(n.field),op:"IS_NOT_NAN"}};if(Mx(n.value))return{unaryFilter:{field:ga(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ga(n.field),op:xz(n.op),value:n.value}}}(t):t instanceof br?function(n){let r=n.getFilters().map(i=>xN(i));return r.length===1?r[0]:{compositeFilter:{op:Nz(n.op),filters:r}}}(t):ne()}function Mz(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function NN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Bu=class t{constructor(e,n,r,i,s=ae.min(),o=ae.min(),a=qt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var eI=class{constructor(e){this.ct=e}};function Pz(t){let e=Sz({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?jw(e,e.limit,"L"):e}var Bf=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Ze(e.integerValue));else if("doubleValue"in e){let r=Ze(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),Lu(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=Yr(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(zi(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?iN(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):ne()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),J.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Bf.bt=new Bf;var tI=class{constructor(){this._n=new nI}addToCollectionParentIndex(e,n){return this._n.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(Ys.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(Ys.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}},nI=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Pt(ct.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Pt(ct.comparator)).toArray()}};var Rte=new Uint8Array(0);var gr=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};gr.DEFAULT_COLLECTION_PERCENTILE=10,gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gr.DEFAULT=new gr(41943040,gr.DEFAULT_COLLECTION_PERCENTILE,gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gr.DISABLED=new gr(-1,0,0);var $u=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var rI=class{constructor(){this.changes=new Wi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,qn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var iI=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var sI=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Fu(r.mutation,i,yr.empty(),It.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,we()).next(()=>r))}getLocalViewOfDocuments(e,n,r=we()){let i=zs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Mu();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=zs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,we()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Jr(),o=Ou(),a=function(){return Ou()}();return n.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof Xr)?s=s.insert(l.key,l):d!==void 0?(o.set(l.key,d.mutation.getFieldMask()),Fu(d.mutation,l,d.mutation.getFieldMask(),It.now())):o.set(l.key,yr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,d)=>o.set(l,d)),n.forEach((l,d)=>{var f;return a.set(l,new iI(d,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Ou(),i=new et((o,a)=>o-a),s=we();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let d=r.get(c)||yr.empty();d=a.applyToLocalView(l,d),r.set(c,d);let f=(i.get(a.batchId)||we()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,f=mN();d.forEach(m=>{if(!s.has(m)){let y=EN(n.get(m),r.get(m));y!==null&&f.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ZG(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):O.resolve(zs()),a=-1,c=s;return o.next(l=>O.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?O.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,we())).next(d=>({batchId:a,changes:pN(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let i=Mu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Mu();return this.indexManager.getCollectionParents(e,s).next(a=>O.forEach(a,c=>{let l=function(f,m){return new Da(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,l)=>{let d=l.getKey();o.get(d)===null&&(o=o.insert(d,qn.newInvalidDocument(d)))});let a=Mu();return o.forEach((c,l)=>{let d=s.get(c);d!==void 0&&Fu(d.mutation,l,yr.empty(),It.now()),sp(n,l)&&(a=a.insert(c,l))}),a})}};var oI=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return O.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ir(i.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:Pz(i.bundledQuery),readTime:Ir(i.readTime)}}(n)),O.resolve()}};var aI=class{constructor(){this.overlays=new et(J.comparator),this.hr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){let r=zs();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),O.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){let i=zs(),s=n.length+1,o=new J(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new et((l,d)=>l-d),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let d=s.get(l.largestBatchId);d===null&&(d=zs(),s=s.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=zs(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return O.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Gw(n,r));let s=this.hr.get(n);s===void 0&&(s=we(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}};var Hu=class{constructor(){this.Pr=new Pt(at.Ir),this.Tr=new Pt(at.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new at(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new at(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new J(new ct([])),r=new at(n,e),i=new at(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new J(new ct([])),r=new at(n,e),i=new at(n,e+1),s=we();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new at(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},at=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return J.comparator(e.key,n.key)||Ae(e.pr,n.pr)}static Er(e,n){return Ae(e.pr,n.pr)||J.comparator(e.key,n.key)}};var cI=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Pt(at.Ir)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Hw(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.wr=this.wr.add(new at(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new at(n,0),i=new at(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{let a=this.Sr(o.pr);s.push(a)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Pt(Ae);return n.forEach(i=>{let s=new at(i,0),o=new at(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),O.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;J.isDocumentKey(s)||(s=s.child(""));let o=new at(new J(s),0),a=new Pt(Ae);return this.wr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.pr)),!0)},o),O.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){He(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return O.forEach(n.mutations,i=>{let s=new at(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new at(n,0),i=this.wr.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var uI=class{constructor(e){this.vr=e,this.docs=function(){return new et(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():qn.newInvalidDocument(n))}getEntries(e,n){let r=Jr();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():qn.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Jr(),o=n.path,a=new J(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||$G(BG(d),r)<=0||(i.has(d.key)||sp(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ne()}Fr(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new lI(this)}getSize(e){return O.resolve(this.size)}},lI=class extends rI{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var dI=class{constructor(e){this.persistence=e,this.Mr=new Wi(n=>nE(n),rE),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Hu,this.targetCount=0,this.Lr=$u.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),O.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new $u(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.qn(n),O.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),O.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Nr.containsKey(n))}};var hI=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new nN(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new dI(this),this.indexManager=new tI,this.remoteDocumentCache=function(i){return new uI(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new eI(n),this.$r=new oI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new aI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new cI(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);let i=new fI(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return O.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},fI=class extends Dw{constructor(e){super(),this.currentSequenceNumber=e}},pI=class t{constructor(e){this.persistence=e,this.zr=new Hu,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw ne()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),O.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Jr,r=>{let i=J.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,ae.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return O.or([()=>O.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var mI=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=we(),i=we();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var gI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var yI=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return iR()?8:qG(ft())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new gI;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Nu()<=pe.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",ma(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),O.resolve()):(Nu()<=pe.DEBUG&&H("QueryEngine","Query:",ma(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Nu()<=pe.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",ma(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wr(n))):O.resolve())}ji(e,n){if(Lx(n))return O.resolve(null);let r=wr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=jw(n,null,"F"),r=wr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=we(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.Zi(n,a);return this.Xi(n,l,o,c.readTime)?this.ji(e,jw(n,null,"F")):this.es(e,l,n,c)}))})))}Hi(e,n,r,i){return Lx(n)||i.isEqual(ae.min())?O.resolve(null):this.zi.getDocuments(e,r).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,r,i)?O.resolve(null):(Nu()<=pe.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ma(n)),this.es(e,o,n,jG(i,-1)).next(a=>a))})}Zi(e,n){let r=new Pt(hN(e));return n.forEach((i,s)=>{sp(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return Nu()<=pe.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",ma(n)),this.zi.getDocumentsMatchingQuery(e,n,Ys.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var _I=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new et(Ae),this.rs=new Wi(s=>nE(s),rE),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sI(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function kz(t,e,n,r){return new _I(t,e,n,r)}function MN(t,e){return v(this,null,function*(){let n=oe(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=we();for(let l of i){o.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of s){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})})}function Oz(t,e){let n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let f=l.batch,m=f.keys(),y=O.resolve();return m.forEach(E=>{y=y.next(()=>d.getEntry(c,E)).next(x=>{let R=l.docVersions.get(E);He(R!==null),x.version.compareTo(R)<0&&(f.applyToRemoteDocument(x,l),x.isValidDocument()&&(x.setReadTime(l.commitVersion),d.addEntry(x)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=we();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function PN(t){let e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function Fz(t,e){let n=oe(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((d,f)=>{let m=i.get(f);if(!m)return;a.push(n.Qr.removeMatchingKeys(s,d.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,d.addedDocuments,f)));let y=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(qt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(f,y),function(x,R,F){return x.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(m,y,d)&&a.push(n.Qr.updateTargetData(s,y))});let c=Jr(),l=we();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(Lz(s,o,e.documentUpdates).next(d=>{c=d.cs,l=d.ls})),!r.isEqual(ae.min())){let d=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return O.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.ns=i,s))}function Lz(t,e,n){let r=we(),i=we();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Jr();return n.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ae.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):H("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:o,ls:i}})}function Vz(t,e){let n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Uz(t,e){let n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Bu(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function vI(t,e,n){return v(this,null,function*(){let r=oe(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Xu(o))throw o;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function Kx(t,e,n){let r=oe(t),i=ae.min(),s=we();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,d){let f=oe(c),m=f.rs.get(d);return m!==void 0?O.resolve(f.ns.get(m)):f.Qr.getTargetData(l,d)}(r,o,wr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:ae.min(),n?s:we())).next(a=>(jz(r,tz(e),a),{documents:a,hs:s})))}function jz(t,e,n){let r=t.ss.get(e)||ae.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}var $f=class{constructor(){this.activeTargetIds=az()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var wI=class{constructor(){this.no=new $f,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new $f,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var II=class{io(e){}shutdown(){}};var Hf=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Tf=null;function mw(){return Tf===null?Tf=function(){return 268435456+Math.round(2147483648*Math.random())}():Tf++,"0x"+Tf.toString(16)}var Bz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var EI=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var Mt="WebChannelConnection",bI=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){let a=mw(),c=this.vo(n,r.toUriEncodedString());H("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,c,l,i).then(d=>(H("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw wa("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ma}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){let i=Bz[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){let s=mw();return new Promise((o,a)=>{let c=new cw;c.setWithCredentials(!0),c.listenOnce(lw.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case xu.NO_ERROR:let d=c.getResponseJson();H(Mt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case xu.TIMEOUT:H(Mt,`RPC '${e}' ${s} timed out`),a(new K(P.DEADLINE_EXCEEDED,"Request time out"));break;case xu.HTTP_ERROR:let f=c.getStatus();if(H(Mt,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let E=function(R){let F=R.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(F)>=0?F:P.UNKNOWN}(y.status);a(new K(E,y.message))}else a(new K(P.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new K(P.UNAVAILABLE,"Connection failed."));break;default:ne()}}finally{H(Mt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);H(Mt,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",l,r,15)})}Oo(e,n,r){let i=mw(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=fw(),a=hw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.xmlHttpFactory=new uw({})),this.Fo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let d=s.join("");H(Mt,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=o.createWebChannel(d,c),m=!1,y=!1,E=new EI({lo:R=>{y?H(Mt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(H(Mt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),H(Mt,`RPC '${e}' stream ${i} sending:`,R),f.send(R))},ho:()=>f.close()}),x=(R,F,q)=>{R.listen(F,B=>{try{q(B)}catch(z){setTimeout(()=>{throw z},0)}})};return x(f,pa.EventType.OPEN,()=>{y||(H(Mt,`RPC '${e}' stream ${i} transport opened.`),E.mo())}),x(f,pa.EventType.CLOSE,()=>{y||(y=!0,H(Mt,`RPC '${e}' stream ${i} transport closed`),E.po())}),x(f,pa.EventType.ERROR,R=>{y||(y=!0,wa(Mt,`RPC '${e}' stream ${i} transport errored:`,R),E.po(new K(P.UNAVAILABLE,"The operation could not be completed")))}),x(f,pa.EventType.MESSAGE,R=>{var F;if(!y){let q=R.data[0];He(!!q);let B=q,z=B.error||((F=B[0])===null||F===void 0?void 0:F.error);if(z){H(Mt,`RPC '${e}' stream ${i} received error:`,z);let xe=z.status,re=function(w){let b=ot[w];if(b!==void 0)return CN(b)}(xe),C=z.message;re===void 0&&(re=P.INTERNAL,C="Unknown error status: "+xe+" with message "+z.message),y=!0,E.po(new K(re,C)),f.close()}else H(Mt,`RPC '${e}' stream ${i} received:`,q),E.yo(q)}}),x(a,dw.STAT_EVENT,R=>{R.stat===bf.PROXY?H(Mt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===bf.NOPROXY&&H(Mt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.fo()},0),E}};function gw(){return typeof document<"u"?document:null}function op(t){return new Qw(t,!0)}var qf=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&H("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var Gf=class{constructor(e,n,r,i,s,o,a,c){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new qf(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return v(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return v(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){return v(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===P.RESOURCE_EXHAUSTED?(Qr(n.toString()),Qr("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{let i=new K(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){let r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(()=>v(this,null,function*(){this.state=0,this.start()}))}c_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},CI=class extends Gf{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();let n=Ez(this.serializer,e),r=function(s){if(!("targetChange"in s))return ae.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?Ir(o.readTime):ae.min()}(e);return this.listener.h_(n,r)}P_(e){let n={};n.database=Zw(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=Uw(c)?{documents:Tz(s,c)}:{query:Dz(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=TN(s,o.resumeToken);let l=Yw(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=jf(s,o.snapshotVersion.toTimestamp());let l=Yw(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=Az(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){let n={};n.database=Zw(this.serializer),n.removeTarget=e,this.i_(n)}},TI=class extends Gf{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(He(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let n=Cz(e.writeResults,e.commitTime),r=Ir(e.commitTime);return this.listener.A_(r,n)}return He(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=Zw(this.serializer),this.i_(e)}d_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>bz(this.serializer,r))};this.i_(n)}};var DI=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new K(P.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,Jw(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K(P.UNKNOWN,s.toString())})}xo(e,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,Jw(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(P.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},SI=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Qr(n),this.y_=!1):H("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var AI=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(()=>v(this,null,function*(){to(this)&&(H("RemoteStore","Restarting streams for network reachability change."),yield function(c){return v(this,null,function*(){let l=oe(c);l.M_.add(4),yield Zu(l),l.N_.set("Unknown"),l.M_.delete(4),yield ap(l)})}(this))}))}),this.N_=new SI(r,i)}};function ap(t){return v(this,null,function*(){if(to(t))for(let e of t.x_)yield e(!0)})}function Zu(t){return v(this,null,function*(){for(let e of t.x_)yield e(!1)})}function kN(t,e){let n=oe(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),uE(n)?cE(n):ka(n).Xo()&&aE(n,e))}function oE(t,e){let n=oe(t),r=ka(n);n.F_.delete(e),r.Xo()&&ON(n,e),n.F_.size===0&&(r.Xo()?r.n_():to(n)&&n.N_.set("Unknown"))}function aE(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ka(t).P_(e)}function ON(t,e){t.L_.xe(e),ka(t).I_(e)}function cE(t){t.L_=new Kw({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ka(t).start(),t.N_.w_()}function uE(t){return to(t)&&!ka(t).Zo()&&t.F_.size>0}function to(t){return oe(t).M_.size===0}function FN(t){t.L_=void 0}function $z(t){return v(this,null,function*(){t.N_.set("Online")})}function Hz(t){return v(this,null,function*(){t.F_.forEach((e,n)=>{aE(t,e)})})}function qz(t,e){return v(this,null,function*(){FN(t),uE(t)?(t.N_.D_(e),cE(t)):t.N_.set("Unknown")})}function Gz(t,e,n){return v(this,null,function*(){if(t.N_.set("Online"),e instanceof Vf&&e.state===2&&e.cause)try{yield function(i,s){return v(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.F_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))})}(t,e)}catch(r){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield zf(t,r)}else if(e instanceof va?t.L_.Ke(e):e instanceof Lf?t.L_.He(e):t.L_.We(e),!n.isEqual(ae.min()))try{let r=yield PN(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.L_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.F_.get(l);d&&s.F_.set(l,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let d=s.F_.get(c);if(!d)return;s.F_.set(c,d.withResumeToken(qt.EMPTY_BYTE_STRING,d.snapshotVersion)),ON(s,c);let f=new Bu(d.target,c,l,d.sequenceNumber);aE(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){H("RemoteStore","Failed to raise snapshot:",r),yield zf(t,r)}})}function zf(t,e,n){return v(this,null,function*(){if(!Xu(e))throw e;t.M_.add(1),yield Zu(t),t.N_.set("Offline"),n||(n=()=>PN(t.localStore)),t.asyncQueue.enqueueRetryable(()=>v(this,null,function*(){H("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield ap(t)}))})}function LN(t,e){return e().catch(n=>zf(t,n,e))}function cp(t){return v(this,null,function*(){let e=oe(t),n=Ki(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;zz(e);)try{let i=yield Vz(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,Wz(e,i)}catch(i){yield zf(e,i)}VN(e)&&UN(e)})}function zz(t){return to(t)&&t.v_.length<10}function Wz(t,e){t.v_.push(e);let n=Ki(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function VN(t){return to(t)&&!Ki(t).Zo()&&t.v_.length>0}function UN(t){Ki(t).start()}function Kz(t){return v(this,null,function*(){Ki(t).V_()})}function Qz(t){return v(this,null,function*(){let e=Ki(t);for(let n of t.v_)e.d_(n.mutations)})}function Yz(t,e,n){return v(this,null,function*(){let r=t.v_.shift(),i=qw.from(r,e,n);yield LN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield cp(t)})}function Jz(t,e){return v(this,null,function*(){e&&Ki(t).E_&&(yield function(r,i){return v(this,null,function*(){if(function(o){return pz(o)&&o!==P.ABORTED}(i.code)){let s=r.v_.shift();Ki(r).t_(),yield LN(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield cp(r)}})}(t,e)),VN(t)&&UN(t)})}function Qx(t,e){return v(this,null,function*(){let n=oe(t);n.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");let r=to(n);n.M_.add(3),yield Zu(n),r&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield ap(n)})}function Xz(t,e){return v(this,null,function*(){let n=oe(t);e?(n.M_.delete(2),yield ap(n)):e||(n.M_.add(2),yield Zu(n),n.N_.set("Unknown"))})}function ka(t){return t.B_||(t.B_=function(n,r,i){let s=oe(n);return s.f_(),new CI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:$z.bind(null,t),To:Hz.bind(null,t),Ao:qz.bind(null,t),h_:Gz.bind(null,t)}),t.x_.push(e=>v(this,null,function*(){e?(t.B_.t_(),uE(t)?cE(t):t.N_.set("Unknown")):(yield t.B_.stop(),FN(t))}))),t.B_}function Ki(t){return t.k_||(t.k_=function(n,r,i){let s=oe(n);return s.f_(),new TI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:Kz.bind(null,t),Ao:Jz.bind(null,t),R_:Qz.bind(null,t),A_:Yz.bind(null,t)}),t.x_.push(e=>v(this,null,function*(){e?(t.k_.t_(),yield cp(t)):(yield t.k_.stop(),t.v_.length>0&&(H("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var RI=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new _r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function lE(t,e){if(Qr("AsyncQueue",`${e}: ${t}`),Xu(t))return new K(P.UNAVAILABLE,`${e}: ${t}`);throw t}var Wf=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=Mu(),this.sortedSet=new et(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Kf=class{constructor(){this.q_=new et(J.comparator)}track(e){let n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):ne():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}},Na=class t{constructor(e,n,r,i,s,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,Wf.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ip(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var xI=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},NI=class{constructor(){this.queries=new Wi(e=>dN(e),ip),this.onlineState="Unknown",this.z_=new Set}};function Zz(t,e){return v(this,null,function*(){let n=oe(t),r=3,i=e.query,s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new xI,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield n.onListen(i,!0);break;case 1:s.K_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=lE(o,`Initialization of query '${ma(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&dE(n)})}function eW(t,e){return v(this,null,function*(){let n=oe(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function tW(t,e){let n=oe(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&dE(n)}function nW(t,e,n){let r=oe(t),i=r.queries.get(e);if(i)for(let s of i.U_)s.onError(n);r.queries.delete(e)}function dE(t){t.z_.forEach(e=>{e.next()})}var MI,Yx;(Yx=MI||(MI={})).J_="default",Yx.Cache="cache";var PI=class{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Na(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=Na.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==MI.Cache}};var Qf=class{constructor(e){this.key=e}},Yf=class{constructor(e){this.key=e}},kI=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=we(),this.mutatedKeys=we(),this.Ia=hN(e),this.Ta=new Wf(this.Ia)}get Ea(){return this.la}da(e,n){let r=n?n.Aa:new Kf,i=n?n.Ta:this.Ta,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let m=i.get(d),y=sp(this.query,f)?f:null,E=!!m&&this.mutatedKeys.has(m.key),x=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?E!==x&&(r.track({type:3,doc:y}),R=!0):this.Ra(m,y)||(r.track({type:2,doc:y}),R=!0,(c&&this.Ia(y,c)>0||l&&this.Ia(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(c||l)&&(a=!0)),R&&(y?(o=o.add(y),s=x?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let o=e.Aa.Q_();o.sort((d,f)=>function(y,E){let x=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne()}};return x(y)-x(E)}(d.type,f.type)||this.Ia(d.doc,f.doc)),this.Va(r),i=i!=null&&i;let a=n&&!i?this.ma():[],c=this.Pa.size===0&&this.current&&!i?1:0,l=c!==this.ha;return this.ha=c,o.length!==0||l?{snapshot:new Na(this.query,e.Ta,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Kf,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=we(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new Yf(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new Qf(r))}),n}pa(e){this.la=e.hs,this.Pa=we();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return Na.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},OI=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},FI=class{constructor(e){this.key=e,this.wa=!1}},LI=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Wi(a=>dN(a),ip),this.Da=new Map,this.Ca=new Set,this.va=new et(J.comparator),this.Fa=new Map,this.Ma=new Hu,this.xa={},this.Oa=new Map,this.Na=$u.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function rW(t,e,n=!0){return v(this,null,function*(){let r=GN(t),i,s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield jN(r,e,n,!0),i})}function iW(t,e){return v(this,null,function*(){let n=GN(t);yield jN(n,e,!0,!1)})}function jN(t,e,n,r){return v(this,null,function*(){let i=yield Uz(t.localStore,wr(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield sW(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&kN(t.remoteStore,i),a})}function sW(t,e,n,r,i){return v(this,null,function*(){t.Ba=(f,m,y)=>function(x,R,F,q){return v(this,null,function*(){let B=R.view.da(F);B.Xi&&(B=yield Kx(x.localStore,R.query,!1).then(({documents:C})=>R.view.da(C,B)));let z=q&&q.targetChanges.get(R.targetId),xe=q&&q.targetMismatches.get(R.targetId)!=null,re=R.view.applyChanges(B,x.isPrimaryClient,z,xe);return Xx(x,R.targetId,re.fa),re.snapshot})}(t,f,m,y);let s=yield Kx(t.localStore,e,!0),o=new kI(e,s.hs),a=o.da(s.documents),c=ju.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,c);Xx(t,n,l.fa);let d=new OI(e,n,o);return t.ba.set(e,d),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),l.snapshot})}function oW(t,e,n){return v(this,null,function*(){let r=oe(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!ip(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield vI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&oE(r.remoteStore,i.targetId),VI(r,i.targetId)}).catch(Ju))):(VI(r,i.targetId),yield vI(r.localStore,i.targetId,!0))})}function aW(t,e){return v(this,null,function*(){let n=oe(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),oE(n.remoteStore,r.targetId))})}function cW(t,e,n){return v(this,null,function*(){let r=mW(t);try{let i=yield function(o,a){let c=oe(o),l=It.now(),d=a.reduce((y,E)=>y.add(E.key),we()),f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let E=Jr(),x=we();return c.os.getEntries(y,d).next(R=>{E=R,E.forEach((F,q)=>{q.isValidDocument()||(x=x.add(F))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,E)).next(R=>{f=R;let F=[];for(let q of a){let B=fz(q,f.get(q.key).overlayedDocument);B!=null&&F.push(new Xr(q.key,B,sN(B.value.mapValue),Ks.exists(!0)))}return c.mutationQueue.addMutationBatch(y,l,F,a)}).next(R=>{m=R;let F=R.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(y,R.batchId,F)})}).then(()=>({batchId:m.batchId,changes:pN(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.xa[o.currentUser.toKey()];l||(l=new et(Ae)),l=l.insert(a,c),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),yield el(r,i.changes),yield cp(r.remoteStore)}catch(i){let s=lE(i,"Failed to persist write");n.reject(s)}})}function BN(t,e){return v(this,null,function*(){let n=oe(t);try{let r=yield Fz(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Fa.get(s);o&&(He(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?He(o.wa):i.removedDocuments.size>0&&(He(o.wa),o.wa=!1))}),yield el(n,r,e)}catch(r){yield Ju(r)}})}function Jx(t,e,n){let r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ba.forEach((s,o)=>{let a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=oe(o);c.onlineState=a;let l=!1;c.queries.forEach((d,f)=>{for(let m of f.U_)m.j_(a)&&(l=!0)}),l&&dE(c)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function uW(t,e,n){return v(this,null,function*(){let r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Fa.get(e),s=i&&i.key;if(s){let o=new et(J.comparator);o=o.insert(s,qn.newNoDocument(s,ae.min()));let a=we().add(s),c=new Ff(ae.min(),new Map,new et(Ae),o,a);yield BN(r,c),r.va=r.va.remove(s),r.Fa.delete(e),hE(r)}else yield vI(r.localStore,e,!1).then(()=>VI(r,e,n)).catch(Ju)})}function lW(t,e){return v(this,null,function*(){let n=oe(t),r=e.batch.batchId;try{let i=yield Oz(n.localStore,e);HN(n,r,null),$N(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield el(n,i)}catch(i){yield Ju(i)}})}function dW(t,e,n){return v(this,null,function*(){let r=oe(t);try{let i=yield function(o,a){let c=oe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(He(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);HN(r,e,n),$N(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield el(r,i)}catch(i){yield Ju(i)}})}function $N(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function HN(t,e,n){let r=oe(t),i=r.xa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function VI(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||qN(t,r)})}function qN(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(oE(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),hE(t))}function Xx(t,e,n){for(let r of n)r instanceof Qf?(t.Ma.addReference(r.key,e),hW(t,r)):r instanceof Yf?(H("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||qN(t,r.key)):ne()}function hW(t,e){let n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(H("SyncEngine","New document in limbo: "+n),t.Ca.add(r),hE(t))}function hE(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new J(ct.fromString(e)),r=t.Na.next();t.Fa.set(r,new FI(n)),t.va=t.va.insert(n,r),kN(t.remoteStore,new Bu(wr(iE(n.path)),r,"TargetPurposeLimboResolution",nN.oe))}}function el(t,e,n){return v(this,null,function*(){let r=oe(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,c)=>{o.push(r.Ba(c,e,n).then(l=>{if((l||n)&&r.isPrimaryClient){let d=l&&!l.fromCache;r.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(l){i.push(l);let d=mI.Ki(c.targetId,l);s.push(d)}}))}),yield Promise.all(o),r.Sa.h_(i),yield function(c,l){return v(this,null,function*(){let d=oe(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>O.forEach(l,m=>O.forEach(m.qi,y=>d.persistence.referenceDelegate.addReference(f,m.targetId,y)).next(()=>O.forEach(m.Qi,y=>d.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))}catch(f){if(!Xu(f))throw f;H("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let m=f.targetId;if(!f.fromCache){let y=d.ns.get(m),E=y.snapshotVersion,x=y.withLastLimboFreeSnapshotVersion(E);d.ns=d.ns.insert(m,x)}}})}(r.localStore,s))})}function fW(t,e){return v(this,null,function*(){let n=oe(t);if(!n.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());let r=yield MN(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(c=>{c.reject(new K(P.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield el(n,r.us)}})}function pW(t,e){let n=oe(t),r=n.Fa.get(e);if(r&&r.wa)return we().add(r.key);{let i=we(),s=n.Da.get(e);if(!s)return i;for(let o of s){let a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function GN(t){let e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=BN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uW.bind(null,e),e.Sa.h_=tW.bind(null,e.eventManager),e.Sa.ka=nW.bind(null,e.eventManager),e}function mW(t){let e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dW.bind(null,e),e}var Jf=class{constructor(){this.synchronizeTabs=!1}initialize(e){return v(this,null,function*(){this.serializer=op(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return kz(this.persistence,new yI,e.initialUser,this.serializer)}createPersistence(e){return new hI(pI.Hr,this.serializer)}createSharedClientState(e){return new wI}terminate(){return v(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var UI=class{initialize(e,n){return v(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Jx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=fW.bind(null,this.syncEngine),yield Xz(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new NI}()}createDatastore(e){let n=op(e.databaseInfo.databaseId),r=function(s){return new bI(s)}(e.databaseInfo);return function(s,o,a,c){return new DI(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new AI(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Jx(this.syncEngine,n,0),function(){return Hf.D()?new Hf:new II}())}createSyncEngine(e,n){return function(i,s,o,a,c,l,d){let f=new LI(i,s,o,a,c,l);return d&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return v(this,null,function*(){var e;yield function(r){return v(this,null,function*(){let i=oe(r);H("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield Zu(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var jI=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Qr("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var BI=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=yt.UNAUTHENTICATED,this.clientId=Rf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>v(this,null,function*(){H("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(H("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new K(P.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new _r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=lE(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function yw(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>v(this,null,function*(){r.isEqual(i)||(yield MN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function Zx(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield yW(t);H("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Qx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Qx(e.remoteStore,i)),t._onlineComponents=e})}function gW(t){return t.name==="FirebaseError"?t.code===P.FAILED_PRECONDITION||t.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function yW(t){return v(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{yield yw(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!gW(n))throw n;wa("Error using user provided cache. Falling back to memory cache: "+n),yield yw(t,new Jf)}}else H("FirestoreClient","Using default OfflineComponentProvider"),yield yw(t,new Jf);return t._offlineComponents})}function zN(t){return v(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),yield Zx(t,t._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),yield Zx(t,new UI))),t._onlineComponents})}function _W(t){return zN(t).then(e=>e.syncEngine)}function vW(t){return v(this,null,function*(){let e=yield zN(t),n=e.eventManager;return n.onListen=rW.bind(null,e.syncEngine),n.onUnlisten=oW.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=iW.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=aW.bind(null,e.syncEngine),n})}function wW(t,e,n={}){let r=new _r;return t.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(s,o,a,c,l){let d=new jI({next:m=>{o.enqueueAndForget(()=>eW(s,f));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new K(P.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&c&&c.source==="server"?l.reject(new K(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),f=new PI(iE(a.path),d,{includeMetadataChanges:!0,ra:!0});return Zz(s,f)}(yield vW(t),t.asyncQueue,e,n,r)})),r.promise}function WN(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var eN=new Map;function IW(t,e,n){if(!n)throw new K(P.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function EW(t,e,n,r){if(e===!0&&r===!0)throw new K(P.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function tN(t){if(!J.isDocumentKey(t))throw new K(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fE(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne()}function qu(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=fE(t);throw new K(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Xf=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}EW("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new K(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new K(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new K(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Gu=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new K(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new K(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new _w;switch(r.type){case"firstParty":return new Ew(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=eN.get(n);r&&(H("ComponentProvider","Removing Datastore"),eN.delete(n),r.terminate())}(this),Promise.resolve()}};function KN(t,e,n,r={}){var i;let s=(t=qu(t,Gu))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&wa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=yt.MOCK_USER;else{a=ca(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new K(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new yt(l)}t._authCredentials=new vw(new Af(a,c))}}var $I=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},An=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},zu=class t extends $I{constructor(e,n,r){super(e,n,iE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new An(this.firestore,null,new J(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function QN(t,e,...n){if(t=We(t),arguments.length===1&&(e=Rf.newId()),IW("doc","path",e),t instanceof Gu){let r=ct.fromString(e,...n);return tN(r),new An(t,null,new J(r))}{if(!(t instanceof An||t instanceof zu))throw new K(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ct.fromString(e,...n));return tN(r),new An(t.firestore,t instanceof zu?t.converter:null,new J(r))}}var HI=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new qf(this,"async_queue_retry"),this.hu=()=>{let n=gw();n&&H("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=gw();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=gw();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new _r;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return v(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Xu(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Qr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let i=RI.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&ne()}verifyOperationInProgress(){}du(){return v(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};var Wu=class extends Gu{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new HI}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||XN(this),this._firestoreClient.terminate()}};function YN(t,e){let n=typeof t=="object"?t:dr(),r=typeof t=="string"?t:e||"(default)",i=$r(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=aa("firestore");s&&KN(i,...s)}return i}function JN(t){return t._firestoreClient||XN(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function XN(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,l,d){return new Sw(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,WN(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new BI(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Ku=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(qt.fromBase64String(e))}catch(n){throw new K(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Qu=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Zf=class{constructor(e){this._methodName=e}};var Yu=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}};var bW=/^__.*__$/,qI=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Xr(e,this.data,this.fieldMask,n,this.fieldTransforms):new eo(e,this.data,n,this.fieldTransforms)}};function ZN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne()}}var GI=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return ep(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(ZN(this.fu)&&bW.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},zI=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||op(e)}Fu(e,n,r,i=!1){return new GI({fu:e,methodName:n,vu:r,path:gn.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function CW(t){let e=t._freezeSettings(),n=op(t._databaseId);return new zI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function TW(t,e,n,r,i,s={}){let o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);rM("Data must be an object, but it was:",o,r);let a=tM(r,o),c,l;if(s.merge)c=new yr(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let f of s.mergeFields){let m=DW(e,f,n);if(!o.contains(m))throw new K(P.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);AW(d,m)||d.push(m)}c=new yr(d),l=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=o.fieldTransforms;return new qI(new Hn(a),c,l)}function eM(t,e){if(nM(t=We(t)))return rM("Unsupported field value:",e,t),tM(t,e);if(t instanceof Zf)return function(r,i){if(!ZN(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=eM(a,i.bu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=We(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return cz(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=It.fromDate(r);return{timestampValue:jf(i.serializer,s)}}if(r instanceof It){let s=new It(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jf(i.serializer,s)}}if(r instanceof Yu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ku)return{bytesValue:TN(i.serializer,r._byteString)};if(r instanceof An){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:sE(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${fE(r)}`)}(t,e)}function tM(t,e){let n={};return rN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pa(t,(r,i)=>{let s=eM(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function nM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof It||t instanceof Yu||t instanceof Ku||t instanceof An||t instanceof Zf)}function rM(t,e,n){if(!nM(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=fE(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function DW(t,e,n){if((e=We(e))instanceof Qu)return e._internalPath;if(typeof e=="string")return iM(t,e);throw ep("Field path arguments must be of type string or ",t,!1,void 0,n)}var SW=new RegExp("[~\\*/\\[\\]]");function iM(t,e,n){if(e.search(SW)>=0)throw ep(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Qu(...e.split("."))._internalPath}catch{throw ep(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ep(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new K(P.INVALID_ARGUMENT,a+t+c)}function AW(t,e){return t.some(n=>n.isEqual(e))}var tp=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new An(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new WI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(sM("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},WI=class extends tp{data(){return super.data()}};function sM(t,e){return typeof e=="string"?iM(t,e):e instanceof Qu?e._internalPath:e._delegate._internalPath}var KI=class{convertValue(e,n="none"){switch(Js(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(zi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Pa(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Yu(Ze(e.latitude),Ze(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=eE(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Vu(e));default:return null}}convertTimestamp(e){let n=Yr(e);return new It(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=ct.fromString(e);He(NN(r));let i=new Pf(r.get(1),r.get(3)),s=new J(r.popFirst(5));return i.isEqual(n)||Qr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function RW(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var QI=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},np=class extends tp{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new YI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(sM("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},YI=class extends np{data(e={}){return super.data(e)}};function oM(t){t=qu(t,An);let e=qu(t.firestore,Wu);return wW(JN(e),t._key).then(n=>NW(e,t,n))}var JI=class extends KI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ku(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new An(this.firestore,null,n)}};function aM(t,e,n){t=qu(t,An);let r=qu(t.firestore,Wu),i=RW(t.converter,e,n);return xW(r,[TW(CW(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ks.none())])}function xW(t,e){return function(r,i){let s=new _r;return r.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return cW(yield _W(r),i,s)})),s.promise}(JN(t),e)}function NW(t,e,n){let r=n.docs.get(e._key),i=new JI(t);return new np(t,i,e._key,r,new QI(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Ma=i})(Sn),Dn(new Nt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Wu(new ww(r.getProvider("auth-internal")),new Cw(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new K(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pf(l.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Pe(Rx,"4.6.3",e),Pe(Rx,"4.6.3","esm2017")})();var no=class{constructor(e){return e}},cM="firestore",pE=class{constructor(){return Hr(cM)}};var mE=new W("angularfire2.firestore-instances");function MW(t,e){let n=ji(cM,t,e);return n&&new no(n)}function PW(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new no(r)}}var kW={provide:pE,deps:[[new ze,mE]]},OW={provide:no,useFactory:MW,deps:[[new ze,mE],pn]};function uM(t,...e){return Pe("angularfire",Bn.full,"fst"),Wt([OW,kW,{provide:mE,useFactory:PW(t),multi:!0,deps:[Te,Rt,fr,$n,[new ze,Wr],[new ze,hr],...e]}])}var gE=Xe(QN,!0);var lM=Xe(oM,!0);var dM=Xe(YN,!0);var hM=Xe(aM,!0);var Rn=(()=>{let e=class e{constructor(r,i,s){this.auth=r,this.router=i,this.firestore=s,this.hasRefreshed=!1,this.authStateSubject=new ut(null),this.authState=this.authStateSubject.asObservable(),Cx(this.auth,o=>{this.authStateSubject.next(o),o?sessionStorage.setItem("user",JSON.stringify(o)):sessionStorage.removeItem("user")})}signUpWithEmail(r,i,s,o){return v(this,null,function*(){return alert("Thanks for signing up. You will now be navigated to your dashboard"),Ex(this.auth,r.trim(),i.trim()).then(a=>v(this,null,function*(){sessionStorage.setItem("user",JSON.stringify(a.user));let c=gE(this.firestore,`users/${a.user.uid}`);return yield hM(c,{email:a.user.email,firstName:s,lastName:o,createdAt:new Date}),a}))})}login(r,i){return alert("Welcome!"),Tx(this.auth,r.trim(),i.trim())}signOut(){return v(this,null,function*(){try{yield Dx(this.auth),this.router.navigate(["/login"]),console.log("User signed out"),this.hasRefreshed=!1}catch(r){console.error("Error signing out:",r.message)}})}getUserDetails(r){return v(this,null,function*(){let i=gE(this.firestore,`users/${r}`),s=yield lM(i);return s.exists()?s.data():null})}};e.\u0275fac=function(i){return new(i||e)(Y(mn),Y(wt),Y(no))},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Fa=(()=>{let e=class e{constructor(r,i){this.router=r,this.authService=i,this.darkMode=!1}ngOnInit(){if(typeof localStorage<"u"){let r=localStorage.getItem("darkMode");r!==null&&(this.darkMode=JSON.parse(r),this.applyDarkMode())}else console.error("localStorage is not available.")}toggleDarkMode(){this.darkMode=!this.darkMode,this.applyDarkMode(),localStorage.setItem("darkMode",JSON.stringify(this.darkMode))}applyDarkMode(){this.darkMode?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}};e.\u0275fac=function(i){return new(i||e)($(wt),$(Rn))},e.\u0275cmp=je({type:e,selectors:[["app-root"]],standalone:!0,features:[Be],decls:1,vars:0,template:function(i,s){i&1&&ce(0,"router-outlet")},dependencies:[$_],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;font-family:Arial,sans-serif}.btn-sign-in[_ngcontent-%COMP%]{margin-top:20px;padding:10px 20px;font-size:18px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease}.btn-sign-in[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]});let t=e;return t})();var pM=()=>["/dashboard"],mM=()=>["#"];function LW(t,e){if(t&1){let n=Ti();M(0,"div",10)(1,"a",11),V(2,"Home"),N(),M(3,"a",12),V(4,"Your Account"),N(),M(5,"a",13),Ie("click",function(i){tr(n);let s=Di();return nr(s.toggleDarkMode(i))}),V(6,"Dark"),N(),M(7,"a",13),Ie("click",function(i){tr(n);let s=Di();return nr(s.signOut(i))}),V(8,"Sign Out"),N()()}if(t&2){let n=Di();Fe(3),xt("routerLink",n.isLoggedIn?rr(1,pM):rr(2,mM))}}var La=(()=>{let e=class e{constructor(r,i){this.AppComponent=r,this.authService=i,this.isLoggedIn=!1,this.isMenuOpen=!1}ngOnInit(){this.authService.authState.subscribe(r=>{this.isLoggedIn=!!r})}toggleDarkMode(r){r.preventDefault(),this.AppComponent.toggleDarkMode()}signOut(r){r.preventDefault(),this.isLoggedIn?this.authService.signOut():alert("Not Logged In")}toggleMenu(){this.isMenuOpen=!this.isMenuOpen,console.log(this.isMenuOpen)}};e.\u0275fac=function(i){return new(i||e)($(Fa),$(Rn))},e.\u0275cmp=je({type:e,selectors:[["app-navbar-general"]],standalone:!0,features:[Be],decls:18,vars:4,consts:[[1,"bg-white","dark:bg-zinc-950","shadow-sm","shadow-rose-100","dark:shadow-rose-950","px-4","py-7","fixed","w-full","top-0","z-20","transition-all","duration-500","ease-in-out"],[1,"container","mx-auto","flex","justify-between","items-center"],["routerLink","/",1,"text-rose-600","dark:text-rose-600","dark:hover:text-rose-800","font-bold","lg:text-2xl","md:text-xl"],[1,"hidden","lg:flex"],["routerLink","/home",1,"text-rose-600","hover:text-rose-900","font-semibold","dark:text-rose-600","dark:hover:text-rose-800","lg:px-4","sm:px-4"],[1,"text-rose-600","hover:text-rose-900","font-semibold","dark:text-rose-600","dark:hover:text-rose-800","lg:px-4","sm:px-4",3,"routerLink"],["href","#",1,"text-rose-600","hover:text-rose-900","font-semibold","dark:text-rose-600","dark:hover:text-rose-800","lg:px-4","sm:px-4",3,"click"],[1,"lg:hidden"],[1,"text-rose-600","dark:text-rose-600","focus:outline-none","text-xl",3,"click"],["class","lg:hidden absolute top-full left-0 w-full bg-white dark:bg-zinc-950 shadow-md transition-all duration-500 ease-in-out text-center",4,"ngIf"],[1,"lg:hidden","absolute","top-full","left-0","w-full","bg-white","dark:bg-zinc-950","shadow-md","transition-all","duration-500","ease-in-out","text-center"],["routerLink","/home",1,"block","py-2","px-4","text-rose-600","hover:text-rose-900","font-semibold","dark:text-rose-600","dark:hover:text-rose-800"],[1,"block","py-2","px-4","text-rose-600","hover:text-rose-900","font-semibold","dark:text-rose-600","dark:hover:text-rose-800",3,"routerLink"],["href","#",1,"block","py-2","px-4","text-rose-600","hover:text-rose-900","font-semibold","dark:text-rose-600","dark:hover:text-rose-800",3,"click"]],template:function(i,s){i&1&&(M(0,"nav",0)(1,"div",1)(2,"div")(3,"a",2),V(4,"Angular Banking"),N()(),M(5,"div",3)(6,"a",4),V(7,"Home"),N(),M(8,"a",5),V(9,"Your Account"),N(),M(10,"a",6),Ie("click",function(a){return s.toggleDarkMode(a)}),V(11,"Dark/Light Mode"),N(),M(12,"a",6),Ie("click",function(a){return s.signOut(a)}),V(13,"Sign Out"),N()(),M(14,"div",7)(15,"button",8),Ie("click",function(){return s.toggleMenu()}),V(16," \u2630 "),N()(),Ci(17,LW,9,3,"div",9),N()()),i&2&&(Fe(8),xt("routerLink",s.isLoggedIn?rr(2,pM):rr(3,mM)),Fe(9),xt("ngIf",s.isMenuOpen))},dependencies:[Li,dn,Yo]});let t=e;return t})();var Qi=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=je({type:e,selectors:[["app-footer"]],standalone:!0,features:[Be],decls:5,vars:0,consts:[[1,"bg-rose-700","dark:bg-zinc-950","text-white","dark:text-gray-300","text-center","py-4","shadow-inner","shadow-slate-300","dark:shadow-rose-950","transition-all","duration-500","ease-in-out"],[1,"container","mx-auto"],["href","https://hakeemellis.com/","target","_blank"],[1,"text-md","font-semibold"]],template:function(i,s){i&1&&(M(0,"footer",0)(1,"div",1)(2,"a",2)(3,"p",3),V(4,"\xA9 2024 Angular Banking - Hakeem Ellis | All Rights Reserved"),N()()()())}});let t=e;return t})();var gM=(()=>{let e=class e{constructor(r){this.router=r}navigateToLogin(){this.router.navigate(["login"])}};e.\u0275fac=function(i){return new(i||e)($(wt))},e.\u0275cmp=je({type:e,selectors:[["app-root"]],standalone:!0,features:[Be],decls:13,vars:0,consts:[[1,"h-screen","relative","bg-cover","bg-center",2,"background-image","url('assets/photo/main.jpg')"],[1,"absolute","inset-0","bg-black","bg-opacity-70"],[1,"relative","z-10","flex","items-center","justify-center","h-full"],[1,"text-center","lg:mt-10","mt-0"],[1,"text-6xl","text-rose-700"],[1,"text-lg","text-gray-300","lg:mt-0","mt-20"],[1,"btn-sign-in","mt-4",3,"click"]],template:function(i,s){i&1&&(ce(0,"app-navbar-general"),M(1,"div",0),ce(2,"div",1),M(3,"div",2)(4,"div",3)(5,"h1",4),V(6,"Welcome to Angular Banking"),N(),ce(7,"br"),M(8,"p",5),V(9,"Please sign in to access your account."),N(),M(10,"button",6),Ie("click",function(){return s.navigateToLogin()}),V(11,"Sign In"),N()()()(),ce(12,"app-footer"))},dependencies:[La,Qi],styles:[".container1[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;font-family:Arial,sans-serif}.btn-sign-in[_ngcontent-%COMP%]{margin-top:20px;padding:10px 20px;font-size:18px;background-color:#be123c;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease}.btn-sign-in[_ngcontent-%COMP%]:hover{background-color:#881337}"]});let t=e;return t})();var yM=(()=>{let e=class e{constructor(r,i){this.router=r,this.authService=i,this.hasRefreshed=!1}signIn(r,i,s){r.preventDefault(),this.authService.login(i,s).then(()=>{alert("Thanks for logging in"),this.router.navigate(["/dashboard"]),this.hasRefreshed||setTimeout(()=>{window.location.reload(),this.hasRefreshed=!0,console.log(this.hasRefreshed)},1)}).catch(o=>{console.error("Error signing in:",o.message),alert("Sign in failed. Please try again.")}).finally(()=>{i="",s=""})}};e.\u0275fac=function(i){return new(i||e)($(wt),$(Rn))},e.\u0275cmp=je({type:e,selectors:[["app-login"]],standalone:!0,features:[Be],decls:24,vars:0,consts:[["email",""],["password",""],[1,"h-screen","relative","bg-cover","bg-center",2,"background-image","url('assets/photo/login.jpg')"],[1,"absolute","inset-0","bg-black","bg-opacity-70"],[1,"login-container","relative"],[1,"pb-5","text-3xl","font-semibold","text-rose-700"],[1,"form-lg","text-center",3,"submit"],[1,"m-0","mx-auto","my-auto"],[1,"form-group"],["for","username",1,"text-gray-300"],["type","email","id","username","name","username","required","",1,"border-2","border-black","rounded-md","px-7","text-center"],["for","password",1,"ml","text-gray-300"],["type","password","id","password","name","password","required","",1,"border-2","border-black","rounded-md","px-7","text-center","ml-2"],["type","submit",1,"btn-login"],[1,"text-white","text-xl","font-semibold","mt-4"],["routerLink","/signup",1,"btn-login","mt-3"]],template:function(i,s){if(i&1){let o=Ti();ce(0,"app-navbar-general"),M(1,"div",2),ce(2,"div",3),M(3,"div",4)(4,"h2",5),V(5,"Welcome!"),N(),M(6,"form",6),Ie("submit",function(c){tr(o);let l=Or(12),d=Or(17);return nr(s.signIn(c,l.value,d.value))}),M(7,"div",7)(8,"div",8)(9,"label",9),V(10,"Username: "),N(),ce(11,"input",10,0),N(),M(13,"div",8)(14,"label",11),V(15,"Password:"),N(),ce(16,"input",12,1),N()(),M(18,"button",13),V(19,"Login"),N()(),M(20,"p",14),V(21,"or"),N(),M(22,"button",15),V(23,"Signup"),N()()()}},dependencies:[Li,La],styles:[".login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;margin-top:20px}.form-group[_ngcontent-%COMP%]{margin:0 auto 20px}.btn-login[_ngcontent-%COMP%]{padding:5px 70px;font-size:18px;background-color:#be123c;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease}.btn-login[_ngcontent-%COMP%]:hover{background-color:#881337}"]});let t=e;return t})();var _M=()=>["/dashboard"],vM=()=>["#"];function VW(t,e){if(t&1){let n=Ti();M(0,"div",10)(1,"a",11),V(2,"Home"),N(),M(3,"a",12),V(4,"Dashboard"),N(),M(5,"a",13),Ie("click",function(i){tr(n);let s=Di();return nr(s.toggleDarkMode(i))}),V(6,"Dark/Light"),N(),M(7,"a",13),Ie("click",function(i){tr(n);let s=Di();return nr(s.signOut(i))}),V(8,"Sign Out"),N()()}if(t&2){let n=Di();Fe(3),xt("routerLink",n.isLoggedIn?rr(1,_M):rr(2,vM))}}var Va=(()=>{let e=class e{constructor(r,i){this.AppComponent=r,this.authService=i,this.isLoggedIn=!1,this.isMenuOpen=!1}ngOnInit(){this.authService.authState.subscribe(r=>{this.isLoggedIn=!!r})}toggleDarkMode(r){r.preventDefault(),this.AppComponent.toggleDarkMode()}signOut(r){r.preventDefault(),this.authService.signOut()}toggleMenu(){this.isMenuOpen=!this.isMenuOpen,console.log(this.isMenuOpen)}};e.\u0275fac=function(i){return new(i||e)($(Fa),$(Rn))},e.\u0275cmp=je({type:e,selectors:[["app-navbar"]],standalone:!0,features:[Be],decls:18,vars:4,consts:[[1,"bg-white","dark:bg-zinc-950","shadow-sm","shadow-rose-100","dark:shadow-rose-950","px-4","py-7","fixed","w-full","top-0","z-20","transition-all","duration-500","ease-in-out"],[1,"container","mx-auto","flex","justify-between","items-center"],["routerLink","/",1,"text-rose-600","dark:text-rose-600","dark:hover:text-rose-800","font-bold","lg:text-2xl","md:text-xl"],[1,"hidden","lg:flex"],["routerLink","/",1,"text-rose-600","hover:text-rose-900","font-semibold","dark:text-rose-600","dark:hover:text-rose-800","lg:px-4","sm:px-4"],[1,"text-rose-600","hover:text-rose-900","font-semibold","dark:text-rose-600","dark:hover:text-rose-800","lg:px-4","sm:px-4",3,"routerLink"],["href","#",1,"text-rose-600","hover:text-rose-900","font-semibold","dark:text-rose-600","dark:hover:text-rose-800","lg:px-4","sm:px-4",3,"click"],[1,"lg:hidden"],[1,"text-rose-600","dark:text-rose-600","focus:outline-none","text-xl",3,"click"],["class","lg:hidden absolute top-full left-0 w-full bg-white dark:bg-zinc-950 shadow-md transition-all duration-500 ease-in-out text-center",4,"ngIf"],[1,"lg:hidden","absolute","top-full","left-0","w-full","bg-white","dark:bg-zinc-950","shadow-md","transition-all","duration-500","ease-in-out","text-center"],["routerLink","/",1,"block","py-2","px-4","text-rose-600","hover:text-rose-900","font-semibold","dark:text-rose-600","dark:hover:text-rose-800"],[1,"block","py-2","px-4","text-rose-600","hover:text-rose-900","font-semibold","dark:text-rose-600","dark:hover:text-rose-800",3,"routerLink"],["href","#",1,"block","py-2","px-4","text-rose-600","hover:text-rose-900","font-semibold","dark:text-rose-600","dark:hover:text-rose-800",3,"click"]],template:function(i,s){i&1&&(M(0,"nav",0)(1,"div",1)(2,"div")(3,"a",2),V(4,"Angular Banking"),N()(),M(5,"div",3)(6,"a",4),V(7,"Home"),N(),M(8,"a",5),V(9,"Dashboard"),N(),M(10,"a",6),Ie("click",function(a){return s.toggleDarkMode(a)}),V(11,"Dark/Light"),N(),M(12,"a",6),Ie("click",function(a){return s.signOut(a)}),V(13,"Sign Out"),N()(),M(14,"div",7)(15,"button",8),Ie("click",function(){return s.toggleMenu()}),V(16," \u2630 "),N()(),Ci(17,VW,9,3,"div",9),N()()),i&2&&(Fe(8),xt("routerLink",s.isLoggedIn?rr(2,_M):rr(3,vM)),Fe(9),xt("ngIf",s.isMenuOpen))},dependencies:[Li,dn,Yo],styles:[".dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:calc(100% + 10px);left:0;z-index:10;background-color:#fff;border:1px solid #e5e7eb;box-shadow:0 2px 4px #0000001a;padding:8px 0;width:100%}.dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:8px 16px;color:#333;text-decoration:none;transition:background-color .3s ease}.dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#f3f4f6}.dropdown-menu-dark[_ngcontent-%COMP%]{position:absolute;top:calc(100% + 10px);left:0;z-index:10;background-color:#000;border:1px solid #e5e7eb;box-shadow:0 2px 4px #0000001a;padding:8px 0;width:100%}.dropdown-menu-dark[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:8px 16px;color:#333;text-decoration:none;transition:background-color .3s ease}.dropdown-menu-dark[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#f3f4f6}"]});let t=e;return t})();var wM="@firebase/database",IM="1.0.5";var vb="";function UW(t){vb=t}var CE=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),pt(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:oa(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var TE=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return cr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var eP=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new CE(e)}}catch{}return new TE},io=eP("localStorage"),DE=eP("sessionStorage");var Ba=new ur("@firebase/database"),jW=function(){let t=1;return function(){return t++}}(),tP=function(t){let e=lR(t),n=new zh;n.update(e);let r=n.digest();return Wh.encodeByteArray(r)},gl=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=gl.apply(null,r):typeof r=="object"?e+=pt(r):e+=r,e+=" "}return e},oo=null,EM=!0,BW=function(t,e){k(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Ba.logLevel=pe.VERBOSE,oo=Ba.log.bind(Ba),e&&DE.set("logging_enabled",!0)):typeof t=="function"?oo=t:(oo=null,DE.remove("logging_enabled"))},kt=function(...t){if(EM===!0&&(EM=!1,oo===null&&DE.get("logging_enabled")===!0&&BW(!0)),oo){let e=gl.apply(null,t);oo(e)}},yl=function(t){return function(...e){kt(t,...e)}},SE=function(...t){let e="FIREBASE INTERNAL ERROR: "+gl(...t);Ba.error(e)},Zr=function(...t){let e=`FIREBASE FATAL ERROR: ${gl(...t)}`;throw Ba.error(e),new Error(e)},Zt=function(...t){let e="FIREBASE WARNING: "+gl(...t);Ba.warn(e)},$W=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Zt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},nP=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},HW=function(t){if(ar()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},qa="[MIN_NAME]",ao="[MAX_NAME]",Ja=function(t,e){if(t===e)return 0;if(t===qa||e===ao)return-1;if(e===qa||t===ao)return 1;{let n=bM(t),r=bM(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},qW=function(t,e){return t===e?0:t<e?-1:1},tl=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+pt(e))},wb=function(t){if(typeof t!="object"||t===null)return pt(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=pt(e[r]),n+=":",n+=wb(t[e[r]]);return n+="}",n},rP=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function en(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var iP=function(t){k(!nP(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let d=l.join(""),f="";for(c=0;c<64;c+=8){let m=parseInt(d.substr(c,8),2).toString(16);m.length===1&&(m="0"+m),f=f+m}return f.toLowerCase()},GW=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},zW=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function WW(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var KW=new RegExp("^-?(0*)\\d{1,10}$"),QW=-2147483648,YW=2147483647,bM=function(t){if(KW.test(t)){let e=Number(t);if(e>=QW&&e<=YW)return e}return null},Xa=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw Zt("Exception was thrown by user callback.",n),e},Math.floor(0))}},JW=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ol=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var AE=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Zt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var RE=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(kt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Zt(e)}},al=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),lp="5",sP="v",oP="s",aP="r",cP="f",uP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,lP="ls",dP="p",xE="ac",hP="websocket",fP="long_polling";var dp=class{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=io.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&io.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function XW(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function pP(t,e,n){k(typeof e=="string","typeof type must == string"),k(typeof n=="object","typeof params must == object");let r;if(e===hP)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===fP)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);XW(t)&&(n.ns=t.namespace);let i=[];return en(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var NE=class{constructor(){this.counters_={}}incrementCounter(e,n=1){cr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return eR(this.counters_)}};var yE={},_E={};function Ib(t){let e=t.toString();return yE[e]||(yE[e]=new NE),yE[e]}function ZW(t,e){let n=t.toString();return _E[n]||(_E[n]=e()),_E[n]}var ME=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Xa(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var CM="start",e3="close",t3="pLPCommand",n3="pRTLPCB",mP="id",gP="pw",yP="ser",r3="cb",i3="seg",s3="ts",o3="d",a3="dframe",_P=1870,vP=30,c3=_P-vP,u3=25e3,l3=3e4,PE=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=yl(e),this.stats_=Ib(n),this.urlFn=c=>(this.appCheckToken&&(c[xE]=this.appCheckToken),pP(n,fP,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new ME(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(l3)),HW(()=>{if(this.isClosed_)return;this.scriptTagHolder=new kE((...s)=>{let[o,a,c,l,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===CM)this.id=a,this.password=c;else if(o===e3)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[CM]="t",r[yP]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[r3]=this.scriptTagHolder.uniqueCallbackIdentifier),r[sP]=lp,this.transportSessionId&&(r[oP]=this.transportSessionId),this.lastSessionId&&(r[lP]=this.lastSessionId),this.applicationId&&(r[dP]=this.applicationId),this.appCheckToken&&(r[xE]=this.appCheckToken),typeof location<"u"&&location.hostname&&uP.test(location.hostname)&&(r[aP]=cP);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return ar()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!GW()&&!zW()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=pt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=Z_(n),i=rP(r,c3);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(ar())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[a3]="t",r[mP]=e,r[gP]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=pt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},kE=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,ar())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=jW(),window[t3+this.uniqueCallbackIdentifier]=e,window[n3+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){kt("frame writing exception"),a.stack&&kt(a.stack),kt(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||kt("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[mP]=this.myID,e[gP]=this.myPW,e[yP]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+vP+r.length<=_P;){let o=this.pendingSegs.shift();r=r+"&"+i3+i+"="+o.seg+"&"+s3+i+"="+o.ts+"&"+o3+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(u3)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){ar()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{kt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var d3=16384,h3=45e3,hp=null;typeof MozWebSocket<"u"?hp=MozWebSocket:typeof WebSocket<"u"&&(hp=WebSocket);var nl=(()=>{class t{constructor(n,r,i,s,o,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=yl(this.connId),this.stats_=Ib(r),this.connURL=t.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[sP]=lp,!ar()&&typeof location<"u"&&location.hostname&&uP.test(location.hostname)&&(a[aP]=cP),r&&(a[oP]=r),i&&(a[lP]=i),s&&(a[xE]=s),o&&(a[dP]=o),pP(n,hP,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,io.set("previous_websocket_failure",!0);try{let i;if(ar()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${lp}/${vb}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new hp(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&hp!==null&&!t.forceDisallow_}static previouslyFailed(){return io.isInMemoryStorage||io.get("previous_websocket_failure")===!0}markConnectionHealthy(){io.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=oa(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(k(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=pt(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=rP(r,d3);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(h3))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),f3=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[PE,nl]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=nl&&nl.isAvailable(),i=r&&!nl.previouslyFailed();if(n.webSocketOnly&&(r||Zt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[nl];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),p3=6e4,m3=5e3,g3=10*1024,y3=100*1024,vE="t",TM="d",_3="s",DM="r",v3="e",SM="o",AM="a",RM="n",xM="p",w3="h",OE=class{constructor(e,n,r,i,s,o,a,c,l,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=yl("c:"+this.id+":"),this.transportManager_=new f3(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ol(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>y3?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>g3?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(vE in e){let n=e[vE];n===AM?this.upgradeIfSecondaryHealthy_():n===DM?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===SM&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=tl("t",e),r=tl("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:xM,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:AM,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:RM,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=tl("t",e),r=tl("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=tl(vE,e);if(TM in e){let r=e[TM];if(n===w3){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===RM){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===_3?this.onConnectionShutdown_(r):n===DM?this.onReset_(r):n===v3?SE("Server Error: "+r):n===SM?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):SE("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),lp!==r&&Zt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ol(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(p3))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ol(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(m3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:xM,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(io.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var fp=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var pp=class{constructor(e){this.allowedEvents_=e,this.listeners_={},k(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){k(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var mp=class t extends pp{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!mu()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return k(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var NM=32,MM=768,ke=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function Re(){return new ke("")}function me(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ji(t){return t.pieces_.length-t.pieceNum_}function qe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ke(t.pieces_,e)}function wP(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function I3(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function IP(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function EP(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ke(e,0)}function gt(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ke)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new ke(n,0)}function ye(t){return t.pieceNum_>=t.pieces_.length}function Xt(t,e){let n=me(t),r=me(e);if(n===null)return e;if(n===r)return Xt(qe(t),qe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Eb(t,e){if(Ji(t)!==Ji(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function zn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Ji(t)>Ji(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var FE=class{constructor(e,n){this.errorPrefix_=n,this.parts_=IP(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=_u(this.parts_[r]);bP(this)}};function E3(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=_u(e),bP(t)}function b3(t){let e=t.parts_.pop();t.byteLength_-=_u(e),t.parts_.length>0&&(t.byteLength_-=1)}function bP(t){if(t.byteLength_>MM)throw new Error(t.errorPrefix_+"has a key path longer than "+MM+" bytes ("+t.byteLength_+").");if(t.parts_.length>NM)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+NM+") or object contains a cycle "+ro(t))}function ro(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var LE=class t extends pp{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return k(e==="visible","Unknown event type: "+e),[this.visible_]}};var rl=1e3,C3=60*5*1e3,PM=30*1e3,T3=1.3,D3=3e4,S3="server_kill",kM=3,bb=(()=>{class t extends fp{constructor(n,r,i,s,o,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=yl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=rl,this.maxReconnectDelay_=C3,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!ar())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");LE.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&mp.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(pt(o)),k(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new Vi,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),k(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),k(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,d=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(d,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&cr(n,"w")){let i=Fs(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Zt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||cR(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=PM)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=aR(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),k(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+pt(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):SE("Unrecognized action received from server: "+pt(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){k(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=rl,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=rl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>D3&&(this.reconnectDelay_=rl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*T3)}this.onConnectStatus_(!1)}establishConnection_(){return v(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},d=function(m){k(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(m)};this.realtime_={close:l,sendRequest:d};let f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[m,y]=yield Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);a?kt("getToken() completed but was canceled"):(kt("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=y&&y.token,c=new OE(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,E=>{Zt(E+" ("+this.repoInfo_.toString()+")"),this.interrupt(S3)},o))}catch(m){this.log_("Failed to get token: "+m),a||(this.repoInfo_.nodeAdmin&&Zt(m),l())}}})}interrupt(n){kt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){kt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],gu(this.interruptReasons_)&&(this.reconnectDelay_=rl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>wb(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new ke(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){kt("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=kM&&(this.reconnectDelay_=PM,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){kt("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=kM&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";ar()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+vb.replace(/\./g,"-")]=1,mu()?n["framework.cordova"]=1:Qh()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=mp.getInstance().currentlyOnline();return gu(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),ge=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var Ga=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new ge(qa,e),i=new ge(qa,n);return this.compare(r,i)!==0}minPost(){return ge.MIN}};var up,gp=class extends Ga{static get __EMPTY_NODE(){return up}static set __EMPTY_NODE(e){up=e}compare(e,n){return Ja(e.name,n.name)}isDefinedOn(e){throw Os("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ge.MIN}maxPost(){return new ge(ao,up)}makePost(e,n){return k(typeof e=="string","KeyIndex indexValue must always be a string."),new ge(e,up)}toString(){return".key"}},$a=new gp;var ja=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Gn=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??xn.EMPTY_NODE,this.right=o??xn.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return xn.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return xn.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),VE=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new Gn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},xn=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Gn.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Gn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ja(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ja(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ja(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ja(this.root_,null,this.comparator_,!0,e)}};xn.EMPTY_NODE=new VE;function A3(t,e){return Ja(t.name,e.name)}function Cb(t,e){return Ja(t,e)}var UE;function R3(t){UE=t}var CP=function(t){return typeof t=="number"?"number:"+iP(t):"string:"+t},TP=function(t){if(t.isLeafNode()){let e=t.val();k(typeof e=="string"||typeof e=="number"||typeof e=="object"&&cr(e,".sv"),"Priority must be a string or number.")}else k(t===UE||t.isEmpty(),"priority of unexpected type.");k(t===UE||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var OM,za=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,k(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),TP(this.priorityNode_)}static set __childrenNodeConstructor(n){OM=n}static get __childrenNodeConstructor(){return OM}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return ye(n)?this:me(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=me(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(k(i!==".priority"||Ji(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(qe(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+CP(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=iP(this.value_):n+=this.value_,this.lazyHash_=tP(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(k(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return k(s>=0,"Unknown leaf type: "+r),k(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),DP,SP;function x3(t){DP=t}function N3(t){SP=t}var jE=class extends Ga{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Ja(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ge.MIN}maxPost(){return new ge(ao,new za("[PRIORITY-POST]",SP))}makePost(e,n){let r=DP(e);return new ge(n,new za("[PRIORITY-POST]",r))}toString(){return".priority"}},tt=new jE;var M3=Math.log(2),BE=class{constructor(e){let n=s=>parseInt(Math.log(s)/M3,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},yp=function(t,e,n,r){t.sort(e);let i=function(c,l){let d=l-c,f,m;if(d===0)return null;if(d===1)return f=t[c],m=n?n(f):f,new Gn(m,f.node,Gn.BLACK,null,null);{let y=parseInt(d/2,10)+c,E=i(c,y),x=i(y+1,l);return f=t[y],m=n?n(f):f,new Gn(m,f.node,Gn.BLACK,E,x)}},s=function(c){let l=null,d=null,f=t.length,m=function(E,x){let R=f-E,F=f;f-=E;let q=i(R+1,F),B=t[R],z=n?n(B):B;y(new Gn(z,B.node,x,null,q))},y=function(E){l?(l.left=E,l=E):(d=E,l=E)};for(let E=0;E<c.count;++E){let x=c.nextBitIsOne(),R=Math.pow(2,c.count-(E+1));x?m(R,Gn.BLACK):(m(R,Gn.BLACK),m(R,Gn.RED))}return d},o=new BE(t.length),a=s(o);return new xn(r||e,a)};var wE,Ua={},Wa=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return k(Ua&&tt,"ChildrenNode.ts has not been loaded"),wE=wE||new t({".priority":Ua},{".priority":tt}),wE}get(e){let n=Fs(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof xn?n:null}hasIndex(e){return cr(this.indexSet_,e.toString())}addIndex(e,n){k(e!==$a,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(ge.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=yp(r,e.getCompare()):a=Ua;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let d=Object.assign({},this.indexes_);return d[c]=a,new t(d,l)}addToIndexes(e,n){let r=yu(this.indexes_,(i,s)=>{let o=Fs(this.indexSet_,s);if(k(o,"Missing index implementation for "+s),i===Ua)if(o.isDefinedOn(e.node)){let a=[],c=n.getIterator(ge.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),yp(a,o.getCompare())}else return Ua;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new ge(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=yu(this.indexes_,i=>{if(i===Ua)return i;{let s=n.get(e.name);return s?i.remove(new ge(e.name,s)):i}});return new t(r,this.indexSet_)}};var il,le=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&TP(this.priorityNode_),this.children_.isEmpty()&&k(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return il||(il=new t(new xn(Cb),null,Wa.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||il}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?il:r}}getChild(n){let r=me(n);return r===null?this:this.getImmediateChild(r).getChild(qe(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(k(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new ge(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?il:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=me(n);if(i===null)return r;{k(me(n)!==".priority"||Ji(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(qe(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(tt,(a,c)=>{r[a]=c.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+CP(this.getPriority().val())+":"),this.forEachChild(tt,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":tP(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new ge(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new ge(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new ge(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,ge.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,ge.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===_l?-1:0}withIndex(n){if(n===$a||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===$a||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(tt),s=r.getIterator(tt),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===$a?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),$E=class extends le{constructor(){super(new xn(Cb),le.EMPTY_NODE,Wa.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return le.EMPTY_NODE}isEmpty(){return!1}},_l=new $E;Object.defineProperties(ge,{MIN:{value:new ge(qa,le.EMPTY_NODE)},MAX:{value:new ge(ao,_l)}});gp.__EMPTY_NODE=le.EMPTY_NODE;za.__childrenNodeConstructor=le;R3(_l);N3(_l);var P3=!0;function Et(t,e=null){if(t===null)return le.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),k(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new za(n,Et(e))}if(!(t instanceof Array)&&P3){let n=[],r=!1;if(en(t,(o,a)=>{if(o.substring(0,1)!=="."){let c=Et(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new ge(o,c)))}}),n.length===0)return le.EMPTY_NODE;let s=yp(n,A3,o=>o.name,Cb);if(r){let o=yp(n,tt.getCompare());return new le(s,Et(e),new Wa({".priority":o},{".priority":tt}))}else return new le(s,Et(e),Wa.Default)}else{let n=le.EMPTY_NODE;return en(t,(r,i)=>{if(cr(t,r)&&r.substring(0,1)!=="."){let s=Et(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Et(e))}}x3(Et);var HE=class extends Ga{constructor(e){super(),this.indexPath_=e,k(!ye(e)&&me(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Ja(e.name,n.name):s}makePost(e,n){let r=Et(e),i=le.EMPTY_NODE.updateChild(this.indexPath_,r);return new ge(n,i)}maxPost(){let e=le.EMPTY_NODE.updateChild(this.indexPath_,_l);return new ge(ao,e)}toString(){return IP(this.indexPath_,0).join("/")}};var qE=class extends Ga{compare(e,n){let r=e.node.compareTo(n.node);return r===0?Ja(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ge.MIN}maxPost(){return ge.MAX}makePost(e,n){let r=Et(e);return new ge(n,r)}toString(){return".value"}},k3=new qE;function AP(t){return{type:"value",snapshotNode:t}}function Ka(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function dl(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function hl(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function O3(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var fl=class{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){k(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(dl(n,a)):k(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Ka(n,r)):o.trackChildChange(hl(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(tt,(i,s)=>{n.hasChild(i)||r.trackChildChange(dl(i,s))}),n.isLeafNode()||n.forEachChild(tt,(i,s)=>{if(e.hasChild(i)){let o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(hl(i,s,o))}else r.trackChildChange(Ka(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?le.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var _p=class t{constructor(e){this.indexedFilter_=new fl(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new ge(n,r))||(r=le.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=le.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(le.EMPTY_NODE);let s=this;return n.forEachChild(tt,(o,a)=>{s.matches(new ge(o,a))||(i=i.updateImmediateChild(o,le.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var GE=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new _p(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new ge(n,r))||(r=le.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=le.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=le.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(le.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,le.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){let f=this.index_.getCompare();o=(m,y)=>f(y,m)}else o=this.index_.getCompare();let a=e;k(a.numChildren()===this.limit_,"");let c=new ge(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(c);if(a.hasChild(n)){let f=a.getImmediateChild(n),m=i.getChildAfterChild(this.index_,l,this.reverse_);for(;m!=null&&(m.name===n||a.hasChild(m.name));)m=i.getChildAfterChild(this.index_,m,this.reverse_);let y=m==null?1:o(m,c);if(d&&!r.isEmpty()&&y>=0)return s?.trackChildChange(hl(n,r,f)),a.updateImmediateChild(n,r);{s?.trackChildChange(dl(n,f));let x=a.updateImmediateChild(n,le.EMPTY_NODE);return m!=null&&this.rangedFilter_.matches(m)?(s?.trackChildChange(Ka(m.name,m.node)),x.updateImmediateChild(m.name,m.node)):x}}else return r.isEmpty()?e:d&&o(l,c)>=0?(s!=null&&(s.trackChildChange(dl(l.name,l.node)),s.trackChildChange(Ka(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,le.EMPTY_NODE)):e}};var zE=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=tt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return k(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return k(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:qa}hasEnd(){return this.endSet_}getIndexEndValue(){return k(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return k(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ao}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return k(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===tt}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function F3(t){return t.loadsAllData()?new fl(t.getIndex()):t.hasLimit()?new GE(t):new _p(t)}function FM(t){let e={};if(t.isDefault())return e;let n;if(t.index_===tt?n="$priority":t.index_===k3?n="$value":t.index_===$a?n="$key":(k(t.index_ instanceof HE,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=pt(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=pt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+pt(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=pt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+pt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function LM(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==tt&&(e.i=t.index_.toString()),e}var WE=class t extends fp{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=yl("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(k(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let c=FM(e._queryParams);this.restRequest_(s+".json",c,(l,d)=>{let f=d;if(l===404&&(f=null,l=null),l===null&&this.onDataUpdate_(s,f,!1,r),Fs(this.listens_,o)===a){let m;l?l===401?m="permission_denied":m="rest_error:"+l:m="ok",i(m,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=FM(e._queryParams),r=e._path.toString(),i=new Vi;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Vs(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=oa(a.responseText)}catch{Zt("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Zt("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var KE=class{constructor(){this.rootNode_=le.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function vp(){return{value:null,children:new Map}}function RP(t,e,n){if(ye(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=me(e);t.children.has(r)||t.children.set(r,vp());let i=t.children.get(r);e=qe(e),RP(i,e,n)}}function QE(t,e,n){t.value!==null?n(e,t.value):L3(t,(r,i)=>{let s=new ke(e.toString()+"/"+r);QE(i,s,n)})}function L3(t,e){t.children.forEach((n,r)=>{e(r,n)})}var YE=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&en(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var VM=10*1e3,V3=30*1e3,U3=5*60*1e3,JE=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new YE(e);let r=VM+(V3-VM)*Math.random();ol(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;en(e,(i,s)=>{s>0&&cr(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),ol(this.reportStats_.bind(this),Math.floor(Math.random()*2*U3))}};var Cr=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Cr||{});function xP(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Tb(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Db(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var XE=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Cr.ACK_USER_WRITE,this.source=xP()}operationForChild(e){if(ye(this.path)){if(this.affectedTree.value!=null)return k(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new ke(e));return new t(Re(),n,this.revert)}}else return k(me(this.path)===e,"operationForChild called for unrelated child."),new t(qe(this.path),this.affectedTree,this.revert)}};var wp=class t{constructor(e,n){this.source=e,this.path=n,this.type=Cr.LISTEN_COMPLETE}operationForChild(e){return ye(this.path)?new t(this.source,Re()):new t(this.source,qe(this.path))}};var Qa=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Cr.OVERWRITE}operationForChild(e){return ye(this.path)?new t(this.source,Re(),this.snap.getImmediateChild(e)):new t(this.source,qe(this.path),this.snap)}};var Ip=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Cr.MERGE}operationForChild(e){if(ye(this.path)){let n=this.children.subtree(new ke(e));return n.isEmpty()?null:n.value?new Qa(this.source,Re(),n.value):new t(this.source,Re(),n)}else return k(me(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,qe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var ei=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ye(e))return this.isFullyInitialized()&&!this.filtered_;let n=me(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var ZE=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function j3(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(O3(o.childName,o.snapshotNode))}),sl(t,i,"child_removed",e,r,n),sl(t,i,"child_added",e,r,n),sl(t,i,"child_moved",s,r,n),sl(t,i,"child_changed",e,r,n),sl(t,i,"value",e,r,n),i}function sl(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,c)=>$3(t,a,c)),o.forEach(a=>{let c=B3(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function B3(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function $3(t,e,n){if(e.childName==null||n.childName==null)throw Os("Should only compare child_ events.");let r=new ge(e.childName,e.snapshotNode),i=new ge(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function Op(t,e){return{eventCache:t,serverCache:e}}function cl(t,e,n,r){return Op(new ei(e,n,r),t.serverCache)}function NP(t,e,n,r){return Op(t.eventCache,new ei(e,n,r))}function eb(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function co(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var IE,H3=()=>(IE||(IE=new xn(qW)),IE),tn=class t{constructor(e,n=H3()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return en(e,(r,i)=>{n=n.set(new ke(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Re(),value:this.value};if(ye(e))return null;{let r=me(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(qe(e),n);return s!=null?{path:gt(new ke(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ye(e))return this;{let n=me(e),r=this.children.get(n);return r!==null?r.subtree(qe(e)):new t(null)}}set(e,n){if(ye(e))return new t(n,this.children);{let r=me(e),s=(this.children.get(r)||new t(null)).set(qe(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(ye(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=me(e),r=this.children.get(n);if(r){let i=r.remove(qe(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(ye(e))return this.value;{let n=me(e),r=this.children.get(n);return r?r.get(qe(e)):null}}setTree(e,n){if(ye(e))return n;{let r=me(e),s=(this.children.get(r)||new t(null)).setTree(qe(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(Re(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(gt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Re(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(ye(e))return null;{let s=me(e),o=this.children.get(s);return o?o.findOnPath_(qe(e),gt(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Re(),n)}foreachOnPath_(e,n,r){if(ye(e))return this;{this.value&&r(n,this.value);let i=me(e),s=this.children.get(i);return s?s.foreachOnPath_(qe(e),gt(n,i),r):new t(null)}}foreach(e){this.foreach_(Re(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(gt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var Wn=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new tn(null))}};function ul(t,e,n){if(ye(e))return new Wn(new tn(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=Xt(i,e);return s=s.updateChild(o,n),new Wn(t.writeTree_.set(i,s))}else{let i=new tn(n),s=t.writeTree_.setTree(e,i);return new Wn(s)}}}function UM(t,e,n){let r=t;return en(n,(i,s)=>{r=ul(r,gt(e,i),s)}),r}function jM(t,e){if(ye(e))return Wn.empty();{let n=t.writeTree_.setTree(e,new tn(null));return new Wn(n)}}function tb(t,e){return lo(t,e)!=null}function lo(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Xt(n.path,e)):null}function BM(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(tt,(r,i)=>{e.push(new ge(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new ge(r,i.value))}),e}function Yi(t,e){if(ye(e))return t;{let n=lo(t,e);return n!=null?new Wn(new tn(n)):new Wn(t.writeTree_.subtree(e))}}function nb(t){return t.writeTree_.isEmpty()}function Ya(t,e){return MP(Re(),t.writeTree_,e)}function MP(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(k(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=MP(gt(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(gt(t,".priority"),r)),n}}function Sb(t,e){return FP(e,t)}function q3(t,e,n,r,i){k(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=ul(t.visibleWrites,e,n)),t.lastWriteId=r}function G3(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function z3(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);k(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&W3(a,r.path)?i=!1:zn(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return K3(t),!0;if(r.snap)t.visibleWrites=jM(t.visibleWrites,r.path);else{let a=r.children;en(a,c=>{t.visibleWrites=jM(t.visibleWrites,gt(r.path,c))})}return!0}else return!1}function W3(t,e){if(t.snap)return zn(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&zn(gt(t.path,n),e))return!0;return!1}function K3(t){t.visibleWrites=PP(t.allWrites,Q3,Re()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Q3(t){return t.visible}function PP(t,e,n){let r=Wn.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)zn(n,o)?(a=Xt(n,o),r=ul(r,a,s.snap)):zn(o,n)&&(a=Xt(o,n),r=ul(r,Re(),s.snap.getChild(a)));else if(s.children){if(zn(n,o))a=Xt(n,o),r=UM(r,a,s.children);else if(zn(o,n))if(a=Xt(o,n),ye(a))r=UM(r,Re(),s.children);else{let c=Fs(s.children,me(a));if(c){let l=c.getChild(qe(a));r=ul(r,Re(),l)}}}else throw Os("WriteRecord should have .snap or .children")}}return r}function kP(t,e,n,r,i){if(!r&&!i){let s=lo(t.visibleWrites,e);if(s!=null)return s;{let o=Yi(t.visibleWrites,e);if(nb(o))return n;if(n==null&&!tb(o,Re()))return null;{let a=n||le.EMPTY_NODE;return Ya(o,a)}}}else{let s=Yi(t.visibleWrites,e);if(!i&&nb(s))return n;if(!i&&n==null&&!tb(s,Re()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(zn(l.path,e)||zn(e,l.path))},a=PP(t.allWrites,o,e),c=n||le.EMPTY_NODE;return Ya(a,c)}}}function Y3(t,e,n){let r=le.EMPTY_NODE,i=lo(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(tt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=Yi(t.visibleWrites,e);return n.forEachChild(tt,(o,a)=>{let c=Ya(Yi(s,new ke(o)),a);r=r.updateImmediateChild(o,c)}),BM(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=Yi(t.visibleWrites,e);return BM(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function J3(t,e,n,r,i){k(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=gt(e,n);if(tb(t.visibleWrites,s))return null;{let o=Yi(t.visibleWrites,s);return nb(o)?i.getChild(n):Ya(o,i.getChild(n))}}function X3(t,e,n,r){let i=gt(e,n),s=lo(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=Yi(t.visibleWrites,i);return Ya(o,r.getNode().getImmediateChild(n))}else return null}function Z3(t,e){return lo(t.visibleWrites,e)}function e9(t,e,n,r,i,s,o){let a,c=Yi(t.visibleWrites,e),l=lo(c,Re());if(l!=null)a=l;else if(n!=null)a=Ya(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let d=[],f=o.getCompare(),m=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),y=m.getNext();for(;y&&d.length<i;)f(y,r)!==0&&d.push(y),y=m.getNext();return d}else return[]}function t9(){return{visibleWrites:Wn.empty(),allWrites:[],lastWriteId:-1}}function Ep(t,e,n,r){return kP(t.writeTree,t.treePath,e,n,r)}function Ab(t,e){return Y3(t.writeTree,t.treePath,e)}function $M(t,e,n,r){return J3(t.writeTree,t.treePath,e,n,r)}function bp(t,e){return Z3(t.writeTree,gt(t.treePath,e))}function n9(t,e,n,r,i,s){return e9(t.writeTree,t.treePath,e,n,r,i,s)}function Rb(t,e,n){return X3(t.writeTree,t.treePath,e,n)}function OP(t,e){return FP(gt(t.treePath,e),t.writeTree)}function FP(t,e){return{treePath:t,writeTree:e}}var rb=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;k(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),k(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,hl(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,dl(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Ka(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,hl(r,e.snapshotNode,i.oldSnap));else throw Os("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var ib=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},LP=new ib,pl=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new ei(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Rb(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:co(this.viewCache_),s=n9(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function r9(t){return{filter:t}}function i9(t,e){k(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),k(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function s9(t,e,n,r,i){let s=new rb,o,a;if(n.type===Cr.OVERWRITE){let l=n;l.source.fromUser?o=sb(t,e,l.path,l.snap,r,i,s):(k(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!ye(l.path),o=Cp(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===Cr.MERGE){let l=n;l.source.fromUser?o=a9(t,e,l.path,l.children,r,i,s):(k(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=ob(t,e,l.path,l.children,r,i,a,s))}else if(n.type===Cr.ACK_USER_WRITE){let l=n;l.revert?o=l9(t,e,l.path,r,i,s):o=c9(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===Cr.LISTEN_COMPLETE)o=u9(t,e,n.path,r,s);else throw Os("Unknown operation type: "+n.type);let c=s.getChanges();return o9(e,o,c),{viewCache:o,changes:c}}function o9(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=eb(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(AP(eb(e)))}}function VP(t,e,n,r,i,s){let o=e.eventCache;if(bp(r,n)!=null)return e;{let a,c;if(ye(n))if(k(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=co(e),d=l instanceof le?l:le.EMPTY_NODE,f=Ab(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{let l=Ep(r,co(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=me(n);if(l===".priority"){k(Ji(n)===1,"Can't have a priority with additional path components");let d=o.getNode();c=e.serverCache.getNode();let f=$M(r,n,d,c);f!=null?a=t.filter.updatePriority(d,f):a=o.getNode()}else{let d=qe(n),f;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let m=$M(r,n,o.getNode(),c);m!=null?f=o.getNode().getImmediateChild(l).updateChild(d,m):f=o.getNode().getImmediateChild(l)}else f=Rb(r,l,e.serverCache);f!=null?a=t.filter.updateChild(o.getNode(),l,f,d,i,s):a=o.getNode()}}return cl(e,a,o.isFullyInitialized()||ye(n),t.filter.filtersNodes())}}function Cp(t,e,n,r,i,s,o,a){let c=e.serverCache,l,d=o?t.filter:t.filter.getIndexedFilter();if(ye(n))l=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){let y=c.getNode().updateChild(n,r);l=d.updateFullNode(c.getNode(),y,null)}else{let y=me(n);if(!c.isCompleteForPath(n)&&Ji(n)>1)return e;let E=qe(n),R=c.getNode().getImmediateChild(y).updateChild(E,r);y===".priority"?l=d.updatePriority(c.getNode(),R):l=d.updateChild(c.getNode(),y,R,E,LP,null)}let f=NP(e,l,c.isFullyInitialized()||ye(n),d.filtersNodes()),m=new pl(i,f,s);return VP(t,f,n,i,m,a)}function sb(t,e,n,r,i,s,o){let a=e.eventCache,c,l,d=new pl(i,e,s);if(ye(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=cl(e,l,!0,t.filter.filtersNodes());else{let f=me(n);if(f===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=cl(e,l,a.isFullyInitialized(),a.isFiltered());else{let m=qe(n),y=a.getNode().getImmediateChild(f),E;if(ye(m))E=r;else{let x=d.getCompleteChild(f);x!=null?wP(m)===".priority"&&x.getChild(EP(m)).isEmpty()?E=x:E=x.updateChild(m,r):E=le.EMPTY_NODE}if(y.equals(E))c=e;else{let x=t.filter.updateChild(a.getNode(),f,E,m,d,o);c=cl(e,x,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function HM(t,e){return t.eventCache.isCompleteForChild(e)}function a9(t,e,n,r,i,s,o){let a=e;return r.foreach((c,l)=>{let d=gt(n,c);HM(e,me(d))&&(a=sb(t,a,d,l,i,s,o))}),r.foreach((c,l)=>{let d=gt(n,c);HM(e,me(d))||(a=sb(t,a,d,l,i,s,o))}),a}function qM(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function ob(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;ye(n)?l=r:l=new tn(null).setTree(n,r);let d=e.serverCache.getNode();return l.children.inorderTraversal((f,m)=>{if(d.hasChild(f)){let y=e.serverCache.getNode().getImmediateChild(f),E=qM(t,y,m);c=Cp(t,c,new ke(f),E,i,s,o,a)}}),l.children.inorderTraversal((f,m)=>{let y=!e.serverCache.isCompleteForChild(f)&&m.value===null;if(!d.hasChild(f)&&!y){let E=e.serverCache.getNode().getImmediateChild(f),x=qM(t,E,m);c=Cp(t,c,new ke(f),x,i,s,o,a)}}),c}function c9(t,e,n,r,i,s,o){if(bp(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(ye(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Cp(t,e,n,c.getNode().getChild(n),i,s,a,o);if(ye(n)){let l=new tn(null);return c.getNode().forEachChild($a,(d,f)=>{l=l.set(new ke(d),f)}),ob(t,e,n,l,i,s,a,o)}else return e}else{let l=new tn(null);return r.foreach((d,f)=>{let m=gt(n,d);c.isCompleteForPath(m)&&(l=l.set(d,c.getNode().getChild(m)))}),ob(t,e,n,l,i,s,a,o)}}function u9(t,e,n,r,i){let s=e.serverCache,o=NP(e,s.getNode(),s.isFullyInitialized()||ye(n),s.isFiltered());return VP(t,o,n,r,LP,i)}function l9(t,e,n,r,i,s){let o;if(bp(r,n)!=null)return e;{let a=new pl(r,e,i),c=e.eventCache.getNode(),l;if(ye(n)||me(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=Ep(r,co(e));else{let f=e.serverCache.getNode();k(f instanceof le,"serverChildren would be complete if leaf node"),d=Ab(r,f)}d=d,l=t.filter.updateFullNode(c,d,s)}else{let d=me(n),f=Rb(r,d,e.serverCache);f==null&&e.serverCache.isCompleteForChild(d)&&(f=c.getImmediateChild(d)),f!=null?l=t.filter.updateChild(c,d,f,qe(n),a,s):e.eventCache.getNode().hasChild(d)?l=t.filter.updateChild(c,d,le.EMPTY_NODE,qe(n),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Ep(r,co(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||bp(r,Re())!=null,cl(e,l,o,t.filter.filtersNodes())}}var ab=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new fl(r.getIndex()),s=F3(r);this.processor_=r9(s);let o=n.serverCache,a=n.eventCache,c=i.updateFullNode(le.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(le.EMPTY_NODE,a.getNode(),null),d=new ei(c,o.isFullyInitialized(),i.filtersNodes()),f=new ei(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Op(f,d),this.eventGenerator_=new ZE(this.query_)}get query(){return this.query_}};function d9(t){return t.viewCache_.serverCache.getNode()}function h9(t,e){let n=co(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ye(e)&&!n.getImmediateChild(me(e)).isEmpty())?n.getChild(e):null}function GM(t){return t.eventRegistrations_.length===0}function f9(t,e){t.eventRegistrations_.push(e)}function zM(t,e,n){let r=[];if(n){k(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){let o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function WM(t,e,n,r){e.type===Cr.MERGE&&e.source.queryId!==null&&(k(co(t.viewCache_),"We should always have a full cache before handling merges"),k(eb(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=s9(t.processor_,i,e,n,r);return i9(t.processor_,s.viewCache),k(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,UP(t,s.changes,s.viewCache.eventCache.getNode(),null)}function p9(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(tt,(s,o)=>{r.push(Ka(s,o))}),n.isFullyInitialized()&&r.push(AP(n.getNode())),UP(t,r,n.getNode(),e)}function UP(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return j3(t.eventGenerator_,e,n,i)}var Tp,cb=class{constructor(){this.views=new Map}};function m9(t){k(!Tp,"__referenceConstructor has already been defined"),Tp=t}function g9(){return k(Tp,"Reference.ts has not been loaded"),Tp}function y9(t){return t.views.size===0}function xb(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return k(s!=null,"SyncTree gave us an op for an invalid query."),WM(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(WM(o,e,n,r));return s}}function _9(t,e,n,r,i){let s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=Ep(n,i?r:null),c=!1;a?c=!0:r instanceof le?(a=Ab(n,r),c=!1):(a=le.EMPTY_NODE,c=!1);let l=Op(new ei(a,c,!1),new ei(r,i,!1));return new ab(e,l)}return o}function v9(t,e,n,r,i,s){let o=_9(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),f9(o,n),p9(o,n)}function w9(t,e,n,r){let i=e._queryIdentifier,s=[],o=[],a=Xi(t);if(i==="default")for(let[c,l]of t.views.entries())o=o.concat(zM(l,n,r)),GM(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{let c=t.views.get(i);c&&(o=o.concat(zM(c,n,r)),GM(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!Xi(t)&&s.push(new(g9())(e._repo,e._path)),{removed:s,events:o}}function jP(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Ha(t,e){let n=null;for(let r of t.views.values())n=n||h9(r,e);return n}function BP(t,e){if(e._queryParams.loadsAllData())return Fp(t);{let r=e._queryIdentifier;return t.views.get(r)}}function $P(t,e){return BP(t,e)!=null}function Xi(t){return Fp(t)!=null}function Fp(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var Dp;function I9(t){k(!Dp,"__referenceConstructor has already been defined"),Dp=t}function E9(){return k(Dp,"Reference.ts has not been loaded"),Dp}var b9=1,Sp=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new tn(null),this.pendingWriteTree_=t9(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function HP(t,e,n,r,i){return q3(t.pendingWriteTree_,e,n,r,i),i?vl(t,new Qa(xP(),e,n)):[]}function so(t,e,n=!1){let r=G3(t.pendingWriteTree_,e);if(z3(t.pendingWriteTree_,e)){let s=new tn(null);return r.snap!=null?s=s.set(Re(),!0):en(r.children,o=>{s=s.set(new ke(o),!0)}),vl(t,new XE(r.path,s,n))}else return[]}function Lp(t,e,n){return vl(t,new Qa(Tb(),e,n))}function C9(t,e,n){let r=tn.fromObject(n);return vl(t,new Ip(Tb(),e,r))}function T9(t,e){return vl(t,new wp(Tb(),e))}function D9(t,e,n){let r=Mb(t,n);if(r){let i=Pb(r),s=i.path,o=i.queryId,a=Xt(s,e),c=new wp(Db(o),a);return kb(t,s,c)}else return[]}function ub(t,e,n,r,i=!1){let s=e._path,o=t.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||$P(o,e))){let c=w9(o,e,n,r);y9(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));let l=c.removed;if(a=c.events,!i){let d=l.findIndex(m=>m._queryParams.loadsAllData())!==-1,f=t.syncPointTree_.findOnPath(s,(m,y)=>Xi(y));if(d&&!f){let m=t.syncPointTree_.subtree(s);if(!m.isEmpty()){let y=R9(m);for(let E=0;E<y.length;++E){let x=y[E],R=x.query,F=zP(t,x);t.listenProvider_.startListening(ll(R),Ap(t,R),F.hashFn,F.onComplete)}}}!f&&l.length>0&&!r&&(d?t.listenProvider_.stopListening(ll(e),null):l.forEach(m=>{let y=t.queryToTagMap.get(Vp(m));t.listenProvider_.stopListening(ll(m),y)}))}x9(t,l)}return a}function S9(t,e,n,r){let i=Mb(t,r);if(i!=null){let s=Pb(i),o=s.path,a=s.queryId,c=Xt(o,e),l=new Qa(Db(a),c,n);return kb(t,o,l)}else return[]}function A9(t,e,n,r){let i=Mb(t,r);if(i){let s=Pb(i),o=s.path,a=s.queryId,c=Xt(o,e),l=tn.fromObject(n),d=new Ip(Db(a),c,l);return kb(t,o,d)}else return[]}function KM(t,e,n,r=!1){let i=e._path,s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(m,y)=>{let E=Xt(m,i);s=s||Ha(y,E),o=o||Xi(y)});let a=t.syncPointTree_.get(i);a?(o=o||Xi(a),s=s||Ha(a,Re())):(a=new cb,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;s!=null?c=!0:(c=!1,s=le.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((y,E)=>{let x=Ha(E,Re());x&&(s=s.updateImmediateChild(y,x))}));let l=$P(a,e);if(!l&&!e._queryParams.loadsAllData()){let m=Vp(e);k(!t.queryToTagMap.has(m),"View does not exist, but we have a tag");let y=N9();t.queryToTagMap.set(m,y),t.tagToQueryMap.set(y,m)}let d=Sb(t.pendingWriteTree_,i),f=v9(a,e,n,d,s,c);if(!l&&!o&&!r){let m=BP(a,e);f=f.concat(M9(t,e,m))}return f}function Nb(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let c=Xt(o,e),l=Ha(a,c);if(l)return l});return kP(i,e,s,n,!0)}function vl(t,e){return qP(e,t.syncPointTree_,null,Sb(t.pendingWriteTree_,Re()))}function qP(t,e,n,r){if(ye(t.path))return GP(t,e,n,r);{let i=e.get(Re());n==null&&i!=null&&(n=Ha(i,Re()));let s=[],o=me(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){let l=n?n.getImmediateChild(o):null,d=OP(r,o);s=s.concat(qP(a,c,l,d))}return i&&(s=s.concat(xb(i,t,r,n))),s}}function GP(t,e,n,r){let i=e.get(Re());n==null&&i!=null&&(n=Ha(i,Re()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=n?n.getImmediateChild(o):null,l=OP(r,o),d=t.operationForChild(o);d&&(s=s.concat(GP(d,a,c,l)))}),i&&(s=s.concat(xb(i,t,r,n))),s}function zP(t,e){let n=e.query,r=Ap(t,n);return{hashFn:()=>(d9(e)||le.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?D9(t,n._path,r):T9(t,n._path);{let s=WW(i,n);return ub(t,n,null,s)}}}}function Ap(t,e){let n=Vp(e);return t.queryToTagMap.get(n)}function Vp(t){return t._path.toString()+"$"+t._queryIdentifier}function Mb(t,e){return t.tagToQueryMap.get(e)}function Pb(t){let e=t.indexOf("$");return k(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ke(t.substr(0,e))}}function kb(t,e,n){let r=t.syncPointTree_.get(e);k(r,"Missing sync point for query tag that we're tracking");let i=Sb(t.pendingWriteTree_,e);return xb(r,n,i,null)}function R9(t){return t.fold((e,n,r)=>{if(n&&Xi(n))return[Fp(n)];{let i=[];return n&&(i=jP(n)),en(r,(s,o)=>{i=i.concat(o)}),i}})}function ll(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(E9())(t._repo,t._path):t}function x9(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=Vp(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function N9(){return b9++}function M9(t,e,n){let r=e._path,i=Ap(t,e),s=zP(t,n),o=t.listenProvider_.startListening(ll(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)k(!Xi(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,d,f)=>{if(!ye(l)&&d&&Xi(d))return[Fp(d).query];{let m=[];return d&&(m=m.concat(jP(d).map(y=>y.query))),en(f,(y,E)=>{m=m.concat(E)}),m}});for(let l=0;l<c.length;++l){let d=c[l];t.listenProvider_.stopListening(ll(d),Ap(t,d))}}return o}var lb=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},db=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=gt(this.path_,e);return new t(this.syncTree_,n)}node(){return Nb(this.syncTree_,this.path_)}},P9=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},QM=function(t,e,n){if(!t||typeof t!="object")return t;if(k(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return k9(t[".sv"],e,n);if(typeof t[".sv"]=="object")return O9(t[".sv"],e);k(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},k9=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:k(!1,"Unexpected server value: "+t)}},O9=function(t,e,n){t.hasOwnProperty("increment")||k(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&k(!1,"Unexpected increment value: "+r);let i=e.node();if(k(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},F9=function(t,e,n,r){return Ob(e,new db(n,t),r)},WP=function(t,e,n){return Ob(t,new lb(e),n)};function Ob(t,e,n){let r=t.getPriority().val(),i=QM(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=QM(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new za(a,Et(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new za(i))),o.forEachChild(tt,(a,c)=>{let l=Ob(c,e.getImmediateChild(a),n);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var ml=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function Fb(t,e){let n=e instanceof ke?e:new ke(e),r=t,i=me(n);for(;i!==null;){let s=Fs(r.node.children,i)||{children:{},childCount:0};r=new ml(i,r,s),n=qe(n),i=me(n)}return r}function Za(t){return t.node.value}function KP(t,e){t.node.value=e,hb(t)}function QP(t){return t.node.childCount>0}function L9(t){return Za(t)===void 0&&!QP(t)}function Up(t,e){en(t.node.children,(n,r)=>{e(new ml(n,t,r))})}function YP(t,e,n,r){n&&!r&&e(t),Up(t,i=>{YP(i,e,!0,r)}),n&&r&&e(t)}function V9(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function wl(t){return new ke(t.parent===null?t.name:wl(t.parent)+"/"+t.name)}function hb(t){t.parent!==null&&U9(t.parent,t.name,t)}function U9(t,e,n){let r=L9(n),i=cr(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,hb(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,hb(t))}var j9=/[\[\].#$\/\u0000-\u001F\u007F]/,B9=/[\[\].#$\u0000-\u001F\u007F]/,EE=10*1024*1024,JP=function(t){return typeof t=="string"&&t.length!==0&&!j9.test(t)},XP=function(t){return typeof t=="string"&&t.length!==0&&!B9.test(t)},$9=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),XP(t)};var ZP=function(t,e,n,r){r&&e===void 0||Lb(Yh(t,"value"),e,n)},Lb=function(t,e,n){let r=n instanceof ke?new FE(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+ro(r));if(typeof e=="function")throw new Error(t+"contains a function "+ro(r)+" with contents = "+e.toString());if(nP(e))throw new Error(t+"contains "+e.toString()+" "+ro(r));if(typeof e=="string"&&e.length>EE/3&&_u(e)>EE)throw new Error(t+"contains a string greater than "+EE+" utf8 bytes "+ro(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(en(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!JP(o)))throw new Error(t+" contains an invalid key ("+o+") "+ro(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);E3(r,o),Lb(t,a,r),b3(r)}),i&&s)throw new Error(t+' contains ".value" child '+ro(r)+" in addition to actual children.")}};var ek=function(t,e,n,r){if(!(r&&n===void 0)&&!XP(n))throw new Error(Yh(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},H9=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ek(t,e,n,r)},tk=function(t,e){if(me(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},q9=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!JP(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!$9(n))throw new Error(Yh(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var fb=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Vb(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!Eb(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function nk(t,e,n){Vb(t,n),rk(t,r=>Eb(r,e))}function ti(t,e,n){Vb(t,n),rk(t,r=>zn(r,e)||zn(e,r))}function rk(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(G9(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function G9(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();oo&&kt("event: "+n.toString()),Xa(r)}}}var z9="repo_interrupt",W9=25,pb=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new fb,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=vp(),this.transactionQueueTree_=new ml,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function K9(t,e,n){if(t.stats_=Ib(t.repoInfo_),t.forceRestClient_||JW())t.server_=new WE(t.repoInfo_,(r,i,s,o)=>{YM(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>JM(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{pt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new bb(t.repoInfo_,e,(r,i,s,o)=>{YM(t,r,i,s,o)},r=>{JM(t,r)},r=>{Q9(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=ZW(t.repoInfo_,()=>new JE(t.stats_,t.server_)),t.infoData_=new KE,t.infoSyncTree_=new Sp({startListening:(r,i,s,o)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Lp(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),jb(t,"connected",!1),t.serverSyncTree_=new Sp({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);ti(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function ik(t){let n=t.infoData_.getNode(new ke(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Ub(t){return P9({timestamp:ik(t)})}function YM(t,e,n,r,i){t.dataUpdateCount++;let s=new ke(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let c=yu(n,l=>Et(l));o=A9(t.serverSyncTree_,s,c,i)}else{let c=Et(n);o=S9(t.serverSyncTree_,s,c,i)}else if(r){let c=yu(n,l=>Et(l));o=C9(t.serverSyncTree_,s,c)}else{let c=Et(n);o=Lp(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=jp(t,s)),ti(t.eventQueue_,a,o)}function JM(t,e){jb(t,"connected",e),e===!1&&J9(t)}function Q9(t,e){en(e,(n,r)=>{jb(t,n,r)})}function jb(t,e,n){let r=new ke("/.info/"+e),i=Et(n);t.infoData_.updateSnapshot(r,i);let s=Lp(t.infoSyncTree_,r,i);ti(t.eventQueue_,r,s)}function sk(t){return t.nextWriteId_++}function Y9(t,e,n,r,i){Bb(t,"set",{path:e.toString(),value:n,priority:r});let s=Ub(t),o=Et(n,r),a=Nb(t.serverSyncTree_,e),c=WP(o,a,s),l=sk(t),d=HP(t.serverSyncTree_,e,c,l,!0);Vb(t.eventQueue_,d),t.server_.put(e.toString(),o.val(!0),(m,y)=>{let E=m==="ok";E||Zt("set at "+e+" failed: "+m);let x=so(t.serverSyncTree_,l,!E);ti(t.eventQueue_,e,x),e6(t,i,m,y)});let f=lk(t,e);jp(t,f),ti(t.eventQueue_,f,[])}function J9(t){Bb(t,"onDisconnectEvents");let e=Ub(t),n=vp();QE(t.onDisconnect_,Re(),(i,s)=>{let o=F9(i,s,t.serverSyncTree_,e);RP(n,i,o)});let r=[];QE(n,Re(),(i,s)=>{r=r.concat(Lp(t.serverSyncTree_,i,s));let o=lk(t,i);jp(t,o)}),t.onDisconnect_=vp(),ti(t.eventQueue_,Re(),r)}function X9(t,e,n){let r;me(e._path)===".info"?r=KM(t.infoSyncTree_,e,n):r=KM(t.serverSyncTree_,e,n),nk(t.eventQueue_,e._path,r)}function mb(t,e,n){let r;me(e._path)===".info"?r=ub(t.infoSyncTree_,e,n):r=ub(t.serverSyncTree_,e,n),nk(t.eventQueue_,e._path,r)}function Z9(t){t.persistentConnection_&&t.persistentConnection_.interrupt(z9)}function Bb(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),kt(n,...e)}function e6(t,e,n,r){e&&Xa(()=>{if(n==="ok")e(null);else{let i=(n||"error").toUpperCase(),s=i;r&&(s+=": "+r);let o=new Error(s);o.code=i,e(o)}})}function ok(t,e,n){return Nb(t.serverSyncTree_,e,n)||le.EMPTY_NODE}function $b(t,e=t.transactionQueueTree_){if(e||Bp(t,e),Za(e)){let n=ck(t,e);k(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&t6(t,wl(e),n)}else QP(e)&&Up(e,n=>{$b(t,n)})}function t6(t,e,n){let r=n.map(l=>l.currentWriteId),i=ok(t,e,r),s=i,o=i.hash();for(let l=0;l<n.length;l++){let d=n[l];k(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let f=Xt(e,d.path);s=s.updateChild(f,d.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;t.server_.put(c.toString(),a,l=>{Bb(t,"transaction put response",{path:c.toString(),status:l});let d=[];if(l==="ok"){let f=[];for(let m=0;m<n.length;m++)n[m].status=2,d=d.concat(so(t.serverSyncTree_,n[m].currentWriteId)),n[m].onComplete&&f.push(()=>n[m].onComplete(null,!0,n[m].currentOutputSnapshotResolved)),n[m].unwatcher();Bp(t,Fb(t.transactionQueueTree_,e)),$b(t,t.transactionQueueTree_),ti(t.eventQueue_,e,d);for(let m=0;m<f.length;m++)Xa(f[m])}else{if(l==="datastale")for(let f=0;f<n.length;f++)n[f].status===3?n[f].status=4:n[f].status=0;else{Zt("transaction at "+c.toString()+" failed: "+l);for(let f=0;f<n.length;f++)n[f].status=4,n[f].abortReason=l}jp(t,e)}},o)}function jp(t,e){let n=ak(t,e),r=wl(n),i=ck(t,n);return n6(t,i,r),r}function n6(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=Xt(n,c.path),d=!1,f;if(k(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,f=c.abortReason,i=i.concat(so(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=W9)d=!0,f="maxretry",i=i.concat(so(t.serverSyncTree_,c.currentWriteId,!0));else{let m=ok(t,c.path,o);c.currentInputSnapshot=m;let y=e[a].update(m.val());if(y!==void 0){Lb("transaction failed: Data returned ",y,c.path);let E=Et(y);typeof y=="object"&&y!=null&&cr(y,".priority")||(E=E.updatePriority(m.getPriority()));let R=c.currentWriteId,F=Ub(t),q=WP(E,m,F);c.currentOutputSnapshotRaw=E,c.currentOutputSnapshotResolved=q,c.currentWriteId=sk(t),o.splice(o.indexOf(R),1),i=i.concat(HP(t.serverSyncTree_,c.path,q,c.currentWriteId,c.applyLocally)),i=i.concat(so(t.serverSyncTree_,R,!0))}else d=!0,f="nodata",i=i.concat(so(t.serverSyncTree_,c.currentWriteId,!0))}ti(t.eventQueue_,n,i),i=[],d&&(e[a].status=2,function(m){setTimeout(m,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(f),!1,null))))}Bp(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Xa(r[a]);$b(t,t.transactionQueueTree_)}function ak(t,e){let n,r=t.transactionQueueTree_;for(n=me(e);n!==null&&Za(r)===void 0;)r=Fb(r,n),e=qe(e),n=me(e);return r}function ck(t,e){let n=[];return uk(t,e,n),n.sort((r,i)=>r.order-i.order),n}function uk(t,e,n){let r=Za(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Up(e,i=>{uk(t,i,n)})}function Bp(t,e){let n=Za(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,KP(e,n.length>0?n:void 0)}Up(e,r=>{Bp(t,r)})}function lk(t,e){let n=wl(ak(t,e)),r=Fb(t.transactionQueueTree_,e);return V9(r,i=>{bE(t,i)}),bE(t,r),YP(r,i=>{bE(t,i)}),n}function bE(t,e){let n=Za(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(k(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(k(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(so(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?KP(e,void 0):n.length=s+1,ti(t.eventQueue_,wl(e),i);for(let o=0;o<r.length;o++)Xa(r[o])}}function r6(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function i6(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Zt(`Invalid query segment '${n}' in query '${t}'`)}return e}var XM=function(t,e){let n=s6(t),r=n.namespace;n.domain==="firebase.com"&&Zr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Zr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||$W();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new dp(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new ke(n.pathString)}},s6=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let d=t.indexOf("/");d===-1&&(d=t.length);let f=t.indexOf("?");f===-1&&(f=t.length),e=t.substring(0,Math.min(d,f)),d<f&&(i=r6(t.substring(d,f)));let m=i6(t.substring(Math.min(t.length,f)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let y=e.slice(0,l);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{let E=e.indexOf(".");r=e.substring(0,E).toLowerCase(),n=e.substring(E+1),s=r}"ns"in m&&(s=m.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var ZM="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",o6=function(){let t=0,e=[];return function(n){let r=n===t;t=n;let i,s=new Array(8);for(i=7;i>=0;i--)s[i]=ZM.charAt(n%64),n=Math.floor(n/64);k(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=ZM.charAt(e[i]);return k(o.length===20,"nextPushId: Length should be 20."),o}}();var Rp=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+pt(this.snapshot.exportVal())}},xp=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Np=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return k(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var gb=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return ye(this._path)?null:wP(this._path)}get ref(){return new ni(this._repo,this._path)}get _queryIdentifier(){let e=LM(this._queryParams),n=wb(e);return n==="{}"?"default":n}get _queryObject(){return LM(this._queryParams)}isEqual(e){if(e=We(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=Eb(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+I3(this._path)}};var ni=class t extends gb{constructor(e,n){super(e,n,new zE,!1)}get parent(){let e=EP(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Mp=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new ke(e),r=uo(this.ref,e);return new t(this._node.getChild(n),r,tt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,uo(this.ref,r),tt)))}hasChild(e){let n=new ke(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function dk(t,e){return t=We(t),t._checkNotDeleted("ref"),e!==void 0?uo(t._root,e):t._root}function uo(t,e){return t=We(t),me(t._path)===null?H9("child","path",e,!1):ek("child","path",e,!1),new ni(t._repo,gt(t._path,e))}function hk(t,e){t=We(t),tk("push",t._path),ZP("push",e,t._path,!0);let n=ik(t._repo),r=o6(n),i=uo(t,r),s=uo(t,r),o;return e!=null?o=Hb(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function Hb(t,e){t=We(t),tk("set",t._path),ZP("set",e,t._path,!1);let n=new Vi;return Y9(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}var Pp=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new Rp("value",this,new Mp(e.snapshotNode,new ni(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new xp(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},kp=class t{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new xp(this,e,n):null}createEvent(e,n){k(e.childName!=null,"Child events should have a childName.");let r=uo(new ni(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new Rp(e.type,this,new Mp(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function Il(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){let c=n,l=(d,f)=>{mb(t._repo,t,a),c(d,f)};l.userCallback=n.userCallback,l.context=n.context,n=l}let o=new Np(n,s||void 0),a=e==="value"?new Pp(o):new kp(e,o);return X9(t._repo,t,a),()=>mb(t._repo,t,a)}function $p(t,e,n,r){return Il(t,"value",e,n,r)}function qb(t,e,n,r){return Il(t,"child_added",e,n,r)}function Gb(t,e,n,r){return Il(t,"child_changed",e,n,r)}function zb(t,e,n,r){return Il(t,"child_moved",e,n,r)}function Wb(t,e,n,r){return Il(t,"child_removed",e,n,r)}function Kb(t,e,n){let r=null,i=n?new Np(n):null;e==="value"?r=new Pp(i):e&&(r=new kp(e,i)),mb(t._repo,t,r)}m9(ni);I9(ni);var a6="FIREBASE_DATABASE_EMULATOR_HOST",yb={},c6=!1;function u6(t,e,n,r){t.repoInfo_=new dp(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function l6(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Zr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),kt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=XM(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[a6]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=XM(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let d=i&&c?new al(al.OWNER):new RE(t.name,t.options,e);q9("Invalid Firebase Database URL",o),ye(o.path)||Zr("Database URL must point to the root of a Firebase Database (not including a child path).");let f=h6(a,t,d,new AE(t.name,n));return new _b(f,t)}function d6(t,e){let n=yb[e];(!n||n[t.key]!==t)&&Zr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Z9(t),delete n[t.key]}function h6(t,e,n,r){let i=yb[e.name];i||(i={},yb[e.name]=i);let s=i[t.toURLString()];return s&&Zr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new pb(t,c6,n,r),i[t.toURLString()]=s,s}var _b=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(K9(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ni(this._repo,Re())),this._rootInternal}_delete(){return this._rootInternal!==null&&(d6(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Zr("Cannot call "+e+" on a deleted database.")}};function fk(t=dr(),e){let n=$r(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=aa("database");r&&pk(n,...r)}return n}function pk(t,e,n,r={}){t=We(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Zr("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Zr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new al(al.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:ca(r.mockUserToken,t.app.options.projectId);s=new al(o)}u6(i,e,n,s)}function f6(t){UW(Sn),Dn(new Nt("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return l6(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Pe(wM,IM,t),Pe(wM,IM,"esm2017")}bb.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};bb.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};f6();var ho,fo=function(t){return t.added="child_added",t.removed="child_removed",t.changed="child_changed",t.moved="child_moved",t.value="value",t}(fo||{}),m6=Object.freeze((ho={},ho[fo.added]=qb,ho[fo.removed]=Wb,ho[fo.changed]=Gb,ho[fo.moved]=zb,ho[fo.value]=$p,ho));function mk(t,e){return new X(function(n){var r=m6[e](t,function(i,s){n.next({snapshot:i,prevKey:s,event:e})},n.error.bind(n));return{unsubscribe:function(){Kb(t,e,r)}}}).pipe(Wm(0))}var Hp=function(){return Hp=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Hp.apply(this,arguments)};function gk(t,e){return e===void 0&&(e={}),mk(t,fo.value).pipe(se(function(n){return yk(n,e)}))}function yk(t,e){var n;e===void 0&&(e={});var r=t.snapshot.val();return!t.snapshot.exists()||typeof r!="object"?r:Hp(Hp({},r),e.keyField?(n={},n[e.keyField]=t.snapshot.key,n):null)}var Kn=class{constructor(e){return e}},_k="database",Qb=class{constructor(){return Hr(_k)}};var Yb=new W("angularfire2.database-instances");function g6(t,e){let n=ji(_k,t,e);return n&&new Kn(n)}function y6(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Kn(r)}}var _6={provide:Qb,deps:[[new ze,Yb]]},v6={provide:Kn,useFactory:g6,deps:[[new ze,Yb],pn]};function vk(t,...e){return Pe("angularfire",Bn.full,"rtdb"),Wt([v6,_6,{provide:Yb,useFactory:y6(t),multi:!0,deps:[Te,Rt,fr,$n,[new ze,Wr],[new ze,hr],...e]}])}var qp=Xe(gk,!0);var wk=Xe(fk,!0);var Ik=Xe($p,!0);var Gp=Xe(hk,!0);var Zi=Xe(dk,!0);var ec=Xe(Hb,!0);var zp=(()=>{let e=class e{constructor(r,i){this.db=r,this.auth=i;let s=sessionStorage.getItem("user");if(s&&s!=="null"){let a=JSON.parse(s)?.uid;a?(this.balanceRef=Zi(this.db,`users/${a}/chequing/balance`),this.transactionHistoryRef=Zi(this.db,`users/${a}/chequing/transactions`),this.chequingbalance$=qp(this.balanceRef).pipe(se(c=>c??0),an(c=>(console.error("Error retrieving balance:",c),Z(0))))):(console.error("User UID not found."),this.chequingbalance$=new X(c=>{c.next(null)}))}else console.error("User is not authenticated."),this.chequingbalance$=new X(o=>{o.next(null)})}getBalance(){return this.chequingbalance$}deposit(r){return v(this,null,function*(){this.chequingbalance$.pipe(lt(1)).subscribe(i=>v(this,null,function*(){let s=(i??0)+r;yield ec(this.balanceRef,s),yield this.logTransaction("deposit",r)}))})}withdraw(r){return v(this,null,function*(){this.chequingbalance$.pipe(lt(1)).subscribe(i=>v(this,null,function*(){let s=(i??0)-r;s>=0?(yield ec(this.balanceRef,s),yield this.logTransaction("withdrawal",r)):(alert("Insufficient funds"),console.error("Insufficient funds"))}))})}logTransaction(r,i){return v(this,null,function*(){let s=Date.now(),o={type:r,amount:i,timestamp:s};yield Gp(this.transactionHistoryRef,o)})}};e.\u0275fac=function(i){return new(i||e)(Y(Kn),Y(mn))},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Wp=(()=>{let e=class e{constructor(r,i){this.db=r,this.auth=i;let s=sessionStorage.getItem("user");if(s&&s!=="null"){let a=JSON.parse(s)?.uid;a?(this.balanceRef=Zi(this.db,`users/${a}/savings/balance`),this.transactionHistoryRef=Zi(this.db,`users/${a}/savings/transactions`),this.savingsbalance$=qp(this.balanceRef).pipe(se(c=>c??0),an(c=>(console.error("Error retrieving balance:",c),Z(0))))):(console.error("User UID not found."),this.savingsbalance$=new X(c=>{c.next(null)}))}else console.error("User is not authenticated."),this.savingsbalance$=new X(o=>{o.next(null)})}getBalance(){return this.savingsbalance$}deposit(r){return v(this,null,function*(){this.savingsbalance$.pipe(lt(1)).subscribe(i=>v(this,null,function*(){let s=(i??0)+r;yield ec(this.balanceRef,s),yield this.logTransaction("deposit",r)}))})}withdraw(r){return v(this,null,function*(){this.savingsbalance$.pipe(lt(1)).subscribe(i=>v(this,null,function*(){let s=(i??0)-r;s>=0?(yield ec(this.balanceRef,s),yield this.logTransaction("withdrawal",r)):(alert("Insufficient funds"),console.error("Insufficient funds"))}))})}logTransaction(r,i){return v(this,null,function*(){let s=Date.now(),o={type:r,amount:i,timestamp:s};yield Gp(this.transactionHistoryRef,o)})}};e.\u0275fac=function(i){return new(i||e)(Y(Kn),Y(mn))},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ck=(()=>{let e=class e{constructor(r,i,s){this.authService=r,this.chequingService=i,this.savingsService=s,this.firstName="",this.chequingbalance$=this.chequingService.getBalance(),this.savingsbalance$=this.savingsService.getBalance()}ngOnInit(){let r=JSON.parse(sessionStorage.getItem("user")||"{}");r&&r.uid&&this.authService.getUserDetails(r.uid).then(i=>{i&&i.firstName&&(this.firstName=i.firstName)})}logAnchorClick(){console.log("Anchor tag clicked!")}alertClick(){alert("Coming Soon")}};e.\u0275fac=function(i){return new(i||e)($(Rn),$(zp),$(Wp))},e.\u0275cmp=je({type:e,selectors:[["app-dashboard"]],standalone:!0,features:[Be],decls:43,vars:11,consts:[[1,"flex","flex-col","min-h-screen","lg:pt-20","pt-10"],[1,"flex-grow","bg-gray-100","dark:bg-black","transition-all","duration-500","ease-in-out"],[1,"container","mx-auto","px-4","py-8","mt-7","md:mt-5"],[1,"text-3xl","font-bold","mb-4","text-gray-700","dark:text-rose-600"],[1,"text-3xl","font-semibold","mb-4","mt-7","text-gray-700","dark:text-rose-600"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],["routerLink","/chequing",3,"click"],[1,"bg-white","dark:bg-zinc-950","rounded-lg","shadow-md","dark:shadow-rose-950","p-4","transition-all","duration-500","ease-in-out"],[1,"text-xl","dark:text-gray-300","font-semibold","mb-2","text-gray-700"],[1,"flex","justify-between","items-center","mt-10"],[1,"dark:text-gray-300","text-gray-700","font-bold","text-xl"],["routerLink","/savings",3,"click"],[3,"click"],[1,"mt-7"],[1,"dark:text-gray-300","font-semibold"]],template:function(i,s){i&1&&(ce(0,"app-navbar"),M(1,"div",0)(2,"div",1)(3,"div",2)(4,"h1",3),V(5,"Dashboard"),N(),M(6,"h2",4),V(7),N(),M(8,"div",5)(9,"a",6),Ie("click",function(){return s.logAnchorClick()}),M(10,"div",7)(11,"h2",8),V(12,"Chequing"),N(),ce(13,"br"),M(14,"div",9)(15,"p",10),V(16,"Balance:"),N(),M(17,"span",10),V(18),Bt(19,"async"),Bt(20,"currency"),N()()()(),M(21,"a",11),Ie("click",function(){return s.logAnchorClick()}),M(22,"div",7)(23,"h2",8),V(24,"Savings"),N(),ce(25,"br"),M(26,"div",9)(27,"p",10),V(28,"Balance:"),N(),M(29,"span",10),V(30),Bt(31,"async"),Bt(32,"currency"),N()()()(),M(33,"a",12),Ie("click",function(){return s.alertClick()}),M(34,"div",7)(35,"h2",8),V(36,"E-Transfer"),N(),M(37,"div",13),ce(38,"br")(39,"br"),M(40,"p",14),V(41,"Send funds with ease via email."),N()()()()()()(),ce(42,"app-footer"),N()),i&2&&(Fe(7),Ai("Welcome ",s.firstName,"!"),Fe(11),Si(Jt(20,5,Jt(19,3,s.chequingbalance$))),Fe(12),Si(Jt(32,9,Jt(31,7,s.savingsbalance$))))},dependencies:[Li,Va,Qi,dn,Mi,Pi]});let t=e;return t})();function w6(t,e){if(t&1&&(M(0,"div")(1,"p",4),V(2),Bt(3,"date"),N(),M(4,"p"),V(5),N(),M(6,"p",5),V(7),Bt(8,"currency"),N(),ce(9,"hr"),N()),t&2){let n=e.$implicit;Fe(2),Ai("Date: ",MS(3,3,n.timestamp,"short"),""),Fe(3),Ai("Type: ",n.type,""),Fe(2),Ai("Amount: ",Jt(8,6,n.amount),"")}}function I6(t,e){if(t&1&&(M(0,"div",2),Ci(1,w6,10,8,"div",3),N()),t&2){let n=e.ngIf;Fe(),xt("ngForOf",n)}}var tc=(()=>{let e=class e{constructor(r){this.db=r,this.type="chequing"}ngOnInit(){let r=sessionStorage.getItem("user");if(r&&r!=="null"){let s=JSON.parse(r)?.uid;if(s){let o=Zi(this.db,`users/${s}/${this.type}/transactions`);this.transactionHistory$=new X(a=>{Ik(o,c=>{let l=c.val();if(l){let f=Object.keys(l).map(m=>U({id:m},l[m])).sort((m,y)=>y.timestamp-m.timestamp);a.next(f)}else a.next([])})})}else console.error("User UID not found."),this.transactionHistory$=new X(o=>{o.next([])})}else console.error("User is not authenticated."),this.transactionHistory$=new X(i=>{i.next([])})}};e.\u0275fac=function(i){return new(i||e)($(Kn))},e.\u0275cmp=je({type:e,selectors:[["app-transaction-history"]],inputs:{type:"type"},standalone:!0,features:[Be],decls:4,vars:3,consts:[[1,"text-lg","font-semibold","mb-2","text-center","text-gray-600","dark:text-gray-300"],["class","text-gray-600 dark:text-gray-300",4,"ngIf"],[1,"text-gray-600","dark:text-gray-300"],[4,"ngFor","ngForOf"],[1,"text-md","font-semibold"],[1,"font-bold"]],template:function(i,s){i&1&&(M(0,"h3",0),V(1,"Transaction History"),N(),Ci(2,I6,2,1,"div",1),Bt(3,"async")),i&2&&(Fe(2),xt("ngIf",Jt(3,1,s.transactionHistory$)))},dependencies:[dn,sA,Yo,Mi,Pi,oA]});let t=e;return t})();var Mk=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)($(Ts),$(Ii))},e.\u0275dir=cn({type:e});let t=e;return t})(),Pk=(()=>{let e=class e extends Mk{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Wo(e)))(s||e)}})(),e.\u0275dir=cn({type:e,features:[Ds]});let t=e;return t})(),nC=new W("");var E6={provide:nC,useExisting:qo(()=>rc),multi:!0};function b6(){let t=jr()?jr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var C6=new W(""),rc=(()=>{let e=class e extends Mk{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!b6())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)($(Ts),$(Ii),$(C6,8))},e.\u0275dir=cn({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&Ie("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[ph([E6]),Ds]});let t=e;return t})();var T6=new W(""),D6=new W("");function kk(t){return t!=null}function Ok(t){return Ri(t)?Je(t):t}function Fk(t){let e={};return t.forEach(n=>{e=n!=null?U(U({},e),n):e}),Object.keys(e).length===0?null:e}function Lk(t,e){return e.map(n=>n(t))}function S6(t){return!t.validate}function Vk(t){return t.map(e=>S6(e)?e:n=>e.validate(n))}function A6(t){if(!t)return null;let e=t.filter(kk);return e.length==0?null:function(n){return Fk(Lk(n,e))}}function Uk(t){return t!=null?A6(Vk(t)):null}function R6(t){if(!t)return null;let e=t.filter(kk);return e.length==0?null:function(n){let r=Lk(n,e).map(Ok);return Gm(r).pipe(se(Fk))}}function jk(t){return t!=null?R6(Vk(t)):null}function Tk(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function x6(t){return t._rawValidators}function N6(t){return t._rawAsyncValidators}function Xb(t){return t?Array.isArray(t)?t:[t]:[]}function Qp(t,e){return Array.isArray(t)?t.includes(e):t===e}function Dk(t,e){let n=Xb(e);return Xb(t).forEach(i=>{Qp(n,i)||n.push(i)}),n}function Sk(t,e){return Xb(e).filter(n=>!Qp(t,n))}var Yp=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Uk(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=jk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Zb=class extends Yp{get formDirective(){return null}get path(){return null}},Cl=class extends Yp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},eC=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},M6={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},cse=Oe(U({},M6),{"[class.ng-submitted]":"isSubmitted"}),Jp=(()=>{let e=class e extends eC{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)($(Cl,2))},e.\u0275dir=cn({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&Fy("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Ds]});let t=e;return t})();var El="VALID",Kp="INVALID",nc="PENDING",bl="DISABLED";function P6(t){return(Xp(t)?t.validators:t)||null}function k6(t){return Array.isArray(t)?Uk(t):t||null}function O6(t,e){return(Xp(e)?e.asyncValidators:t)||null}function F6(t){return Array.isArray(t)?jk(t):t||null}function Xp(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var tC=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===El}get invalid(){return this.status===Kp}get pending(){return this.status==nc}get disabled(){return this.status===bl}get enabled(){return this.status!==bl}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Dk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Dk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Sk(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Sk(e,this._rawAsyncValidators))}hasValidator(e){return Qp(this._rawValidators,e)}hasAsyncValidator(e){return Qp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=nc,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=bl,this.errors=null,this._forEachChild(r=>{r.disable(Oe(U({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Oe(U({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=El,this._forEachChild(r=>{r.enable(Oe(U({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Oe(U({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===El||this.status===nc)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?bl:El}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=nc,this._hasOwnPendingAsyncValidator=!0;let n=Ok(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Vt,this.statusChanges=new Vt}_calculateStatus(){return this._allControlsDisabled()?bl:this.errors?Kp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(nc)?nc:this._anyControlsHaveStatus(Kp)?Kp:El}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Xp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=k6(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=F6(this._rawAsyncValidators)}};var Bk=new W("CallSetDisabledState",{providedIn:"root",factory:()=>rC}),rC="always";function L6(t,e){return[...e.path,t]}function V6(t,e,n=rC){j6(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),B6(t,e),H6(t,e),$6(t,e),U6(t,e)}function Ak(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function U6(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function j6(t,e){let n=x6(t);e.validator!==null?t.setValidators(Tk(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=N6(t);e.asyncValidator!==null?t.setAsyncValidators(Tk(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Ak(e._rawValidators,i),Ak(e._rawAsyncValidators,i)}function B6(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&$k(t,e)})}function $6(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&$k(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function $k(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function H6(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function q6(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function G6(t){return Object.getPrototypeOf(t.constructor)===Pk}function z6(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===rc?n=s:G6(s)?r=s:i=s}),i||r||n||null}function Rk(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function xk(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var W6=class extends tC{constructor(e=null,n,r){super(P6(n),O6(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Xp(n)&&(n.nonNullable||n.initialValueIsDefault)&&(xk(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Rk(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Rk(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){xk(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var K6={provide:Cl,useExisting:qo(()=>Tl)},Nk=Promise.resolve(),Tl=(()=>{let e=class e extends Cl{constructor(r,i,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new W6,this._registered=!1,this.name="",this.update=new Vt,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=z6(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),q6(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){V6(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){Nk.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&Rs(i);Nk.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?L6(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)($(Zb,9),$(T6,10),$(D6,10),$(nC,10),$(xi,8),$(Bk,8))},e.\u0275dir=cn({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[jt.None,"disabled","isDisabled"],model:[jt.None,"ngModel","model"],options:[jt.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ph([K6]),Ds,Cs]});let t=e;return t})();var Q6={provide:nC,useExisting:qo(()=>Dl),multi:!0},Dl=(()=>{let e=class e extends Pk{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Wo(e)))(s||e)}})(),e.\u0275dir=cn({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,s){i&1&&Ie("input",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},features:[ph([Q6]),Ds]});let t=e;return t})();var Y6=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Es({type:e}),e.\u0275inj=Is({});let t=e;return t})();var Zp=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Bk,useValue:r.callSetDisabledState??rC}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Es({type:e}),e.\u0275inj=Is({imports:[Y6]});let t=e;return t})();var qk=(()=>{let e=class e{constructor(r){this.chequingService=r,this.depositAmount=0,this.withdrawAmount=0,this.chequingbalance$=this.chequingService.getBalance()}ngOnInit(){}deposit(){this.depositAmount>0&&(this.chequingService.deposit(this.depositAmount),this.depositAmount=0)}withdraw(){this.withdrawAmount>0&&(this.chequingService.withdraw(this.withdrawAmount),this.withdrawAmount=0)}};e.\u0275fac=function(i){return new(i||e)($(zp))},e.\u0275cmp=je({type:e,selectors:[["app-chequing"]],standalone:!0,features:[Be],decls:32,vars:8,consts:[[1,"flex","flex-col","min-h-screen","bg-gray-100","mx-auto","pt-20","py-8","bg-white","dark:bg-black","transition-all","duration-500","ease-in-out"],[1,"text-3xl","font-bold","text-gray-700","mt-10","mb-4","rounded-lg","p-4","dark:text-rose-600"],[1,"container","mx-auto","bg-white","rounded-lg","shadow-md","dark:shadow-rose-950","p-4","mb-4","max-w-md","justify-center","items-center","dark:bg-zinc-950","transition-all","duration-500","ease-in-out"],[1,"text-xl","font-semibold","mb-2","flex","justify-between","items-center"],[1,"text-gray-600","dark:text-gray-300"],[1,"ml-auto","dark:text-gray-300"],[1,"container","flex","mx-auto","justify-center","items-center"],[1,"md:flex","justify-between","gap-20","mt-2","mb-5"],[1,"bg-white","rounded-lg","shadow-md","dark:shadow-rose-950","p-4","mb-4","max-w-xs","justify-center","items-center","dark:bg-zinc-950","transition-all","duration-500","ease-in-out"],[1,"text-xl","font-semibold","mb-2","flex","justify-center","items-center"],["type","number","placeholder","Amount",1,"border","p-2","rounded-md","mb-2",3,"ngModelChange","ngModel"],[1,"bg-red-500","text-white","p-2","rounded-md",3,"click"],[1,"bg-green-500","text-white","p-2","rounded-md",3,"click"],[1,"container","bg-white","dark:bg-zinc-950","mx-auto","rounded-lg","shadow-md","dark:shadow-rose-950","p-4","mb-4","max-w-2xl","transition-all","duration-500","ease-in-out"],[3,"type"]],template:function(i,s){i&1&&(ce(0,"app-navbar"),M(1,"div",0)(2,"h2",1),V(3,"Chequing Account"),N(),ce(4,"br"),M(5,"div",2)(6,"h3",3)(7,"span",4),V(8,"Balance"),N(),M(9,"span",5),V(10),Bt(11,"async"),Bt(12,"currency"),N()()(),M(13,"div",6)(14,"div",7)(15,"div",8)(16,"h3",9)(17,"span",4),V(18,"Withdraw"),N()(),M(19,"input",10),As("ngModelChange",function(a){return Qo(s.withdrawAmount,a)||(s.withdrawAmount=a),a}),N(),M(20,"button",11),Ie("click",function(){return s.withdraw()}),V(21,"Withdraw"),N()(),M(22,"div",8)(23,"h3",9)(24,"span",4),V(25,"Deposit"),N()(),M(26,"input",10),As("ngModelChange",function(a){return Qo(s.depositAmount,a)||(s.depositAmount=a),a}),N(),M(27,"button",12),Ie("click",function(){return s.deposit()}),V(28,"Deposit"),N()()()(),M(29,"div",13),ce(30,"app-transaction-history",14),N()(),ce(31,"app-footer")),i&2&&(Fe(10),Si(Jt(12,6,Jt(11,4,s.chequingbalance$))),Fe(9),Ss("ngModel",s.withdrawAmount),Fe(7),Ss("ngModel",s.depositAmount),Fe(4),xt("type","chequing"))},dependencies:[dn,Mi,Pi,Zp,rc,Dl,Jp,Tl,tc,Va,Qi]});let t=e;return t})();var Gk=(()=>{let e=class e{constructor(r,i){this.authService=r,this.router=i,this.hasRefreshed=!1}signUp(r,i,s,o,a,c){if(r.preventDefault(),console.log("Form submitted:",i,s,o,a,c),a!==c){alert("Passwords do not match!");return}this.authService.signUpWithEmail(i,a,s,o).then(()=>{this.router.navigate(["/dashboard"]),this.hasRefreshed||setTimeout(()=>{window.location.reload(),this.hasRefreshed=!0,console.log(this.hasRefreshed)},1)}).catch(l=>{console.error("Error signing up:",l.message),alert("Sign up failed. Please try again.")}).finally(()=>{i="",a=""})}};e.\u0275fac=function(i){return new(i||e)($(Rn),$(wt))},e.\u0275cmp=je({type:e,selectors:[["app-signup"]],standalone:!0,features:[Be],decls:35,vars:0,consts:[["fname",""],["lname",""],["email",""],["password",""],["confirmPassword",""],[1,"min-h-screen","relative","bg-cover","bg-center",2,"background-image","url('assets/photo/signup.jpg')"],[1,"absolute","inset-0","bg-black","bg-opacity-70"],[1,"signup-container","relative"],[1,"pb-5","text-3xl","font-semibold","text-rose-700"],[1,"form-lg","text-center",3,"submit"],[1,"m-0","mx-auto","my-auto"],[1,"form-group"],["for","email",1,"text-gray-300"],["type","text","id","fname","name","fname","required","",1,"border-2","border-black","rounded-md","px-7","text-center"],["type","text","id","lname","name","lname","required","",1,"border-2","border-black","rounded-md","px-7","text-center"],["type","email","id","email","name","email","required","",1,"border-2","border-black","rounded-md","px-7","text-center"],["for","password",1,"text-gray-300"],["type","password","id","password","name","password","required","",1,"border-2","border-black","rounded-md","px-7","text-center","ml-2"],["for","confirmPassword",1,"text-gray-300"],["type","password","id","confirmPassword","name","confirmPassword","required","",1,"border-2","border-black","rounded-md","px-7","text-center","ml-2"],["type","submit",1,"btn-signup"]],template:function(i,s){if(i&1){let o=Ti();ce(0,"app-navbar-general"),M(1,"div",5),ce(2,"div",6),M(3,"div",7)(4,"h2",8),V(5,"Create an Account!"),N(),M(6,"form",9),Ie("submit",function(c){tr(o);let l=Or(12),d=Or(17),f=Or(22),m=Or(27),y=Or(32);return nr(s.signUp(c,f.value,l.value,d.value,m.value,y.value))}),M(7,"div",10)(8,"div",11)(9,"label",12),V(10,"First Name: "),N(),ce(11,"input",13,0),N(),M(13,"div",11)(14,"label",12),V(15,"Last Name: "),N(),ce(16,"input",14,1),N(),M(18,"div",11)(19,"label",12),V(20,"Email: "),N(),ce(21,"input",15,2),N(),M(23,"div",11)(24,"label",16),V(25,"Password:"),N(),ce(26,"input",17,3),N(),M(28,"div",11)(29,"label",18),V(30,"Confirm Password:"),N(),ce(31,"input",19,4),N()(),M(33,"button",20),V(34,"Sign Up"),N()()()()}},dependencies:[La],styles:[".signup-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;margin-top:30px}.form-group[_ngcontent-%COMP%]{margin:0 auto 20px}.btn-signup[_ngcontent-%COMP%]{padding:10px 20px;font-size:18px;background-color:#be123c;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease}.btn-signup[_ngcontent-%COMP%]:hover{background-color:#881337}"]});let t=e;return t})();var zk=(()=>{let e=class e{constructor(r){this.savingsService=r,this.depositAmount=0,this.withdrawAmount=0,this.savingsbalance$=this.savingsService.getBalance()}ngOnInit(){}deposit(){this.depositAmount>0&&(this.savingsService.deposit(this.depositAmount),this.depositAmount=0)}withdraw(){this.withdrawAmount>0&&(this.savingsService.withdraw(this.withdrawAmount),this.withdrawAmount=0)}};e.\u0275fac=function(i){return new(i||e)($(Wp))},e.\u0275cmp=je({type:e,selectors:[["app-savings"]],standalone:!0,features:[Be],decls:32,vars:8,consts:[[1,"flex","flex-col","min-h-screen","bg-gray-100","mx-auto","pt-20","py-8","bg-white","dark:bg-black","transition-all","duration-500","ease-in-out"],[1,"text-3xl","font-bold","text-gray-700","mt-10","mb-4","rounded-lg","p-4","dark:text-rose-600"],[1,"container","mx-auto","bg-white","rounded-lg","shadow-md","dark:shadow-rose-950","p-4","mb-4","max-w-md","justify-center","items-center","dark:bg-zinc-950","transition-all","duration-500","ease-in-out"],[1,"text-xl","font-semibold","mb-2","flex","justify-between","items-center"],[1,"text-gray-600","dark:text-gray-300"],[1,"ml-auto","dark:text-gray-300"],[1,"container","flex","mx-auto","justify-center","items-center"],[1,"md:flex","justify-between","gap-20","mt-2","mb-5"],[1,"bg-white","rounded-lg","shadow-md","dark:shadow-rose-950","p-4","mb-4","max-w-xs","justify-center","items-center","dark:bg-zinc-950","transition-all","duration-500","ease-in-out"],[1,"text-xl","font-semibold","mb-2","flex","justify-center","items-center"],["type","number","placeholder","Amount",1,"border","p-2","rounded-md","mb-2",3,"ngModelChange","ngModel"],[1,"bg-red-500","text-white","p-2","rounded-md",3,"click"],[1,"bg-green-500","text-white","p-2","rounded-md",3,"click"],[1,"container","bg-white","dark:bg-zinc-950","mx-auto","rounded-lg","shadow-md","dark:shadow-rose-950","p-4","mb-4","max-w-2xl","transition-all","duration-500","ease-in-out"],[3,"type"]],template:function(i,s){i&1&&(ce(0,"app-navbar"),M(1,"div",0)(2,"h2",1),V(3,"Savings Account"),N(),ce(4,"br"),M(5,"div",2)(6,"h3",3)(7,"span",4),V(8,"Balance"),N(),M(9,"span",5),V(10),Bt(11,"async"),Bt(12,"currency"),N()()(),M(13,"div",6)(14,"div",7)(15,"div",8)(16,"h3",9)(17,"span",4),V(18,"Withdraw"),N()(),M(19,"input",10),As("ngModelChange",function(a){return Qo(s.withdrawAmount,a)||(s.withdrawAmount=a),a}),N(),M(20,"button",11),Ie("click",function(){return s.withdraw()}),V(21,"Withdraw"),N()(),M(22,"div",8)(23,"h3",9)(24,"span",4),V(25,"Deposit"),N()(),M(26,"input",10),As("ngModelChange",function(a){return Qo(s.depositAmount,a)||(s.depositAmount=a),a}),N(),M(27,"button",12),Ie("click",function(){return s.deposit()}),V(28,"Deposit"),N()()()(),M(29,"div",13),ce(30,"app-transaction-history",14),N()(),ce(31,"app-footer")),i&2&&(Fe(10),Si(Jt(12,6,Jt(11,4,s.savingsbalance$))),Fe(9),Ss("ngModel",s.withdrawAmount),Fe(7),Ss("ngModel",s.depositAmount),Fe(4),xt("type","savings"))},dependencies:[dn,Mi,Pi,Zp,rc,Dl,Jp,Tl,tc,Va,Qi]});let t=e;return t})();var Wk=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=je({type:e,selectors:[["app-cannotaccess"]],standalone:!0,features:[Be],decls:6,vars:0,consts:[[1,"flex","items-center","justify-center","min-h-screen","bg-red-100","dark:bg-black"],[1,"text-center"],[1,"text-4xl","font-bold","text-red-500"],[1,"text-lg","mt-4","dark:text-white"]],template:function(i,s){i&1&&(M(0,"div",0)(1,"div",1)(2,"h1",2),V(3,"CANNOT ACCESS"),N(),M(4,"p",3),V(5,"You do not have permission to view this page."),N()()())}});let t=e;return t})();var Kk=(()=>{let e=class e{constructor(r){this.router=r,this.previousUrl="",this.currentUrl="",this.currentUrl=this.router.url,r.events.pipe(on(i=>i instanceof sr)).subscribe(i=>{this.previousUrl=this.currentUrl,this.currentUrl=i.url})}getPreviousUrl(){return this.previousUrl}};e.\u0275fac=function(i){return new(i||e)(Y(wt))},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Qk=(t,e)=>{let n=j(mn),r=j(wt),i=j(Kk),s=sessionStorage.getItem("user"),o=s?JSON.parse(s):null;return console.log("Current User:",o),o?!0:(r.navigate(["/cannotaccess"]),alert("Sorry. You will have to login first to access here"),setTimeout(()=>{let a=i.getPreviousUrl();console.log(a),console.log("Works Though"),r.navigate([a||"/login"])},2500),!1)};var Yk=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:gM},{path:"login",component:yM},{path:"dashboard",component:Ck,canActivate:[Qk]},{path:"chequing",component:qk},{path:"savings",component:zk},{path:"transactionhistory",component:tc},{path:"signup",component:Gk},{path:"cannotaccess",component:Wk},{path:"**",redirectTo:"cannotaccess"}];var nO="firebasestorage.googleapis.com",J6="storageBucket",X6=2*60*1e3,Z6=10*60*1e3;var Tr=class t extends Ht{constructor(e,n,r=0){super(iC(e),`Firebase Storage: ${n} (${iC(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return iC(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},ii=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(ii||{});function iC(t){return"storage/"+t}function e5(){let t="An unknown error occurred, please check the error payload for server response.";return new Tr(ii.UNKNOWN,t)}function t5(){return new Tr(ii.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function n5(){return new Tr(ii.CANCELED,"User canceled the upload/download.")}function r5(t){return new Tr(ii.INVALID_URL,"Invalid URL '"+t+"'.")}function i5(t){return new Tr(ii.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Jk(t){return new Tr(ii.INVALID_ARGUMENT,t)}function rO(){return new Tr(ii.APP_DELETED,"The Firebase app was deleted.")}function s5(t){return new Tr(ii.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var ri=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw i5(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(z){z.path.charAt(z.path.length-1)==="/"&&(z.path_=z.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function l(z){z.path_=decodeURIComponent(z.path)}let d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp(`^https?://${f}/${d}/b/${i}/o${m}`,"i"),E={bucket:1,path:3},x=n===nO?"(?:storage.googleapis.com|storage.cloud.google.com)":n,R="([^?#]*)",F=new RegExp(`^https?://${x}/${i}/${R}`,"i"),B=[{regex:a,indices:c,postModify:s},{regex:y,indices:E,postModify:l},{regex:F,indices:{bucket:1,path:2},postModify:l}];for(let z=0;z<B.length;z++){let xe=B[z],re=xe.regex.exec(e);if(re){let C=re[xe.indices.bucket],_=re[xe.indices.path];_||(_=""),r=new t(C,_),xe.postModify(r);break}}if(r==null)throw r5(e);return r}},sC=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function o5(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let l=!1;function d(...R){l||(l=!0,e.apply(null,R))}function f(R){i=setTimeout(()=>{i=null,t(y,c())},R)}function m(){s&&clearTimeout(s)}function y(R,...F){if(l){m();return}if(R){m(),d.call(null,R,...F);return}if(c()||o){m(),d.call(null,R,...F);return}r<64&&(r*=2);let B;a===1?(a=2,B=0):B=(r+Math.random())*1e3,f(B)}let E=!1;function x(R){E||(E=!0,m(),!l&&(i!==null?(R||(a=2),clearTimeout(i),f(0)):R||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,x(!0)},n),x}function a5(t){t(!1)}function c5(t){return t!==void 0}function Xk(t,e,n,r){if(r<e)throw Jk(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Jk(`Invalid value for '${t}'. Expected ${n} or less.`)}function u5(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var oC=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(oC||{});function l5(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}var aC=class{constructor(e,n,r,i,s,o,a,c,l,d,f,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=d,this.connectionFactory_=f,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,E)=>{this.resolve_=y,this.reject_=E,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new ic(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===oC.NO_ERROR,c=s.getStatus();if(!a||l5(c,this.additionalRetryCodes_)&&this.retry){let d=s.getErrorCode()===oC.ABORT;r(!1,new ic(!1,null,d));return}let l=this.successCodes_.indexOf(c)!==-1;r(!0,new ic(l,s))})},n=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());c5(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=e5();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){let c=this.appDelete_?rO():n5();o(c)}else{let c=t5();o(c)}};this.canceled_?n(!1,new ic(!1,null,!0)):this.backoffId_=o5(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&a5(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},ic=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function d5(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function h5(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function f5(t,e){e&&(t["X-Firebase-GMPID"]=e)}function p5(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function m5(t,e,n,r,i,s,o=!0){let a=u5(t.urlParams),c=t.url+a,l=Object.assign({},t.headers);return f5(l,e),d5(l,n),h5(l,s),p5(l,r),new aC(c,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}function g5(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function y5(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}var Wse=256*1024;var cC=class t{constructor(e,n){this._service=e,n instanceof ri?this._location=n:this._location=ri.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new ri(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return y5(this._location.path)}get storage(){return this._service}get parent(){let e=g5(this._location.path);if(e===null)return null;let n=new ri(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw s5(e)}};function Zk(t,e){let n=e?.[J6];return n==null?null:ri.makeFromBucketSpec(n,t)}function _5(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:ca(i,t.app.options.projectId))}var uC=class{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=nO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=X6,this._maxUploadRetryTime=Z6,this._requests=new Set,i!=null?this._bucket=ri.makeFromBucketSpec(i,this._host):this._bucket=Zk(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ri.makeFromBucketSpec(this._url,e):this._bucket=Zk(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Xk("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Xk("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return v(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return v(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new cC(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new sC(rO());{let o=m5(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return v(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},eO="@firebase/storage",tO="0.12.5";var iO="storage";function sO(t=dr(),e){t=We(t);let r=$r(t,iO).getImmediate({identifier:e}),i=aa("storage");return i&&oO(r,...i),r}function oO(t,e,n,r={}){_5(t,e,n,r)}function v5(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new uC(n,r,i,e,Sn)}function w5(){Dn(new Nt(iO,v5,"PUBLIC").setMultipleInstances(!0)),Pe(eO,tO,""),Pe(eO,tO,"esm2017")}w5();var Sl=class{constructor(e){return e}},aO="storage",lC=class{constructor(){return Hr(aO)}};var dC=new W("angularfire2.storage-instances");function I5(t,e){let n=ji(aO,t,e);return n&&new Sl(n)}function E5(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Sl(r)}}var b5={provide:lC,deps:[[new ze,dC]]},C5={provide:Sl,useFactory:I5,deps:[[new ze,dC],pn]};function cO(t,...e){return Pe("angularfire",Bn.full,"gcs"),Wt([C5,b5,{provide:dC,useFactory:E5(t),multi:!0,deps:[Te,Rt,fr,$n,[new ze,Wr],[new ze,hr],...e]}])}var uO=Xe(sO,!0);var lO={production:!1,firebaseConfig:{apiKey:"AIzaSyAiPN-xGHJGT36J8V14fLaCV6cqq431Gp4",authDomain:"bankingapp-49ab9.firebaseapp.com",databaseURL:"https://bankingapp-49ab9-default-rtdb.firebaseio.com",projectId:"bankingapp-49ab9",storageBucket:"bankingapp-49ab9.appspot.com",messagingSenderId:"762026356516",appId:"1:762026356516:web:7515d017e975d555748db1"}};var dO={providers:[YA(Yk,JA()),TR(()=>DR(lO.firebaseConfig)),Ix(()=>bx()),uM(()=>dM()),vk(()=>wk()),cO(()=>uO())]};mA(Fa,dO).catch(t=>console.error(t));
