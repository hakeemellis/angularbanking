var HO=Object.defineProperty,qO=Object.defineProperties;var GO=Object.getOwnPropertyDescriptors;var d0=Object.getOwnPropertySymbols,zO=Object.getPrototypeOf,WO=Object.prototype.hasOwnProperty,KO=Object.prototype.propertyIsEnumerable,QO=Reflect.get;var h0=(t,e,n)=>e in t?HO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,U=(t,e)=>{for(var n in e||={})WO.call(e,n)&&h0(t,n,e[n]);if(d0)for(var n of d0(e))KO.call(e,n)&&h0(t,n,e[n]);return t},Oe=(t,e)=>qO(t,GO(e));var ci=(t,e,n)=>QO(zO(t),n,e);var v=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(l){i(l)}},o=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});var f0=null;var Tm=1,Dm=Symbol("SIGNAL");function be(t){let e=f0;return f0=t,e}var p0={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function YO(t){if(!(Rm(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Tm)){if(!t.producerMustRecompute(t)&&!Sm(t)){t.dirty=!1,t.lastCleanEpoch=Tm;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Tm}}function m0(t){return t&&(t.nextProducerIndex=0),be(t)}function g0(t,e){if(be(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Rm(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Am(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Sm(t){Gl(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(YO(n),r!==n.version))return!0}return!1}function y0(t){if(Gl(t),Rm(t))for(let e=0;e<t.producerNode.length;e++)Am(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Am(t,e){if(JO(t),Gl(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Am(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Gl(i),i.producerIndexOfThis[r]=e}}function Rm(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Gl(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function JO(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function XO(){throw new Error}var ZO=XO;function _0(t){ZO=t}function ie(t){return typeof t=="function"}function yo(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var zl=yo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ns(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var nt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ie(r))try{r()}catch(s){e=s instanceof zl?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{v0(s)}catch(o){e=e??[],o instanceof zl?e=[...e,...o.errors]:e.push(o)}}if(e)throw new zl(e)}}add(e){var n;if(e&&e!==this)if(this.closed)v0(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ns(n,e)}remove(e){let{_finalizers:n}=this;n&&ns(n,e),e instanceof t&&e._removeParent(this)}};nt.EMPTY=(()=>{let t=new nt;return t.closed=!0,t})();var xm=nt.EMPTY;function Wl(t){return t instanceof nt||t&&"closed"in t&&ie(t.remove)&&ie(t.add)&&ie(t.unsubscribe)}function v0(t){ie(t)?t():t.unsubscribe()}var Mn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var _o={setTimeout(t,e,...n){let{delegate:r}=_o;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=_o;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Kl(t){_o.setTimeout(()=>{let{onUnhandledError:e}=Mn;if(e)e(t);else throw t})}function rs(){}var w0=Nm("C",void 0,void 0);function I0(t){return Nm("E",void 0,t)}function E0(t){return Nm("N",t,void 0)}function Nm(t,e,n){return{kind:t,value:e,error:n}}var is=null;function vo(t){if(Mn.useDeprecatedSynchronousErrorHandling){let e=!is;if(e&&(is={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=is;if(is=null,n)throw r}}else t()}function b0(t){Mn.useDeprecatedSynchronousErrorHandling&&is&&(is.errorThrown=!0,is.error=t)}var ss=class extends nt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Wl(e)&&e.add(this)):this.destination=n1}static create(e,n,r){return new wo(e,n,r)}next(e){this.isStopped?Pm(E0(e),this):this._next(e)}error(e){this.isStopped?Pm(I0(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Pm(w0,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},e1=Function.prototype.bind;function Mm(t,e){return e1.call(t,e)}var km=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ql(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ql(r)}else Ql(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ql(n)}}},wo=class extends ss{constructor(e,n,r){super();let i;if(ie(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Mn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Mm(e.next,s),error:e.error&&Mm(e.error,s),complete:e.complete&&Mm(e.complete,s)}):i=e}this.destination=new km(i)}};function Ql(t){Mn.useDeprecatedSynchronousErrorHandling?b0(t):Kl(t)}function t1(t){throw t}function Pm(t,e){let{onStoppedNotification:n}=Mn;n&&_o.setTimeout(()=>n(t,e))}var n1={closed:!0,next:rs,error:t1,complete:rs};var Io=typeof Symbol=="function"&&Symbol.observable||"@@observable";function rn(t){return t}function Om(...t){return Fm(t)}function Fm(t){return t.length===0?rn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var J=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=i1(n)?n:new wo(n,r,i);return vo(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=C0(r),new r((i,s)=>{let o=new wo({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Io](){return this}pipe(...n){return Fm(n)(this)}toPromise(n){return n=C0(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function C0(t){var e;return(e=t??Mn.Promise)!==null&&e!==void 0?e:Promise}function r1(t){return t&&ie(t.next)&&ie(t.error)&&ie(t.complete)}function i1(t){return t&&t instanceof ss||r1(t)&&Wl(t)}function Lm(t){return ie(t?.lift)}function _e(t){return e=>{if(Lm(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function de(t,e,n,r,i){return new Vm(t,e,n,r,i)}var Vm=class extends ss{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Eo(){return _e((t,e)=>{let n=null;t._refCount++;let r=de(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var bo=class extends J{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Lm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new nt;let n=this.getSubject();e.add(this.source.subscribe(de(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=nt.EMPTY)}return e}refCount(){return Eo()(this)}};var T0=yo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var St=(()=>{class t extends J{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Yl(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new T0}next(n){vo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){vo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){vo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?xm:(this.currentObservers=null,s.push(n),new nt(()=>{this.currentObservers=null,ns(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new J;return n.source=this,n}}return t.create=(e,n)=>new Yl(e,n),t})(),Yl=class extends St{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:xm}};var ut=class extends St{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Um={now(){return(Um.delegate||Date).now()},delegate:void 0};var Jl=class extends nt{constructor(e,n){super()}schedule(e,n=0){return this}};var Cc={setInterval(t,e,...n){let{delegate:r}=Cc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Cc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Co=class extends Jl{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Cc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Cc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ns(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var To=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};To.now=Um.now;var Do=class extends To{constructor(e,n=To.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var So=new Do(Co),jm=So;var Xl=class extends Co{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Zl=class extends Do{};var Bm=new Zl(Xl);var sn=new J(t=>t.complete());function ed(t){return t&&ie(t.schedule)}function D0(t){return t[t.length-1]}function td(t){return ie(D0(t))?t.pop():void 0}function ui(t){return ed(D0(t))?t.pop():void 0}function $m(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function A0(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(f){o(f)}}function c(d){try{l(r.throw(d))}catch(f){o(f)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function S0(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function os(t){return this instanceof os?(this.v=t,this):new os(t)}function R0(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(m){r[m]&&(i[m]=function(y){return new Promise(function(E,x){s.push([m,y,E,x])>1||a(m,y)})})}function a(m,y){try{c(r[m](y))}catch(E){f(s[0][3],E)}}function c(m){m.value instanceof os?Promise.resolve(m.value.v).then(l,d):f(s[0][2],m)}function l(m){a("next",m)}function d(m){a("throw",m)}function f(m,y){m(y),s.shift(),s.length&&a(s[0][0],s[0][1])}}function x0(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof S0=="function"?S0(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var nd=t=>t&&typeof t.length=="number"&&typeof t!="function";function rd(t){return ie(t?.then)}function id(t){return ie(t[Io])}function sd(t){return Symbol.asyncIterator&&ie(t?.[Symbol.asyncIterator])}function od(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function s1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ad=s1();function cd(t){return ie(t?.[ad])}function ud(t){return R0(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield os(n.read());if(i)return yield os(void 0);yield yield os(r)}}finally{n.releaseLock()}})}function ld(t){return ie(t?.getReader)}function Ye(t){if(t instanceof J)return t;if(t!=null){if(id(t))return o1(t);if(nd(t))return a1(t);if(rd(t))return c1(t);if(sd(t))return N0(t);if(cd(t))return u1(t);if(ld(t))return l1(t)}throw od(t)}function o1(t){return new J(e=>{let n=t[Io]();if(ie(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function a1(t){return new J(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function c1(t){return new J(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Kl)})}function u1(t){return new J(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function N0(t){return new J(e=>{d1(t,e).catch(n=>e.error(n))})}function l1(t){return N0(ud(t))}function d1(t,e){var n,r,i,s;return A0(this,void 0,void 0,function*(){try{for(n=x0(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function Gt(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function li(t,e=0){return _e((n,r)=>{n.subscribe(de(r,i=>Gt(r,t,()=>r.next(i),e),()=>Gt(r,t,()=>r.complete(),e),i=>Gt(r,t,()=>r.error(i),e)))})}function di(t,e=0){return _e((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function M0(t,e){return Ye(t).pipe(di(e),li(e))}function P0(t,e){return Ye(t).pipe(di(e),li(e))}function k0(t,e){return new J(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function O0(t,e){return new J(n=>{let r;return Gt(n,e,()=>{r=t[ad](),Gt(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>ie(r?.return)&&r.return()})}function dd(t,e){if(!t)throw new Error("Iterable cannot be null");return new J(n=>{Gt(n,e,()=>{let r=t[Symbol.asyncIterator]();Gt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function F0(t,e){return dd(ud(t),e)}function L0(t,e){if(t!=null){if(id(t))return M0(t,e);if(nd(t))return k0(t,e);if(rd(t))return P0(t,e);if(sd(t))return dd(t,e);if(cd(t))return O0(t,e);if(ld(t))return F0(t,e)}throw od(t)}function Je(t,e){return e?L0(t,e):Ye(t)}function Z(...t){let e=ui(t);return Je(t,e)}function Ao(t,e){let n=ie(t)?t:()=>t,r=i=>i.error(n());return new J(e?i=>e.schedule(r,0,i):r)}function Hm(t){return!!t&&(t instanceof J||ie(t.lift)&&ie(t.subscribe))}var Rr=yo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function V0(t){return t instanceof Date&&!isNaN(t)}function se(t,e){return _e((n,r)=>{let i=0;n.subscribe(de(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:h1}=Array;function f1(t,e){return h1(e)?t(...e):t(e)}function hd(t){return se(e=>f1(t,e))}var{isArray:p1}=Array,{getPrototypeOf:m1,prototype:g1,keys:y1}=Object;function fd(t){if(t.length===1){let e=t[0];if(p1(e))return{args:e,keys:null};if(_1(e)){let n=y1(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function _1(t){return t&&typeof t=="object"&&m1(t)===g1}function pd(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function md(...t){let e=ui(t),n=td(t),{args:r,keys:i}=fd(t);if(r.length===0)return Je([],e);let s=new J(v1(r,e,i?o=>pd(i,o):rn));return n?s.pipe(hd(n)):s}function v1(t,e,n=rn){return r=>{U0(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)U0(e,()=>{let l=Je(t[c],e),d=!1;l.subscribe(de(r,f=>{s[c]=f,d||(d=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function U0(t,e,n){t?Gt(n,t,e):e()}function j0(t,e,n,r,i,s,o,a){let c=[],l=0,d=0,f=!1,m=()=>{f&&!c.length&&!l&&e.complete()},y=x=>l<r?E(x):c.push(x),E=x=>{s&&e.next(x),l++;let R=!1;Ye(n(x,d++)).subscribe(de(e,F=>{i?.(F),s?y(F):e.next(F)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;c.length&&l<r;){let F=c.shift();o?Gt(e,o,()=>E(F)):E(F)}m()}catch(F){e.error(F)}}))};return t.subscribe(de(e,y,()=>{f=!0,m()})),()=>{a?.()}}function rt(t,e,n=1/0){return ie(e)?rt((r,i)=>se((s,o)=>e(r,s,i,o))(Ye(t(r,i))),n):(typeof e=="number"&&(n=e),_e((r,i)=>j0(r,i,t,n)))}function qm(t=1/0){return rt(rn,t)}function B0(){return qm(1)}function hi(...t){return B0()(Je(t,ui(t)))}function gd(t){return new J(e=>{Ye(t()).subscribe(e)})}function Gm(...t){let e=td(t),{args:n,keys:r}=fd(t),i=new J(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let d=0;d<o;d++){let f=!1;Ye(n[d]).subscribe(de(s,m=>{f||(f=!0,l--),a[d]=m},()=>c--,void 0,()=>{(!c||!f)&&(l||s.next(r?pd(r,a):a),s.complete())}))}});return e?i.pipe(hd(e)):i}function $0(t=0,e,n=jm){let r=-1;return e!=null&&(ed(e)?n=e:r=e),new J(i=>{let s=V0(t)?+t-n.now():t;s<0&&(s=0);let o=0;return n.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function on(t,e){return _e((n,r)=>{let i=0;n.subscribe(de(r,s=>t.call(e,s,i++)&&r.next(s)))})}function an(t){return _e((e,n)=>{let r=null,i=!1,s;r=e.subscribe(de(n,void 0,void 0,o=>{s=Ye(t(o,an(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function H0(t,e,n,r,i){return(s,o)=>{let a=n,c=e,l=0;s.subscribe(de(o,d=>{let f=l++;c=a?t(c,d,f):(a=!0,d),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Ro(t,e){return ie(e)?rt(t,e,1):rt(t,1)}function fi(t){return _e((e,n)=>{let r=!1;e.subscribe(de(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function lt(t){return t<=0?()=>sn:_e((e,n)=>{let r=0;e.subscribe(de(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function q0(){return _e((t,e)=>{t.subscribe(de(e,rs))})}function Tc(t){return se(()=>t)}function zm(t,e){return e?n=>hi(e.pipe(lt(1),q0()),n.pipe(zm(t))):rt((n,r)=>Ye(t(n,r)).pipe(lt(1),Tc(n)))}function Wm(t,e=So){let n=$0(t,e);return zm(()=>n)}function yd(t=w1){return _e((e,n)=>{let r=!1;e.subscribe(de(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function w1(){return new Rr}function Dc(t){return _e((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Qn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?on((i,s)=>t(i,s,r)):rn,lt(1),n?fi(e):yd(()=>new Rr))}function xo(t){return t<=0?()=>sn:_e((e,n)=>{let r=[];e.subscribe(de(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Km(t,e){let n=arguments.length>=2;return r=>r.pipe(t?on((i,s)=>t(i,s,r)):rn,xo(1),n?fi(e):yd(()=>new Rr))}function _d(t,e){return _e(H0(t,e,arguments.length>=2,!0))}function Qm(...t){let e=ui(t);return _e((n,r)=>{(e?hi(t,n,e):hi(t,n)).subscribe(r)})}function yn(t,e){return _e((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(de(r,c=>{i?.unsubscribe();let l=0,d=s++;Ye(t(c,d)).subscribe(i=de(r,f=>r.next(e?e(c,f,d,l++):f),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Ym(t){return _e((e,n)=>{Ye(t).subscribe(de(n,()=>n.complete(),rs)),!n.closed&&e.subscribe(n)})}function dt(t,e,n){let r=ie(t)||e||n?{next:t,error:e,complete:n}:t;return r?_e((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(de(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):rn}var RT="https://g.co/ng/security#xss",Q=class extends Error{constructor(e,n){super(Zg(e,n)),this.code=e}};function Zg(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Uc(t){return{toString:t}.toString()}var vd="__parameters__";function I1(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function xT(t,e,n){return Uc(()=>{let r=I1(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,d){let f=c.hasOwnProperty(vd)?c[vd]:Object.defineProperty(c,vd,{value:[]})[vd];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var kn=globalThis;function Ve(t){for(let e in t)if(t[e]===Ve)return e;throw Error("Could not find renamed property on target object.")}function E1(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Ut(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Ut).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function G0(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var b1=Ve({__forward_ref__:Ve});function Ho(t){return t.__forward_ref__=Ho,t.toString=function(){return Ut(this())},t}function Lt(t){return NT(t)?t():t}function NT(t){return typeof t=="function"&&t.hasOwnProperty(b1)&&t.__forward_ref__===Ho}function W(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function vs(t){return{providers:t.providers||[],imports:t.imports||[]}}function Qd(t){return z0(t,PT)||z0(t,kT)}function MT(t){return Qd(t)!==null}function z0(t,e){return t.hasOwnProperty(e)?t[e]:null}function C1(t){let e=t&&(t[PT]||t[kT]);return e||null}function W0(t){return t&&(t.hasOwnProperty(K0)||t.hasOwnProperty(T1))?t[K0]:null}var PT=Ve({\u0275prov:Ve}),K0=Ve({\u0275inj:Ve}),kT=Ve({ngInjectableDef:Ve}),T1=Ve({ngInjectorDef:Ve}),z=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=W({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function OT(t){return t&&!!t.\u0275providers}var D1=Ve({\u0275cmp:Ve}),S1=Ve({\u0275dir:Ve}),A1=Ve({\u0275pipe:Ve}),R1=Ve({\u0275mod:Ve}),Ad=Ve({\u0275fac:Ve}),Sc=Ve({__NG_ELEMENT_ID__:Ve}),Q0=Ve({__NG_ENV_ID__:Ve});function Yd(t){return typeof t=="string"?t:t==null?"":String(t)}function x1(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Yd(t)}function N1(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new Q(-200,t)}function ey(t,e){throw new Q(-201,!1)}var he=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(he||{}),fg;function FT(){return fg}function zt(t){let e=fg;return fg=t,e}function LT(t,e,n){let r=Qd(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&he.Optional)return null;if(e!==void 0)return e;ey(t,"Injector")}var M1={},Ac=M1,pg="__NG_DI_FLAG__",Rd="ngTempTokenPath",P1="ngTokenPath",k1=/\n/gm,O1="\u0275",Y0="__source",ko;function F1(){return ko}function pi(t){let e=ko;return ko=t,e}function L1(t,e=he.Default){if(ko===void 0)throw new Q(-203,!1);return ko===null?LT(t,void 0,e):ko.get(t,e&he.Optional?null:void 0,e)}function X(t,e=he.Default){return(FT()||L1)(Lt(t),e)}function j(t,e=he.Default){return X(t,Jd(e))}function Jd(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function mg(t){let e=[];for(let n=0;n<t.length;n++){let r=Lt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new Q(900,!1);let i,s=he.Default;for(let o=0;o<r.length;o++){let a=r[o],c=V1(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(X(i,s))}else e.push(X(r))}return e}function VT(t,e){return t[pg]=e,t.prototype[pg]=e,t}function V1(t){return t[pg]}function U1(t,e,n,r){let i=t[Rd];throw e[Y0]&&i.unshift(e[Y0]),t.message=j1(`
`+t.message,i,n,r),t[P1]=i,t[Rd]=null,t}function j1(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==O1?t.slice(2):t;let i=Ut(e);if(Array.isArray(e))i=e.map(Ut).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Ut(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(k1,`
  `)}`}var ze=VT(xT("Optional"),8);var UT=VT(xT("SkipSelf"),4);function ls(t,e){let n=t.hasOwnProperty(Ad);return n?t[Ad]:null}function ty(t,e){t.forEach(n=>Array.isArray(n)?ty(n,e):e(n))}function jT(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function xd(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function B1(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function $1(t,e,n){let r=jc(t,e);return r>=0?t[r|1]=n:(r=~r,B1(t,r,e,n)),r}function Jm(t,e){let n=jc(t,e);if(n>=0)return t[n|1]}function jc(t,e){return H1(t,e,1)}function H1(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Fo={},_n=[],Lo=new z(""),BT=new z("",-1),$T=new z(""),Nd=class{get(e,n=Ac){if(n===Ac){let r=new Error(`NullInjectorError: No provider for ${Ut(e)}!`);throw r.name="NullInjectorError",r}return n}},HT=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(HT||{}),Xn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Xn||{}),jt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(jt||{});function q1(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function gg(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];G1(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function qT(t){return t===3||t===4||t===6}function G1(t){return t.charCodeAt(0)===64}function Rc(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?J0(t,n,i,null,e[++r]):J0(t,n,i,null,null))}}return t}function J0(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var GT="ng-template";function z1(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&q1(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(ny(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function ny(t){return t.type===4&&t.value!==GT}function W1(t,e,n){let r=t.type===4&&!n?GT:t.value;return e===r}function K1(t,e,n){let r=4,i=t.attrs,s=i!==null?J1(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Pn(r)&&!Pn(c))return!1;if(o&&Pn(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!W1(t,c,n)||c===""&&e.length===1){if(Pn(r))return!1;o=!0}}else if(r&8){if(i===null||!z1(t,i,c,n)){if(Pn(r))return!1;o=!0}}else{let l=e[++a],d=Q1(c,i,ny(t),n);if(d===-1){if(Pn(r))return!1;o=!0;continue}if(l!==""){let f;if(d>s?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(Pn(r))return!1;o=!0}}}}return Pn(r)||o}function Pn(t){return(t&1)===0}function Q1(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return X1(e,t)}function Y1(t,e,n=!1){for(let r=0;r<e.length;r++)if(K1(t,e[r],n))return!0;return!1}function J1(t){for(let e=0;e<t.length;e++){let n=t[e];if(qT(n))return e}return t.length}function X1(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function X0(t,e){return t?":not("+e.trim()+")":e}function Z1(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Pn(o)&&(e+=X0(s,i),i=""),r=o,s=s||!Pn(r);n++}return i!==""&&(e+=X0(s,i)),e}function eF(t){return t.map(Z1).join(",")}function tF(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Pn(i))break;i=s}r++}return{attrs:e,classes:n}}function je(t){return Uc(()=>{let e=YT(t),n=Oe(U({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===HT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Xn.Emulated,styles:t.styles||_n,_:null,schemas:t.schemas||null,tView:null,id:""});JT(n);let r=t.dependencies;return n.directiveDefs=eT(r,!1),n.pipeDefs=eT(r,!0),n.id=iF(n),n})}function nF(t){return ds(t)||zT(t)}function rF(t){return t!==null}function ws(t){return Uc(()=>({type:t.type,bootstrap:t.bootstrap||_n,declarations:t.declarations||_n,imports:t.imports||_n,exports:t.exports||_n,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Z0(t,e){if(t==null)return Fo;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=jt.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==jt.None?[r,a]:r,e[s]=o):n[s]=r}return n}function cn(t){return Uc(()=>{let e=YT(t);return JT(e),e})}function Xd(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function ds(t){return t[D1]||null}function zT(t){return t[S1]||null}function WT(t){return t[A1]||null}function KT(t){let e=ds(t)||zT(t)||WT(t);return e!==null?e.standalone:!1}function QT(t,e){let n=t[R1]||null;if(!n&&e===!0)throw new Error(`Type ${Ut(t)} does not have '\u0275mod' property.`);return n}function YT(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Fo,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||_n,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Z0(t.inputs,e),outputs:Z0(t.outputs),debugInfo:null}}function JT(t){t.features?.forEach(e=>e(t))}function eT(t,e){if(!t)return null;let n=e?WT:nF;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(rF)}function iF(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Wt(t){return{\u0275providers:t}}function sF(...t){return{\u0275providers:XT(!0,t),\u0275fromNgModule:!0}}function XT(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return ty(e,o=>{let a=o;yg(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&ZT(i,s),n}function ZT(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];ry(i,s=>{e(s,r)})}}function yg(t,e,n,r){if(t=Lt(t),!t)return!1;let i=null,s=W0(t),o=!s&&ds(t);if(!s&&!o){let c=t.ngModule;if(s=W0(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)yg(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{ty(s.imports,d=>{yg(d,e,n,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&ZT(l,e)}if(!a){let l=ls(i)||(()=>new i);e({provide:i,useFactory:l,deps:_n},i),e({provide:$T,useValue:i,multi:!0},i),e({provide:Lo,useValue:()=>X(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=t;ry(c,d=>{e(d,l)})}}else return!1;return i!==t&&t.providers!==void 0}function ry(t,e){for(let n of t)OT(n)&&(n=n.\u0275providers),Array.isArray(n)?ry(n,e):e(n)}var oF=Ve({provide:String,useValue:Ve});function eD(t){return t!==null&&typeof t=="object"&&oF in t}function aF(t){return!!(t&&t.useExisting)}function cF(t){return!!(t&&t.useFactory)}function Vo(t){return typeof t=="function"}function uF(t){return!!t.useClass}var Zd=new z(""),bd={},lF={},Xm;function iy(){return Xm===void 0&&(Xm=new Nd),Xm}var wn=class{},xc=class extends wn{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,vg(e,o=>this.processProvider(o)),this.records.set(BT,No(void 0,this)),i.has("environment")&&this.records.set(wn,No(void 0,this));let s=this.records.get(Zd);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get($T,_n,he.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=be(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),be(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=pi(this),r=zt(void 0),i;try{return e()}finally{pi(n),zt(r)}}get(e,n=Ac,r=he.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Q0))return e[Q0](this);r=Jd(r);let i,s=pi(this),o=zt(void 0);try{if(!(r&he.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=mF(e)&&Qd(e);l&&this.injectableDefInScope(l)?c=No(_g(e),bd):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&he.Self?iy():this.parent;return n=r&he.Optional&&n===Ac?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Rd]=a[Rd]||[]).unshift(Ut(e)),s)throw a;return U1(a,e,"R3InjectorError",this.source)}else throw a}finally{zt(o),pi(s)}}resolveInjectorInitializers(){let e=be(null),n=pi(this),r=zt(void 0),i;try{let s=this.get(Lo,_n,he.Self);for(let o of s)o()}finally{pi(n),zt(r),be(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Ut(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Q(205,!1)}processProvider(e){e=Lt(e);let n=Vo(e)?e:Lt(e&&e.provide),r=hF(e);if(!Vo(e)&&e.multi===!0){let i=this.records.get(n);i||(i=No(void 0,bd,!0),i.factory=()=>mg(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=be(null);try{return n.value===bd&&(n.value=lF,n.value=n.factory()),typeof n.value=="object"&&n.value&&pF(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{be(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Lt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function _g(t){let e=Qd(t),n=e!==null?e.factory:ls(t);if(n!==null)return n;if(t instanceof z)throw new Q(204,!1);if(t instanceof Function)return dF(t);throw new Q(204,!1)}function dF(t){if(t.length>0)throw new Q(204,!1);let n=C1(t);return n!==null?()=>n.factory(t):()=>new t}function hF(t){if(eD(t))return No(void 0,t.useValue);{let e=tD(t);return No(e,bd)}}function tD(t,e,n){let r;if(Vo(t)){let i=Lt(t);return ls(i)||_g(i)}else if(eD(t))r=()=>Lt(t.useValue);else if(cF(t))r=()=>t.useFactory(...mg(t.deps||[]));else if(aF(t))r=()=>X(Lt(t.useExisting));else{let i=Lt(t&&(t.useClass||t.provide));if(fF(t))r=()=>new i(...mg(t.deps));else return ls(i)||_g(i)}return r}function No(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function fF(t){return!!t.deps}function pF(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function mF(t){return typeof t=="function"||typeof t=="object"&&t instanceof z}function vg(t,e){for(let n of t)Array.isArray(n)?vg(n,e):n&&OT(n)?vg(n.\u0275providers,e):e(n)}function Is(t,e){t instanceof xc&&t.assertNotDestroyed();let n,r=pi(t),i=zt(void 0);try{return e()}finally{pi(r),zt(i)}}function gF(){return FT()!==void 0||F1()!=null}function yF(t){return typeof t=="function"}var Pr=0,ve=1,te=2,At=3,On=4,Vn=5,Md=6,Nc=7,Fn=8,Uo=9,Ln=10,ht=11,Mc=12,tT=13,qo=14,Zn=15,eh=16,Mo=17,jo=18,th=19,nD=20,mi=21,Zm=22,hs=23,In=25,rD=1;var fs=7,Pd=8,kd=9,vn=10,sy=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(sy||{});function cs(t){return Array.isArray(t)&&typeof t[rD]=="object"}function kr(t){return Array.isArray(t)&&t[rD]===!0}function iD(t){return(t.flags&4)!==0}function nh(t){return t.componentOffset>-1}function oy(t){return(t.flags&1)===1}function gi(t){return!!t.template}function _F(t){return(t[te]&512)!==0}var wg=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function sD(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Es(){return oD}function oD(t){return t.type.prototype.ngOnChanges&&(t.setInput=wF),vF}Es.ngInherit=!0;function vF(){let t=cD(this),e=t?.current;if(e){let n=t.previous;if(n===Fo)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function wF(t,e,n,r,i){let s=this.declaredInputs[r],o=cD(t)||IF(t,{previous:Fo,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new wg(l&&l.currentValue,n,c===Fo),sD(t,e,i,n)}var aD="__ngSimpleChanges__";function cD(t){return t[aD]||null}function IF(t,e){return t[aD]=e}var nT=null;var Yn=function(t,e,n){nT?.(t,e,n)},EF="svg",bF="math",CF=!1;function TF(){return CF}function er(t){for(;Array.isArray(t);)t=t[Pr];return t}function uD(t,e){return er(e[t])}function En(t,e){return er(e[t.index])}function lD(t,e){return t.data[e]}function ay(t,e){return t[e]}function vi(t,e){let n=e[t];return cs(n)?n:n[Pr]}function cy(t){return(t[te]&128)===128}function DF(t){return kr(t[At])}function Od(t,e){return e==null?null:t[e]}function dD(t){t[Mo]=0}function SF(t){t[te]&1024||(t[te]|=1024,cy(t)&&Pc(t))}function AF(t,e){for(;t>0;)e=e[qo],t--;return e}function uy(t){return!!(t[te]&9216||t[hs]?.dirty)}function Ig(t){t[Ln].changeDetectionScheduler?.notify(1),uy(t)?Pc(t):t[te]&64&&(TF()?(t[te]|=1024,Pc(t)):t[Ln].changeDetectionScheduler?.notify())}function Pc(t){t[Ln].changeDetectionScheduler?.notify();let e=kc(t);for(;e!==null&&!(e[te]&8192||(e[te]|=8192,!cy(e)));)e=kc(e)}function hD(t,e){if((t[te]&256)===256)throw new Q(911,!1);t[mi]===null&&(t[mi]=[]),t[mi].push(e)}function RF(t,e){if(t[mi]===null)return;let n=t[mi].indexOf(e);n!==-1&&t[mi].splice(n,1)}function kc(t){let e=t[At];return kr(e)?e[At]:e}var fe={lFrame:vD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function xF(){return fe.lFrame.elementDepthCount}function NF(){fe.lFrame.elementDepthCount++}function MF(){fe.lFrame.elementDepthCount--}function fD(){return fe.bindingsEnabled}function PF(){return fe.skipHydrationRootTNode!==null}function kF(t){return fe.skipHydrationRootTNode===t}function OF(){fe.skipHydrationRootTNode=null}function Me(){return fe.lFrame.lView}function Kt(){return fe.lFrame.tView}function tr(t){return fe.lFrame.contextLView=t,t[Fn]}function nr(t){return fe.lFrame.contextLView=null,t}function Qt(){let t=pD();for(;t!==null&&t.type===64;)t=t.parent;return t}function pD(){return fe.lFrame.currentTNode}function FF(){let t=fe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Bc(t,e){let n=fe.lFrame;n.currentTNode=t,n.isParent=e}function mD(){return fe.lFrame.isParent}function LF(){fe.lFrame.isParent=!1}function VF(){return fe.lFrame.contextLView}function ly(){let t=fe.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function UF(t){return fe.lFrame.bindingIndex=t}function rh(){return fe.lFrame.bindingIndex++}function jF(t){let e=fe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function BF(){return fe.lFrame.inI18n}function $F(t,e){let n=fe.lFrame;n.bindingIndex=n.bindingRootIndex=t,Eg(e)}function HF(){return fe.lFrame.currentDirectiveIndex}function Eg(t){fe.lFrame.currentDirectiveIndex=t}function qF(t){let e=fe.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function gD(t){fe.lFrame.currentQueryIndex=t}function GF(t){let e=t[ve];return e.type===2?e.declTNode:e.type===1?t[Vn]:null}function yD(t,e,n){if(n&he.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&he.Host);)if(i=GF(s),i===null||(s=s[qo],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=fe.lFrame=_D();return r.currentTNode=e,r.lView=t,!0}function dy(t){let e=_D(),n=t[ve];fe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function _D(){let t=fe.lFrame,e=t===null?null:t.child;return e===null?vD(t):e}function vD(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function wD(){let t=fe.lFrame;return fe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var ID=wD;function hy(){let t=wD();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function zF(t){return(fe.lFrame.contextLView=AF(t,fe.lFrame.contextLView))[Fn]}function Go(){return fe.lFrame.selectedIndex}function ps(t){fe.lFrame.selectedIndex=t}function fy(){let t=fe.lFrame;return lD(t.tView,t.selectedIndex)}function WF(){return fe.lFrame.currentNamespace}var ED=!0;function py(){return ED}function my(t){ED=t}function KF(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=oD(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function gy(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),d!=null&&(t.destroyHooks??=[]).push(n,d)}}function Cd(t,e,n){bD(t,e,3,n)}function Td(t,e,n,r){(t[te]&3)===n&&bD(t,e,n,r)}function eg(t,e){let n=t[te];(n&3)===e&&(n&=16383,n+=1,t[te]=n)}function bD(t,e,n,r){let i=r!==void 0?t[Mo]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Mo]+=65536),(a<s||s==-1)&&(QF(t,n,e,c),t[Mo]=(t[Mo]&4294901760)+c+2),c++}function rT(t,e){Yn(4,t,e);let n=be(null);try{e.call(t)}finally{be(n),Yn(5,t,e)}}function QF(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[te]>>14<t[Mo]>>16&&(t[te]&3)===e&&(t[te]+=16384,rT(a,s)):rT(a,s)}var Oo=-1,ms=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function YF(t){return t instanceof ms}function JF(t){return(t.flags&8)!==0}function XF(t){return(t.flags&16)!==0}function CD(t){return t!==Oo}function Fd(t){return t&32767}function ZF(t){return t>>16}function Ld(t,e){let n=ZF(t),r=e;for(;n>0;)r=r[qo],n--;return r}var bg=!0;function Vd(t){let e=bg;return bg=t,e}var eL=256,TD=eL-1,DD=5,tL=0,Jn={};function nL(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Sc)&&(r=n[Sc]),r==null&&(r=n[Sc]=tL++);let i=r&TD,s=1<<i;e.data[t+(i>>DD)]|=s}function Ud(t,e){let n=SD(t,e);if(n!==-1)return n;let r=e[ve];r.firstCreatePass&&(t.injectorIndex=e.length,tg(r.data,t),tg(e,null),tg(r.blueprint,null));let i=yy(t,e),s=t.injectorIndex;if(CD(i)){let o=Fd(i),a=Ld(i,e),c=a[ve].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function tg(t,e){t.push(0,0,0,0,0,0,0,0,e)}function SD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function yy(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=MD(i),r===null)return Oo;if(n++,i=i[qo],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Oo}function Cg(t,e,n){nL(t,e,n)}function rL(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(qT(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function AD(t,e,n){if(n&he.Optional||t!==void 0)return t;ey(e,"NodeInjector")}function RD(t,e,n,r){if(n&he.Optional&&r===void 0&&(r=null),!(n&(he.Self|he.Host))){let i=t[Uo],s=zt(void 0);try{return i?i.get(e,r,n&he.Optional):LT(e,r,n&he.Optional)}finally{zt(s)}}return AD(r,e,n)}function xD(t,e,n,r=he.Default,i){if(t!==null){if(e[te]&2048&&!(r&he.Self)){let o=cL(t,e,n,r,Jn);if(o!==Jn)return o}let s=ND(t,e,n,r,Jn);if(s!==Jn)return s}return RD(e,n,r,i)}function ND(t,e,n,r,i){let s=oL(n);if(typeof s=="function"){if(!yD(e,t,r))return r&he.Host?AD(i,n,r):RD(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&he.Optional))ey(n);else return o}finally{ID()}}else if(typeof s=="number"){let o=null,a=SD(t,e),c=Oo,l=r&he.Host?e[Zn][Vn]:null;for((a===-1||r&he.SkipSelf)&&(c=a===-1?yy(t,e):e[a+8],c===Oo||!sT(r,!1)?a=-1:(o=e[ve],a=Fd(c),e=Ld(c,e)));a!==-1;){let d=e[ve];if(iT(s,a,d.data)){let f=iL(a,e,n,o,r,l);if(f!==Jn)return f}c=e[a+8],c!==Oo&&sT(r,e[ve].data[a+8]===l)&&iT(s,a,e)?(o=d,a=Fd(c),e=Ld(c,e)):a=-1}}return i}function iL(t,e,n,r,i,s){let o=e[ve],a=o.data[t+8],c=r==null?nh(a)&&bg:r!=o&&(a.type&3)!==0,l=i&he.Host&&s===a,d=sL(a,o,n,c,l);return d!==null?Bo(e,o,d,a):Jn}function sL(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,d=s>>20,f=r?a:a+d,m=i?a+d:l;for(let y=f;y<m;y++){let E=o[y];if(y<c&&n===E||y>=c&&E.type===n)return y}if(i){let y=o[c];if(y&&gi(y)&&y.type===n)return c}return null}function Bo(t,e,n,r){let i=t[n],s=e.data;if(YF(i)){let o=i;o.resolving&&N1(x1(s[n]));let a=Vd(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?zt(o.injectImpl):null,d=yD(t,r,he.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&KF(n,s[n],e)}finally{l!==null&&zt(l),Vd(a),o.resolving=!1,ID()}}return i}function oL(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Sc)?t[Sc]:void 0;return typeof e=="number"?e>=0?e&TD:aL:e}function iT(t,e,n){let r=1<<t;return!!(n[e+(t>>DD)]&r)}function sT(t,e){return!(t&he.Self)&&!(t&he.Host&&e)}var us=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return xD(this._tNode,this._lView,e,Jd(r),n)}};function aL(){return new us(Qt(),Me())}function zo(t){return Uc(()=>{let e=t.prototype.constructor,n=e[Ad]||Tg(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Ad]||Tg(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Tg(t){return NT(t)?()=>{let e=Tg(Lt(t));return e&&e()}:ls(t)}function cL(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[te]&2048&&!(o[te]&512);){let a=ND(s,o,n,r|he.Self,Jn);if(a!==Jn)return a;let c=s.parent;if(!c){let l=o[nD];if(l){let d=l.get(n,Jn,r);if(d!==Jn)return d}c=MD(o),o=o[qo]}s=c}return i}function MD(t){let e=t[ve],n=e.type;return n===2?e.declTNode:n===1?t[Vn]:null}function _y(t){return rL(Qt(),t)}function oT(t,e=null,n=null,r){let i=PD(t,e,n,r);return i.resolveInjectorInitializers(),i}function PD(t,e=null,n=null,r,i=new Set){let s=[n||_n,sF(t)];return r=r||(typeof t=="object"?void 0:Ut(t)),new xc(s,e||iy(),r||null,i)}var Rt=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return oT({name:""},i,r,"");{let s=r.name??"";return oT({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=Ac,e.NULL=new Nd,e.\u0275prov=W({token:e,providedIn:"any",factory:()=>X(BT)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var uL="ngOriginalError";function ng(t){return t[uL]}var xr=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&ng(e);for(;n&&ng(n);)n=ng(n);return n||null}},kD=new z("",{providedIn:"root",factory:()=>j(xr).handleError.bind(void 0)}),OD=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=lL,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Dg=class extends OD{constructor(e){super(),this._lView=e}onDestroy(e){return hD(this._lView,e),()=>RF(this._lView,e)}};function lL(){return new Dg(Me())}function dL(){return ih(Qt(),Me())}function ih(t,e){return new wi(En(t,e))}var wi=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=dL;let t=e;return t})();var Sg=class extends St{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,gF()&&(this.destroyRef=j(OD,{optional:!0})??void 0)}emit(e){let n=be(null);try{super.next(e)}finally{be(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=rg(s),i&&(i=rg(i)),o&&(o=rg(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof nt&&e.add(a),a}};function rg(t){return e=>{setTimeout(t,void 0,e)}}var Vt=Sg;function FD(t){return(t.flags&128)===128}var LD=new Map,hL=0;function fL(){return hL++}function pL(t){LD.set(t[th],t)}function mL(t){LD.delete(t[th])}var aT="__ngContext__";function gs(t,e){cs(e)?(t[aT]=e[th],pL(e)):t[aT]=e}function VD(t){return jD(t[Mc])}function UD(t){return jD(t[On])}function jD(t){for(;t!==null&&!kr(t);)t=t[On];return t}var Ag;function BD(t){Ag=t}function gL(){if(Ag!==void 0)return Ag;if(typeof document<"u")return document;throw new Q(210,!1)}var vy=new z("",{providedIn:"root",factory:()=>yL}),yL="ng",wy=new z(""),Ii=new z("",{providedIn:"platform",factory:()=>"unknown"});var Iy=new z("",{providedIn:"root",factory:()=>gL().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var _L="h",vL="b";var wL=()=>null;function Ey(t,e,n=!1){return wL(t,e,n)}var $D=!1,IL=new z("",{providedIn:"root",factory:()=>$D});var wd;function EL(){if(wd===void 0&&(wd=null,kn.trustedTypes))try{wd=kn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return wd}function cT(t){return EL()?.createScriptURL(t)||t}var jd=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${RT})`}};function $c(t){return t instanceof jd?t.changingThisBreaksApplicationSecurity:t}function by(t,e){let n=bL(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${RT})`)}return n===e}function bL(t){return t instanceof jd&&t.getTypeName()||null}var CL=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function HD(t){return t=String(t),t.match(CL)?t:"unsafe:"+t}var sh=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(sh||{});function TL(t){let e=GD();return e?e.sanitize(sh.URL,t)||"":by(t,"URL")?$c(t):HD(Yd(t))}function DL(t){let e=GD();if(e)return cT(e.sanitize(sh.RESOURCE_URL,t)||"");if(by(t,"ResourceURL"))return cT($c(t));throw new Q(904,!1)}function SL(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?DL:TL}function qD(t,e,n){return SL(e,n)(t)}function GD(){let t=Me();return t&&t[Ln].sanitizer}function zD(t){return t instanceof Function?t():t}var Nr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Nr||{}),AL;function Cy(t,e){return AL(t,e)}function Po(t,e,n,r,i){if(r!=null){let s,o=!1;kr(r)?s=r:cs(r)&&(o=!0,r=r[Pr]);let a=er(r);t===0&&n!==null?i==null?JD(e,n,a):Bd(e,n,a,i||null,!0):t===1&&n!==null?Bd(e,n,a,i||null,!0):t===2?GL(e,a,o):t===3&&e.destroyNode(a),s!=null&&WL(e,t,s,n,i)}}function RL(t,e){return t.createText(e)}function xL(t,e,n){t.setValue(e,n)}function WD(t,e,n){return t.createElement(e,n)}function NL(t,e){KD(t,e),e[Pr]=null,e[Vn]=null}function ML(t,e,n,r,i,s){r[Pr]=i,r[Vn]=e,oh(t,r,n,1,i,s)}function KD(t,e){e[Ln].changeDetectionScheduler?.notify(1),oh(t,e,e[ht],2,null,null)}function PL(t){let e=t[Mc];if(!e)return ig(t[ve],t);for(;e;){let n=null;if(cs(e))n=e[Mc];else{let r=e[vn];r&&(n=r)}if(!n){for(;e&&!e[On]&&e!==t;)cs(e)&&ig(e[ve],e),e=e[At];e===null&&(e=t),cs(e)&&ig(e[ve],e),n=e&&e[On]}e=n}}function kL(t,e,n,r){let i=vn+r,s=n.length;r>0&&(n[i-1][On]=e),r<s-vn?(e[On]=n[i],jT(n,vn+r,e)):(n.push(e),e[On]=null),e[At]=n;let o=e[eh];o!==null&&n!==o&&OL(o,e);let a=e[jo];a!==null&&a.insertView(t),Ig(e),e[te]|=128}function OL(t,e){let n=t[kd],i=e[At][At][Zn];e[Zn]!==i&&(t[te]|=sy.HasTransplantedViews),n===null?t[kd]=[e]:n.push(e)}function QD(t,e){let n=t[kd],r=n.indexOf(e);n.splice(r,1)}function Rg(t,e){if(t.length<=vn)return;let n=vn+e,r=t[n];if(r){let i=r[eh];i!==null&&i!==t&&QD(i,r),e>0&&(t[n-1][On]=r[On]);let s=xd(t,vn+e);NL(r[ve],r);let o=s[jo];o!==null&&o.detachView(s[ve]),r[At]=null,r[On]=null,r[te]&=-129}return r}function YD(t,e){if(!(e[te]&256)){let n=e[ht];n.destroyNode&&oh(t,e,n,3,null,null),PL(e)}}function ig(t,e){if(e[te]&256)return;let n=be(null);try{e[te]&=-129,e[te]|=256,e[hs]&&y0(e[hs]),LL(t,e),FL(t,e),e[ve].type===1&&e[ht].destroy();let r=e[eh];if(r!==null&&kr(e[At])){r!==e[At]&&QD(r,e);let i=e[jo];i!==null&&i.detachView(t)}mL(e)}finally{be(n)}}function FL(t,e){let n=t.cleanup,r=e[Nc];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Nc]=null);let i=e[mi];if(i!==null){e[mi]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function LL(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof ms)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Yn(4,a,c);try{c.call(a)}finally{Yn(5,a,c)}}else{Yn(4,i,s);try{s.call(i)}finally{Yn(5,i,s)}}}}}function VL(t,e,n){return UL(t,e.parent,n)}function UL(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Pr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Xn.None||s===Xn.Emulated)return null}return En(r,n)}}function Bd(t,e,n,r,i){t.insertBefore(e,n,r,i)}function JD(t,e,n){t.appendChild(e,n)}function uT(t,e,n,r,i){r!==null?Bd(t,e,n,r,i):JD(t,e,n)}function jL(t,e,n,r){t.removeChild(e,n,r)}function Ty(t,e){return t.parentNode(e)}function BL(t,e){return t.nextSibling(e)}function $L(t,e,n){return qL(t,e,n)}function HL(t,e,n){return t.type&40?En(t,n):null}var qL=HL,lT;function Dy(t,e,n,r){let i=VL(t,r,e),s=e[ht],o=r.parent||e[Vn],a=$L(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)uT(s,i,n[c],a,!1);else uT(s,i,n,a,!1);lT!==void 0&&lT(s,r,e,n,i)}function Dd(t,e){if(e!==null){let n=e.type;if(n&3)return En(e,t);if(n&4)return xg(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Dd(t,r);{let i=t[e.index];return kr(i)?xg(-1,i):er(i)}}else{if(n&32)return Cy(e,t)()||er(t[e.index]);{let r=XD(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=kc(t[Zn]);return Dd(i,r)}else return Dd(t,e.next)}}}return null}function XD(t,e){if(e!==null){let r=t[Zn][Vn],i=e.projection;return r.projection[i]}return null}function xg(t,e){let n=vn+t+1;if(n<e.length){let r=e[n],i=r[ve].firstChild;if(i!==null)return Dd(r,i)}return e[fs]}function GL(t,e,n){let r=Ty(t,e);r&&jL(t,r,e,n)}function Sy(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],c=n.type;if(o&&e===0&&(a&&gs(er(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)Sy(t,e,n.child,r,i,s,!1),Po(e,t,i,a,s);else if(c&32){let l=Cy(n,r),d;for(;d=l();)Po(e,t,i,d,s);Po(e,t,i,a,s)}else c&16?zL(t,e,r,n,i,s):Po(e,t,i,a,s);n=o?n.projectionNext:n.next}}function oh(t,e,n,r,i,s){Sy(n,r,t.firstChild,e,i,s,!1)}function zL(t,e,n,r,i,s){let o=n[Zn],c=o[Vn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];Po(e,t,i,d,s)}else{let l=c,d=o[At];FD(r)&&(l.flags|=128),Sy(t,e,l,d,i,s,!0)}}function WL(t,e,n,r,i){let s=n[fs],o=er(n);s!==o&&Po(e,t,r,s,i);for(let a=vn;a<n.length;a++){let c=n[a];oh(c[ve],c,t,e,r,s)}}function KL(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Nr.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Nr.Important),t.setStyle(n,r,i,s))}}function QL(t,e,n){t.setAttribute(e,"style",n)}function ZD(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function eS(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&gg(t,e,r),i!==null&&ZD(t,e,i),s!==null&&QL(t,e,s)}var Ei={};function Fe(t=1){tS(Kt(),Me(),Go()+t,!1)}function tS(t,e,n,r){if(!r)if((e[te]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Cd(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Td(e,s,0,n)}ps(n)}function $(t,e=he.Default){let n=Me();if(n===null)return X(t,e);let r=Qt();return xD(r,n,Lt(t),e)}function nS(t,e,n,r,i,s){let o=be(null);try{let a=null;i&jt.SignalBased&&(a=e[r][Dm]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&jt.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):sD(e,a,r,s)}finally{be(o)}}function YL(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)ps(~i);else{let s=i,o=n[++r],a=n[++r];$F(o,s);let c=e[s];a(2,c)}}}finally{ps(-1)}}function ah(t,e,n,r,i,s,o,a,c,l,d){let f=e.blueprint.slice();return f[Pr]=i,f[te]=r|4|128|8|64,(l!==null||t&&t[te]&2048)&&(f[te]|=2048),dD(f),f[At]=f[qo]=t,f[Fn]=n,f[Ln]=o||t&&t[Ln],f[ht]=a||t&&t[ht],f[Uo]=c||t&&t[Uo]||null,f[Vn]=s,f[th]=fL(),f[Md]=d,f[nD]=l,f[Zn]=e.type==2?t[Zn]:f,f}function ch(t,e,n,r,i){let s=t.data[e];if(s===null)s=JL(t,e,n,r,i),BF()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=FF();s.injectorIndex=o===null?-1:o.injectorIndex}return Bc(s,!0),s}function JL(t,e,n,r,i){let s=pD(),o=mD(),a=o?s:s&&s.parent,c=t.data[e]=nV(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function rS(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function iS(t,e,n,r,i){let s=Go(),o=r&2;try{ps(-1),o&&e.length>In&&tS(t,e,In,!1),Yn(o?2:0,i),n(r,i)}finally{ps(s),Yn(o?3:1,i)}}function sS(t,e,n){if(iD(e)){let r=be(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{be(r)}}}function oS(t,e,n){fD()&&(cV(t,e,n,En(n,e)),(n.flags&64)===64&&hS(t,e,n))}function aS(t,e,n=En){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function cS(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Ay(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Ay(t,e,n,r,i,s,o,a,c,l,d){let f=In+r,m=f+i,y=XL(f,m),E=typeof l=="function"?l():l;return y[ve]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:E,incompleteFirstPass:!1,ssrId:d}}function XL(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ei);return n}function ZL(t,e,n,r){let s=r.get(IL,$D)||n===Xn.ShadowDom,o=t.selectRootElement(e,s);return eV(o),o}function eV(t){tV(t)}var tV=()=>null;function nV(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return PF()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function dT(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=jt.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?hT(r,n,l,a,c):hT(r,n,l,a)}return r}function hT(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function rV(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,l=null;for(let d=r;d<i;d++){let f=s[d],m=n?n.get(f):null,y=m?m.inputs:null,E=m?m.outputs:null;c=dT(0,f.inputs,d,c,y),l=dT(1,f.outputs,d,l,E);let x=c!==null&&o!==null&&!ny(e)?vV(c,d,o):null;a.push(x)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function iV(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function uS(t,e,n,r,i,s,o,a){let c=En(e,n),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(Ry(t,n,d,r,i),nh(e)&&sV(n,e.index)):e.type&3?(r=iV(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function sV(t,e){let n=vi(e,t);n[te]&16||(n[te]|=64)}function lS(t,e,n,r){if(fD()){let i=r===null?null:{"":-1},s=lV(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&dS(t,e,n,o,i,a),i&&dV(n,r,i)}n.mergedAttrs=Rc(n.mergedAttrs,n.attrs)}function dS(t,e,n,r,i,s){for(let l=0;l<r.length;l++)Cg(Ud(n,e),t,r[l].type);fV(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,c=rS(t,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];n.mergedAttrs=Rc(n.mergedAttrs,d.hostAttrs),pV(t,n,e,c,d),hV(c,d,i),d.contentQueries!==null&&(n.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(n.flags|=64);let f=d.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}rV(t,n,s)}function oV(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;aV(o)!=a&&o.push(a),o.push(n,r,s)}}function aV(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function cV(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;nh(n)&&mV(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Ud(n,e),gs(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],l=Bo(e,t,a,n);if(gs(l,e),o!==null&&_V(e,a-i,l,c,n,o),gi(c)){let d=vi(n.index,e);d[Fn]=Bo(e,t,a,n)}}}function hS(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=HF();try{ps(s);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];Eg(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&uV(c,l)}}finally{ps(-1),Eg(o)}}function uV(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function lV(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(Y1(e,o.selectors,!1))if(r||(r=[]),gi(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;Ng(t,e,c)}else r.unshift(o),Ng(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Ng(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function dV(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new Q(-301,!1);r.push(e[i],s)}}}function hV(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;gi(e)&&(n[""]=t)}}function fV(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function pV(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=ls(i.type,!0)),o=new ms(s,gi(i),$);t.blueprint[r]=o,n[r]=o,oV(t,e,r,rS(t,n,i.hostVars,Ei),i)}function mV(t,e,n){let r=En(e,t),i=cS(n),s=t[Ln].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=uh(t,ah(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function gV(t,e,n,r,i,s){let o=En(t,e);yV(e[ht],o,s,t.value,n,r,i)}function yV(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?Yd(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function _V(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],d=o[a++],f=o[a++];nS(r,n,c,l,d,f)}}function vV(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function fS(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function pS(t,e){let n=t.contentQueries;if(n!==null){let r=be(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];gD(s),a.contentQueries(2,e[o],o)}}}finally{be(r)}}}function uh(t,e){return t[Mc]?t[tT][On]=e:t[Mc]=e,t[tT]=e,e}function Mg(t,e,n){gD(0);let r=be(null);try{e(t,n)}finally{be(r)}}function wV(t){return t[Nc]||(t[Nc]=[])}function IV(t){return t.cleanup||(t.cleanup=[])}function mS(t,e){let n=t[Uo],r=n?n.get(xr,null):null;r&&r.handleError(e)}function Ry(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],l=e[o],d=t.data[o];nS(d,l,r,a,c,i)}}function EV(t,e,n){let r=uD(e,t);xL(t[ht],r,n)}function bV(t,e){let n=vi(e,t),r=n[ve];CV(r,n);let i=n[Pr];i!==null&&n[Md]===null&&(n[Md]=Ey(i,n[Uo])),xy(r,n,n[Fn])}function CV(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function xy(t,e,n){dy(e);try{let r=t.viewQuery;r!==null&&Mg(1,r,n);let i=t.template;i!==null&&iS(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[jo]?.finishViewCreation(t),t.staticContentQueries&&pS(t,e),t.staticViewQueries&&Mg(2,t.viewQuery,n);let s=t.components;s!==null&&TV(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[te]&=-5,hy()}}function TV(t,e){for(let n=0;n<e.length;n++)bV(t,e[n])}function DV(t,e,n,r){let i=be(null);try{let s=e.tView,a=t[te]&4096?4096:16,c=ah(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[eh]=l;let d=t[jo];return d!==null&&(c[jo]=d.createEmbeddedView(s)),xy(s,c,n),c}finally{be(i)}}function fT(t,e){return!e||e.firstChild===null||FD(t)}function SV(t,e,n,r=!0){let i=e[ve];if(kL(i,e,t,n),r){let o=xg(n,t),a=e[ht],c=Ty(a,t[fs]);c!==null&&ML(i,t[Vn],a,e,c,o)}let s=e[Md];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function $d(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(er(s)),kr(s)&&AV(s,r);let o=n.type;if(o&8)$d(t,e,n.child,r);else if(o&32){let a=Cy(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=XD(e,n);if(Array.isArray(a))r.push(...a);else{let c=kc(e[Zn]);$d(c[ve],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function AV(t,e){for(let n=vn;n<t.length;n++){let r=t[n],i=r[ve].firstChild;i!==null&&$d(r[ve],r,i,e)}t[fs]!==t[Pr]&&e.push(t[fs])}var gS=[];function RV(t){return t[hs]??xV(t)}function xV(t){let e=gS.pop()??Object.create(MV);return e.lView=t,e}function NV(t){t.lView[hs]!==t&&(t.lView=null,gS.push(t))}var MV=Oe(U({},p0),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Pc(t.lView)},consumerOnSignalRead(){this.lView[hs]=this}}),yS=100;function _S(t,e=!0,n=0){let r=t[Ln],i=r.rendererFactory,s=!1;s||i.begin?.();try{PV(t,n)}catch(o){throw e&&mS(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function PV(t,e){Pg(t,e);let n=0;for(;uy(t);){if(n===yS)throw new Q(103,!1);n++,Pg(t,1)}}function kV(t,e,n,r){let i=e[te];if((i&256)===256)return;let s=!1;!s&&e[Ln].inlineEffectRunner?.flush(),dy(e);let o=null,a=null;!s&&OV(t)&&(a=RV(e),o=m0(a));try{dD(e),UF(t.bindingStartIndex),n!==null&&iS(t,e,n,2,r);let c=(i&3)===3;if(!s)if(c){let f=t.preOrderCheckHooks;f!==null&&Cd(e,f,null)}else{let f=t.preOrderHooks;f!==null&&Td(e,f,0,null),eg(e,0)}if(FV(e),vS(e,0),t.contentQueries!==null&&pS(t,e),!s)if(c){let f=t.contentCheckHooks;f!==null&&Cd(e,f)}else{let f=t.contentHooks;f!==null&&Td(e,f,1),eg(e,1)}YL(t,e);let l=t.components;l!==null&&IS(e,l,0);let d=t.viewQuery;if(d!==null&&Mg(2,d,r),!s)if(c){let f=t.viewCheckHooks;f!==null&&Cd(e,f)}else{let f=t.viewHooks;f!==null&&Td(e,f,2),eg(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Zm]){for(let f of e[Zm])f();e[Zm]=null}s||(e[te]&=-73)}catch(c){throw Pc(e),c}finally{a!==null&&(g0(a,o),NV(a)),hy()}}function OV(t){return t.type!==2}function vS(t,e){for(let n=VD(t);n!==null;n=UD(n))for(let r=vn;r<n.length;r++){let i=n[r];wS(i,e)}}function FV(t){for(let e=VD(t);e!==null;e=UD(e)){if(!(e[te]&sy.HasTransplantedViews))continue;let n=e[kd];for(let r=0;r<n.length;r++){let i=n[r],s=i[At];SF(i)}}}function LV(t,e,n){let r=vi(e,t);wS(r,n)}function wS(t,e){cy(t)&&Pg(t,e)}function Pg(t,e){let r=t[ve],i=t[te],s=t[hs],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Sm(s)),s&&(s.dirty=!1),t[te]&=-9217,o)kV(r,t,r.template,t[Fn]);else if(i&8192){vS(t,1);let a=r.components;a!==null&&IS(t,a,1)}}function IS(t,e,n){for(let r=0;r<e.length;r++)LV(t,e[r],n)}function Ny(t){for(t[Ln].changeDetectionScheduler?.notify();t;){t[te]|=64;let e=kc(t);if(_F(t)&&!e)return t;t=e}return null}var ys=class{get rootNodes(){let e=this._lView,n=e[ve];return $d(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Fn]}set context(e){this._lView[Fn]=e}get destroyed(){return(this._lView[te]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[At];if(kr(e)){let n=e[Pd],r=n?n.indexOf(this):-1;r>-1&&(Rg(e,r),xd(n,r))}this._attachedToViewContainer=!1}YD(this._lView[ve],this._lView)}onDestroy(e){hD(this._lView,e)}markForCheck(){Ny(this._cdRefInjectingView||this._lView)}detach(){this._lView[te]&=-129}reattach(){Ig(this._lView),this._lView[te]|=128}detectChanges(){this._lView[te]|=1024,_S(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,KD(this._lView[ve],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Q(902,!1);this._appRef=e,Ig(this._lView)}},lh=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=jV;let t=e;return t})(),VV=lh,UV=class extends VV{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=DV(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new ys(i)}};function jV(){return BV(Qt(),Me())}function BV(t,e){return t.type&4?new UV(e,t,ih(t,e)):null}var gX=new RegExp(`^(\\d+)*(${vL}|${_L})*(.*)`);var $V=()=>null;function pT(t,e){return $V(t,e)}var kg=class{},Og=class{},Hd=class{};function HV(t){let e=Error(`No component factory found for ${Ut(t)}.`);return e[qV]=t,e}var qV="ngComponent";var Fg=class{resolveComponentFactory(e){throw HV(e)}},dh=(()=>{let e=class e{};e.NULL=new Fg;let t=e;return t})(),Oc=class{},bs=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>GV();let t=e;return t})();function GV(){let t=Me(),e=Qt(),n=vi(e.index,t);return(cs(n)?n:t)[ht]}var zV=(()=>{let e=class e{};e.\u0275prov=W({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),sg={};var mT=new Set;function ES(t){mT.has(t)||(mT.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function gT(...t){}function WV(){let t=typeof kn.requestAnimationFrame=="function",e=kn[t?"requestAnimationFrame":"setTimeout"],n=kn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var Te=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Vt(!1),this.onMicrotaskEmpty=new Vt(!1),this.onStable=new Vt(!1),this.onError=new Vt(!1),typeof Zone>"u")throw new Q(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=WV().nativeRequestAnimationFrame,YV(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new Q(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new Q(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,KV,gT,gT);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},KV={};function My(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function QV(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(kn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Lg(t),t.isCheckStableRunning=!0,My(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Lg(t))}function YV(t){let e=()=>{QV(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(JV(a))return n.invokeTask(i,s,o,a);try{return yT(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),_T(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return yT(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),_T(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Lg(t),My(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Lg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function yT(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function _T(t){t._nesting--,My(t)}function JV(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var bS=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=W({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Vg(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=G0(i,a);else if(s==2){let c=a,l=e[++o];r=G0(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var qd=class extends dh{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=ds(e);return new Fc(n,this.ngModule)}};function vT(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function XV(t){let e=t.toLowerCase();return e==="svg"?EF:e==="math"?bF:null}var Ug=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Jd(r);let i=this.injector.get(e,sg,r);return i!==sg||n===sg?i:this.parentInjector.get(e,n,r)}},Fc=class extends Hd{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=vT(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return vT(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=eF(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=be(null);try{i=i||this.ngModule;let o=i instanceof wn?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Ug(e,o):e,c=a.get(Oc,null);if(c===null)throw new Q(407,!1);let l=a.get(zV,null),d=a.get(bS,null),f=a.get(kg,null),m={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:d,changeDetectionScheduler:f},y=c.createRenderer(null,this.componentDef),E=this.componentDef.selectors[0][0]||"div",x=r?ZL(y,r,this.componentDef.encapsulation,a):WD(y,E,XV(E)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let F=null;x!==null&&(F=Ey(x,a,!0));let q=Ay(0,null,null,1,0,null,null,null,null,null,null),B=ah(null,q,null,R,null,null,m,y,a,null,F);dy(B);let G,xe;try{let re=this.componentDef,C,_=null;re.findHostDirectiveDefs?(C=[],_=new Map,re.findHostDirectiveDefs(re,C,_),C.push(re)):C=[re];let w=ZV(B,x),b=eU(w,x,re,C,B,m,y);xe=lD(q,In),x&&rU(y,re,x,r),n!==void 0&&iU(xe,this.ngContentSelectors,n),G=nU(b,re,C,_,B,[sU]),xy(q,B,null)}finally{hy()}return new jg(this.componentType,G,ih(xe,B),B,xe)}finally{be(s)}}},jg=class extends Og{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new ys(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Ry(s[ve],s,i,e,n),this.previousInputValues.set(e,n);let o=vi(this._tNode.index,s);Ny(o)}}get injector(){return new us(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function ZV(t,e){let n=t[ve],r=In;return t[r]=e,ch(n,r,2,"#host",null)}function eU(t,e,n,r,i,s,o){let a=i[ve];tU(r,t,e,o);let c=null;e!==null&&(c=Ey(e,i[Uo]));let l=s.rendererFactory.createRenderer(e,n),d=16;n.signals?d=4096:n.onPush&&(d=64);let f=ah(i,cS(n),null,d,i[t.index],t,s,l,null,null,c);return a.firstCreatePass&&Ng(a,t,r.length-1),uh(i,f),i[t.index]=f}function tU(t,e,n,r){for(let i of t)e.mergedAttrs=Rc(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Vg(e,e.mergedAttrs,!0),n!==null&&eS(r,n,e))}function nU(t,e,n,r,i,s){let o=Qt(),a=i[ve],c=En(o,i);dS(a,i,o,n,null,r);for(let d=0;d<n.length;d++){let f=o.directiveStart+d,m=Bo(i,a,f,o);gs(m,i)}hS(a,i,o),c&&gs(c,i);let l=Bo(i,a,o.directiveStart+o.componentOffset,o);if(t[Fn]=i[Fn]=l,s!==null)for(let d of s)d(l,e);return sS(a,o,i),l}function rU(t,e,n,r){if(r)gg(t,n,["ng-version","17.3.9"]);else{let{attrs:i,classes:s}=tF(e.selectors[0]);i&&gg(t,n,i),s&&s.length>0&&ZD(t,n,s.join(" "))}}function iU(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function sU(){let t=Qt();gy(Me()[ve],t)}var Wo=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=oU;let t=e;return t})();function oU(){let t=Qt();return cU(t,Me())}var aU=Wo,CS=class extends aU{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return ih(this._hostTNode,this._hostLView)}get injector(){return new us(this._hostTNode,this._hostLView)}get parentInjector(){let e=yy(this._hostTNode,this._hostLView);if(CD(e)){let n=Ld(e,this._hostLView),r=Fd(e),i=n[ve].data[r+8];return new us(i,n)}else return new us(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=wT(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-vn}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=pT(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,fT(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!yF(e),a;if(o)a=n;else{let E=n||{};a=E.index,r=E.injector,i=E.projectableNodes,s=E.environmentInjector||E.ngModuleRef}let c=o?e:new Fc(ds(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let x=(o?l:this.parentInjector).get(wn,null);x&&(s=x)}let d=ds(c.componentType??{}),f=pT(this._lContainer,d?.id??null),m=f?.firstChild??null,y=c.create(l,i,m,s);return this.insertImpl(y.hostView,a,fT(this._hostTNode,f)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(DF(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[At],l=new CS(c,c[Vn],c[At]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return SV(o,i,s,r),e.attachToViewContainerRef(),jT(og(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=wT(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Rg(this._lContainer,n);r&&(xd(og(this._lContainer),n),YD(r[ve],r))}detach(e){let n=this._adjustIndex(e,-1),r=Rg(this._lContainer,n);return r&&xd(og(this._lContainer),n)!=null?new ys(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function wT(t){return t[Pd]}function og(t){return t[Pd]||(t[Pd]=[])}function cU(t,e){let n,r=e[t.index];return kr(r)?n=r:(n=fS(r,e,null,t),e[t.index]=n,uh(e,n)),lU(n,e,t,r),new CS(n,t,e)}function uU(t,e){let n=t[ht],r=n.createComment(""),i=En(e,t),s=Ty(n,i);return Bd(n,s,r,BL(n,i),!1),r}var lU=fU,dU=()=>!1;function hU(t,e,n){return dU(t,e,n)}function fU(t,e,n,r){if(t[fs])return;let i;n.type&8?i=er(r):i=uU(e,n),t[fs]=i}function pU(t){return typeof t=="function"&&t[Dm]!==void 0}function TS(t){return pU(t)&&typeof t.set=="function"}function mU(t){return Object.getPrototypeOf(t.prototype).constructor}function Cs(t){let e=mU(t.type),n=!0,r=[t];for(;e;){let i;if(gi(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Q(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=Id(t.inputs),o.inputTransforms=Id(t.inputTransforms),o.declaredInputs=Id(t.declaredInputs),o.outputs=Id(t.outputs);let a=i.hostBindings;a&&wU(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&_U(t,c),l&&vU(t,l),gU(t,i),E1(t.outputs,i.outputs),gi(i)&&i.data.animation){let d=t.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Cs&&(n=!1)}}e=Object.getPrototypeOf(e)}yU(r)}function gU(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function yU(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Rc(i.hostAttrs,n=Rc(n,i.hostAttrs))}}function Id(t){return t===Fo?{}:t===_n?[]:t}function _U(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function vU(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function wU(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function Py(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var yi=class{},Lc=class{};var Bg=class extends yi{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new qd(this);let i=QT(e);this._bootstrapComponents=zD(i.bootstrap),this._r3Injector=PD(e,n,[{provide:yi,useValue:this},{provide:dh,useValue:this.componentFactoryResolver},...r],Ut(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},$g=class extends Lc{constructor(e){super(),this.moduleType=e}create(e){return new Bg(this.moduleType,e,[])}};var Gd=class extends yi{constructor(e){super(),this.componentFactoryResolver=new qd(this),this.instance=null;let n=new xc([...e.providers,{provide:yi,useValue:this},{provide:dh,useValue:this.componentFactoryResolver}],e.parent||iy(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ky(t,e,n=null){return new Gd({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var hh=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ut(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function DS(t){return EU(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function IU(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function EU(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function Oy(t,e,n){return t[e]=n}function bU(t,e){return t[e]}function _i(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function CU(t,e,n,r){let i=_i(t,e,n);return _i(t,e+1,r)||i}function TU(t){return(t.flags&32)===32}function DU(t,e,n,r,i,s,o,a,c){let l=e.consts,d=ch(e,t,4,o||null,Od(l,a));lS(e,n,d,Od(l,c)),gy(e,d);let f=d.tView=Ay(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function bi(t,e,n,r,i,s,o,a){let c=Me(),l=Kt(),d=t+In,f=l.firstCreatePass?DU(d,l,c,e,n,r,i,s,o):l.data[d];Bc(f,!1);let m=SU(l,c,f,t);py()&&Dy(l,c,m,f),gs(m,c);let y=fS(m,c,m,f);return c[d]=y,uh(c,y),hU(y,f,c),oy(f)&&oS(l,c,f),o!=null&&aS(c,f,a),bi}var SU=AU;function AU(t,e,n,r){return my(!0),e[ht].createComment("")}function fh(t,e,n,r){let i=Me(),s=rh();if(_i(i,s,e)){let o=Kt(),a=fy();gV(a,i,t,e,n,r)}return fh}function RU(t,e,n,r){return _i(t,rh(),n)?e+Yd(n)+r:Ei}function Ed(t,e){return t<<17|e<<2}function _s(t){return t>>17&32767}function xU(t){return(t&2)==2}function NU(t,e){return t&131071|e<<17}function Hg(t){return t|2}function $o(t){return(t&131068)>>2}function ag(t,e){return t&-131069|e<<2}function MU(t){return(t&1)===1}function qg(t){return t|1}function PU(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=_s(o),c=$o(o);t[r]=n;let l=!1,d;if(Array.isArray(n)){let f=n;d=f[1],(d===null||jc(f,d)>0)&&(l=!0)}else d=n;if(i)if(c!==0){let m=_s(t[a+1]);t[r+1]=Ed(m,a),m!==0&&(t[m+1]=ag(t[m+1],r)),t[a+1]=NU(t[a+1],r)}else t[r+1]=Ed(a,0),a!==0&&(t[a+1]=ag(t[a+1],r)),a=r;else t[r+1]=Ed(c,0),a===0?a=r:t[c+1]=ag(t[c+1],r),c=r;l&&(t[r+1]=Hg(t[r+1])),IT(t,d,r,!0),IT(t,d,r,!1),kU(e,d,t,r,s),o=Ed(a,c),s?e.classBindings=o:e.styleBindings=o}function kU(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&jc(s,e)>=0&&(n[r+1]=qg(n[r+1]))}function IT(t,e,n,r){let i=t[n+1],s=e===null,o=r?_s(i):$o(i),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],l=t[o+1];OU(c,e)&&(a=!0,t[o+1]=r?qg(l):Hg(l)),o=r?_s(l):$o(l)}a&&(t[n+1]=r?Hg(i):qg(i))}function OU(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?jc(t,e)>=0:!1}function xt(t,e,n){let r=Me(),i=rh();if(_i(r,i,e)){let s=Kt(),o=fy();uS(s,o,r,t,e,r[ht],n,!1)}return xt}function ET(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Ry(t,n,s[o],o,r)}function Fy(t,e){return FU(t,e,null,!0),Fy}function FU(t,e,n,r){let i=Me(),s=Kt(),o=jF(2);if(s.firstUpdatePass&&VU(s,t,o,r),e!==Ei&&_i(i,o,e)){let a=s.data[Go()];HU(s,a,i,i[ht],t,i[o+1]=qU(e,n),r,o)}}function LU(t,e){return e>=t.expandoStartIndex}function VU(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[Go()],o=LU(t,n);GU(s,r)&&e===null&&!o&&(e=!1),e=UU(i,s,e,r),PU(i,s,e,n,o,r)}}function UU(t,e,n,r){let i=qF(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=cg(null,t,e,n,r),n=Vc(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=cg(i,t,e,n,r),s===null){let c=jU(t,e,r);c!==void 0&&Array.isArray(c)&&(c=cg(null,t,e,c[1],r),c=Vc(c,e.attrs,r),BU(t,e,r,c))}else s=$U(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function jU(t,e,n){let r=n?e.classBindings:e.styleBindings;if($o(r)!==0)return t[_s(r)]}function BU(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[_s(i)]=r}function $U(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=Vc(r,o,n)}return Vc(r,e.attrs,n)}function cg(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=Vc(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Vc(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),$1(t,o,n?!0:e[++s]))}return t===void 0?null:t}function HU(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],d=MU(l)?bT(c,e,n,i,$o(l),o):void 0;if(!zd(d)){zd(s)||xU(l)&&(s=bT(c,null,n,i,a,o));let f=uD(Go(),n);KL(r,o,f,i,s)}}function bT(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),d=l?c[1]:c,f=d===null,m=n[i+1];m===Ei&&(m=f?_n:void 0);let y=f?Jm(m,r):d===r?m:void 0;if(l&&!zd(y)&&(y=Jm(c,r)),zd(y)&&(a=y,o))return a;let E=t[i+1];i=o?_s(E):$o(E)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Jm(c,r))}return a}function zd(t){return t!==void 0}function qU(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Ut($c(t)))),t}function GU(t,e){return(t.flags&(e?8:16))!==0}function zU(t,e,n,r,i,s){let o=e.consts,a=Od(o,i),c=ch(e,t,2,r,a);return lS(e,n,c,Od(o,s)),c.attrs!==null&&Vg(c,c.attrs,!1),c.mergedAttrs!==null&&Vg(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function M(t,e,n,r){let i=Me(),s=Kt(),o=In+t,a=i[ht],c=s.firstCreatePass?zU(o,s,i,e,n,r):s.data[o],l=WU(s,i,c,a,e,t);i[o]=l;let d=oy(c);return Bc(c,!0),eS(a,l,c),!TU(c)&&py()&&Dy(s,i,l,c),xF()===0&&gs(l,i),NF(),d&&(oS(s,i,c),sS(s,c,i)),r!==null&&aS(i,c),M}function N(){let t=Qt();mD()?LF():(t=t.parent,Bc(t,!1));let e=t;kF(e)&&OF(),MF();let n=Kt();return n.firstCreatePass&&(gy(n,t),iD(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&JF(e)&&ET(n,e,Me(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&XF(e)&&ET(n,e,Me(),e.stylesWithoutHost,!1),N}function ce(t,e,n,r){return M(t,e,n,r),N(),ce}var WU=(t,e,n,r,i,s)=>(my(!0),WD(r,i,WF()));function Ci(){return Me()}var as=void 0;function KU(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var QU=["en",[["a","p"],["AM","PM"],as],[["AM","PM"],as,as],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],as,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],as,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",as,"{1} 'at' {0}",as],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",KU],ug={};function Yt(t){let e=YU(t),n=CT(e);if(n)return n;let r=e.split("-")[0];if(n=CT(r),n)return n;if(r==="en")return QU;throw new Q(701,!1)}function CT(t){return t in ug||(ug[t]=kn.ng&&kn.ng.common&&kn.ng.common.locales&&kn.ng.common.locales[t]),ug[t]}var Ke=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Ke||{});function YU(t){return t.toLowerCase().replace(/_/g,"-")}var Wd="en-US",JU="USD";var XU=Wd;function ZU(t){typeof t=="string"&&(XU=t.toLowerCase().replace(/_/g,"-"))}function Ie(t,e,n,r){let i=Me(),s=Kt(),o=Qt();return SS(s,i,i[ht],o,t,e,r),Ie}function e2(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Nc],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function SS(t,e,n,r,i,s,o){let a=oy(r),l=t.firstCreatePass&&IV(t),d=e[Fn],f=wV(e),m=!0;if(r.type&3||o){let x=En(r,e),R=o?o(x):x,F=f.length,q=o?G=>o(er(G[r.index])):r.index,B=null;if(!o&&a&&(B=e2(t,e,i,r.index)),B!==null){let G=B.__ngLastListenerFn__||B;G.__ngNextListenerFn__=s,B.__ngLastListenerFn__=s,m=!1}else{s=DT(r,e,d,s,!1);let G=n.listen(R,i,s);f.push(s,G),l&&l.push(i,q,F,F+1)}}else s=DT(r,e,d,s,!1);let y=r.outputs,E;if(m&&y!==null&&(E=y[i])){let x=E.length;if(x)for(let R=0;R<x;R+=2){let F=E[R],q=E[R+1],xe=e[F][q].subscribe(s),re=f.length;f.push(s,xe),l&&l.push(i,r.index,re,-(re+1))}}}function TT(t,e,n,r){let i=be(null);try{return Yn(6,e,n),n(r)!==!1}catch(s){return mS(t,s),!1}finally{Yn(7,e,n),be(i)}}function DT(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?vi(t.index,e):e;Ny(a);let c=TT(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)c=TT(e,n,l,o)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&o.preventDefault(),c}}function Ti(t=1){return zF(t)}function t2(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Or(t){let e=VF();return ay(e,In+t)}function V(t,e=""){let n=Me(),r=Kt(),i=t+In,s=r.firstCreatePass?ch(r,i,1,e,null):r.data[i],o=n2(r,n,s,e,t);n[i]=o,py()&&Dy(r,n,o,s),Bc(s,!1)}var n2=(t,e,n,r,i)=>(my(!0),RL(e[ht],r));function Di(t){return Si("",t,""),Di}function Si(t,e,n){let r=Me(),i=RU(r,t,e,n);return i!==Ei&&EV(r,Go(),i),Si}function Ts(t,e,n){TS(e)&&(e=e());let r=Me(),i=rh();if(_i(r,i,e)){let s=Kt(),o=fy();uS(s,o,r,t,e,r[ht],n,!1)}return Ts}function Ko(t,e){let n=TS(t);return n&&t.set(e),n}function Ds(t,e){let n=Me(),r=Kt(),i=Qt();return SS(r,n,n[ht],i,t,e),Ds}function r2(t,e,n){let r=Kt();if(r.firstCreatePass){let i=gi(t);Gg(n,r.data,r.blueprint,i,!0),Gg(e,r.data,r.blueprint,i,!1)}}function Gg(t,e,n,r,i){if(t=Lt(t),Array.isArray(t))for(let s=0;s<t.length;s++)Gg(t[s],e,n,r,i);else{let s=Kt(),o=Me(),a=Qt(),c=Vo(t)?t:Lt(t.provide),l=tD(t),d=a.providerIndexes&1048575,f=a.directiveStart,m=a.providerIndexes>>20;if(Vo(t)||!t.multi){let y=new ms(l,i,$),E=dg(c,e,i?d:d+m,f);E===-1?(Cg(Ud(a,o),s,c),lg(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),o.push(y)):(n[E]=y,o[E]=y)}else{let y=dg(c,e,d+m,f),E=dg(c,e,d,d+m),x=y>=0&&n[y],R=E>=0&&n[E];if(i&&!R||!i&&!x){Cg(Ud(a,o),s,c);let F=o2(i?s2:i2,n.length,i,r,l);!i&&R&&(n[E].providerFactory=F),lg(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(F),o.push(F)}else{let F=AS(n[i?E:y],l,!i&&r);lg(s,t,y>-1?y:E,F)}!i&&r&&R&&n[E].componentProviders++}}}function lg(t,e,n,r){let i=Vo(e),s=uF(e);if(i||s){let c=(s?Lt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(n);d===-1?l.push(n,[r,c]):l[d+1].push(r,c)}else l.push(n,c)}}}function AS(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function dg(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function i2(t,e,n,r){return zg(this.multi,[])}function s2(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Bo(n,n[ve],this.providerFactory.index,r);s=a.slice(0,o),zg(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],zg(i,s);return s}function zg(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function o2(t,e,n,r,i){let s=new ms(t,n,$);return s.multi=[],s.index=e,s.componentProviders=0,AS(s,i,r&&!n),s}function ph(t,e=[]){return n=>{n.providersResolver=(r,i)=>r2(r,i?i(t):t,e)}}var a2=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=XT(!1,r.type),s=i.length>0?ky([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=W({token:e,providedIn:"environment",factory:()=>new e(X(wn))});let t=e;return t})();function Be(t){ES("NgStandalone"),t.getStandaloneInjector=e=>e.get(a2).getOrCreateStandaloneInjector(t)}function rr(t,e,n){let r=ly()+t,i=Me();return i[r]===Ei?Oy(i,r,n?e.call(n):e()):bU(i,r)}function RS(t,e){let n=t[e];return n===Ei?void 0:n}function c2(t,e,n,r,i,s){let o=e+n;return _i(t,o,i)?Oy(t,o+1,s?r.call(s,i):r(i)):RS(t,o+1)}function u2(t,e,n,r,i,s,o){let a=e+n;return CU(t,a,i,s)?Oy(t,a+2,o?r.call(o,i,s):r(i,s)):RS(t,a+2)}function Bt(t,e){let n=Kt(),r,i=t+In;n.firstCreatePass?(r=l2(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=ls(r.type,!0)),o,a=zt($);try{let c=Vd(!1),l=s();return Vd(c),t2(n,Me(),i,l),l}finally{zt(a)}}function l2(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function Jt(t,e,n){let r=t+In,i=Me(),s=ay(i,r);return NS(i,r)?c2(i,ly(),e,s.transform,n,s):s.transform(n)}function xS(t,e,n,r){let i=t+In,s=Me(),o=ay(s,i);return NS(s,i)?u2(s,ly(),e,o.transform,n,r,o):o.transform(n,r)}function NS(t,e){return t[ve].data[e].pure}var Mr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},MS=new Mr("17.3.9"),mh=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var PS=new z("");function Ai(t){return!!t&&typeof t.then=="function"}function Ly(t){return!!t&&typeof t.subscribe=="function"}var kS=new z(""),OS=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=j(kS,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Ai(o))r.push(o);else if(Ly(o)){let a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Vy=new z("");function d2(){_0(()=>{throw new Q(600,!1)})}function h2(t){return t.isBoundToModule}function f2(t,e,n){try{let r=n();return Ai(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Hc=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=j(kD),this.afterRenderEffectManager=j(bS),this.externalTestViews=new Set,this.beforeRender=new St,this.afterTick=new St,this.componentTypes=[],this.components=[],this.isStable=j(hh).hasPendingTasks.pipe(se(r=>!r)),this._injector=j(wn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Hd;if(!this._injector.get(OS).done){let y=!s&&KT(r),E=!1;throw new Q(405,E)}let a;s?a=r:a=this._injector.get(dh).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=h2(a)?void 0:this._injector.get(yi),l=i||a.selector,d=a.create(Rt.NULL,[],l,c),f=d.location.nativeElement,m=d.injector.get(PS,null);return m?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),hg(this.components,d),m?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new Q(101,!1);let i=be(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,be(i)}}detectChangesInAttachedViews(r){let i=0,s=this.afterRenderEffectManager;for(;;){if(i===yS)throw new Q(103,!1);if(r){let o=i===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:c}of this._views)p2(a,o,c)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Wg(o))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Wg(o))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;hg(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Vy,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>hg(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new Q(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function hg(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function p2(t,e,n){!e&&!Wg(t)||m2(t,n,e)}function Wg(t){return uy(t)}function m2(t,e,n){let r;n?(r=0,t[te]|=1024):t[te]&64?r=0:r=1,_S(t,e,r)}var Kg=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Uy=(()=>{let e=class e{compileModuleSync(r){return new $g(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=QT(r),o=zD(s.declarations).reduce((a,c)=>{let l=ds(c);return l&&a.push(new Fc(l)),a},[]);return new Kg(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var g2=(()=>{let e=class e{constructor(){this.zone=j(Te),this.applicationRef=j(Hc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function y2(t){return[{provide:Te,useFactory:t},{provide:Lo,multi:!0,useFactory:()=>{let e=j(g2,{optional:!0});return()=>e.initialize()}},{provide:Lo,multi:!0,useFactory:()=>{let e=j(I2);return()=>{e.initialize()}}},{provide:kD,useFactory:_2}]}function _2(){let t=j(Te),e=j(xr);return n=>t.runOutsideAngular(()=>e.handleError(n))}function v2(t){let e=y2(()=>new Te(w2(t)));return Wt([[],e])}function w2(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var I2=(()=>{let e=class e{constructor(){this.subscription=new nt,this.initialized=!1,this.zone=j(Te),this.pendingTasks=j(hh)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Te.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Te.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function E2(){return typeof $localize<"u"&&$localize.locale||Wd}var qc=new z("",{providedIn:"root",factory:()=>j(qc,he.Optional|he.SkipSelf)||E2()}),FS=new z("",{providedIn:"root",factory:()=>JU});var LS=new z("");var Sd=null;function b2(t=[],e){return Rt.create({name:e,providers:[{provide:Zd,useValue:"platform"},{provide:LS,useValue:new Set([()=>Sd=null])},...t]})}function C2(t=[]){if(Sd)return Sd;let e=b2(t);return Sd=e,d2(),T2(e),e}function T2(t){t.get(wy,null)?.forEach(n=>n())}var Ri=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=D2;let t=e;return t})();function D2(t){return S2(Qt(),Me(),(t&16)===16)}function S2(t,e,n){if(nh(t)&&!n){let r=vi(t.index,e);return new ys(r,r)}else if(t.type&47){let r=e[Zn];return new ys(r,e)}return null}var Qg=class{constructor(){}supports(e){return DS(e)}create(e){return new Yg(e)}},A2=(t,e)=>e,Yg=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||A2}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<ST(r,i,s)?n:r,a=ST(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,d=c-i;if(l!=d){for(let m=0;m<l;m++){let y=m<s.length?s[m]:s[m]=0,E=y+m;d<=E&&E<l&&(s[m]=y+1)}let f=o.previousIndex;s[f]=d-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!DS(e))throw new Q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,IU(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Jg(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Kd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Kd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Jg=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Xg=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Kd=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Xg,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function ST(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function AT(){return new jy([new Qg])}var jy=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||AT()),deps:[[e,new UT,new ze]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new Q(901,!1)}};e.\u0275prov=W({token:e,providedIn:"root",factory:AT});let t=e;return t})();function VS(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=C2(r),s=[v2(),...n||[]],a=new Gd({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(Te);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(xr,null),d;c.runOutsideAngular(()=>{d=c.onError.subscribe({next:y=>{l.handleError(y)}})});let f=()=>a.destroy(),m=i.get(LS);return m.add(f),a.onDestroy(()=>{d.unsubscribe(),m.delete(f)}),f2(l,c,()=>{let y=a.get(OS);return y.runInitializers(),y.donePromise.then(()=>{let E=a.get(qc,Wd);ZU(E||Wd);let x=a.get(Hc);return e!==void 0&&x.bootstrap(e),x})})})}catch(e){return Promise.reject(e)}}function Ss(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function By(t){let e=be(null);try{return t()}finally{be(e)}}var zS=null;function Ur(){return zS}function WS(t){zS??=t}var Ch=class{};var Cn=new z(""),KS=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>j(R2),providedIn:"platform"});let t=e;return t})();var R2=(()=>{let e=class e extends KS{constructor(){super(),this._doc=j(Cn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ur().getBaseHref(this._doc)}onPopState(r){let i=Ur().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Ur().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function QS(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function US(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function As(t){return t&&t[0]!=="?"?"?"+t:t}var Qo=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>j(YS),providedIn:"root"});let t=e;return t})(),x2=new z(""),YS=(()=>{let e=class e extends Qo{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??j(Cn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return QS(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+As(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+As(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+As(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(X(KS),X(x2,8))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var zc=(()=>{let e=class e{constructor(r){this._subject=new Vt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=P2(US(jS(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+As(i))}normalize(r){return e.stripTrailingSlash(M2(this._basePath,jS(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+As(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+As(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=As,e.joinWithSlash=QS,e.stripTrailingSlash=US,e.\u0275fac=function(i){return new(i||e)(X(Qo))},e.\u0275prov=W({token:e,factory:()=>N2(),providedIn:"root"});let t=e;return t})();function N2(){return new zc(X(Qo))}function M2(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function jS(t){return t.replace(/\/index.html$/,"")}function P2(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var JS={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},XS=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(XS||{});var $t=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}($t||{}),Ue=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(Ue||{}),un=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(un||{}),ln={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function k2(t){return Yt(t)[Ke.LocaleId]}function O2(t,e,n){let r=Yt(t),i=[r[Ke.DayPeriodsFormat],r[Ke.DayPeriodsStandalone]],s=bn(i,e);return bn(s,n)}function F2(t,e,n){let r=Yt(t),i=[r[Ke.DaysFormat],r[Ke.DaysStandalone]],s=bn(i,e);return bn(s,n)}function L2(t,e,n){let r=Yt(t),i=[r[Ke.MonthsFormat],r[Ke.MonthsStandalone]],s=bn(i,e);return bn(s,n)}function V2(t,e){let r=Yt(t)[Ke.Eras];return bn(r,e)}function gh(t,e){let n=Yt(t);return bn(n[Ke.DateFormat],e)}function yh(t,e){let n=Yt(t);return bn(n[Ke.TimeFormat],e)}function _h(t,e){let r=Yt(t)[Ke.DateTimeFormat];return bn(r,e)}function Lr(t,e){let n=Yt(t),r=n[Ke.NumberSymbols][e];if(typeof r>"u"){if(e===ln.CurrencyDecimal)return n[Ke.NumberSymbols][ln.Decimal];if(e===ln.CurrencyGroup)return n[Ke.NumberSymbols][ln.Group]}return r}function U2(t,e){return Yt(t)[Ke.NumberFormats][e]}function j2(t){return Yt(t)[Ke.Currencies]}function ZS(t){if(!t[Ke.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[Ke.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function B2(t){let e=Yt(t);return ZS(e),(e[Ke.ExtraData][2]||[]).map(r=>typeof r=="string"?$y(r):[$y(r[0]),$y(r[1])])}function $2(t,e,n){let r=Yt(t);ZS(r);let i=[r[Ke.ExtraData][0],r[Ke.ExtraData][1]],s=bn(i,e)||[];return bn(s,n)||[]}function bn(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function $y(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}function H2(t,e,n="en"){let r=j2(n)[t]||JS[t]||[],i=r[1];return e==="narrow"&&typeof i=="string"?i:r[0]||t}var q2=2;function G2(t){let e,n=JS[t];return n&&(e=n[2]),typeof e=="number"?e:q2}var z2=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,vh={},W2=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Vr=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(Vr||{}),Se=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(Se||{}),De=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(De||{});function K2(t,e,n,r){let i=rj(t);e=Fr(n,e)||e;let o=[],a;for(;e;)if(a=W2.exec(e),a){o=o.concat(a.slice(1));let d=o.pop();if(!d)break;e=d}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=tA(r,c),i=nj(i,r,!0));let l="";return o.forEach(d=>{let f=ej(d);l+=f?f(i,n,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Th(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Fr(t,e){let n=k2(t);if(vh[n]??={},vh[n][e])return vh[n][e];let r="";switch(e){case"shortDate":r=gh(t,un.Short);break;case"mediumDate":r=gh(t,un.Medium);break;case"longDate":r=gh(t,un.Long);break;case"fullDate":r=gh(t,un.Full);break;case"shortTime":r=yh(t,un.Short);break;case"mediumTime":r=yh(t,un.Medium);break;case"longTime":r=yh(t,un.Long);break;case"fullTime":r=yh(t,un.Full);break;case"short":let i=Fr(t,"shortTime"),s=Fr(t,"shortDate");r=wh(_h(t,un.Short),[i,s]);break;case"medium":let o=Fr(t,"mediumTime"),a=Fr(t,"mediumDate");r=wh(_h(t,un.Medium),[o,a]);break;case"long":let c=Fr(t,"longTime"),l=Fr(t,"longDate");r=wh(_h(t,un.Long),[c,l]);break;case"full":let d=Fr(t,"fullTime"),f=Fr(t,"fullDate");r=wh(_h(t,un.Full),[d,f]);break}return r&&(vh[n][e]=r),r}function wh(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function Un(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function Q2(t,e){return Un(t,3).substring(0,e)}function st(t,e,n=0,r=!1,i=!1){return function(s,o){let a=Y2(t,s);if((n>0||a>-n)&&(a+=n),t===Se.Hours)a===0&&n===-12&&(a=12);else if(t===Se.FractionalSeconds)return Q2(a,e);let c=Lr(o,ln.MinusSign);return Un(a,e,c,r,i)}}function Y2(t,e){switch(t){case Se.FullYear:return e.getFullYear();case Se.Month:return e.getMonth();case Se.Date:return e.getDate();case Se.Hours:return e.getHours();case Se.Minutes:return e.getMinutes();case Se.Seconds:return e.getSeconds();case Se.FractionalSeconds:return e.getMilliseconds();case Se.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function $e(t,e,n=$t.Format,r=!1){return function(i,s){return J2(i,s,t,e,n,r)}}function J2(t,e,n,r,i,s){switch(n){case De.Months:return L2(e,i,r)[t.getMonth()];case De.Days:return F2(e,i,r)[t.getDay()];case De.DayPeriods:let o=t.getHours(),a=t.getMinutes();if(s){let l=B2(e),d=$2(e,i,r),f=l.findIndex(m=>{if(Array.isArray(m)){let[y,E]=m,x=o>=y.hours&&a>=y.minutes,R=o<E.hours||o===E.hours&&a<E.minutes;if(y.hours<E.hours){if(x&&R)return!0}else if(x||R)return!0}else if(m.hours===o&&m.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return O2(e,i,r)[o<12?0:1];case De.Eras:return V2(e,r)[t.getFullYear()<=0?0:1];default:let c=n;throw new Error(`unexpected translation type ${c}`)}}function Ih(t){return function(e,n,r){let i=-1*r,s=Lr(n,ln.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case Vr.Short:return(i>=0?"+":"")+Un(o,2,s)+Un(Math.abs(i%60),2,s);case Vr.ShortGMT:return"GMT"+(i>=0?"+":"")+Un(o,1,s);case Vr.Long:return"GMT"+(i>=0?"+":"")+Un(o,2,s)+":"+Un(Math.abs(i%60),2,s);case Vr.Extended:return r===0?"Z":(i>=0?"+":"")+Un(o,2,s)+":"+Un(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}var X2=0,bh=4;function Z2(t){let e=Th(t,X2,1).getDay();return Th(t,0,1+(e<=bh?bh:bh+7)-e)}function eA(t){let e=t.getDay(),n=e===0?-3:bh-e;return Th(t.getFullYear(),t.getMonth(),t.getDate()+n)}function Hy(t,e=!1){return function(n,r){let i;if(e){let s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();i=1+Math.floor((o+s)/7)}else{let s=eA(n),o=Z2(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return Un(i,t,Lr(r,ln.MinusSign))}}function Eh(t,e=!1){return function(n,r){let s=eA(n).getFullYear();return Un(s,t,Lr(r,ln.MinusSign),e)}}var qy={};function ej(t){if(qy[t])return qy[t];let e;switch(t){case"G":case"GG":case"GGG":e=$e(De.Eras,Ue.Abbreviated);break;case"GGGG":e=$e(De.Eras,Ue.Wide);break;case"GGGGG":e=$e(De.Eras,Ue.Narrow);break;case"y":e=st(Se.FullYear,1,0,!1,!0);break;case"yy":e=st(Se.FullYear,2,0,!0,!0);break;case"yyy":e=st(Se.FullYear,3,0,!1,!0);break;case"yyyy":e=st(Se.FullYear,4,0,!1,!0);break;case"Y":e=Eh(1);break;case"YY":e=Eh(2,!0);break;case"YYY":e=Eh(3);break;case"YYYY":e=Eh(4);break;case"M":case"L":e=st(Se.Month,1,1);break;case"MM":case"LL":e=st(Se.Month,2,1);break;case"MMM":e=$e(De.Months,Ue.Abbreviated);break;case"MMMM":e=$e(De.Months,Ue.Wide);break;case"MMMMM":e=$e(De.Months,Ue.Narrow);break;case"LLL":e=$e(De.Months,Ue.Abbreviated,$t.Standalone);break;case"LLLL":e=$e(De.Months,Ue.Wide,$t.Standalone);break;case"LLLLL":e=$e(De.Months,Ue.Narrow,$t.Standalone);break;case"w":e=Hy(1);break;case"ww":e=Hy(2);break;case"W":e=Hy(1,!0);break;case"d":e=st(Se.Date,1);break;case"dd":e=st(Se.Date,2);break;case"c":case"cc":e=st(Se.Day,1);break;case"ccc":e=$e(De.Days,Ue.Abbreviated,$t.Standalone);break;case"cccc":e=$e(De.Days,Ue.Wide,$t.Standalone);break;case"ccccc":e=$e(De.Days,Ue.Narrow,$t.Standalone);break;case"cccccc":e=$e(De.Days,Ue.Short,$t.Standalone);break;case"E":case"EE":case"EEE":e=$e(De.Days,Ue.Abbreviated);break;case"EEEE":e=$e(De.Days,Ue.Wide);break;case"EEEEE":e=$e(De.Days,Ue.Narrow);break;case"EEEEEE":e=$e(De.Days,Ue.Short);break;case"a":case"aa":case"aaa":e=$e(De.DayPeriods,Ue.Abbreviated);break;case"aaaa":e=$e(De.DayPeriods,Ue.Wide);break;case"aaaaa":e=$e(De.DayPeriods,Ue.Narrow);break;case"b":case"bb":case"bbb":e=$e(De.DayPeriods,Ue.Abbreviated,$t.Standalone,!0);break;case"bbbb":e=$e(De.DayPeriods,Ue.Wide,$t.Standalone,!0);break;case"bbbbb":e=$e(De.DayPeriods,Ue.Narrow,$t.Standalone,!0);break;case"B":case"BB":case"BBB":e=$e(De.DayPeriods,Ue.Abbreviated,$t.Format,!0);break;case"BBBB":e=$e(De.DayPeriods,Ue.Wide,$t.Format,!0);break;case"BBBBB":e=$e(De.DayPeriods,Ue.Narrow,$t.Format,!0);break;case"h":e=st(Se.Hours,1,-12);break;case"hh":e=st(Se.Hours,2,-12);break;case"H":e=st(Se.Hours,1);break;case"HH":e=st(Se.Hours,2);break;case"m":e=st(Se.Minutes,1);break;case"mm":e=st(Se.Minutes,2);break;case"s":e=st(Se.Seconds,1);break;case"ss":e=st(Se.Seconds,2);break;case"S":e=st(Se.FractionalSeconds,1);break;case"SS":e=st(Se.FractionalSeconds,2);break;case"SSS":e=st(Se.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Ih(Vr.Short);break;case"ZZZZZ":e=Ih(Vr.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Ih(Vr.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Ih(Vr.Long);break;default:return null}return qy[t]=e,e}function tA(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function tj(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function nj(t,e,n){let r=n?-1:1,i=t.getTimezoneOffset(),s=tA(e,i);return tj(t,r*(s-i))}function rj(t){if(BS(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,s=1,o=1]=t.split("-").map(a=>+a);return Th(i,s-1,o)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(z2))return ij(r)}let e=new Date(t);if(!BS(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function ij(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let o=Number(t[4]||0)-n,a=Number(t[5]||0)-r,c=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return s.call(e,o,a,c,l),e}function BS(t){return t instanceof Date&&!isNaN(t.valueOf())}var sj=/^(\d+)?\.((\d+)(-(\d+))?)?$/,$S=22,Dh=".",Gc="0",oj=";",aj=",",Gy="#",HS="\xA4";function cj(t,e,n,r,i,s,o=!1){let a="",c=!1;if(!isFinite(t))a=Lr(n,ln.Infinity);else{let l=hj(t);o&&(l=dj(l));let d=e.minInt,f=e.minFrac,m=e.maxFrac;if(s){let q=s.match(sj);if(q===null)throw new Error(`${s} is not a valid digit info`);let B=q[1],G=q[3],xe=q[5];B!=null&&(d=zy(B)),G!=null&&(f=zy(G)),xe!=null?m=zy(xe):G!=null&&f>m&&(m=f)}fj(l,f,m);let y=l.digits,E=l.integerLen,x=l.exponent,R=[];for(c=y.every(q=>!q);E<d;E++)y.unshift(0);for(;E<0;E++)y.unshift(0);E>0?R=y.splice(E,y.length):(R=y,y=[0]);let F=[];for(y.length>=e.lgSize&&F.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)F.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&F.unshift(y.join("")),a=F.join(Lr(n,r)),R.length&&(a+=Lr(n,i)+R.join("")),x&&(a+=Lr(n,ln.Exponential)+"+"+x)}return t<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function uj(t,e,n,r,i){let s=U2(e,XS.Currency),o=lj(s,Lr(e,ln.MinusSign));return o.minFrac=G2(r),o.maxFrac=o.minFrac,cj(t,o,e,ln.CurrencyGroup,ln.CurrencyDecimal,i).replace(HS,n).replace(HS,"").trim()}function lj(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(oj),i=r[0],s=r[1],o=i.indexOf(Dh)!==-1?i.split(Dh):[i.substring(0,i.lastIndexOf(Gc)+1),i.substring(i.lastIndexOf(Gc)+1)],a=o[0],c=o[1]||"";n.posPre=a.substring(0,a.indexOf(Gy));for(let d=0;d<c.length;d++){let f=c.charAt(d);f===Gc?n.minFrac=n.maxFrac=d+1:f===Gy?n.maxFrac=d+1:n.posSuf+=f}let l=a.split(aj);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,s){let d=i.length-n.posPre.length-n.posSuf.length,f=s.indexOf(Gy);n.negPre=s.substring(0,f).replace(/'/g,""),n.negSuf=s.slice(f+d).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function dj(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function hj(t){let e=Math.abs(t)+"",n=0,r,i,s,o,a;for((i=e.indexOf(Dh))>-1&&(e=e.replace(Dh,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===Gc;s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Gc;)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>$S&&(r=r.splice(0,$S-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function fj(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen,s=Math.min(Math.max(e,i),n),o=s+t.integerLen,a=r[o];if(o>0){r.splice(Math.max(t.integerLen,o));for(let f=o;f<r.length;f++)r[f]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let f=1;f<o;f++)r[f]=0}if(a>=5)if(o-1<0){for(let f=0;f>o;f--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let c=s!==0,l=e+t.integerLen,d=r.reduceRight(function(f,m,y,E){return m=m+f,E[y]=m<10?m:m-10,c&&(E[y]===0&&y>=l?E.pop():c=!1),m>=10?1:0},0);d&&(r.unshift(d),t.integerLen++)}function zy(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}function nA(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Wy=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},rA=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new Wy(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let c=i.get(o);i.move(c,a),qS(c,s)}});for(let s=0,o=i.length;s<o;s++){let c=i.get(s).context;c.index=s,c.count=o,c.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);qS(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)($(Wo),$(lh),$(jy))},e.\u0275dir=cn({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function qS(t,e){t.context.$implicit=e.item}var Yo=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Ky,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){GS("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){GS("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)($(Wo),$(lh))},e.\u0275dir=cn({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Ky=class{constructor(){this.$implicit=null,this.ngIf=null}};function GS(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Ut(e)}'.`)}function Jy(t,e){return new Q(2100,!1)}var Qy=class{createSubscription(e,n){return By(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){By(()=>e.unsubscribe())}},Yy=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},pj=new Yy,mj=new Qy,xi=(()=>{let e=class e{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(Ai(r))return pj;if(Ly(r))return mj;throw Jy(e,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(i){return new(i||e)($(Ri,16))},e.\u0275pipe=Xd({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})();var gj="mediumDate",yj=new z(""),_j=new z(""),iA=(()=>{let e=class e{constructor(r,i,s){this.locale=r,this.defaultTimezone=i,this.defaultOptions=s}transform(r,i,s,o){if(r==null||r===""||r!==r)return null;try{let a=i??this.defaultOptions?.dateFormat??gj,c=s??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return K2(r,a,o||this.locale,c)}catch(a){throw Jy(e,a.message)}}};e.\u0275fac=function(i){return new(i||e)($(qc,16),$(yj,24),$(_j,24))},e.\u0275pipe=Xd({name:"date",type:e,pure:!0,standalone:!0});let t=e;return t})();var Ni=(()=>{let e=class e{constructor(r,i="USD"){this._locale=r,this._defaultCurrencyCode=i}transform(r,i=this._defaultCurrencyCode,s="symbol",o,a){if(!vj(r))return null;a||=this._locale,typeof s=="boolean"&&(s=s?"symbol":"code");let c=i||this._defaultCurrencyCode;s!=="code"&&(s==="symbol"||s==="symbol-narrow"?c=H2(c,s==="symbol"?"wide":"narrow",a):c=s);try{let l=wj(r);return uj(l,a,c,i,o)}catch(l){throw Jy(e,l.message)}}};e.\u0275fac=function(i){return new(i||e)($(qc,16),$(FS,16))},e.\u0275pipe=Xd({name:"currency",type:e,pure:!0,standalone:!0});let t=e;return t})();function vj(t){return!(t==null||t===""||t!==t)}function wj(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var dn=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ws({type:e}),e.\u0275inj=vs({});let t=e;return t})(),sA="browser",Ij="server";function Xy(t){return t===Ij}var Sh=class{};var t_=class extends Ch{constructor(){super(...arguments),this.supportsDOMEvents=!0}},n_=class t extends t_{static makeCurrent(){WS(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Ej();return n==null?null:bj(n)}resetBaseElement(){Wc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return nA(document.cookie,e)}},Wc=null;function Ej(){return Wc=Wc||document.querySelector("base"),Wc?Wc.getAttribute("href"):null}function bj(t){return new URL(t,document.baseURI).pathname}var Cj=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),r_=new z(""),uA=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new Q(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(X(r_),X(Te))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),Ah=class{constructor(e){this._doc=e}},Zy="ng-app-id",lA=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Xy(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Zy}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(Zy),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Zy,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(X(Cn),X(vy),X(Iy,8),X(Ii))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),e_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},s_=/%COMP%/g,dA="%COMP%",Tj=`_nghost-${dA}`,Dj=`_ngcontent-${dA}`,Sj=!0,Aj=new z("",{providedIn:"root",factory:()=>Sj});function Rj(t){return Dj.replace(s_,t)}function xj(t){return Tj.replace(s_,t)}function hA(t,e){return e.map(n=>n.replace(s_,t))}var oA=(()=>{let e=class e{constructor(r,i,s,o,a,c,l,d=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Xy(c),this.defaultRenderer=new Kc(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Xn.ShadowDom&&(i=Oe(U({},i),{encapsulation:Xn.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Rh?s.applyToHost(r):s instanceof Qc&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(i.encapsulation){case Xn.Emulated:o=new Rh(l,d,i,this.appId,f,a,c,m);break;case Xn.ShadowDom:return new i_(l,d,r,i,a,c,this.nonce,m);default:o=new Qc(l,d,i,f,a,c,m);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(X(uA),X(lA),X(vy),X(Aj),X(Cn),X(Ii),X(Te),X(Iy))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),Kc=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(e_[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(aA(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(aA(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Q(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=e_[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=e_[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Nr.DashCase|Nr.Important)?e.style.setProperty(n,r,i&Nr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Nr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Ur().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function aA(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var i_=class extends Kc{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=hA(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Qc=class extends Kc{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?hA(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Rh=class extends Qc{constructor(e,n,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,n,r,s,o,a,c,l),this.contentAttr=Rj(l),this.hostAttr=xj(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},Nj=(()=>{let e=class e extends Ah{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(X(Cn))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),cA=["alt","control","meta","shift"],Mj={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Pj={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},kj=(()=>{let e=class e extends Ah{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ur().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),cA.forEach(d=>{let f=i.indexOf(d);f>-1&&(i.splice(f,1),a+=d+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=Mj[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),cA.forEach(a=>{if(a!==s){let c=Pj[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(X(Cn))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})();function fA(t,e){return VS(U({rootComponent:t},Oj(e)))}function Oj(t){return{appProviders:[...jj,...t?.providers??[]],platformProviders:Uj}}function Fj(){n_.makeCurrent()}function Lj(){return new xr}function Vj(){return BD(document),document}var Uj=[{provide:Ii,useValue:sA},{provide:wy,useValue:Fj,multi:!0},{provide:Cn,useFactory:Vj,deps:[]}];var jj=[{provide:Zd,useValue:"root"},{provide:xr,useFactory:Lj,deps:[]},{provide:r_,useClass:Nj,multi:!0,deps:[Cn,Te,Ii]},{provide:r_,useClass:kj,multi:!0,deps:[Cn]},oA,lA,uA,{provide:Oc,useExisting:oA},{provide:Sh,useClass:Cj,deps:[]},[]];var pA=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(X(Cn))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ue="primary",lu=Symbol("RouteTitle"),l_=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ta(t){return new l_(t)}function $j(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Hj(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!ir(t[n],e[n]))return!1;return!0}function ir(t,e){let n=t?d_(t):void 0,r=e?d_(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!wA(t[i],e[i]))return!1;return!0}function d_(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function wA(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function IA(t){return t.length>0?t[t.length-1]:null}function ki(t){return Hm(t)?t:Ai(t)?Je(Promise.resolve(t)):Z(t)}var qj={exact:bA,subset:CA},EA={exact:Gj,subset:zj,ignored:()=>!0};function mA(t,e,n){return qj[n.paths](t.root,e.root,n.matrixParams)&&EA[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Gj(t,e){return ir(t,e)}function bA(t,e,n){if(!Ns(t.segments,e.segments)||!Mh(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!bA(t.children[r],e.children[r],n))return!1;return!0}function zj(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>wA(t[n],e[n]))}function CA(t,e,n){return TA(t,e,e.segments,n)}function TA(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Ns(i,n)||e.hasChildren()||!Mh(i,n,r))}else if(t.segments.length===n.length){if(!Ns(t.segments,n)||!Mh(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!CA(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Ns(t.segments,i)||!Mh(t.segments,i,r)||!t.children[ue]?!1:TA(t.children[ue],e,s,r)}}function Mh(t,e,n){return e.every((r,i)=>EA[n](t[i].parameters,r.parameters))}var Mi=class{constructor(e=new Ne([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ta(this.queryParams),this._queryParamMap}toString(){return Qj.serialize(this)}},Ne=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ph(this)}},xs=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ta(this.parameters),this._parameterMap}toString(){return SA(this)}};function Wj(t,e){return Ns(t,e)&&t.every((n,r)=>ir(n.parameters,e[r].parameters))}function Ns(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function Kj(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ue&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ue&&(n=n.concat(e(i,r)))}),n}var L_=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>new Oh,providedIn:"root"});let t=e;return t})(),Oh=class{parse(e){let n=new f_(e);return new Mi(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Yc(e.root,!0)}`,r=Xj(e.queryParams),i=typeof e.fragment=="string"?`#${Yj(e.fragment)}`:"";return`${n}${r}${i}`}},Qj=new Oh;function Ph(t){return t.segments.map(e=>SA(e)).join("/")}function Yc(t,e){if(!t.hasChildren())return Ph(t);if(e){let n=t.children[ue]?Yc(t.children[ue],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==ue&&r.push(`${i}:${Yc(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=Kj(t,(r,i)=>i===ue?[Yc(t.children[ue],!1)]:[`${i}:${Yc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ue]!=null?`${Ph(t)}/${n[0]}`:`${Ph(t)}/(${n.join("//")})`}}function DA(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xh(t){return DA(t).replace(/%3B/gi,";")}function Yj(t){return encodeURI(t)}function h_(t){return DA(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function kh(t){return decodeURIComponent(t)}function gA(t){return kh(t.replace(/\+/g,"%20"))}function SA(t){return`${h_(t.path)}${Jj(t.parameters)}`}function Jj(t){return Object.entries(t).map(([e,n])=>`;${h_(e)}=${h_(n)}`).join("")}function Xj(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${xh(n)}=${xh(i)}`).join("&"):`${xh(n)}=${xh(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var Zj=/^[^\/()?;#]+/;function o_(t){let e=t.match(Zj);return e?e[0]:""}var eB=/^[^\/()?;=#]+/;function tB(t){let e=t.match(eB);return e?e[0]:""}var nB=/^[^=?&#]+/;function rB(t){let e=t.match(nB);return e?e[0]:""}var iB=/^[^&#]+/;function sB(t){let e=t.match(iB);return e?e[0]:""}var f_=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ne([],{}):new Ne([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ue]=new Ne(e,n)),r}parseSegment(){let e=o_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Q(4009,!1);return this.capture(e),new xs(kh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=tB(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=o_(this.remaining);i&&(r=i,this.capture(r))}e[kh(n)]=kh(r)}parseQueryParam(e){let n=rB(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=sB(this.remaining);o&&(r=o,this.capture(r))}let i=gA(n),s=gA(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=o_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Q(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ue);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[ue]:new Ne([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Q(4011,!1)}};function AA(t){return t.segments.length>0?new Ne([],{[ue]:t}):t}function RA(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=RA(i);if(r===ue&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new Ne(t.segments,e);return oB(n)}function oB(t){if(t.numberOfChildren===1&&t.children[ue]){let e=t.children[ue];return new Ne(t.segments.concat(e.segments),e.children)}return t}function na(t){return t instanceof Mi}function aB(t,e,n=null,r=null){let i=xA(t);return NA(i,e,n,r)}function xA(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new Ne(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=AA(r);return e??i}function NA(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return a_(i,i,i,n,r);let s=cB(e);if(s.toRoot())return a_(i,i,new Ne([],{}),n,r);let o=uB(s,i,t),a=o.processChildren?Zc(o.segmentGroup,o.index,s.commands):PA(o.segmentGroup,o.index,s.commands);return a_(i,o.segmentGroup,a,n,r)}function Fh(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function nu(t){return typeof t=="object"&&t!=null&&t.outlets}function a_(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let o;t===e?o=n:o=MA(t,e,n);let a=AA(RA(o));return new Mi(a,s,i)}function MA(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=MA(s,e,n)}),new Ne(t.segments,r)}var Lh=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Fh(r[0]))throw new Q(4003,!1);let i=r.find(nu);if(i&&i!==IA(r))throw new Q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function cB(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Lh(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Lh(n,e,r)}var Zo=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function uB(t,e,n){if(t.isAbsolute)return new Zo(e,!0,0);if(!n)return new Zo(e,!1,NaN);if(n.parent===null)return new Zo(n,!0,0);let r=Fh(t.commands[0])?0:1,i=n.segments.length-1+r;return lB(n,i,t.numberOfDoubleDots)}function lB(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Q(4005,!1);i=r.segments.length}return new Zo(r,!1,i-s)}function dB(t){return nu(t[0])?t[0].outlets:{[ue]:t}}function PA(t,e,n){if(t??=new Ne([],{}),t.segments.length===0&&t.hasChildren())return Zc(t,e,n);let r=hB(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new Ne(t.segments.slice(0,r.pathIndex),{});return s.children[ue]=new Ne(t.segments.slice(r.pathIndex),t.children),Zc(s,0,i)}else return r.match&&i.length===0?new Ne(t.segments,{}):r.match&&!t.hasChildren()?p_(t,e,n):r.match?Zc(t,0,i):p_(t,e,n)}function Zc(t,e,n){if(n.length===0)return new Ne(t.segments,{});{let r=dB(n),i={};if(Object.keys(r).some(s=>s!==ue)&&t.children[ue]&&t.numberOfChildren===1&&t.children[ue].segments.length===0){let s=Zc(t.children[ue],e,n);return new Ne(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=PA(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Ne(t.segments,i)}}function hB(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(nu(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!_A(c,l,o))return s;r+=2}else{if(!_A(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function p_(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(nu(s)){let c=fB(s.outlets);return new Ne(r,c)}if(i===0&&Fh(n[0])){let c=t.segments[e];r.push(new xs(c.path,yA(n[0]))),i++;continue}let o=nu(s)?s.outlets[ue]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Fh(a)?(r.push(new xs(o,yA(a))),i+=2):(r.push(new xs(o,{})),i++)}return new Ne(r,{})}function fB(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=p_(new Ne([],{}),0,r))}),e}function yA(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function _A(t,e,n){return t==n.path&&ir(e,n.parameters)}var eu="imperative",vt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(vt||{}),Tn=class{constructor(e,n){this.id=e,this.url=n}},ru=class extends Tn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=vt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},sr=class extends Tn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=vt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},fn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(fn||{}),m_=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(m_||{}),Pi=class extends Tn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=vt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ms=class extends Tn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=vt.NavigationSkipped}},iu=class extends Tn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=vt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Vh=class extends Tn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=vt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},g_=class extends Tn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=vt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},y_=class extends Tn{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=vt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},__=class extends Tn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=vt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},v_=class extends Tn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=vt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},w_=class{constructor(e){this.route=e,this.type=vt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},I_=class{constructor(e){this.route=e,this.type=vt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},E_=class{constructor(e){this.snapshot=e,this.type=vt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},b_=class{constructor(e){this.snapshot=e,this.type=vt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},C_=class{constructor(e){this.snapshot=e,this.type=vt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},T_=class{constructor(e){this.snapshot=e,this.type=vt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var su=class{},ou=class{constructor(e){this.url=e}};var D_=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new qh,this.attachRef=null}},qh=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new D_,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Uh=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=S_(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=S_(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=A_(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return A_(e,this._root).map(n=>n.value)}};function S_(t,e){if(t===e.value)return e;for(let n of e.children){let r=S_(t,n);if(r)return r}return null}function A_(t,e){if(t===e.value)return[e];for(let n of e.children){let r=A_(t,n);if(r.length)return r.unshift(e),r}return[]}var hn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Xo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var jh=class extends Uh{constructor(e,n){super(e),this.snapshot=n,U_(this,e)}toString(){return this.snapshot.toString()}};function kA(t){let e=pB(t),n=new ut([new xs("",{})]),r=new ut({}),i=new ut({}),s=new ut({}),o=new ut(""),a=new Ps(n,r,s,o,i,ue,t,e.root);return a.snapshot=e.root,new jh(new hn(a,[]),e)}function pB(t){let e={},n={},r={},i="",s=new au([],e,r,i,n,ue,t,null,{});return new Bh("",new hn(s,[]))}var Ps=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(se(l=>l[lu]))??Z(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(se(e=>ta(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(se(e=>ta(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function V_(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:U(U({},e.params),t.params),data:U(U({},e.data),t.data),resolve:U(U(U(U({},t.data),e.data),i?.data),t._resolvedData)}:r={params:U({},t.params),data:U({},t.data),resolve:U(U({},t.data),t._resolvedData??{})},i&&FA(i)&&(r.resolve[lu]=i.title),r}var au=class{get title(){return this.data?.[lu]}constructor(e,n,r,i,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ta(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ta(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Bh=class extends Uh{constructor(e,n){super(n),this.url=e,U_(this,n)}toString(){return OA(this._root)}};function U_(t,e){e.value._routerState=t,e.children.forEach(n=>U_(t,n))}function OA(t){let e=t.children.length>0?` { ${t.children.map(OA).join(", ")} } `:"";return`${t.value}${e}`}function c_(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ir(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),ir(e.params,n.params)||t.paramsSubject.next(n.params),Hj(e.url,n.url)||t.urlSubject.next(n.url),ir(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function R_(t,e){let n=ir(t.params,e.params)&&Wj(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||R_(t.parent,e.parent))}function FA(t){return typeof t.title=="string"||t.title===null}var j_=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ue,this.activateEvents=new Vt,this.deactivateEvents=new Vt,this.attachEvents=new Vt,this.detachEvents=new Vt,this.parentContexts=j(qh),this.location=j(Wo),this.changeDetector=j(Ri),this.environmentInjector=j(wn),this.inputBinder=j(B_,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Q(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new Q(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new x_(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=cn({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Es]});let t=e;return t})(),x_=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Ps?this.route:e===qh?this.childContexts:this.parent.get(e,n)}},B_=new z("");function mB(t,e,n){let r=cu(t,e._root,n?n._root:void 0);return new jh(r,e)}function cu(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=gB(t,e,n);return new hn(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>cu(t,a)),o}}let r=yB(e.value),i=e.children.map(s=>cu(t,s));return new hn(r,i)}}function gB(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return cu(t,r,i);return cu(t,r)})}function yB(t){return new Ps(new ut(t.url),new ut(t.params),new ut(t.queryParams),new ut(t.fragment),new ut(t.data),t.outlet,t.component,t)}var LA="ngNavigationCancelingError";function VA(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=na(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=UA(!1,fn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function UA(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[LA]=!0,n.cancellationCode=e,n}function _B(t){return jA(t)&&na(t.url)}function jA(t){return!!t&&t[LA]}var vB=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=je({type:e,selectors:[["ng-component"]],standalone:!0,features:[Be],decls:1,vars:0,template:function(i,s){i&1&&ce(0,"router-outlet")},dependencies:[j_],encapsulation:2});let t=e;return t})();function wB(t,e){return t.providers&&!t._injector&&(t._injector=ky(t.providers,e,`Route: ${t.path}`)),t._injector??e}function $_(t){let e=t.children&&t.children.map($_),n=e?Oe(U({},t),{children:e}):U({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ue&&(n.component=vB),n}function or(t){return t.outlet||ue}function IB(t,e){let n=t.filter(r=>or(r)===e);return n.push(...t.filter(r=>or(r)!==e)),n}function du(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var EB=(t,e,n,r)=>se(i=>(new N_(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),N_=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),c_(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Xo(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Xo(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Xo(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Xo(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new T_(s.value.snapshot))}),e.children.length&&this.forwardEvent(new b_(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(c_(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),c_(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=du(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},$h=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ea=class{constructor(e,n){this.component=e,this.route=n}};function bB(t,e,n){let r=t._root,i=e?e._root:null;return Jc(r,i,n,[r.value])}function CB(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ia(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!MT(t)?t:e.get(t):r}function Jc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Xo(e);return t.children.forEach(o=>{TB(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>tu(a,n.getContext(o),i)),i}function TB(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=DB(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new $h(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Jc(t,e,a?a.children:null,r,i):Jc(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ea(a.outlet.component,o))}else o&&tu(e,a,i),i.canActivateChecks.push(new $h(r)),s.component?Jc(t,null,a?a.children:null,r,i):Jc(t,null,n,r,i);return i}function DB(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Ns(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ns(t.url,e.url)||!ir(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!R_(t,e)||!ir(t.queryParams,e.queryParams);case"paramsChange":default:return!R_(t,e)}}function tu(t,e,n){let r=Xo(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?tu(o,e.children.getContext(s),n):tu(o,null,n):tu(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ea(e.outlet.component,i)):n.canDeactivateChecks.push(new ea(null,i)):n.canDeactivateChecks.push(new ea(null,i))}function hu(t){return typeof t=="function"}function SB(t){return typeof t=="boolean"}function AB(t){return t&&hu(t.canLoad)}function RB(t){return t&&hu(t.canActivate)}function xB(t){return t&&hu(t.canActivateChild)}function NB(t){return t&&hu(t.canDeactivate)}function MB(t){return t&&hu(t.canMatch)}function BA(t){return t instanceof Rr||t?.name==="EmptyError"}var Nh=Symbol("INITIAL_VALUE");function ra(){return yn(t=>md(t.map(e=>e.pipe(lt(1),Qm(Nh)))).pipe(se(e=>{for(let n of e)if(n!==!0){if(n===Nh)return Nh;if(n===!1||n instanceof Mi)return n}return!0}),on(e=>e!==Nh),lt(1)))}function PB(t,e){return rt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?Z(Oe(U({},n),{guardsResult:!0})):kB(o,r,i,t).pipe(rt(a=>a&&SB(a)?OB(r,s,t,e):Z(a)),se(a=>Oe(U({},n),{guardsResult:a})))})}function kB(t,e,n,r){return Je(t).pipe(rt(i=>jB(i.component,i.route,n,e,r)),Qn(i=>i!==!0,!0))}function OB(t,e,n,r){return Je(e).pipe(Ro(i=>hi(LB(i.route.parent,r),FB(i.route,r),UB(t,i.path,n),VB(t,i.route,n))),Qn(i=>i!==!0,!0))}function FB(t,e){return t!==null&&e&&e(new C_(t)),Z(!0)}function LB(t,e){return t!==null&&e&&e(new E_(t)),Z(!0)}function VB(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let i=r.map(s=>gd(()=>{let o=du(e)??n,a=ia(s,o),c=RB(a)?a.canActivate(e,t):Is(o,()=>a(e,t));return ki(c).pipe(Qn())}));return Z(i).pipe(ra())}function UB(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>CB(o)).filter(o=>o!==null).map(o=>gd(()=>{let a=o.guards.map(c=>{let l=du(o.node)??n,d=ia(c,l),f=xB(d)?d.canActivateChild(r,t):Is(l,()=>d(r,t));return ki(f).pipe(Qn())});return Z(a).pipe(ra())}));return Z(s).pipe(ra())}function jB(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Z(!0);let o=s.map(a=>{let c=du(e)??i,l=ia(a,c),d=NB(l)?l.canDeactivate(t,e,n,r):Is(c,()=>l(t,e,n,r));return ki(d).pipe(Qn())});return Z(o).pipe(ra())}function BB(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return Z(!0);let s=i.map(o=>{let a=ia(o,t),c=AB(a)?a.canLoad(e,n):Is(t,()=>a(e,n));return ki(c)});return Z(s).pipe(ra(),$A(r))}function $A(t){return Om(dt(e=>{if(na(e))throw VA(t,e)}),se(e=>e===!0))}function $B(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return Z(!0);let s=i.map(o=>{let a=ia(o,t),c=MB(a)?a.canMatch(e,n):Is(t,()=>a(e,n));return ki(c)});return Z(s).pipe(ra(),$A(r))}var uu=class{constructor(e){this.segmentGroup=e||null}},Hh=class extends Error{constructor(e){super(),this.urlTree=e}};function Jo(t){return Ao(new uu(t))}function HB(t){return Ao(new Q(4e3,!1))}function qB(t){return Ao(UA(!1,fn.GuardRejected))}var M_=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Z(r);if(i.numberOfChildren>1||!i.children[ue])return HB(e.redirectTo);i=i.children[ue]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Hh(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Mi(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Ne(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new Q(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},P_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function GB(t,e,n,r,i){let s=H_(t,e,n);return s.matched?(r=wB(e,r),$B(r,e,n,i).pipe(se(o=>o===!0?s:U({},P_)))):Z(s)}function H_(t,e,n){if(e.path==="**")return zB(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?U({},P_):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||$j)(n,t,e);if(!i)return U({},P_);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?U(U({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function zB(t){return{matched:!0,parameters:t.length>0?IA(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function vA(t,e,n,r){return n.length>0&&QB(t,n,r)?{segmentGroup:new Ne(e,KB(r,new Ne(n,t.children))),slicedSegments:[]}:n.length===0&&YB(t,n,r)?{segmentGroup:new Ne(t.segments,WB(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ne(t.segments,t.children),slicedSegments:n}}function WB(t,e,n,r){let i={};for(let s of n)if(Gh(t,e,s)&&!r[or(s)]){let o=new Ne([],{});i[or(s)]=o}return U(U({},r),i)}function KB(t,e){let n={};n[ue]=e;for(let r of t)if(r.path===""&&or(r)!==ue){let i=new Ne([],{});n[or(r)]=i}return n}function QB(t,e,n){return n.some(r=>Gh(t,e,r)&&or(r)!==ue)}function YB(t,e,n){return n.some(r=>Gh(t,e,r))}function Gh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function JB(t,e,n,r){return or(t)!==r&&(r===ue||!Gh(e,n,t))?!1:H_(e,t,n).matched}function XB(t,e,n){return e.length===0&&!t.children[n]}var k_=class{};function ZB(t,e,n,r,i,s,o="emptyOnly"){return new O_(t,e,n,r,i,o,s).recognize()}var e$=31,O_=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new M_(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Q(4002,`'${e.segmentGroup}'`)}recognize(){let e=vA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(se(n=>{let r=new au([],Object.freeze({}),Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,{},ue,this.rootComponentType,null,{}),i=new hn(r,n),s=new Bh("",i),o=aB(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,ue).pipe(an(r=>{if(r instanceof Hh)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof uu?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=V_(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(se(s=>s instanceof hn?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Je(i).pipe(Ro(s=>{let o=r.children[s],a=IB(n,s);return this.processSegmentGroup(e,a,o,s)}),_d((s,o)=>(s.push(...o),s)),fi(null),Km(),rt(s=>{if(s===null)return Jo(r);let o=HA(s);return t$(o),Z(o)}))}processSegment(e,n,r,i,s,o){return Je(n).pipe(Ro(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(an(c=>{if(c instanceof uu)return Z(null);throw c}))),Qn(a=>!!a),an(a=>{if(BA(a))return XB(r,i,s)?Z(new k_):Jo(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return JB(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Jo(i):Jo(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:d}=H_(n,i,s);if(!a)return Jo(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>e$&&(this.allowRedirects=!1));let f=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,f).pipe(rt(m=>this.processSegment(e,r,n,m.concat(d),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=GB(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(yn(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(yn(({routes:c})=>{let l=r._loadedInjector??e,{consumedSegments:d,remainingSegments:f,parameters:m}=a,y=new au(d,m,Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,r$(r),or(r),r.component??r._loadedComponent??null,r,i$(r)),{segmentGroup:E,slicedSegments:x}=vA(n,d,f,c);if(x.length===0&&E.hasChildren())return this.processChildren(l,c,E).pipe(se(F=>F===null?null:new hn(y,F)));if(c.length===0&&x.length===0)return Z(new hn(y,[]));let R=or(r)===s;return this.processSegment(l,c,E,x,R?ue:s,!0).pipe(se(F=>new hn(y,F instanceof hn?[F]:[])))}))):Jo(n)))}getChildConfig(e,n,r){return n.children?Z({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Z({routes:n._loadedRoutes,injector:n._loadedInjector}):BB(e,n,r,this.urlSerializer).pipe(rt(i=>i?this.configLoader.loadChildren(e,n).pipe(dt(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):qB(n))):Z({routes:[],injector:e})}};function t$(t){t.sort((e,n)=>e.value.outlet===ue?-1:n.value.outlet===ue?1:e.value.outlet.localeCompare(n.value.outlet))}function n$(t){let e=t.value.routeConfig;return e&&e.path===""}function HA(t){let e=[],n=new Set;for(let r of t){if(!n$(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=HA(r.children);e.push(new hn(r.value,i))}return e.filter(r=>!n.has(r))}function r$(t){return t.data||{}}function i$(t){return t.resolve||{}}function s$(t,e,n,r,i,s){return rt(o=>ZB(t,e,n,r,o.extractedUrl,i,s).pipe(se(({state:a,tree:c})=>Oe(U({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function o$(t,e){return rt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Z(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of qA(c))o.add(l);let a=0;return Je(o).pipe(Ro(c=>s.has(c)?a$(c,r,t,e):(c.data=V_(c,c.parent,t).resolve,Z(void 0))),dt(()=>a++),xo(1),rt(c=>a===o.size?Z(n):sn))})}function qA(t){let e=t.children.map(n=>qA(n)).flat();return[t,...e]}function a$(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!FA(i)&&(s[lu]=i.title),c$(s,t,e,r).pipe(se(o=>(t._resolvedData=o,t.data=V_(t,t.parent,n).resolve,null)))}function c$(t,e,n,r){let i=d_(t);if(i.length===0)return Z({});let s={};return Je(i).pipe(rt(o=>u$(t[o],e,n,r).pipe(Qn(),dt(a=>{s[o]=a}))),xo(1),Tc(s),an(o=>BA(o)?sn:Ao(o)))}function u$(t,e,n,r){let i=du(e)??r,s=ia(t,i),o=s.resolve?s.resolve(e,n):Is(i,()=>s(e,n));return ki(o)}function u_(t){return yn(e=>{let n=t(e);return n?Je(n).pipe(se(()=>e)):Z(e)})}var GA=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===ue);return i}getResolvedTitleForRoute(r){return r.data[lu]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>j(l$),providedIn:"root"});let t=e;return t})(),l$=(()=>{let e=class e extends GA{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(X(pA))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),q_=new z("",{providedIn:"root",factory:()=>({})}),G_=new z(""),d$=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=j(Uy)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Z(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=ki(r.loadComponent()).pipe(se(zA),dt(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Dc(()=>{this.componentLoaders.delete(r)})),s=new bo(i,()=>new St).pipe(Eo());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Z({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=h$(i,this.compiler,r,this.onLoadEndListener).pipe(Dc(()=>{this.childrenLoaders.delete(i)})),a=new bo(o,()=>new St).pipe(Eo());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function h$(t,e,n,r){return ki(t.loadChildren()).pipe(se(zA),rt(i=>i instanceof Lc||Array.isArray(i)?Z(i):Je(e.compileModuleAsync(i))),se(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(G_,[],{optional:!0,self:!0}).flat()),{routes:o.map($_),injector:s}}))}function f$(t){return t&&typeof t=="object"&&"default"in t}function zA(t){return f$(t)?t.default:t}var z_=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>j(p$),providedIn:"root"});let t=e;return t})(),p$=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),m$=new z("");var g$=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new St,this.transitionAbortSubject=new St,this.configLoader=j(d$),this.environmentInjector=j(wn),this.urlSerializer=j(L_),this.rootContexts=j(qh),this.location=j(zc),this.inputBindingEnabled=j(B_,{optional:!0})!==null,this.titleStrategy=j(GA),this.options=j(q_,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=j(z_),this.createViewTransition=j(m$,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Z(void 0),this.rootComponentType=null;let r=s=>this.events.next(new w_(s)),i=s=>this.events.next(new I_(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(Oe(U(U({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new ut({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:eu,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(on(o=>o.id!==0),se(o=>Oe(U({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),yn(o=>{let a=!1,c=!1;return Z(o).pipe(yn(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",fn.SupersededByNewNavigation),sn;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Oe(U({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!d&&f!=="reload"){let m="";return this.events.next(new Ms(l.id,this.urlSerializer.serialize(l.rawUrl),m,m_.IgnoredSameUrlNavigation)),l.resolve(null),sn}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Z(l).pipe(yn(m=>{let y=this.transitions?.getValue();return this.events.next(new ru(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),y!==this.transitions?.getValue()?sn:Promise.resolve(m)}),s$(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),dt(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=Oe(U({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let y=new Vh(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:m,extractedUrl:y,source:E,restoredState:x,extras:R}=l,F=new ru(m,this.urlSerializer.serialize(y),E,x);this.events.next(F);let q=kA(this.rootComponentType).snapshot;return this.currentTransition=o=Oe(U({},l),{targetSnapshot:q,urlAfterRedirects:y,extras:Oe(U({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,Z(o)}else{let m="";return this.events.next(new Ms(l.id,this.urlSerializer.serialize(l.extractedUrl),m,m_.IgnoredByUrlHandlingStrategy)),l.resolve(null),sn}}),dt(l=>{let d=new g_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),se(l=>(this.currentTransition=o=Oe(U({},l),{guards:bB(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),PB(this.environmentInjector,l=>this.events.next(l)),dt(l=>{if(o.guardsResult=l.guardsResult,na(l.guardsResult))throw VA(this.urlSerializer,l.guardsResult);let d=new y_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),on(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",fn.GuardRejected),!1)),u_(l=>{if(l.guards.canActivateChecks.length)return Z(l).pipe(dt(d=>{let f=new __(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),yn(d=>{let f=!1;return Z(d).pipe(o$(this.paramsInheritanceStrategy,this.environmentInjector),dt({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",fn.NoDataFromResolver)}}))}),dt(d=>{let f=new v_(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),u_(l=>{let d=f=>{let m=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(f.routeConfig).pipe(dt(y=>{f.component=y}),se(()=>{})));for(let y of f.children)m.push(...d(y));return m};return md(d(l.targetSnapshot.root)).pipe(fi(null),lt(1))}),u_(()=>this.afterPreactivation()),yn(()=>{let{currentSnapshot:l,targetSnapshot:d}=o,f=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return f?Je(f).pipe(se(()=>o)):Z(o)}),se(l=>{let d=mB(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=Oe(U({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,o}),dt(()=>{this.events.next(new su)}),EB(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),lt(1),dt({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new sr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Ym(this.transitionAbortSubject.pipe(dt(l=>{throw l}))),Dc(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",fn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),an(l=>{if(c=!0,jA(l))this.events.next(new Pi(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),_B(l)?this.events.next(new ou(l.url)):o.resolve(!1);else{this.events.next(new iu(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(l))}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return sn}))}))}cancelNavigationTransition(r,i,s){let o=new Pi(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function y$(t){return t!==eu}var _$=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>j(v$),providedIn:"root"});let t=e;return t})(),F_=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},v$=(()=>{let e=class e extends F_{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=zo(e)))(s||e)}})(),e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),WA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>j(w$),providedIn:"root"});let t=e;return t})(),w$=(()=>{let e=class e extends WA{constructor(){super(...arguments),this.location=j(zc),this.urlSerializer=j(L_),this.options=j(q_,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=j(z_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Mi,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=kA(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof ru)this.stateMemento=this.createStateMemento();else if(r instanceof Ms)this.rawUrlTree=i.initialUrl;else if(r instanceof Vh){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof su?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Pi&&(r.code===fn.GuardRejected||r.code===fn.NoDataFromResolver)?this.restoreHistory(i):r instanceof iu?this.restoreHistory(i,!0):r instanceof sr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=U(U({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=U(U({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=zo(e)))(s||e)}})(),e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Xc=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Xc||{});function I$(t,e){t.events.pipe(on(n=>n instanceof sr||n instanceof Pi||n instanceof iu||n instanceof Ms),se(n=>n instanceof sr||n instanceof Ms?Xc.COMPLETE:(n instanceof Pi?n.code===fn.Redirect||n.code===fn.SupersededByNewNavigation:!1)?Xc.REDIRECTING:Xc.FAILED),on(n=>n!==Xc.REDIRECTING),lt(1)).subscribe(()=>{e()})}function E$(t){throw t}var b$={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},C$={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},wt=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=j(mh),this.stateManager=j(WA),this.options=j(q_,{optional:!0})||{},this.pendingTasks=j(hh),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=j(g$),this.urlSerializer=j(L_),this.location=j(zc),this.urlHandlingStrategy=j(z_),this._events=new St,this.errorHandler=this.options.errorHandler||E$,this.navigated=!1,this.routeReuseStrategy=j(_$),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=j(G_,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!j(B_,{optional:!0}),this.eventsSubscription=new nt,this.isNgZoneEnabled=j(Te)instanceof Te&&Te.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Pi&&i.code!==fn.Redirect&&i.code!==fn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof sr)this.navigated=!0;else if(i instanceof ou){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||y$(s.source)};this.scheduleNavigation(a,eu,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}D$(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),eu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=U({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map($_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,d=l?this.currentUrlTree.fragment:a,f=null;switch(c){case"merge":f=U(U({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let m;try{let y=s?s.snapshot:this.routerState.snapshot.root;m=xA(y)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),m=this.currentUrlTree.root}return NA(m,r,f,d??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=na(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,eu,null,i)}navigate(r,i={skipLocationChange:!1}){return T$(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=U({},b$):i===!1?s=U({},C$):s=i,na(r))return mA(this.currentUrlTree,r,s);let o=this.parseUrl(r);return mA(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,d;a?(c=a.resolve,l=a.reject,d=a.promise):d=new Promise((m,y)=>{c=m,l=y});let f=this.pendingTasks.add();return I$(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(m=>Promise.reject(m))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function T$(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new Q(4008,!1)}function D$(t){return!(t instanceof su)&&!(t instanceof ou)}var Oi=(()=>{let e=class e{constructor(r,i,s,o,a,c){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new St,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(d=>{d instanceof sr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,s,o,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(r!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:qD(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)($(wt),$(Ps),_y("tabindex"),$(bs),$(wi),$(Qo))},e.\u0275dir=cn({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&Ie("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&fh("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[jt.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Ss],skipLocationChange:[jt.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Ss],replaceUrl:[jt.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Ss],routerLink:"routerLink"},standalone:!0,features:[Py,Es]});let t=e;return t})();var S$=new z("");function KA(t,...e){return Wt([{provide:G_,multi:!0,useValue:t},[],{provide:Ps,useFactory:A$,deps:[wt]},{provide:Vy,multi:!0,useFactory:R$},e.map(n=>n.\u0275providers)])}function A$(t){return t.routerState.root}function R$(){let t=j(Rt);return e=>{let n=t.get(Hc);if(e!==n.components[0])return;let r=t.get(wt),i=t.get(x$);t.get(N$)===1&&r.initialNavigation(),t.get(M$,null,he.Optional)?.setUpPreloading(),t.get(S$,null,he.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var x$=new z("",{factory:()=>new St}),N$=new z("",{providedIn:"root",factory:()=>1});var M$=new z("");var K_={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var k=function(t,e){if(!t)throw ks(e)},ks=function(t){return new Error("Firebase Database ("+K_.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var YA=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},P$=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Wh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,d=s>>2,f=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;c||(y=64,o||(m=64)),r.push(n[d],n[f],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(YA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):P$(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new Q_;let m=s<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),f!==64){let E=l<<6&192|f;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Q_=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},J_=function(t){let e=YA(t);return Wh.encodeByteArray(e,!0)},fu=function(t){return J_(t).replace(/\./g,"")},pu=function(t){try{return Wh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function JA(t){return XA(void 0,t)}function XA(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!k$(n)||(t[n]=XA(t[n],e[n]));return t}function k$(t){return t!=="__proto__"}function O$(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var F$=()=>O$().__FIREBASE_DEFAULTS__,L$=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},V$=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&pu(t[1]);return e&&JSON.parse(e)},Kh=()=>{try{return F$()||L$()||V$()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},X_=t=>{var e,n;return(n=(e=Kh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},aa=t=>{let e=X_(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Z_=()=>{var t;return(t=Kh())===null||t===void 0?void 0:t.config},ev=t=>{var e;return(e=Kh())===null||e===void 0?void 0:e[`_${t}`]};var Fi=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function ca(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[fu(JSON.stringify(n)),fu(JSON.stringify(o)),""].join(".")}function ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mu(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ft())}function U$(){var t;let e=(t=Kh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZA(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Qh(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eR(){let t=ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ar(){return K_.NODE_CLIENT===!0||K_.NODE_ADMIN===!0}function tR(){return!U$()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tv(){try{return typeof indexedDB=="object"}catch{return!1}}function nR(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var j$="FirebaseError",Ht=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=j$,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jr.prototype.create)}},jr=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?B$(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ht(i,a,r)}};function B$(t,e){return t.replace($$,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var $$=/\{\$([^}]+)}/g;function oa(t){return JSON.parse(t)}function pt(t){return JSON.stringify(t)}var rR=function(t){let e={},n={},r={},i="";try{let s=t.split(".");e=oa(pu(s[0])||""),n=oa(pu(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var iR=function(t){let e=rR(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},sR=function(t){let e=rR(t).claims;return typeof e=="object"&&e.admin===!0};function cr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Os(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function gu(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function yu(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Fs(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(QA(s)&&QA(o)){if(!Fs(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function QA(t){return t!==null&&typeof t=="object"}function Ls(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ua(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function la(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}var zh=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let f=0;f<16;f++)r[f]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let f=0;f<16;f++)r[f]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let f=16;f<80;f++){let m=r[f-3]^r[f-8]^r[f-14]^r[f-16];r[f]=(m<<1|m>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,d;for(let f=0;f<80;f++){f<40?f<20?(l=a^s&(o^a),d=1518500249):(l=s^o^a,d=1859775393):f<60?(l=s&o|a&(s|o),d=2400959708):(l=s^o^a,d=3395469782);let m=(i<<5|i>>>27)+l+c+d+r[f]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=m}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function oR(t,e){let n=new Y_(t,e);return n.subscribe.bind(n)}var Y_=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");H$(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=W_),i.error===void 0&&(i.error=W_),i.complete===void 0&&(i.complete=W_);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function H$(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function W_(){}function Yh(t,e){return`${t} failed: ${e} argument `}var aR=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,k(r<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},_u=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var OZ=4*60*60*1e3;function We(t){return t&&t._delegate?t._delegate:t}var Nt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Vs="[DEFAULT]";var Jh=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Fi;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(G$(e))try{this.getOrInitializeService({instanceIdentifier:Vs})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Vs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Vs){return this.instances.has(e)}getOptions(e=Vs){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:q$(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Vs){return this.component?this.component.multipleInstances?e:Vs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function q$(t){return t===Vs?void 0:t}function G$(t){return t.instantiationMode==="EAGER"}var vu=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Jh(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var z$=[],pe=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(pe||{}),W$={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},K$=pe.INFO,Q$={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},Y$=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=Q$[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ur=class{constructor(e){this.name=e,this._logLevel=K$,this._logHandler=Y$,this._userLogHandler=null,z$.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?W$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}};var J$=(t,e)=>e.some(n=>t instanceof n),cR,uR;function X$(){return cR||(cR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Z$(){return uR||(uR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var lR=new WeakMap,rv=new WeakMap,dR=new WeakMap,nv=new WeakMap,sv=new WeakMap;function eH(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(lr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&lR.set(n,t)}).catch(()=>{}),sv.set(e,t),e}function tH(t){if(rv.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});rv.set(t,e)}var iv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return rv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dR.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return lr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function hR(t){iv=t(iv)}function nH(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Xh(this),e,...n);return dR.set(r,e.sort?e.sort():[e]),lr(r)}:Z$().includes(t)?function(...e){return t.apply(Xh(this),e),lr(lR.get(this))}:function(...e){return lr(t.apply(Xh(this),e))}}function rH(t){return typeof t=="function"?nH(t):(t instanceof IDBTransaction&&tH(t),J$(t,X$())?new Proxy(t,iv):t)}function lr(t){if(t instanceof IDBRequest)return eH(t);if(nv.has(t))return nv.get(t);let e=rH(t);return e!==t&&(nv.set(t,e),sv.set(e,t)),e}var Xh=t=>sv.get(t);function pR(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=lr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(lr(o.result),c.oldVersion,c.newVersion,lr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var iH=["get","getKey","getAll","getAllKeys","count"],sH=["put","add","delete","clear"],ov=new Map;function fR(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ov.get(e))return ov.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=sH.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||iH.includes(n)))return;let s=function(o,...a){return v(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return ov.set(e,s),s}hR(t=>Oe(U({},t),{get:(e,n,r)=>fR(e,n)||t.get(e,n,r),has:(e,n)=>!!fR(e,n)||t.has(e,n)}));var cv=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(oH(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function oH(t){let e=t.getComponent();return e?.type==="VERSION"}var uv="@firebase/app",mR="0.10.4";var Us=new ur("@firebase/app"),aH="@firebase/app-compat",cH="@firebase/analytics-compat",uH="@firebase/analytics",lH="@firebase/app-check-compat",dH="@firebase/app-check",hH="@firebase/auth",fH="@firebase/auth-compat",pH="@firebase/database",mH="@firebase/database-compat",gH="@firebase/functions",yH="@firebase/functions-compat",_H="@firebase/installations",vH="@firebase/installations-compat",wH="@firebase/messaging",IH="@firebase/messaging-compat",EH="@firebase/performance",bH="@firebase/performance-compat",CH="@firebase/remote-config",TH="@firebase/remote-config-compat",DH="@firebase/storage",SH="@firebase/storage-compat",AH="@firebase/firestore",RH="@firebase/vertexai-preview",xH="@firebase/firestore-compat",NH="firebase",MH="10.12.1";var lv="[DEFAULT]",PH={[uv]:"fire-core",[aH]:"fire-core-compat",[uH]:"fire-analytics",[cH]:"fire-analytics-compat",[dH]:"fire-app-check",[lH]:"fire-app-check-compat",[hH]:"fire-auth",[fH]:"fire-auth-compat",[pH]:"fire-rtdb",[mH]:"fire-rtdb-compat",[gH]:"fire-fn",[yH]:"fire-fn-compat",[_H]:"fire-iid",[vH]:"fire-iid-compat",[wH]:"fire-fcm",[IH]:"fire-fcm-compat",[EH]:"fire-perf",[bH]:"fire-perf-compat",[CH]:"fire-rc",[TH]:"fire-rc-compat",[DH]:"fire-gcs",[SH]:"fire-gcs-compat",[AH]:"fire-fst",[xH]:"fire-fst-compat",[RH]:"fire-vertex","fire-js":"fire-js",[NH]:"fire-js-all"};var wu=new Map,kH=new Map,dv=new Map;function gR(t,e){try{t.container.addComponent(e)}catch(n){Us.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Dn(t){let e=t.name;if(dv.has(e))return Us.debug(`There were multiple attempts to register component ${e}.`),!1;dv.set(e,t);for(let n of wu.values())gR(n,t);for(let n of kH.values())gR(n,t);return!0}function Br(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function jn(t){return t.settings!==void 0}var OH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Li=new jr("app","Firebase",OH);var hv=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Nt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Li.create("app-deleted",{appName:this._name})}};var Sn=MH;function mv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:lv,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Li.create("bad-app-name",{appName:String(i)});if(n||(n=Z_()),!n)throw Li.create("no-options");let s=wu.get(i);if(s){if(Fs(n,s.options)&&Fs(r,s.config))return s;throw Li.create("duplicate-app",{appName:i})}let o=new vu(i);for(let c of dv.values())o.addComponent(c);let a=new hv(n,r,o);return wu.set(i,a),a}function dr(t=lv){let e=wu.get(t);if(!e&&t===lv&&Z_())return mv();if(!e)throw Li.create("no-app",{appName:t});return e}function Zh(){return Array.from(wu.values())}function Pe(t,e,n){var r;let i=(r=PH[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Us.warn(a.join(" "));return}Dn(new Nt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var FH="firebase-heartbeat-database",LH=1,Iu="firebase-heartbeat-store",av=null;function wR(){return av||(av=pR(FH,LH,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Iu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Li.create("idb-open",{originalErrorMessage:t.message})})),av}function VH(t){return v(this,null,function*(){try{let n=(yield wR()).transaction(Iu),r=yield n.objectStore(Iu).get(IR(t));return yield n.done,r}catch(e){if(e instanceof Ht)Us.warn(e.message);else{let n=Li.create("idb-get",{originalErrorMessage:e?.message});Us.warn(n.message)}}})}function yR(t,e){return v(this,null,function*(){try{let r=(yield wR()).transaction(Iu,"readwrite");yield r.objectStore(Iu).put(e,IR(t)),yield r.done}catch(n){if(n instanceof Ht)Us.warn(n.message);else{let r=Li.create("idb-set",{originalErrorMessage:n?.message});Us.warn(r.message)}}})}function IR(t){return`${t.name}!${t.options.appId}`}var UH=1024,jH=30*24*60*60*1e3,fv=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new pv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=_R();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=jH}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return v(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=_R(),{heartbeatsToSend:r,unsentEntries:i}=BH(this._heartbeatsCache.heartbeats),s=fu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function _R(){return new Date().toISOString().substring(0,10)}function BH(t,e=UH){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),vR(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),vR(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var pv=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return tv()?nR().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield VH(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return yR(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return yR(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function vR(t){return fu(JSON.stringify({version:2,heartbeats:t})).length}function $H(t){Dn(new Nt("platform-logger",e=>new cv(e),"PRIVATE")),Dn(new Nt("heartbeat",e=>new fv(e),"PRIVATE")),Pe(uv,mR,t),Pe(uv,mR,"esm2017"),Pe("fire-js","")}$H("");var HH="firebase",qH="10.12.1";Pe(HH,qH,"app");var Bn=new Mr("ANGULARFIRE2_VERSION");function Vi(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var $r=(t,e)=>{let n=e?[e]:Zh(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},hr=class{constructor(){return $r(GH)}},GH="app-check";function da(){}var ef=class{zone;delegate;constructor(e,n=Bm){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},gv=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",da,{},da,da)),n.pipe(dt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},fr=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new ef(Zone.current)),this.insideAngular=n.run(()=>new ef(Zone.current,So)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(X(Te))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function tf(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function zH(t){return tf().ngZone.runOutsideAngular(()=>t())}function js(t){return tf().ngZone.run(()=>t())}function WH(t){return KH(tf())(t)}function KH(t){return function(n){return n=n.lift(new gv(t.ngZone)),n.pipe(di(t.outsideAngular),li(t.insideAngular))}}var QH=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),js(()=>t.apply(void 0,r))},Xe=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=js(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",da,{},da,da))),r[s]=QH(r[s],n));let i=zH(()=>t.apply(this,r));if(!e)if(i instanceof J){let s=tf();return i.pipe(di(s.outsideAngular),li(s.insideAngular))}else return js(()=>i);return i instanceof J?i.pipe(WH):i instanceof Promise?js(()=>new Promise((s,o)=>i.then(a=>js(()=>s(a)),a=>js(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:js(()=>i)};var pn=class{constructor(e){return e}},$n=class{constructor(){return Zh()}};function YH(t){return t&&t.length===1?t[0]:new pn(dr())}var yv=new z("angularfire2._apps"),JH={provide:pn,useFactory:YH,deps:[[new ze,yv]]},XH={provide:$n,deps:[[new ze,yv]]};function ZH(t){return(e,n)=>{let r=n.get(Ii);Pe("angularfire",Bn.full,"core"),Pe("angularfire",Bn.full,"app"),Pe("angular",MS.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new pn(i)}}function ER(t,...e){return Wt([JH,XH,{provide:yv,useFactory:ZH(t),multi:!0,deps:[Te,Rt,fr,...e]}])}var bR=Xe(mv,!0);function jR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var BR=jR,$R=new jr("auth","Firebase",jR());var cf=new ur("@firebase/auth");function eq(t,...e){cf.logLevel<=pe.WARN&&cf.warn(`Auth (${Sn}): ${t}`,...e)}function rf(t,...e){cf.logLevel<=pe.ERROR&&cf.error(`Auth (${Sn}): ${t}`,...e)}function mr(t,...e){throw jv(t,...e)}function Bs(t,...e){return jv(t,...e)}function HR(t,e,n){let r=Object.assign(Object.assign({},BR()),{[e]:n});return new jr("auth","Firebase",r).create(e,{appName:t.name})}function Gr(t){return HR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jv(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return $R.create(t,...e)}function ee(t,e,...n){if(!t)throw jv(e,...n)}function Hr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw rf(e),new Error(e)}function ji(t,e){t||Hr(e)}function Iv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function tq(){return CR()==="http:"||CR()==="https:"}function CR(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function nq(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tq()||ZA()||"connection"in navigator)?navigator.onLine:!0}function rq(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var $s=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,ji(n>e,"Short delay should be less than long delay!"),this.isMobile=mu()||Qh()}get(){return nq()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Bv(t,e){ji(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var uf=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var iq={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var sq=new $s(3e4,6e4);function Bi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function $i(s,o,a,c){return v(this,arguments,function*(t,e,n,r,i={}){return qR(t,i,()=>v(this,null,function*(){let l={},d={};r&&(e==="GET"?d=r:l={body:JSON.stringify(r)});let f=Ls(Object.assign({key:t.config.apiKey},d)).slice(1),m=yield t._getAdditionalHeaders();return m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode),uf.fetch()(GR(t,t.config.apiHost,n,f),Object.assign({method:e,headers:m,referrerPolicy:"no-referrer"},l))}))})}function qR(t,e,n){return v(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},iq),e);try{let i=new Ev(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw nf(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw nf(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw nf(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw nf(t,"user-disabled",o);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw HR(t,d,l);mr(t,d)}}catch(i){if(i instanceof Ht)throw i;mr(t,"network-request-failed",{message:String(i)})}})}function Ru(s,o,a,c){return v(this,arguments,function*(t,e,n,r,i={}){let l=yield $i(t,e,n,r,i);return"mfaPendingCredential"in l&&mr(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function GR(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?Bv(t.config,i):`${t.config.apiScheme}://${i}`}function oq(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Ev=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Bs(this.auth,"network-request-failed")),sq.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function nf(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Bs(t,e,r);return i.customData._tokenResponse=n,i}function TR(t){return t!==void 0&&t.enterprise!==void 0}var bv=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return oq(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function aq(t,e){return v(this,null,function*(){return $i(t,"GET","/v2/recaptchaConfig",Bi(t,e))})}function cq(t,e){return v(this,null,function*(){return $i(t,"POST","/v1/accounts:delete",e)})}function zR(t,e){return v(this,null,function*(){return $i(t,"POST","/v1/accounts:lookup",e)})}function Eu(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function $v(t,e=!1){return v(this,null,function*(){let n=We(t),r=yield n.getIdToken(e),i=Hv(r);ee(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Eu(_v(i.auth_time)),issuedAtTime:Eu(_v(i.iat)),expirationTime:Eu(_v(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function _v(t){return Number(t)*1e3}function Hv(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return rf("JWT malformed, contained fewer than 3 sections"),null;try{let i=pu(n);return i?JSON.parse(i):(rf("Failed to decode base64 JWT payload"),null)}catch(i){return rf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function DR(t){let e=Hv(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Cu(t,e,n=!1){return v(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Ht&&uq(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function uq({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Cv=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),n)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Tu=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Eu(this.lastLoginAt),this.creationTime=Eu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function lf(t){return v(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Cu(t,zR(n,{idToken:r}));ee(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?WR(s.providerUserInfo):[],a=lq(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,d=c?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Tu(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)})}function qv(t){return v(this,null,function*(){let e=We(t);yield lf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function lq(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function WR(t){return t.map(e=>{var{providerId:n}=e,r=$m(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function dq(t,e){return v(this,null,function*(){let n=yield qR(t,{},()=>v(this,null,function*(){let r=Ls({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=GR(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",uf.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function hq(t,e){return v(this,null,function*(){return $i(t,"POST","/v2/accounts:revokeToken",Bi(t,e))})}var bu=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):DR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ee(e.length!==0,"internal-error");let n=DR(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return v(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield dq(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(ee(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ee(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ee(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Hr("not implemented")}};function Ui(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var ha=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=$m(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Cv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Tu(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let n=yield Cu(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return $v(this,e)}reload(){return qv(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield lf(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(jn(this.auth.app))return Promise.reject(Gr(this.auth));let e=yield this.getIdToken();return yield Cu(this,cq(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,l,d;let f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,F=(l=n.createdAt)!==null&&l!==void 0?l:void 0,q=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:B,emailVerified:G,isAnonymous:xe,providerData:re,stsTokenManager:C}=n;ee(B&&C,e,"internal-error");let _=bu.fromJSON(this.name,C);ee(typeof B=="string",e,"internal-error"),Ui(f,e.name),Ui(m,e.name),ee(typeof G=="boolean",e,"internal-error"),ee(typeof xe=="boolean",e,"internal-error"),Ui(y,e.name),Ui(E,e.name),Ui(x,e.name),Ui(R,e.name),Ui(F,e.name),Ui(q,e.name);let w=new t({uid:B,auth:e,email:m,emailVerified:G,displayName:f,isAnonymous:xe,photoURL:E,phoneNumber:y,tenantId:x,stsTokenManager:_,createdAt:F,lastLoginAt:q});return re&&Array.isArray(re)&&(w.providerData=re.map(b=>Object.assign({},b))),R&&(w._redirectEventId=R),w}static _fromIdTokenResponse(e,n,r=!1){return v(this,null,function*(){let i=new bu;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield lf(s),s})}static _fromGetAccountInfoResponse(e,n,r){return v(this,null,function*(){let i=n.users[0];ee(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?WR(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new bu;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Tu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var SR=new Map;function qr(t){ji(t instanceof Function,"Expected a class definition");let e=SR.get(t);return e?(ji(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,SR.set(t,e),e)}var fq=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(n,r){return v(this,null,function*(){this.storage[n]=r})}_get(n){return v(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return v(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Tv=fq;function sf(t,e,n){return`firebase:${t}:${e}:${n}`}var df=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=sf(this.userKey,i.apiKey,s),this.fullPersistenceKey=sf("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?ha._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return v(this,null,function*(){if(!n.length)return new t(qr(Tv),e,r);let i=(yield Promise.all(n.map(l=>v(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||qr(Tv),o=sf(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let d=yield l._get(o);if(d){let f=ha._fromJSON(e,d);l!==s&&(a=f),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>v(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function AR(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(YR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(KR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(XR(e))return"Blackberry";if(ZR(e))return"Webos";if(Gv(e))return"Safari";if((e.includes("chrome/")||QR(e))&&!e.includes("edge/"))return"Chrome";if(JR(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function KR(t=ft()){return/firefox\//i.test(t)}function Gv(t=ft()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function QR(t=ft()){return/crios\//i.test(t)}function YR(t=ft()){return/iemobile/i.test(t)}function JR(t=ft()){return/android/i.test(t)}function XR(t=ft()){return/blackberry/i.test(t)}function ZR(t=ft()){return/webos/i.test(t)}function vf(t=ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function pq(t=ft()){var e;return vf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function mq(){return eR()&&document.documentMode===10}function ex(t=ft()){return vf(t)||JR(t)||ZR(t)||XR(t)||/windows phone/i.test(t)||YR(t)}function gq(){try{return!!(window&&window!==window.top)}catch{return!1}}function tx(t,e=[]){let n;switch(t){case"Browser":n=AR(ft());break;case"Worker":n=`${AR(ft())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Sn}/${r}`}var Dv=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function yq(n){return v(this,arguments,function*(t,e={}){return $i(t,"GET","/v2/passwordPolicy",Bi(t,e))})}var _q=6,Sv=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:_q,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Av=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hf(this),this.idTokenSubscription=new hf(this),this.beforeStateQueue=new Dv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$R,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=qr(n)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield df.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let n=yield zR(this,{idToken:e}),r=yield ha._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var n;if(jn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield lf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=rq()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(jn(this.app))return Promise.reject(Gr(this));let n=e?We(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return v(this,null,function*(){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return jn(this.app)?Promise.reject(Gr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return jn(this.app)?Promise.reject(Gr(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(qr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield yq(this),n=new Sv(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new jr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield hq(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&qr(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=yield df.create(this,[qr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return v(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&eq(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function qs(t){return We(t)}var hf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=oR(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var wf={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vq(t){wf=t}function nx(t){return wf.loadJS(t)}function wq(){return wf.recaptchaEnterpriseScript}function Iq(){return wf.gapiScript}function rx(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var Eq="recaptcha-enterprise",bq="NO_RECAPTCHA",Rv=class{constructor(e){this.type=Eq,this.auth=qs(e)}verify(e="verify",n=!1){return v(this,null,function*(){function r(s){return v(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>v(this,null,function*(){aq(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new bv(c);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(s,o,a){let c=window.grecaptcha;TR(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(bq)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&TR(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=wq();c.length!==0&&(c+=a),nx(c).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function RR(t,e,n,r=!1){return v(this,null,function*(){let i=new Rv(t),s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function xv(t,e,n,r){return v(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield RR(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>v(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield RR(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}))})}function zv(t,e){let n=Br(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Fs(s,e??{}))return i;mr(i,"already-initialized")}return n.initialize({options:e})}function Cq(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(qr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Wv(t,e,n){let r=qs(t);ee(r._canInitEmulator,r,"emulator-config-failed"),ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=ix(e),{host:o,port:a}=Tq(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||Dq()}function ix(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Tq(t){let e=ix(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:xR(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:xR(o)}}}function xR(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function Dq(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Du=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Hr("not implemented")}_getIdTokenResponse(e){return Hr("not implemented")}_linkToIdToken(e,n){return Hr("not implemented")}_getReauthenticationResolver(e){return Hr("not implemented")}};function Sq(t,e){return v(this,null,function*(){return $i(t,"POST","/v1/accounts:signUp",e)})}function Aq(t,e){return v(this,null,function*(){return Ru(t,"POST","/v1/accounts:signInWithPassword",Bi(t,e))})}function Rq(t,e){return v(this,null,function*(){return Ru(t,"POST","/v1/accounts:signInWithEmailLink",Bi(t,e))})}function xq(t,e){return v(this,null,function*(){return Ru(t,"POST","/v1/accounts:signInWithEmailLink",Bi(t,e))})}var Su=class t extends Du{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xv(e,n,"signInWithPassword",Aq);case"emailLink":return Rq(e,{email:this._email,oobCode:this._password});default:mr(e,"internal-error")}})}_linkToIdToken(e,n){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xv(e,r,"signUpPassword",Sq);case"emailLink":return xq(e,{idToken:n,email:this._email,oobCode:this._password});default:mr(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function vv(t,e){return v(this,null,function*(){return Ru(t,"POST","/v1/accounts:signInWithIdp",Bi(t,e))})}function Nq(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Mq(t){let e=ua(la(t)).link,n=e?ua(la(e)).deep_link_id:null,r=ua(la(t)).deep_link_id;return(r?ua(la(r)).link:null)||r||n||e||t}var ff=class t{constructor(e){var n,r,i,s,o,a;let c=ua(la(e)),l=(n=c.apiKey)!==null&&n!==void 0?n:null,d=(r=c.oobCode)!==null&&r!==void 0?r:null,f=Nq((i=c.mode)!==null&&i!==void 0?i:null);ee(l&&d&&f,"argument-error"),this.apiKey=l,this.operation=f,this.code=d,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=Mq(e);try{return new t(n)}catch{return null}}};var sx=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Su._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=ff.parseLink(r);return ee(i,"argument-error"),Su._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),pf=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Nv=class extends pf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function Pq(t,e){return v(this,null,function*(){return Ru(t,"POST","/v1/accounts:signUp",Bi(t,e))})}var fa=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return v(this,null,function*(){let s=yield ha._fromIdTokenResponse(e,r,i),o=NR(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=NR(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function NR(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Mv=class t extends Ht{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function ox(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Mv._fromErrorAndOperation(t,s,e,r):s})}function kq(t,e,n=!1){return v(this,null,function*(){let r=yield Cu(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return fa._forOperation(t,"link",r)})}function Oq(t,e,n=!1){return v(this,null,function*(){let{auth:r}=t;if(jn(r.app))return Promise.reject(Gr(r));let i="reauthenticate";try{let s=yield Cu(t,ox(r,i,e,t),n);ee(s.idToken,r,"internal-error");let o=Hv(s.idToken);ee(o,r,"internal-error");let{sub:a}=o;return ee(t.uid===a,r,"user-mismatch"),fa._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&mr(r,"user-mismatch"),s}})}function ax(t,e,n=!1){return v(this,null,function*(){if(jn(t.app))return Promise.reject(Gr(t));let r="signIn",i=yield ox(t,r,e),s=yield fa._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function Kv(t,e){return v(this,null,function*(){return ax(qs(t),e)})}function cx(t){return v(this,null,function*(){let e=qs(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Qv(t,e,n){return v(this,null,function*(){if(jn(t.app))return Promise.reject(Gr(t));let r=qs(t),o=yield xv(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Pq).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&cx(t),c}),a=yield fa._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function Yv(t,e,n){return jn(t.app)?Promise.reject(Gr(t)):Kv(We(t),sx.credential(e,n)).catch(r=>v(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&cx(t),r}))}function Jv(t,e,n,r){return We(t).onIdTokenChanged(e,n,r)}function Xv(t,e,n){return We(t).beforeAuthStateChanged(e,n)}function Zv(t,e,n,r){return We(t).onAuthStateChanged(e,n,r)}function ew(t){return We(t).signOut()}var mf="__sak";var gf=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(mf,"1"),this.storage.removeItem(mf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function Fq(){let t=ft();return Gv(t)||vf(t)}var Lq=1e3,Vq=10,Uq=(()=>{class t extends gf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Fq()&&gq(),this.fallbackToPolling=ex(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(i);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);mq()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,Vq):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},Lq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return v(this,null,function*(){yield ci(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return v(this,null,function*(){let r=yield ci(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return v(this,null,function*(){yield ci(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),ux=Uq;var jq=(()=>{class t extends gf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),tw=jq;function Bq(t){return Promise.all(t.map(e=>v(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var $q=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return v(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(d=>v(this,null,function*(){return d(r.origin,o)})),l=yield Bq(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function lx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Pv=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=lx("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){let m=f;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function pr(){return window}function Hq(t){pr().location.href=t}function dx(){return typeof pr().WorkerGlobalScope<"u"&&typeof pr().importScripts=="function"}function qq(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function Gq(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function zq(){return dx()?self:null}var hx="firebaseLocalStorageDb",Wq=1,yf="firebaseLocalStorage",fx="fbase_key",Hs=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function If(t,e){return t.transaction([yf],e?"readwrite":"readonly").objectStore(yf)}function Kq(){let t=indexedDB.deleteDatabase(hx);return new Hs(t).toPromise()}function kv(){let t=indexedDB.open(hx,Wq);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(yf,{keyPath:fx})}catch(i){n(i)}}),t.addEventListener("success",()=>v(this,null,function*(){let r=t.result;r.objectStoreNames.contains(yf)?e(r):(r.close(),yield Kq(),e(yield kv()))}))})}function MR(t,e,n){return v(this,null,function*(){let r=If(t,!0).put({[fx]:e,value:n});return new Hs(r).toPromise()})}function Qq(t,e){return v(this,null,function*(){let n=If(t,!1).get(e),r=yield new Hs(n).toPromise();return r===void 0?null:r.value})}function PR(t,e){let n=If(t,!0).delete(e);return new Hs(n).toPromise()}var Yq=800,Jq=3,Xq=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield kv(),this.db)})}_withRetries(n){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>Jq)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return dx()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=$q._getInstance(zq()),this.receiver._subscribe("keyChanged",(n,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var n,r;if(this.activeServiceWorker=yield qq(),!this.activeServiceWorker)return;this.sender=new Pv(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||Gq()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let n=yield kv();return yield MR(n,mf,"1"),yield PR(n,mf),!0}catch{}return!1})}_withPendingWrite(n){return v(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>MR(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return v(this,null,function*(){let r=yield this._withRetries(i=>Qq(i,n));return this.localCache[n]=r,r})}_remove(n){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>PR(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return v(this,null,function*(){let n=yield this._withRetries(s=>{let o=If(s,!1).getAll();return new Hs(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),Yq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),px=Xq;var See=rx("rcb"),Aee=new $s(3e4,6e4);function Zq(t,e){return e?qr(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Au=class extends Du{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vv(e,this._buildIdpRequest())}_linkToIdToken(e,n){return vv(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return vv(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function e4(t){return ax(t.auth,new Au(t),t.bypassAuthState)}function t4(t){let{auth:e,user:n}=t;return ee(n,e,"internal-error"),Oq(n,new Au(t),t.bypassAuthState)}function n4(t){return v(this,null,function*(){let{auth:e,user:n}=t;return ee(n,e,"internal-error"),kq(n,new Au(t),t.bypassAuthState)})}var Ov=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return e4;case"linkViaPopup":case"linkViaRedirect":return n4;case"reauthViaPopup":case"reauthViaRedirect":return t4;default:mr(this.auth,"internal-error")}}resolve(e){ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Ree=new $s(2e3,1e4);var r4="pendingRedirect",of=new Map,Fv=class t extends Ov{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=of.get(this.auth._key());if(!e){try{let r=(yield i4(this.resolver,this.auth))?yield ci(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}of.set(this.auth._key(),e)}return this.bypassAuthState||of.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return ci(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,ci(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function i4(t,e){return v(this,null,function*(){let n=a4(e),r=o4(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function s4(t,e){of.set(t._key(),e)}function o4(t){return qr(t._redirectPersistence)}function a4(t){return sf(r4,t.config.apiKey,t.name)}function c4(t,e,n=!1){return v(this,null,function*(){if(jn(t.app))return Promise.reject(Gr(t));let r=qs(t),i=Zq(r,e),o=yield new Fv(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var u4=10*60*1e3,Lv=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!l4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!mx(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Bs(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=u4&&this.cachedEventUids.clear(),this.cachedEventUids.has(kR(e))}saveEventToCache(e){this.cachedEventUids.add(kR(e)),this.lastProcessedEventTime=Date.now()}};function kR(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function mx({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function l4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mx(t);default:return!1}}function d4(n){return v(this,arguments,function*(t,e={}){return $i(t,"GET","/v1/projects",e)})}var h4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,f4=/^https?/;function p4(t){return v(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield d4(t);for(let n of e)try{if(m4(n))return}catch{}mr(t,"unauthorized-domain")})}function m4(t){let e=Iv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!f4.test(n))return!1;if(h4.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var g4=new $s(3e4,6e4);function OR(){let t=pr().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function y4(t){return new Promise((e,n)=>{var r,i,s;function o(){OR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{OR(),n(Bs(t,"network-request-failed"))},timeout:g4.get()})}if(!((i=(r=pr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=pr().gapi)===null||s===void 0)&&s.load)o();else{let a=rx("iframefcb");return pr()[a]=()=>{gapi.load?o():n(Bs(t,"network-request-failed"))},nx(`${Iq()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw af=null,e})}var af=null;function _4(t){return af=af||y4(t),af}var v4=new $s(5e3,15e3),w4="__/auth/iframe",I4="emulator/auth/iframe",E4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},b4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function C4(t){let e=t.config;ee(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Bv(e,I4):`https://${t.config.authDomain}/${w4}`,r={apiKey:e.apiKey,appName:t.name,v:Sn},i=b4.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ls(r).slice(1)}`}function T4(t){return v(this,null,function*(){let e=yield _4(t),n=pr().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:C4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:E4,dontclear:!0},r=>new Promise((i,s)=>v(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Bs(t,"network-request-failed"),a=pr().setTimeout(()=>{s(o)},v4.get());function c(){pr().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var D4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},S4=500,A4=600,R4="_blank",x4="http://localhost",_f=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function N4(t,e,n,r=S4,i=A4){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},D4),{width:r.toString(),height:i.toString(),top:s,left:o}),l=ft().toLowerCase();n&&(a=QR(l)?R4:n),KR(l)&&(e=e||x4,c.scrollbars="yes");let d=Object.entries(c).reduce((m,[y,E])=>`${m}${y}=${E},`,"");if(pq(l)&&a!=="_self")return M4(e||"",a),new _f(null);let f=window.open(e||"",a,d);ee(f,t,"popup-blocked");try{f.focus()}catch{}return new _f(f)}function M4(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var P4="__/auth/handler",k4="emulator/auth/handler",O4=encodeURIComponent("fac");function FR(t,e,n,r,i,s){return v(this,null,function*(){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Sn,eventId:i};if(e instanceof pf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",gu(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,f]of Object.entries(s||{}))o[d]=f}if(e instanceof Nv){let d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=yield t._getAppCheckToken(),l=c?`#${O4}=${encodeURIComponent(c)}`:"";return`${F4(t)}?${Ls(a).slice(1)}${l}`})}function F4({config:t}){return t.emulator?Bv(t,k4):`https://${t.authDomain}/${P4}`}var wv="webStorageSupport",Vv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tw,this._completeRedirectFn=c4,this._overrideRedirectResult=s4}_openPopup(e,n,r,i){return v(this,null,function*(){var s;ji((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield FR(e,n,r,Iv(),i);return N4(e,o,lx())})}_openRedirect(e,n,r,i){return v(this,null,function*(){yield this._originValidation(e);let s=yield FR(e,n,r,Iv(),i);return Hq(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ji(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return v(this,null,function*(){let n=yield T4(e),r=new Lv(e);return n.register("authEvent",i=>(ee(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(wv,{type:wv},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[wv];o!==void 0&&n(!!o),mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=p4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ex()||Gv()||vf()}},gx=Vv;var LR="@firebase/auth",VR="1.7.3";var Uv=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function L4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function V4(t){Dn(new Nt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ee(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tx(t)},l=new Av(r,i,s,c);return Cq(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Dn(new Nt("auth-internal",e=>{let n=qs(e.getProvider("auth").getImmediate());return(r=>new Uv(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pe(LR,VR,L4(t)),Pe(LR,VR,"esm2017")}var U4=5*60,j4=ev("authIdTokenMaxAge")||U4,UR=null,B4=t=>e=>v(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>j4)return;let i=n?.token;UR!==i&&(UR=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function nw(t=dr()){let e=Br(t,"auth");if(e.isInitialized())return e.getImmediate();let n=zv(t,{popupRedirectResolver:gx,persistence:[px,ux,tw]}),r=ev("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=B4(s.toString());Xv(n,o,()=>o(n.currentUser)),Jv(n,a=>o(a))}}let i=X_("auth");return i&&Wv(n,`http://${i}`),n}function $4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}vq({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=Bs("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",$4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});V4("Browser");var yx="auth",mn=class{constructor(e){return e}},zr=class{constructor(){return $r(yx)}};var rw=new z("angularfire2.auth-instances");function NG(t,e){let n=Vi(yx,t,e);return n&&new mn(n)}function MG(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new mn(r)}}var PG={provide:zr,deps:[[new ze,rw]]},kG={provide:mn,useFactory:NG,deps:[[new ze,rw],pn]};function _x(t,...e){return Pe("angularfire",Bn.full,"auth"),Wt([kG,PG,{provide:rw,useFactory:MG(t),multi:!0,deps:[Te,Rt,fr,$n,[new ze,hr],...e]}])}var vx=Xe(Qv,!0);var wx=Xe(nw,!0);var Ix=Xe(Zv,!0);var Ex=Xe(Yv,!0);var bx=Xe(ew,!0);var Cx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Tx={};var Hi,sw;(function(){var t;function e(C,_){function w(){}w.prototype=_.prototype,C.D=_.prototype,C.prototype=new w,C.prototype.constructor=C,C.C=function(b,T,S){for(var I=Array(arguments.length-2),Dr=2;Dr<arguments.length;Dr++)I[Dr-2]=arguments[Dr];return _.prototype[T].apply(b,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,_,w){w||(w=0);var b=Array(16);if(typeof _=="string")for(var T=0;16>T;++T)b[T]=_.charCodeAt(w++)|_.charCodeAt(w++)<<8|_.charCodeAt(w++)<<16|_.charCodeAt(w++)<<24;else for(T=0;16>T;++T)b[T]=_[w++]|_[w++]<<8|_[w++]<<16|_[w++]<<24;_=C.g[0],w=C.g[1],T=C.g[2];var S=C.g[3],I=_+(S^w&(T^S))+b[0]+3614090360&4294967295;_=w+(I<<7&4294967295|I>>>25),I=S+(T^_&(w^T))+b[1]+3905402710&4294967295,S=_+(I<<12&4294967295|I>>>20),I=T+(w^S&(_^w))+b[2]+606105819&4294967295,T=S+(I<<17&4294967295|I>>>15),I=w+(_^T&(S^_))+b[3]+3250441966&4294967295,w=T+(I<<22&4294967295|I>>>10),I=_+(S^w&(T^S))+b[4]+4118548399&4294967295,_=w+(I<<7&4294967295|I>>>25),I=S+(T^_&(w^T))+b[5]+1200080426&4294967295,S=_+(I<<12&4294967295|I>>>20),I=T+(w^S&(_^w))+b[6]+2821735955&4294967295,T=S+(I<<17&4294967295|I>>>15),I=w+(_^T&(S^_))+b[7]+4249261313&4294967295,w=T+(I<<22&4294967295|I>>>10),I=_+(S^w&(T^S))+b[8]+1770035416&4294967295,_=w+(I<<7&4294967295|I>>>25),I=S+(T^_&(w^T))+b[9]+2336552879&4294967295,S=_+(I<<12&4294967295|I>>>20),I=T+(w^S&(_^w))+b[10]+4294925233&4294967295,T=S+(I<<17&4294967295|I>>>15),I=w+(_^T&(S^_))+b[11]+2304563134&4294967295,w=T+(I<<22&4294967295|I>>>10),I=_+(S^w&(T^S))+b[12]+1804603682&4294967295,_=w+(I<<7&4294967295|I>>>25),I=S+(T^_&(w^T))+b[13]+4254626195&4294967295,S=_+(I<<12&4294967295|I>>>20),I=T+(w^S&(_^w))+b[14]+2792965006&4294967295,T=S+(I<<17&4294967295|I>>>15),I=w+(_^T&(S^_))+b[15]+1236535329&4294967295,w=T+(I<<22&4294967295|I>>>10),I=_+(T^S&(w^T))+b[1]+4129170786&4294967295,_=w+(I<<5&4294967295|I>>>27),I=S+(w^T&(_^w))+b[6]+3225465664&4294967295,S=_+(I<<9&4294967295|I>>>23),I=T+(_^w&(S^_))+b[11]+643717713&4294967295,T=S+(I<<14&4294967295|I>>>18),I=w+(S^_&(T^S))+b[0]+3921069994&4294967295,w=T+(I<<20&4294967295|I>>>12),I=_+(T^S&(w^T))+b[5]+3593408605&4294967295,_=w+(I<<5&4294967295|I>>>27),I=S+(w^T&(_^w))+b[10]+38016083&4294967295,S=_+(I<<9&4294967295|I>>>23),I=T+(_^w&(S^_))+b[15]+3634488961&4294967295,T=S+(I<<14&4294967295|I>>>18),I=w+(S^_&(T^S))+b[4]+3889429448&4294967295,w=T+(I<<20&4294967295|I>>>12),I=_+(T^S&(w^T))+b[9]+568446438&4294967295,_=w+(I<<5&4294967295|I>>>27),I=S+(w^T&(_^w))+b[14]+3275163606&4294967295,S=_+(I<<9&4294967295|I>>>23),I=T+(_^w&(S^_))+b[3]+4107603335&4294967295,T=S+(I<<14&4294967295|I>>>18),I=w+(S^_&(T^S))+b[8]+1163531501&4294967295,w=T+(I<<20&4294967295|I>>>12),I=_+(T^S&(w^T))+b[13]+2850285829&4294967295,_=w+(I<<5&4294967295|I>>>27),I=S+(w^T&(_^w))+b[2]+4243563512&4294967295,S=_+(I<<9&4294967295|I>>>23),I=T+(_^w&(S^_))+b[7]+1735328473&4294967295,T=S+(I<<14&4294967295|I>>>18),I=w+(S^_&(T^S))+b[12]+2368359562&4294967295,w=T+(I<<20&4294967295|I>>>12),I=_+(w^T^S)+b[5]+4294588738&4294967295,_=w+(I<<4&4294967295|I>>>28),I=S+(_^w^T)+b[8]+2272392833&4294967295,S=_+(I<<11&4294967295|I>>>21),I=T+(S^_^w)+b[11]+1839030562&4294967295,T=S+(I<<16&4294967295|I>>>16),I=w+(T^S^_)+b[14]+4259657740&4294967295,w=T+(I<<23&4294967295|I>>>9),I=_+(w^T^S)+b[1]+2763975236&4294967295,_=w+(I<<4&4294967295|I>>>28),I=S+(_^w^T)+b[4]+1272893353&4294967295,S=_+(I<<11&4294967295|I>>>21),I=T+(S^_^w)+b[7]+4139469664&4294967295,T=S+(I<<16&4294967295|I>>>16),I=w+(T^S^_)+b[10]+3200236656&4294967295,w=T+(I<<23&4294967295|I>>>9),I=_+(w^T^S)+b[13]+681279174&4294967295,_=w+(I<<4&4294967295|I>>>28),I=S+(_^w^T)+b[0]+3936430074&4294967295,S=_+(I<<11&4294967295|I>>>21),I=T+(S^_^w)+b[3]+3572445317&4294967295,T=S+(I<<16&4294967295|I>>>16),I=w+(T^S^_)+b[6]+76029189&4294967295,w=T+(I<<23&4294967295|I>>>9),I=_+(w^T^S)+b[9]+3654602809&4294967295,_=w+(I<<4&4294967295|I>>>28),I=S+(_^w^T)+b[12]+3873151461&4294967295,S=_+(I<<11&4294967295|I>>>21),I=T+(S^_^w)+b[15]+530742520&4294967295,T=S+(I<<16&4294967295|I>>>16),I=w+(T^S^_)+b[2]+3299628645&4294967295,w=T+(I<<23&4294967295|I>>>9),I=_+(T^(w|~S))+b[0]+4096336452&4294967295,_=w+(I<<6&4294967295|I>>>26),I=S+(w^(_|~T))+b[7]+1126891415&4294967295,S=_+(I<<10&4294967295|I>>>22),I=T+(_^(S|~w))+b[14]+2878612391&4294967295,T=S+(I<<15&4294967295|I>>>17),I=w+(S^(T|~_))+b[5]+4237533241&4294967295,w=T+(I<<21&4294967295|I>>>11),I=_+(T^(w|~S))+b[12]+1700485571&4294967295,_=w+(I<<6&4294967295|I>>>26),I=S+(w^(_|~T))+b[3]+2399980690&4294967295,S=_+(I<<10&4294967295|I>>>22),I=T+(_^(S|~w))+b[10]+4293915773&4294967295,T=S+(I<<15&4294967295|I>>>17),I=w+(S^(T|~_))+b[1]+2240044497&4294967295,w=T+(I<<21&4294967295|I>>>11),I=_+(T^(w|~S))+b[8]+1873313359&4294967295,_=w+(I<<6&4294967295|I>>>26),I=S+(w^(_|~T))+b[15]+4264355552&4294967295,S=_+(I<<10&4294967295|I>>>22),I=T+(_^(S|~w))+b[6]+2734768916&4294967295,T=S+(I<<15&4294967295|I>>>17),I=w+(S^(T|~_))+b[13]+1309151649&4294967295,w=T+(I<<21&4294967295|I>>>11),I=_+(T^(w|~S))+b[4]+4149444226&4294967295,_=w+(I<<6&4294967295|I>>>26),I=S+(w^(_|~T))+b[11]+3174756917&4294967295,S=_+(I<<10&4294967295|I>>>22),I=T+(_^(S|~w))+b[2]+718787259&4294967295,T=S+(I<<15&4294967295|I>>>17),I=w+(S^(T|~_))+b[9]+3951481745&4294967295,C.g[0]=C.g[0]+_&4294967295,C.g[1]=C.g[1]+(T+(I<<21&4294967295|I>>>11))&4294967295,C.g[2]=C.g[2]+T&4294967295,C.g[3]=C.g[3]+S&4294967295}r.prototype.u=function(C,_){_===void 0&&(_=C.length);for(var w=_-this.blockSize,b=this.B,T=this.h,S=0;S<_;){if(T==0)for(;S<=w;)i(this,C,S),S+=this.blockSize;if(typeof C=="string"){for(;S<_;)if(b[T++]=C.charCodeAt(S++),T==this.blockSize){i(this,b),T=0;break}}else for(;S<_;)if(b[T++]=C[S++],T==this.blockSize){i(this,b),T=0;break}}this.h=T,this.o+=_},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var _=1;_<C.length-8;++_)C[_]=0;var w=8*this.o;for(_=C.length-8;_<C.length;++_)C[_]=w&255,w/=256;for(this.u(C),C=Array(16),_=w=0;4>_;++_)for(var b=0;32>b;b+=8)C[w++]=this.g[_]>>>b&255;return C};function s(C,_){var w=a;return Object.prototype.hasOwnProperty.call(w,C)?w[C]:w[C]=_(C)}function o(C,_){this.h=_;for(var w=[],b=!0,T=C.length-1;0<=T;T--){var S=C[T]|0;b&&S==_||(w[T]=S,b=!1)}this.g=w}var a={};function c(C){return-128<=C&&128>C?s(C,function(_){return new o([_|0],0>_?-1:0)}):new o([C|0],0>C?-1:0)}function l(C){if(isNaN(C)||!isFinite(C))return f;if(0>C)return R(l(-C));for(var _=[],w=1,b=0;C>=w;b++)_[b]=C/w|0,w*=4294967296;return new o(_,0)}function d(C,_){if(C.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(C.charAt(0)=="-")return R(d(C.substring(1),_));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(_,8)),b=f,T=0;T<C.length;T+=8){var S=Math.min(8,C.length-T),I=parseInt(C.substring(T,T+S),_);8>S?(S=l(Math.pow(_,S)),b=b.j(S).add(l(I))):(b=b.j(w),b=b.add(l(I)))}return b}var f=c(0),m=c(1),y=c(16777216);t=o.prototype,t.m=function(){if(x(this))return-R(this).m();for(var C=0,_=1,w=0;w<this.g.length;w++){var b=this.i(w);C+=(0<=b?b:4294967296+b)*_,_*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(E(this))return"0";if(x(this))return"-"+R(this).toString(C);for(var _=l(Math.pow(C,6)),w=this,b="";;){var T=G(w,_).g;w=F(w,T.j(_));var S=((0<w.g.length?w.g[0]:w.h)>>>0).toString(C);if(w=T,E(w))return S+b;for(;6>S.length;)S="0"+S;b=S+b}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function E(C){if(C.h!=0)return!1;for(var _=0;_<C.g.length;_++)if(C.g[_]!=0)return!1;return!0}function x(C){return C.h==-1}t.l=function(C){return C=F(this,C),x(C)?-1:E(C)?0:1};function R(C){for(var _=C.g.length,w=[],b=0;b<_;b++)w[b]=~C.g[b];return new o(w,~C.h).add(m)}t.abs=function(){return x(this)?R(this):this},t.add=function(C){for(var _=Math.max(this.g.length,C.g.length),w=[],b=0,T=0;T<=_;T++){var S=b+(this.i(T)&65535)+(C.i(T)&65535),I=(S>>>16)+(this.i(T)>>>16)+(C.i(T)>>>16);b=I>>>16,S&=65535,I&=65535,w[T]=I<<16|S}return new o(w,w[w.length-1]&-2147483648?-1:0)};function F(C,_){return C.add(R(_))}t.j=function(C){if(E(this)||E(C))return f;if(x(this))return x(C)?R(this).j(R(C)):R(R(this).j(C));if(x(C))return R(this.j(R(C)));if(0>this.l(y)&&0>C.l(y))return l(this.m()*C.m());for(var _=this.g.length+C.g.length,w=[],b=0;b<2*_;b++)w[b]=0;for(b=0;b<this.g.length;b++)for(var T=0;T<C.g.length;T++){var S=this.i(b)>>>16,I=this.i(b)&65535,Dr=C.i(T)>>>16,sc=C.i(T)&65535;w[2*b+2*T]+=I*sc,q(w,2*b+2*T),w[2*b+2*T+1]+=S*sc,q(w,2*b+2*T+1),w[2*b+2*T+1]+=I*Dr,q(w,2*b+2*T+1),w[2*b+2*T+2]+=S*Dr,q(w,2*b+2*T+2)}for(b=0;b<_;b++)w[b]=w[2*b+1]<<16|w[2*b];for(b=_;b<2*_;b++)w[b]=0;return new o(w,0)};function q(C,_){for(;(C[_]&65535)!=C[_];)C[_+1]+=C[_]>>>16,C[_]&=65535,_++}function B(C,_){this.g=C,this.h=_}function G(C,_){if(E(_))throw Error("division by zero");if(E(C))return new B(f,f);if(x(C))return _=G(R(C),_),new B(R(_.g),R(_.h));if(x(_))return _=G(C,R(_)),new B(R(_.g),_.h);if(30<C.g.length){if(x(C)||x(_))throw Error("slowDivide_ only works with positive integers.");for(var w=m,b=_;0>=b.l(C);)w=xe(w),b=xe(b);var T=re(w,1),S=re(b,1);for(b=re(b,2),w=re(w,2);!E(b);){var I=S.add(b);0>=I.l(C)&&(T=T.add(w),S=I),b=re(b,1),w=re(w,1)}return _=F(C,T.j(_)),new B(T,_)}for(T=f;0<=C.l(_);){for(w=Math.max(1,Math.floor(C.m()/_.m())),b=Math.ceil(Math.log(w)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),S=l(w),I=S.j(_);x(I)||0<I.l(C);)w-=b,S=l(w),I=S.j(_);E(S)&&(S=m),T=T.add(S),C=F(C,I)}return new B(T,C)}t.A=function(C){return G(this,C).h},t.and=function(C){for(var _=Math.max(this.g.length,C.g.length),w=[],b=0;b<_;b++)w[b]=this.i(b)&C.i(b);return new o(w,this.h&C.h)},t.or=function(C){for(var _=Math.max(this.g.length,C.g.length),w=[],b=0;b<_;b++)w[b]=this.i(b)|C.i(b);return new o(w,this.h|C.h)},t.xor=function(C){for(var _=Math.max(this.g.length,C.g.length),w=[],b=0;b<_;b++)w[b]=this.i(b)^C.i(b);return new o(w,this.h^C.h)};function xe(C){for(var _=C.g.length+1,w=[],b=0;b<_;b++)w[b]=C.i(b)<<1|C.i(b-1)>>>31;return new o(w,C.h)}function re(C,_){var w=_>>5;_%=32;for(var b=C.g.length-w,T=[],S=0;S<b;S++)T[S]=0<_?C.i(S+w)>>>_|C.i(S+w+1)<<32-_:C.i(S+w);return new o(T,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,sw=Tx.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=d,Hi=Tx.Integer=o}).apply(typeof Cx<"u"?Cx:typeof self<"u"?self:typeof window<"u"?window:{});var Ef=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wr={};var ow,aw,pa,cw,xu,bf,uw,lw,dw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,h,p){return u==Array.prototype||u==Object.prototype||(u[h]=p.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ef=="object"&&Ef];for(var h=0;h<u.length;++h){var p=u[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(u,h){if(h)e:{var p=r;u=u.split(".");for(var g=0;g<u.length-1;g++){var D=u[g];if(!(D in p))break e;p=p[D]}u=u[u.length-1],g=p[u],h=h(g),h!=g&&h!=null&&e(p,u,{configurable:!0,writable:!0,value:h})}}function s(u,h){u instanceof String&&(u+="");var p=0,g=!1,D={next:function(){if(!g&&p<u.length){var A=p++;return{value:h(A,u[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(u){return u||function(){return s(this,function(h,p){return p})}});var o=o||{},a=this||self;function c(u){var h=typeof u;return h=h!="object"?h:u?Array.isArray(u)?"array":h:"null",h=="array"||h=="object"&&typeof u.length=="number"}function l(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function d(u,h,p){return u.call.apply(u.bind,arguments)}function f(u,h,p){if(!u)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,g),u.apply(h,D)}}return function(){return u.apply(h,arguments)}}function m(u,h,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function y(u,h){var p=Array.prototype.slice.call(arguments,1);return function(){var g=p.slice();return g.push.apply(g,arguments),u.apply(this,g)}}function E(u,h){function p(){}p.prototype=h.prototype,u.aa=h.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(g,D,A){for(var L=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)L[Le-2]=arguments[Le];return h.prototype[D].apply(g,L)}}function x(u){let h=u.length;if(0<h){let p=Array(h);for(let g=0;g<h;g++)p[g]=u[g];return p}return[]}function R(u,h){for(let p=1;p<arguments.length;p++){let g=arguments[p];if(c(g)){let D=u.length||0,A=g.length||0;u.length=D+A;for(let L=0;L<A;L++)u[D+L]=g[L]}else u.push(g)}}class F{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function q(u){return/^[\s\xa0]*$/.test(u)}function B(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function G(u){return G[" "](u),u}G[" "]=function(){};var xe=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function re(u,h,p){for(let g in u)h.call(p,u[g],g,u)}function C(u,h){for(let p in u)h.call(void 0,u[p],p,u)}function _(u){let h={};for(let p in u)h[p]=u[p];return h}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(u,h){let p,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(p in g)u[p]=g[p];for(let A=0;A<w.length;A++)p=w[A],Object.prototype.hasOwnProperty.call(g,p)&&(u[p]=g[p])}}function T(u){var h=1;u=u.split(":");let p=[];for(;0<h&&u.length;)p.push(u.shift()),h--;return u.length&&p.push(u.join(":")),p}function S(u){a.setTimeout(()=>{throw u},0)}function I(){var u=em;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class Dr{constructor(){this.h=this.g=null}add(h,p){let g=sc.get();g.set(h,p),this.h?this.h.next=g:this.g=g,this.h=g}}var sc=new F(()=>new uO,u=>u.reset());class uO{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let oc,ac=!1,em=new Dr,lC=()=>{let u=a.Promise.resolve(void 0);oc=()=>{u.then(lO)}};var lO=()=>{for(var u;u=I();){try{u.h.call(u.g)}catch(p){S(p)}var h=sc;h.j(u),100>h.h&&(h.h++,u.next=h.g,h.g=u)}ac=!1};function ii(){this.s=this.s,this.C=this.C}ii.prototype.s=!1,ii.prototype.ma=function(){this.s||(this.s=!0,this.N())},ii.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function bt(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}bt.prototype.h=function(){this.defaultPrevented=!0};var dO=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return u}();function cc(u,h){if(bt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,g=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget){if(xe){e:{try{G(h.nodeName);var D=!0;break e}catch{}D=!1}D||(h=null)}}else p=="mouseover"?h=u.fromElement:p=="mouseout"&&(h=u.toElement);this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:hO[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&cc.aa.h.call(this)}}E(cc,bt);var hO={2:"touch",3:"pen",4:"mouse"};cc.prototype.h=function(){cc.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var uc="closure_listenable_"+(1e6*Math.random()|0),fO=0;function pO(u,h,p,g,D){this.listener=u,this.proxy=null,this.src=h,this.type=p,this.capture=!!g,this.ha=D,this.key=++fO,this.da=this.fa=!1}function Al(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Rl(u){this.src=u,this.g={},this.h=0}Rl.prototype.add=function(u,h,p,g,D){var A=u.toString();u=this.g[A],u||(u=this.g[A]=[],this.h++);var L=nm(u,h,g,D);return-1<L?(h=u[L],p||(h.fa=!1)):(h=new pO(h,this.src,A,!!g,D),h.fa=p,u.push(h)),h};function tm(u,h){var p=h.type;if(p in u.g){var g=u.g[p],D=Array.prototype.indexOf.call(g,h,void 0),A;(A=0<=D)&&Array.prototype.splice.call(g,D,1),A&&(Al(h),u.g[p].length==0&&(delete u.g[p],u.h--))}}function nm(u,h,p,g){for(var D=0;D<u.length;++D){var A=u[D];if(!A.da&&A.listener==h&&A.capture==!!p&&A.ha==g)return D}return-1}var rm="closure_lm_"+(1e6*Math.random()|0),im={};function dC(u,h,p,g,D){if(g&&g.once)return fC(u,h,p,g,D);if(Array.isArray(h)){for(var A=0;A<h.length;A++)dC(u,h[A],p,g,D);return null}return p=cm(p),u&&u[uc]?u.K(h,p,l(g)?!!g.capture:!!g,D):hC(u,h,p,!1,g,D)}function hC(u,h,p,g,D,A){if(!h)throw Error("Invalid event type");var L=l(D)?!!D.capture:!!D,Le=om(u);if(Le||(u[rm]=Le=new Rl(u)),p=Le.add(h,p,g,L,A),p.proxy)return p;if(g=mO(),p.proxy=g,g.src=u,g.listener=p,u.addEventListener)dO||(D=L),D===void 0&&(D=!1),u.addEventListener(h.toString(),g,D);else if(u.attachEvent)u.attachEvent(mC(h.toString()),g);else if(u.addListener&&u.removeListener)u.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return p}function mO(){function u(p){return h.call(u.src,u.listener,p)}let h=gO;return u}function fC(u,h,p,g,D){if(Array.isArray(h)){for(var A=0;A<h.length;A++)fC(u,h[A],p,g,D);return null}return p=cm(p),u&&u[uc]?u.L(h,p,l(g)?!!g.capture:!!g,D):hC(u,h,p,!0,g,D)}function pC(u,h,p,g,D){if(Array.isArray(h))for(var A=0;A<h.length;A++)pC(u,h[A],p,g,D);else g=l(g)?!!g.capture:!!g,p=cm(p),u&&u[uc]?(u=u.i,h=String(h).toString(),h in u.g&&(A=u.g[h],p=nm(A,p,g,D),-1<p&&(Al(A[p]),Array.prototype.splice.call(A,p,1),A.length==0&&(delete u.g[h],u.h--)))):u&&(u=om(u))&&(h=u.g[h.toString()],u=-1,h&&(u=nm(h,p,g,D)),(p=-1<u?h[u]:null)&&sm(p))}function sm(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[uc])tm(h.i,u);else{var p=u.type,g=u.proxy;h.removeEventListener?h.removeEventListener(p,g,u.capture):h.detachEvent?h.detachEvent(mC(p),g):h.addListener&&h.removeListener&&h.removeListener(g),(p=om(h))?(tm(p,u),p.h==0&&(p.src=null,h[rm]=null)):Al(u)}}}function mC(u){return u in im?im[u]:im[u]="on"+u}function gO(u,h){if(u.da)u=!0;else{h=new cc(h,this);var p=u.listener,g=u.ha||u.src;u.fa&&sm(u),u=p.call(g,h)}return u}function om(u){return u=u[rm],u instanceof Rl?u:null}var am="__closure_events_fn_"+(1e9*Math.random()>>>0);function cm(u){return typeof u=="function"?u:(u[am]||(u[am]=function(h){return u.handleEvent(h)}),u[am])}function Ct(){ii.call(this),this.i=new Rl(this),this.M=this,this.F=null}E(Ct,ii),Ct.prototype[uc]=!0,Ct.prototype.removeEventListener=function(u,h,p,g){pC(this,u,h,p,g)};function Ot(u,h){var p,g=u.F;if(g)for(p=[];g;g=g.F)p.push(g);if(u=u.M,g=h.type||h,typeof h=="string")h=new bt(h,u);else if(h instanceof bt)h.target=h.target||u;else{var D=h;h=new bt(g,u),b(h,D)}if(D=!0,p)for(var A=p.length-1;0<=A;A--){var L=h.g=p[A];D=xl(L,g,!0,h)&&D}if(L=h.g=u,D=xl(L,g,!0,h)&&D,D=xl(L,g,!1,h)&&D,p)for(A=0;A<p.length;A++)L=h.g=p[A],D=xl(L,g,!1,h)&&D}Ct.prototype.N=function(){if(Ct.aa.N.call(this),this.i){var u=this.i,h;for(h in u.g){for(var p=u.g[h],g=0;g<p.length;g++)Al(p[g]);delete u.g[h],u.h--}}this.F=null},Ct.prototype.K=function(u,h,p,g){return this.i.add(String(u),h,!1,p,g)},Ct.prototype.L=function(u,h,p,g){return this.i.add(String(u),h,!0,p,g)};function xl(u,h,p,g){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();for(var D=!0,A=0;A<h.length;++A){var L=h[A];if(L&&!L.da&&L.capture==p){var Le=L.listener,_t=L.ha||L.src;L.fa&&tm(u.i,L),D=Le.call(_t,g)!==!1&&D}}return D&&!g.defaultPrevented}function gC(u,h,p){if(typeof u=="function")p&&(u=m(u,p));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(u,h||0)}function yC(u){u.g=gC(()=>{u.g=null,u.i&&(u.i=!1,yC(u))},u.l);let h=u.h;u.h=null,u.m.apply(null,h)}class yO extends ii{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:yC(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lc(u){ii.call(this),this.h=u,this.g={}}E(lc,ii);var _C=[];function vC(u){re(u.g,function(h,p){this.g.hasOwnProperty(p)&&sm(h)},u),u.g={}}lc.prototype.N=function(){lc.aa.N.call(this),vC(this)},lc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var um=a.JSON.stringify,_O=a.JSON.parse,vO=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function lm(){}lm.prototype.h=null;function wC(u){return u.h||(u.h=u.i())}function IC(){}var dc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dm(){bt.call(this,"d")}E(dm,bt);function hm(){bt.call(this,"c")}E(hm,bt);var Xi={},EC=null;function Nl(){return EC=EC||new Ct}Xi.La="serverreachability";function bC(u){bt.call(this,Xi.La,u)}E(bC,bt);function hc(u){let h=Nl();Ot(h,new bC(h))}Xi.STAT_EVENT="statevent";function CC(u,h){bt.call(this,Xi.STAT_EVENT,u),this.stat=h}E(CC,bt);function Ft(u){let h=Nl();Ot(h,new CC(h,u))}Xi.Ma="timingevent";function TC(u,h){bt.call(this,Xi.Ma,u),this.size=h}E(TC,bt);function fc(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},h)}function pc(){this.g=!0}pc.prototype.xa=function(){this.g=!1};function wO(u,h,p,g,D,A){u.info(function(){if(u.g)if(A)for(var L="",Le=A.split("&"),_t=0;_t<Le.length;_t++){var Ce=Le[_t].split("=");if(1<Ce.length){var Tt=Ce[0];Ce=Ce[1];var Dt=Tt.split("_");L=2<=Dt.length&&Dt[1]=="type"?L+(Tt+"="+Ce+"&"):L+(Tt+"=redacted&")}}else L=null;else L=A;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+h+`
`+p+`
`+L})}function IO(u,h,p,g,D,A,L){u.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+h+`
`+p+`
`+A+" "+L})}function fo(u,h,p,g){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+bO(u,p)+(g?" "+g:"")})}function EO(u,h){u.info(function(){return"TIMEOUT: "+h})}pc.prototype.info=function(){};function bO(u,h){if(!u.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var g=p[u];if(!(2>g.length)){var D=g[1];if(Array.isArray(D)&&!(1>D.length)){var A=D[0];if(A!="noop"&&A!="stop"&&A!="close")for(var L=1;L<D.length;L++)D[L]=""}}}}return um(p)}catch{return h}}var Ml={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},DC={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fm;function Pl(){}E(Pl,lm),Pl.prototype.g=function(){return new XMLHttpRequest},Pl.prototype.i=function(){return{}},fm=new Pl;function si(u,h,p,g){this.j=u,this.i=h,this.l=p,this.R=g||1,this.U=new lc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new SC}function SC(){this.i=null,this.g="",this.h=!1}var AC={},pm={};function mm(u,h,p){u.L=1,u.v=Ll(Sr(h)),u.m=p,u.P=!0,RC(u,null)}function RC(u,h){u.F=Date.now(),kl(u),u.A=Sr(u.v);var p=u.A,g=u.R;Array.isArray(g)||(g=[String(g)]),HC(p.i,"t",g),u.C=0,p=u.j.J,u.h=new SC,u.g=a0(u.j,p?h:null,!u.m),0<u.O&&(u.M=new yO(m(u.Y,u,u.g),u.O)),h=u.U,p=u.g,g=u.ca;var D="readystatechange";Array.isArray(D)||(D&&(_C[0]=D.toString()),D=_C);for(var A=0;A<D.length;A++){var L=dC(p,D[A],g||h.handleEvent,!1,h.h||h);if(!L)break;h.g[L.key]=L}h=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,h)):(u.u="GET",u.g.ea(u.A,u.u,null,h)),hc(),wO(u.i,u.u,u.A,u.l,u.R,u.m)}si.prototype.ca=function(u){u=u.target;let h=this.M;h&&Ar(u)==3?h.j():this.Y(u)},si.prototype.Y=function(u){try{if(u==this.g)e:{let Dt=Ar(this.g);var h=this.g.Ba();let go=this.g.Z();if(!(3>Dt)&&(Dt!=3||this.g&&(this.h.h||this.g.oa()||YC(this.g)))){this.J||Dt!=4||h==7||(h==8||0>=go?hc(3):hc(2)),gm(this);var p=this.g.Z();this.X=p;t:if(xC(this)){var g=YC(this.g);u="";var D=g.length,A=Ar(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zi(this),mc(this);var L="";break t}this.h.i=new a.TextDecoder}for(h=0;h<D;h++)this.h.h=!0,u+=this.h.i.decode(g[h],{stream:!(A&&h==D-1)});g.length=0,this.h.g+=u,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=p==200,IO(this.i,this.u,this.A,this.l,this.R,Dt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Le,_t=this.g;if((Le=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(Le)){var Ce=Le;break t}}Ce=null}if(p=Ce)fo(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ym(this,p);else{this.o=!1,this.s=3,Ft(12),Zi(this),mc(this);break e}}if(this.P){p=!0;let Nn;for(;!this.J&&this.C<L.length;)if(Nn=CO(this,L),Nn==pm){Dt==4&&(this.s=4,Ft(14),p=!1),fo(this.i,this.l,null,"[Incomplete Response]");break}else if(Nn==AC){this.s=4,Ft(15),fo(this.i,this.l,L,"[Invalid Chunk]"),p=!1;break}else fo(this.i,this.l,Nn,null),ym(this,Nn);if(xC(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||L.length!=0||this.h.h||(this.s=1,Ft(16),p=!1),this.o=this.o&&p,!p)fo(this.i,this.l,L,"[Invalid Chunked Response]"),Zi(this),mc(this);else if(0<L.length&&!this.W){this.W=!0;var Tt=this.j;Tt.g==this&&Tt.ba&&!Tt.M&&(Tt.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),bm(Tt),Tt.M=!0,Ft(11))}}else fo(this.i,this.l,L,null),ym(this,L);Dt==4&&Zi(this),this.o&&!this.J&&(Dt==4?r0(this.j,this):(this.o=!1,kl(this)))}else BO(this.g),p==400&&0<L.indexOf("Unknown SID")?(this.s=3,Ft(12)):(this.s=0,Ft(13)),Zi(this),mc(this)}}}catch{}finally{}};function xC(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function CO(u,h){var p=u.C,g=h.indexOf(`
`,p);return g==-1?pm:(p=Number(h.substring(p,g)),isNaN(p)?AC:(g+=1,g+p>h.length?pm:(h=h.slice(g,g+p),u.C=g+p,h)))}si.prototype.cancel=function(){this.J=!0,Zi(this)};function kl(u){u.S=Date.now()+u.I,NC(u,u.I)}function NC(u,h){if(u.B!=null)throw Error("WatchDog timer not null");u.B=fc(m(u.ba,u),h)}function gm(u){u.B&&(a.clearTimeout(u.B),u.B=null)}si.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(EO(this.i,this.A),this.L!=2&&(hc(),Ft(17)),Zi(this),this.s=2,mc(this)):NC(this,this.S-u)};function mc(u){u.j.G==0||u.J||r0(u.j,u)}function Zi(u){gm(u);var h=u.M;h&&typeof h.ma=="function"&&h.ma(),u.M=null,vC(u.U),u.g&&(h=u.g,u.g=null,h.abort(),h.ma())}function ym(u,h){try{var p=u.j;if(p.G!=0&&(p.g==u||_m(p.h,u))){if(!u.K&&_m(p.h,u)&&p.G==3){try{var g=p.Da.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)$l(p),jl(p);else break e;Em(p),Ft(18)}}else p.za=D[1],0<p.za-p.T&&37500>D[2]&&p.F&&p.v==0&&!p.C&&(p.C=fc(m(p.Za,p),6e3));if(1>=kC(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else ts(p,11)}else if((u.K||p.g==u)&&$l(p),!q(h))for(D=p.Da.g.parse(h),h=0;h<D.length;h++){let Ce=D[h];if(p.T=Ce[0],Ce=Ce[1],p.G==2)if(Ce[0]=="c"){p.K=Ce[1],p.ia=Ce[2];let Tt=Ce[3];Tt!=null&&(p.la=Tt,p.j.info("VER="+p.la));let Dt=Ce[4];Dt!=null&&(p.Aa=Dt,p.j.info("SVER="+p.Aa));let go=Ce[5];go!=null&&typeof go=="number"&&0<go&&(g=1.5*go,p.L=g,p.j.info("backChannelRequestTimeoutMs_="+g)),g=p;let Nn=u.g;if(Nn){let ql=Nn.g?Nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ql){var A=g.h;A.g||ql.indexOf("spdy")==-1&&ql.indexOf("quic")==-1&&ql.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(vm(A,A.h),A.h=null))}if(g.D){let Cm=Nn.g?Nn.g.getResponseHeader("X-HTTP-Session-Id"):null;Cm&&(g.ya=Cm,Ge(g.I,g.D,Cm))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),g=p;var L=u;if(g.qa=o0(g,g.J?g.ia:null,g.W),L.K){OC(g.h,L);var Le=L,_t=g.L;_t&&(Le.I=_t),Le.B&&(gm(Le),kl(Le)),g.g=L}else t0(g);0<p.i.length&&Bl(p)}else Ce[0]!="stop"&&Ce[0]!="close"||ts(p,7);else p.G==3&&(Ce[0]=="stop"||Ce[0]=="close"?Ce[0]=="stop"?ts(p,7):Im(p):Ce[0]!="noop"&&p.l&&p.l.ta(Ce),p.v=0)}}hc(4)}catch{}}var TO=class{constructor(u,h){this.g=u,this.map=h}};function MC(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function PC(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function kC(u){return u.h?1:u.g?u.g.size:0}function _m(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function vm(u,h){u.g?u.g.add(h):u.h=h}function OC(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}MC.prototype.cancel=function(){if(this.i=FC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function FC(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let h=u.i;for(let p of u.g.values())h=h.concat(p.D);return h}return x(u.i)}function DO(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var h=[],p=u.length,g=0;g<p;g++)h.push(u[g]);return h}h=[],p=0;for(g in u)h[p++]=u[g];return h}function SO(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var h=[];u=u.length;for(var p=0;p<u;p++)h.push(p);return h}h=[],p=0;for(let g in u)h[p++]=g;return h}}}function LC(u,h){if(u.forEach&&typeof u.forEach=="function")u.forEach(h,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,h,void 0);else for(var p=SO(u),g=DO(u),D=g.length,A=0;A<D;A++)h.call(void 0,g[A],p&&p[A],u)}var VC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function AO(u,h){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var g=u[p].indexOf("="),D=null;if(0<=g){var A=u[p].substring(0,g);D=u[p].substring(g+1)}else A=u[p];h(A,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function es(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof es){this.h=u.h,Ol(this,u.j),this.o=u.o,this.g=u.g,Fl(this,u.s),this.l=u.l;var h=u.i,p=new _c;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),UC(this,p),this.m=u.m}else u&&(h=String(u).match(VC))?(this.h=!1,Ol(this,h[1]||"",!0),this.o=gc(h[2]||""),this.g=gc(h[3]||"",!0),Fl(this,h[4]),this.l=gc(h[5]||"",!0),UC(this,h[6]||"",!0),this.m=gc(h[7]||"")):(this.h=!1,this.i=new _c(null,this.h))}es.prototype.toString=function(){var u=[],h=this.j;h&&u.push(yc(h,jC,!0),":");var p=this.g;return(p||h=="file")&&(u.push("//"),(h=this.o)&&u.push(yc(h,jC,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(yc(p,p.charAt(0)=="/"?NO:xO,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",yc(p,PO)),u.join("")};function Sr(u){return new es(u)}function Ol(u,h,p){u.j=p?gc(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function Fl(u,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);u.s=h}else u.s=null}function UC(u,h,p){h instanceof _c?(u.i=h,kO(u.i,u.h)):(p||(h=yc(h,MO)),u.i=new _c(h,u.h))}function Ge(u,h,p){u.i.set(h,p)}function Ll(u){return Ge(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function gc(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function yc(u,h,p){return typeof u=="string"?(u=encodeURI(u).replace(h,RO),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function RO(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var jC=/[#\/\?@]/g,xO=/[#\?:]/g,NO=/[#\?]/g,MO=/[#\?@]/g,PO=/#/g;function _c(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function oi(u){u.g||(u.g=new Map,u.h=0,u.i&&AO(u.i,function(h,p){u.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=_c.prototype,t.add=function(u,h){oi(this),this.i=null,u=po(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(h),this.h+=1,this};function BC(u,h){oi(u),h=po(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function $C(u,h){return oi(u),h=po(u,h),u.g.has(h)}t.forEach=function(u,h){oi(this),this.g.forEach(function(p,g){p.forEach(function(D){u.call(h,D,g,this)},this)},this)},t.na=function(){oi(this);let u=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let g=0;g<h.length;g++){let D=u[g];for(let A=0;A<D.length;A++)p.push(h[g])}return p},t.V=function(u){oi(this);let h=[];if(typeof u=="string")$C(this,u)&&(h=h.concat(this.g.get(po(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)h=h.concat(u[p])}return h},t.set=function(u,h){return oi(this),this.i=null,u=po(this,u),$C(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},t.get=function(u,h){return u?(u=this.V(u),0<u.length?String(u[0]):h):h};function HC(u,h,p){BC(u,h),0<p.length&&(u.i=null,u.g.set(po(u,h),x(p)),u.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var g=h[p];let A=encodeURIComponent(String(g)),L=this.V(g);for(g=0;g<L.length;g++){var D=A;L[g]!==""&&(D+="="+encodeURIComponent(String(L[g]))),u.push(D)}}return this.i=u.join("&")};function po(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function kO(u,h){h&&!u.j&&(oi(u),u.i=null,u.g.forEach(function(p,g){var D=g.toLowerCase();g!=D&&(BC(this,g),HC(this,D,p))},u)),u.j=h}function OO(u,h){let p=new pc;if(a.Image){let g=new Image;g.onload=y(ai,p,"TestLoadImage: loaded",!0,h,g),g.onerror=y(ai,p,"TestLoadImage: error",!1,h,g),g.onabort=y(ai,p,"TestLoadImage: abort",!1,h,g),g.ontimeout=y(ai,p,"TestLoadImage: timeout",!1,h,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=u}else h(!1)}function FO(u,h){let p=new pc,g=new AbortController,D=setTimeout(()=>{g.abort(),ai(p,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:g.signal}).then(A=>{clearTimeout(D),A.ok?ai(p,"TestPingServer: ok",!0,h):ai(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),ai(p,"TestPingServer: error",!1,h)})}function ai(u,h,p,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(p)}catch{}}function LO(){this.g=new vO}function VO(u,h,p){let g=p||"";try{LC(u,function(D,A){let L=D;l(D)&&(L=um(D)),h.push(g+A+"="+encodeURIComponent(L))})}catch(D){throw h.push(g+"type="+encodeURIComponent("_badmap")),D}}function vc(u){this.l=u.Ub||null,this.j=u.eb||!1}E(vc,lm),vc.prototype.g=function(){return new Vl(this.l,this.j)},vc.prototype.i=function(u){return function(){return u}}({});function Vl(u,h){Ct.call(this),this.D=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(Vl,Ct),t=Vl.prototype,t.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=h,this.readyState=1,Ic(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(h.body=u),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,wc(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ic(this)),this.g&&(this.readyState=3,Ic(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qC(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function qC(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?wc(this):Ic(this),this.readyState==3&&qC(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,wc(this))},t.Qa=function(u){this.g&&(this.response=u,wc(this))},t.ga=function(){this.g&&wc(this)};function wc(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ic(u)}t.setRequestHeader=function(u,h){this.u.append(u,h)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=h.next();return u.join(`\r
`)};function Ic(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Vl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function GC(u){let h="";return re(u,function(p,g){h+=g,h+=":",h+=p,h+=`\r
`}),h}function wm(u,h,p){e:{for(g in p){var g=!1;break e}g=!0}g||(p=GC(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Ge(u,h,p))}function Qe(u){Ct.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Qe,Ct);var UO=/^https?$/i,jO=["POST","PUT"];t=Qe.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,h,p,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fm.g(),this.v=this.o?wC(this.o):wC(fm),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(A){zC(this,A);return}if(u=p||"",p=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)p.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())p.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(p.keys()).find(A=>A.toLowerCase()=="content-type"),D=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(jO,h,void 0))||g||D||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,L]of p)this.g.setRequestHeader(A,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{QC(this),this.u=!0,this.g.send(u),this.u=!1}catch(A){zC(this,A)}};function zC(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.m=5,WC(u),Ul(u)}function WC(u){u.A||(u.A=!0,Ot(u,"complete"),Ot(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ot(this,"complete"),Ot(this,"abort"),Ul(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ul(this,!0)),Qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?KC(this):this.bb())},t.bb=function(){KC(this)};function KC(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Ar(u)!=4||u.Z()!=2)){if(u.u&&Ar(u)==4)gC(u.Ea,0,u);else if(Ot(u,"readystatechange"),Ar(u)==4){u.h=!1;try{let L=u.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var g;if(g=L===0){var D=String(u.D).match(VC)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),g=!UO.test(D?D.toLowerCase():"")}p=g}if(p)Ot(u,"complete"),Ot(u,"success");else{u.m=6;try{var A=2<Ar(u)?u.g.statusText:""}catch{A=""}u.l=A+" ["+u.Z()+"]",WC(u)}}finally{Ul(u)}}}}function Ul(u,h){if(u.g){QC(u);let p=u.g,g=u.v[0]?()=>{}:null;u.g=null,u.v=null,h||Ot(u,"ready");try{p.onreadystatechange=g}catch{}}}function QC(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Ar(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Ar(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),_O(h)}};function YC(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function BO(u){let h={};u=(u.g&&2<=Ar(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<u.length;g++){if(q(u[g]))continue;var p=T(u[g]);let D=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let A=h[D]||[];h[D]=A,A.push(p)}C(h,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ec(u,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||h}function JC(u){this.Aa=0,this.i=[],this.j=new pc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ec("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ec("baseRetryDelayMs",5e3,u),this.cb=Ec("retryDelaySeedMs",1e4,u),this.Wa=Ec("forwardChannelMaxRetries",2,u),this.wa=Ec("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new MC(u&&u.concurrentRequestLimit),this.Da=new LO,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=JC.prototype,t.la=8,t.G=1,t.connect=function(u,h,p,g){Ft(0),this.W=u,this.H=h||{},p&&g!==void 0&&(this.H.OSID=p,this.H.OAID=g),this.F=this.X,this.I=o0(this,null,this.W),Bl(this)};function Im(u){if(XC(u),u.G==3){var h=u.U++,p=Sr(u.I);if(Ge(p,"SID",u.K),Ge(p,"RID",h),Ge(p,"TYPE","terminate"),bc(u,p),h=new si(u,u.j,h),h.L=2,h.v=Ll(Sr(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=a0(h.j,null),h.g.ea(h.v)),h.F=Date.now(),kl(h)}s0(u)}function jl(u){u.g&&(bm(u),u.g.cancel(),u.g=null)}function XC(u){jl(u),u.u&&(a.clearTimeout(u.u),u.u=null),$l(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Bl(u){if(!PC(u.h)&&!u.s){u.s=!0;var h=u.Ga;oc||lC(),ac||(oc(),ac=!0),em.add(h,u),u.B=0}}function $O(u,h){return kC(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=h.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=fc(m(u.Ga,u,h),i0(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let D=new si(this,this.j,u),A=this.o;if(this.S&&(A?(A=_(A),b(A,this.S)):A=this.S),this.m!==null||this.O||(D.H=A,A=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var g=this.i[p];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(h+=g,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=e0(this,D,h),p=Sr(this.I),Ge(p,"RID",u),Ge(p,"CVER",22),this.D&&Ge(p,"X-HTTP-Session-Id",this.D),bc(this,p),A&&(this.O?h="headers="+encodeURIComponent(String(GC(A)))+"&"+h:this.m&&wm(p,this.m,A)),vm(this.h,D),this.Ua&&Ge(p,"TYPE","init"),this.P?(Ge(p,"$req",h),Ge(p,"SID","null"),D.T=!0,mm(D,p,null)):mm(D,p,h),this.G=2}}else this.G==3&&(u?ZC(this,u):this.i.length==0||PC(this.h)||ZC(this))};function ZC(u,h){var p;h?p=h.l:p=u.U++;let g=Sr(u.I);Ge(g,"SID",u.K),Ge(g,"RID",p),Ge(g,"AID",u.T),bc(u,g),u.m&&u.o&&wm(g,u.m,u.o),p=new si(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),h&&(u.i=h.D.concat(u.i)),h=e0(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),vm(u.h,p),mm(p,g,h)}function bc(u,h){u.H&&re(u.H,function(p,g){Ge(h,g,p)}),u.l&&LC({},function(p,g){Ge(h,g,p)})}function e0(u,h,p){p=Math.min(u.i.length,p);var g=u.l?m(u.l.Na,u.l,u):null;e:{var D=u.i;let A=-1;for(;;){let L=["count="+p];A==-1?0<p?(A=D[0].g,L.push("ofs="+A)):A=0:L.push("ofs="+A);let Le=!0;for(let _t=0;_t<p;_t++){let Ce=D[_t].g,Tt=D[_t].map;if(Ce-=A,0>Ce)A=Math.max(0,D[_t].g-100),Le=!1;else try{VO(Tt,L,"req"+Ce+"_")}catch{g&&g(Tt)}}if(Le){g=L.join("&");break e}}}return u=u.i.splice(0,p),h.D=u,g}function t0(u){if(!u.g&&!u.u){u.Y=1;var h=u.Fa;oc||lC(),ac||(oc(),ac=!0),em.add(h,u),u.v=0}}function Em(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=fc(m(u.Fa,u),i0(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,n0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=fc(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ft(10),jl(this),n0(this))};function bm(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function n0(u){u.g=new si(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var h=Sr(u.qa);Ge(h,"RID","rpc"),Ge(h,"SID",u.K),Ge(h,"AID",u.T),Ge(h,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ge(h,"TO",u.ja),Ge(h,"TYPE","xmlhttp"),bc(u,h),u.m&&u.o&&wm(h,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=Ll(Sr(h)),p.m=null,p.P=!0,RC(p,u)}t.Za=function(){this.C!=null&&(this.C=null,jl(this),Em(this),Ft(19))};function $l(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function r0(u,h){var p=null;if(u.g==h){$l(u),bm(u),u.g=null;var g=2}else if(_m(u.h,h))p=h.D,OC(u.h,h),g=1;else return;if(u.G!=0){if(h.o)if(g==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var D=u.B;g=Nl(),Ot(g,new TC(g,p)),Bl(u)}else t0(u);else if(D=h.s,D==3||D==0&&0<h.X||!(g==1&&$O(u,h)||g==2&&Em(u)))switch(p&&0<p.length&&(h=u.h,h.i=h.i.concat(p)),D){case 1:ts(u,5);break;case 4:ts(u,10);break;case 3:ts(u,6);break;default:ts(u,2)}}}function i0(u,h){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*h}function ts(u,h){if(u.j.info("Error code "+h),h==2){var p=m(u.fb,u),g=u.Xa;let D=!g;g=new es(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ol(g,"https"),Ll(g),D?OO(g.toString(),p):FO(g.toString(),p)}else Ft(2);u.G=0,u.l&&u.l.sa(h),s0(u),XC(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function s0(u){if(u.G=0,u.ka=[],u.l){let h=FC(u.h);(h.length!=0||u.i.length!=0)&&(R(u.ka,h),R(u.ka,u.i),u.h.i.length=0,x(u.i),u.i.length=0),u.l.ra()}}function o0(u,h,p){var g=p instanceof es?Sr(p):new es(p);if(g.g!="")h&&(g.g=h+"."+g.g),Fl(g,g.s);else{var D=a.location;g=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;var A=new es(null);g&&Ol(A,g),h&&(A.g=h),D&&Fl(A,D),p&&(A.l=p),g=A}return p=u.D,h=u.ya,p&&h&&Ge(g,p,h),Ge(g,"VER",u.la),bc(u,g),g}function a0(u,h,p){if(h&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Ca&&!u.pa?new Qe(new vc({eb:p})):new Qe(u.pa),h.Ha(u.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function c0(){}t=c0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Hl(){}Hl.prototype.g=function(u,h){return new nn(u,h)};function nn(u,h){Ct.call(this),this.g=new JC(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(u?u["X-WebChannel-Client-Profile"]=h.va:u={"X-WebChannel-Client-Profile":h.va}),this.g.S=u,(u=h&&h.Sb)&&!q(u)&&(this.g.m=u),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!q(h)&&(this.g.D=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new mo(this)}E(nn,Ct),nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){Im(this.g)},nn.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=um(u),u=p);h.i.push(new TO(h.Ya++,u)),h.G==3&&Bl(h)},nn.prototype.N=function(){this.g.l=null,delete this.j,Im(this.g),delete this.g,nn.aa.N.call(this)};function u0(u){dm.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(let p in h){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}E(u0,dm);function l0(){hm.call(this),this.status=1}E(l0,hm);function mo(u){this.g=u}E(mo,c0),mo.prototype.ua=function(){Ot(this.g,"a")},mo.prototype.ta=function(u){Ot(this.g,new u0(u))},mo.prototype.sa=function(u){Ot(this.g,new l0)},mo.prototype.ra=function(){Ot(this.g,"b")},Hl.prototype.createWebChannel=Hl.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,dw=Wr.createWebChannelTransport=function(){return new Hl},lw=Wr.getStatEventTarget=function(){return Nl()},uw=Wr.Event=Xi,bf=Wr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ml.NO_ERROR=0,Ml.TIMEOUT=8,Ml.HTTP_ERROR=6,xu=Wr.ErrorCode=Ml,DC.COMPLETE="complete",cw=Wr.EventType=DC,IC.EventType=dc,dc.OPEN="a",dc.CLOSE="b",dc.ERROR="c",dc.MESSAGE="d",Ct.prototype.listen=Ct.prototype.K,pa=Wr.WebChannel=IC,aw=Wr.FetchXmlHttpFactory=vc,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,ow=Wr.XhrIo=Qe}).apply(typeof Ef<"u"?Ef:typeof self<"u"?self:typeof window<"u"?window:{});var Dx="@firebase/firestore";var yt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");var Ma="10.12.1";var Ks=new ur("@firebase/firestore");function Nu(){return Ks.logLevel}function H(t,...e){if(Ks.logLevel<=pe.DEBUG){let n=e.map(YI);Ks.debug(`Firestore (${Ma}): ${t}`,...n)}}function Kr(t,...e){if(Ks.logLevel<=pe.ERROR){let n=e.map(YI);Ks.error(`Firestore (${Ma}): ${t}`,...n)}}function wa(t,...e){if(Ks.logLevel<=pe.WARN){let n=e.map(YI);Ks.warn(`Firestore (${Ma}): ${t}`,...n)}}function YI(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function ne(t="Unexpected state"){let e=`FIRESTORE (${Ma}) INTERNAL ASSERTION FAILED: `+t;throw Kr(e),new Error(e)}function He(t,e){t||ne()}function oe(t,e){return t}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},K=class extends Ht{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var _r=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Af=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},gw=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yt.UNAUTHENTICATED))}shutdown(){}},yw=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},_w=class{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new _r;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new _r,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>v(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new _r)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(He(typeof r.accessToken=="string"),new Af(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string"),new yt(e)}},vw=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},ww=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new vw(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Iw=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Ew=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(He(typeof n.token=="string"),this.R=n.token,new Iw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function OG(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Rf=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=OG(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function Ae(t,e){return t<e?-1:t>e?1:0}function Ia(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var It=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ae=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new It(0,0))}static max(){return new t(new It(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var xf=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(),r===void 0?r=e.length-n:r>e.length-n&&ne(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},ct=class t extends xf{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new K(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},FG=/^[_a-zA-Z][_a-zA-Z0-9]*$/,gn=class t extends xf{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return FG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new K(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new K(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new K(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new K(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var Y=class t{constructor(e){this.path=e}static fromPath(e){return new t(ct.fromString(e))}static fromName(e){return new t(ct.fromString(e).popFirst(5))}static empty(){return new t(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ct.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new ct(e.slice()))}};var bw=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};bw.UNKNOWN_ID=-1;function LG(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new It(n+1,0):new It(n,r));return new Qs(i,Y.empty(),e)}function VG(t){return new Qs(t.readTime,t.key,-1)}var Qs=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ae.min(),Y.empty(),-1)}static max(){return new t(ae.max(),Y.empty(),-1)}};function UG(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:Ae(t.largestBatchId,e.largestBatchId))}var jG="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Cw=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ju(t){return v(this,null,function*(){if(t.code!==P.FAILED_PRECONDITION||t.message!==jG)throw t;H("LocalStore","Unexpectedly lost primary lease")})}var O=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;n(e[l]).next(d=>{o[l]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function BG(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Xu(t){return t.name==="IndexedDbTransactionError"}var Zx=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function rp(t){return t==null}function Lu(t){return t===0&&1/t==-1/0}function $G(t){return typeof t=="number"&&Number.isInteger(t)&&!Lu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var HG=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Cte=[...HG,"documentOverlays"],qG=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],GG=qG,Tte=[...GG,"indexConfiguration","indexState","indexEntries"];function Sx(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Pa(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function eN(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var et=class t{constructor(e,n){this.comparator=e,this.root=n||vr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,vr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _a(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _a(this.root,e,this.comparator,!1)}getReverseIterator(){return new _a(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _a(this.root,e,this.comparator,!0)}},_a=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},vr=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ne();let e=this.left.check();if(e!==this.right.check())throw ne();return e+(this.isRed()?0:1)}};vr.EMPTY=null,vr.RED=!0,vr.BLACK=!1;vr.EMPTY=new class{constructor(){this.size=0}get key(){throw ne()}get value(){throw ne()}get color(){throw ne()}get left(){throw ne()}get right(){throw ne()}copy(e,n,r,i,s){return this}insert(e,n,r){return new vr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Pt=class t{constructor(e){this.comparator=e,this.data=new et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Nf(this.data.getIterator())}getIteratorFrom(e){return new Nf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Nf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var yr=class t{constructor(e){this.fields=e,e.sort(gn.comparator)}static empty(){return new t([])}unionWith(e){let n=new Pt(gn.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ia(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Mf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var qt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Mf("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};qt.EMPTY_BYTE_STRING=new qt("");var zG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qr(t){if(He(!!t),typeof t=="string"){let e=0,n=zG.exec(t);if(He(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ze(t.seconds),nanos:Ze(t.nanos)}}function Ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function qi(t){return typeof t=="string"?qt.fromBase64String(t):qt.fromUint8Array(t)}function JI(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function XI(t){let e=t.mapValue.fields.__previous_value__;return JI(e)?XI(e):e}function Vu(t){let e=Qr(t.mapValue.fields.__local_write_time__.timestampValue);return new It(e.seconds,e.nanos)}var Tw=class{constructor(e,n,r,i,s,o,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Pf=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Cf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ys(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?JI(t)?4:tN(t)?9007199254740991:10:ne()}function Er(t,e){if(t===e)return!0;let n=Ys(t);if(n!==Ys(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Vu(t).isEqual(Vu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Qr(i.timestampValue),a=Qr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return qi(i.bytesValue).isEqual(qi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ze(i.geoPointValue.latitude)===Ze(s.geoPointValue.latitude)&&Ze(i.geoPointValue.longitude)===Ze(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ze(i.integerValue)===Ze(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ze(i.doubleValue),a=Ze(s.doubleValue);return o===a?Lu(o)===Lu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ia(t.arrayValue.values||[],e.arrayValue.values||[],Er);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Sx(o)!==Sx(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Er(o[c],a[c])))return!1;return!0}(t,e);default:return ne()}}function Uu(t,e){return(t.values||[]).find(n=>Er(n,e))!==void 0}function Ea(t,e){if(t===e)return 0;let n=Ys(t),r=Ys(e);if(n!==r)return Ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ae(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Ze(s.integerValue||s.doubleValue),c=Ze(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return Ax(t.timestampValue,e.timestampValue);case 4:return Ax(Vu(t),Vu(e));case 5:return Ae(t.stringValue,e.stringValue);case 6:return function(s,o){let a=qi(s),c=qi(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=Ae(a[l],c[l]);if(d!==0)return d}return Ae(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=Ae(Ze(s.latitude),Ze(o.latitude));return a!==0?a:Ae(Ze(s.longitude),Ze(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){let d=Ea(a[l],c[l]);if(d)return d}return Ae(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Cf.mapValue&&o===Cf.mapValue)return 0;if(s===Cf.mapValue)return 1;if(o===Cf.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let m=Ae(c[f],d[f]);if(m!==0)return m;let y=Ea(a[c[f]],l[d[f]]);if(y!==0)return y}return Ae(c.length,d.length)}(t.mapValue,e.mapValue);default:throw ne()}}function Ax(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ae(t,e);let n=Qr(t),r=Qr(e),i=Ae(n.seconds,r.seconds);return i!==0?i:Ae(n.nanos,r.nanos)}function ba(t){return Dw(t)}function Dw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Qr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return qi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=Dw(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Dw(n.fields[o])}`;return i+"}"}(t.mapValue):ne()}function Sw(t){return!!t&&"integerValue"in t}function ZI(t){return!!t&&"arrayValue"in t}function Rx(t){return!!t&&"nullValue"in t}function xx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Df(t){return!!t&&"mapValue"in t}function Pu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Pa(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Pu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Pu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function tN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Hn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Df(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pu(n)}setAll(e){let n=gn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Pu(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Df(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Er(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Df(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Pa(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Pu(this.value))}};function nN(t){let e=[];return Pa(t.fields,(n,r)=>{let i=new gn([n]);if(Df(r)){let s=nN(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new yr(e)}var qn=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ae.min(),ae.min(),ae.min(),Hn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ae.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ae.min(),ae.min(),Hn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ae.min(),ae.min(),Hn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ca=class{constructor(e,n){this.position=e,this.inclusive=n}};function Nx(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=Ea(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Mx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Er(t.position[n],e.position[n]))return!1;return!0}var Ta=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function WG(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var kf=class{},mt=class t extends kf{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Rw(e,n,r):n==="array-contains"?new Mw(e,r):n==="in"?new Pw(e,r):n==="not-in"?new kw(e,r):n==="array-contains-any"?new Ow(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new xw(e,r):new Nw(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ea(n,this.value)):n!==null&&Ys(this.value)===Ys(n)&&this.matchesComparison(Ea(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},br=class t extends kf{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return rN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function rN(t){return t.op==="and"}function iN(t){return KG(t)&&rN(t)}function KG(t){for(let e of t.filters)if(e instanceof br)return!1;return!0}function Aw(t){if(t instanceof mt)return t.field.canonicalString()+t.op.toString()+ba(t.value);if(iN(t))return t.filters.map(e=>Aw(e)).join(",");{let e=t.filters.map(n=>Aw(n)).join(",");return`${t.op}(${e})`}}function sN(t,e){return t instanceof mt?function(r,i){return i instanceof mt&&r.op===i.op&&r.field.isEqual(i.field)&&Er(r.value,i.value)}(t,e):t instanceof br?function(r,i){return i instanceof br&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&sN(o,i.filters[a]),!0):!1}(t,e):void ne()}function oN(t){return t instanceof mt?function(n){return`${n.field.canonicalString()} ${n.op} ${ba(n.value)}`}(t):t instanceof br?function(n){return n.op.toString()+" {"+n.getFilters().map(oN).join(" ,")+"}"}(t):"Filter"}var Rw=class extends mt{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){let n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}},xw=class extends mt{constructor(e,n){super(e,"in",n),this.keys=aN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Nw=class extends mt{constructor(e,n){super(e,"not-in",n),this.keys=aN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function aN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}var Mw=class extends mt{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return ZI(n)&&Uu(n.arrayValue,this.value)}},Pw=class extends mt{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Uu(this.value.arrayValue,n)}},kw=class extends mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Uu(this.value.arrayValue,n)}},Ow=class extends mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!ZI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Uu(this.value.arrayValue,r))}};var Fw=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function Px(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Fw(t,e,n,r,i,s,o)}function eE(t){let e=oe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Aw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),rp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ba(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ba(r)).join(",")),e.ue=n}return e.ue}function tE(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!WG(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!sN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Mx(t.startAt,e.startAt)&&Mx(t.endAt,e.endAt)}function Lw(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Da=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function QG(t,e,n,r,i,s,o,a){return new Da(t,e,n,r,i,s,o,a)}function nE(t){return new Da(t)}function kx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function YG(t){return t.collectionGroup!==null}function ku(t){let e=oe(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Pt(gn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ta(s,r))}),n.has(gn.keyField().canonicalString())||e.ce.push(new Ta(gn.keyField(),r))}return e.ce}function wr(t){let e=oe(t);return e.le||(e.le=JG(e,ku(t))),e.le}function JG(t,e){if(t.limitType==="F")return Px(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Ta(i.field,s)});let n=t.endAt?new Ca(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ca(t.startAt.position,t.startAt.inclusive):null;return Px(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Vw(t,e,n){return new Da(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ip(t,e){return tE(wr(t),wr(e))&&t.limitType===e.limitType}function cN(t){return`${eE(wr(t))}|lt:${t.limitType}`}function ma(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>oN(i)).join(", ")}]`),rp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ba(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ba(i)).join(",")),`Target(${r})`}(wr(t))}; limitType=${t.limitType})`}function sp(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Y.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of ku(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=Nx(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,ku(r),i)||r.endAt&&!function(o,a,c){let l=Nx(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,ku(r),i))}(t,e)}function XG(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function uN(t){return(e,n)=>{let r=!1;for(let i of ku(t)){let s=ZG(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function ZG(t,e,n){let r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Ea(c,l):ne()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne()}}var Gi=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Pa(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return eN(this.inner)}size(){return this.innerSize}};var ez=new et(Y.comparator);function Yr(){return ez}var lN=new et(Y.comparator);function Mu(...t){let e=lN;for(let n of t)e=e.insert(n.key,n);return e}function dN(t){let e=lN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Gs(){return Ou()}function hN(){return Ou()}function Ou(){return new Gi(t=>t.toString(),(t,e)=>t.isEqual(e))}var tz=new et(Y.comparator),nz=new Pt(Y.comparator);function we(...t){let e=nz;for(let n of t)e=e.add(n);return e}var rz=new Pt(Ae);function iz(){return rz}function fN(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lu(e)?"-0":e}}function pN(t){return{integerValue:""+t}}function sz(t,e){return $G(e)?pN(e):fN(t,e)}var Sa=class{constructor(){this._=void 0}};function oz(t,e,n){return t instanceof Aa?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&JI(s)&&(s=XI(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Js?gN(t,e):t instanceof Xs?yN(t,e):function(i,s){let o=mN(i,s),a=Ox(o)+Ox(i.Pe);return Sw(o)&&Sw(i.Pe)?pN(a):fN(i.serializer,a)}(t,e)}function az(t,e,n){return t instanceof Js?gN(t,e):t instanceof Xs?yN(t,e):n}function mN(t,e){return t instanceof Ra?function(r){return Sw(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Aa=class extends Sa{},Js=class extends Sa{constructor(e){super(),this.elements=e}};function gN(t,e){let n=_N(e);for(let r of t.elements)n.some(i=>Er(i,r))||n.push(r);return{arrayValue:{values:n}}}var Xs=class extends Sa{constructor(e){super(),this.elements=e}};function yN(t,e){let n=_N(e);for(let r of t.elements)n=n.filter(i=>!Er(i,r));return{arrayValue:{values:n}}}var Ra=class extends Sa{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function Ox(t){return Ze(t.integerValue||t.doubleValue)}function _N(t){return ZI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function cz(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Js&&i instanceof Js||r instanceof Xs&&i instanceof Xs?Ia(r.elements,i.elements,Er):r instanceof Ra&&i instanceof Ra?Er(r.Pe,i.Pe):r instanceof Aa&&i instanceof Aa}(t.transform,e.transform)}var Uw=class{constructor(e,n){this.version=e,this.transformResults=n}},Ws=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Sf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var xa=class{};function vN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Of(t.key,Ws.none()):new Zs(t.key,t.data,Ws.none());{let n=t.data,r=Hn.empty(),i=new Pt(gn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Jr(t.key,r,new yr(i.toArray()),Ws.none())}}function uz(t,e,n){t instanceof Zs?function(i,s,o){let a=i.value.clone(),c=Lx(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Jr?function(i,s,o){if(!Sf(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=Lx(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(wN(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Fu(t,e,n,r){return t instanceof Zs?function(s,o,a,c){if(!Sf(s.precondition,o))return a;let l=s.value.clone(),d=Vx(s.fieldTransforms,c,o);return l.setAll(d),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Jr?function(s,o,a,c){if(!Sf(s.precondition,o))return a;let l=Vx(s.fieldTransforms,c,o),d=o.data;return d.setAll(wN(s)),d.setAll(l),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return Sf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function lz(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=mN(r.transform,i||null);s!=null&&(n===null&&(n=Hn.empty()),n.set(r.field,s))}return n||null}function Fx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ia(r,i,(s,o)=>cz(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Zs=class extends xa{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Jr=class extends xa{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function wN(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function Lx(t,e,n){let r=new Map;He(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,az(o,a,n[i]))}return r}function Vx(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,oz(s,o,e))}return r}var Of=class extends xa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},jw=class extends xa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Bw=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&uz(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Fu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Fu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=hN();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=vN(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),we())}isEqual(e){return this.batchId===e.batchId&&Ia(this.mutations,e.mutations,(n,r)=>Fx(n,r))&&Ia(this.baseMutations,e.baseMutations,(n,r)=>Fx(n,r))}},$w=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){He(e.mutations.length===r.length);let i=function(){return tz}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Hw=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var qw=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ot,Ee;function dz(t){switch(t){default:return ne();case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0}}function IN(t){if(t===void 0)return Kr("GRPC error has no .code"),P.UNKNOWN;switch(t){case ot.OK:return P.OK;case ot.CANCELLED:return P.CANCELLED;case ot.UNKNOWN:return P.UNKNOWN;case ot.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case ot.INTERNAL:return P.INTERNAL;case ot.UNAVAILABLE:return P.UNAVAILABLE;case ot.UNAUTHENTICATED:return P.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case ot.NOT_FOUND:return P.NOT_FOUND;case ot.ALREADY_EXISTS:return P.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return P.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case ot.ABORTED:return P.ABORTED;case ot.OUT_OF_RANGE:return P.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return P.UNIMPLEMENTED;case ot.DATA_LOSS:return P.DATA_LOSS;default:return ne()}}(Ee=ot||(ot={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";var Ux=null;function hz(){return new TextEncoder}var fz=new Hi([4294967295,4294967295],0);function jx(t){let e=hz().encode(t),n=new sw;return n.update(e),new Uint8Array(n.digest())}function Bx(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Hi([n,r],0),new Hi([i,s],0)]}var Gw=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new zs(`Invalid padding: ${n}`);if(r<0)throw new zs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new zs(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new zs(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Hi.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Hi.fromNumber(r)));return i.compare(fz)===1&&(i=new Hi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=jx(e),[r,i]=Bx(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=jx(e),[r,i]=Bx(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},zs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ff=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,ju.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ae.min(),i,new et(Ae),Yr(),we())}},ju=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,we(),we(),we())}};var va=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},Lf=class{constructor(e,n){this.targetId=e,this.me=n}},Vf=class{constructor(e,n,r=qt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Uf=class{constructor(){this.fe=0,this.ge=Hx(),this.pe=qt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=we(),n=we(),r=we();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ne()}}),new ju(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=Hx()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,He(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},zw=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Yr(),this.qe=$x(),this.Qe=new et(Ae)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ne()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(Lw(s))if(r===0){let o=new Y(s.path);this.Ue(n,o,qn.newNoDocument(o,ae.min()))}else He(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}Ux?.et(function(d,f,m,y,E){var x,R,F,q,B,G;let xe={localCacheCount:d,existenceFilterCount:f.count,databaseId:m.database,projectId:m.projectId},re=f.unchangedNames;return re&&(xe.bloomFilter={applied:E===0,hashCount:(x=re?.hashCount)!==null&&x!==void 0?x:0,bitmapLength:(q=(F=(R=re?.bits)===null||R===void 0?void 0:R.bitmap)===null||F===void 0?void 0:F.length)!==null&&q!==void 0?q:0,padding:(G=(B=re?.bits)===null||B===void 0?void 0:B.padding)!==null&&G!==void 0?G:0,mightContain:C=>{var _;return(_=y?.mightContain(C))!==null&&_!==void 0&&_}}),xe}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=qi(r).toUint8Array()}catch(c){if(c instanceof Mf)return wa("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Gw(o,i,s)}catch(c){return wa(c instanceof zs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&Lw(a.target)){let c=new Y(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,qn.newNoDocument(c,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=we();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Ff(e,n,this.Qe,this.ke,r);return this.ke=Yr(),this.qe=$x(),this.Qe=new et(Ae),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Uf,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Pt(Ae),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Uf),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function $x(){return new et(Y.comparator)}function Hx(){return new et(Y.comparator)}var pz={asc:"ASCENDING",desc:"DESCENDING"},mz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gz={and:"AND",or:"OR"},Ww=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Kw(t,e){return t.useProto3Json||rp(e)?e:{value:e}}function jf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function EN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function yz(t,e){return jf(t,e.toTimestamp())}function Ir(t){return He(!!t),ae.fromTimestamp(function(n){let r=Qr(n);return new It(r.seconds,r.nanos)}(t))}function rE(t,e){return Qw(t,e).canonicalString()}function Qw(t,e){let n=function(i){return new ct(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function bN(t){let e=ct.fromString(t);return He(AN(e)),e}function Yw(t,e){return rE(t.databaseId,e.path)}function hw(t,e){let n=bN(e);if(n.get(1)!==t.databaseId.projectId)throw new K(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(TN(n))}function CN(t,e){return rE(t.databaseId,e)}function _z(t){let e=bN(t);return e.length===4?ct.emptyPath():TN(e)}function Jw(t){return new ct(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function TN(t){return He(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function qx(t,e,n){return{name:Yw(t,e),fields:n.value.mapValue.fields}}function vz(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,d){return l.useProto3Json?(He(d===void 0||typeof d=="string"),qt.fromBase64String(d||"")):(He(d===void 0||d instanceof Buffer||d instanceof Uint8Array),qt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let d=l.code===void 0?P.UNKNOWN:IN(l.code);return new K(d,l.message||"")}(o);n=new Vf(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=hw(t,r.document.name),s=Ir(r.document.updateTime),o=r.document.createTime?Ir(r.document.createTime):ae.min(),a=new Hn({mapValue:{fields:r.document.fields}}),c=qn.newFoundDocument(i,s,o,a),l=r.targetIds||[],d=r.removedTargetIds||[];n=new va(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=hw(t,r.document),s=r.readTime?Ir(r.readTime):ae.min(),o=qn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new va([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=hw(t,r.document),s=r.removedTargetIds||[];n=new va([],s,i,null)}else{if(!("filter"in e))return ne();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new qw(i,s),a=r.targetId;n=new Lf(a,o)}}return n}function wz(t,e){let n;if(e instanceof Zs)n={update:qx(t,e.key,e.value)};else if(e instanceof Of)n={delete:Yw(t,e.key)};else if(e instanceof Jr)n={update:qx(t,e.key,e.data),updateMask:Rz(e.fieldMask)};else{if(!(e instanceof jw))return ne();n={verify:Yw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Aa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Js)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Xs)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ra)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ne()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:yz(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ne()}(t,e.precondition)),n}function Iz(t,e){return t&&t.length>0?(He(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Ir(i.updateTime):Ir(s);return o.isEqual(ae.min())&&(o=Ir(s)),new Uw(o,i.transformResults||[])}(n,e))):[]}function Ez(t,e){return{documents:[CN(t,e.path)]}}function bz(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=CN(t,i);let s=function(l){if(l.length!==0)return SN(br.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(d=>function(m){return{field:ga(m.field),direction:Dz(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=Kw(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function Cz(t){let e=_z(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){He(r===1);let d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(f){let m=DN(f);return m instanceof br&&iN(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(E){return new Ta(ya(E.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,rp(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){let m=!!f.before,y=f.values||[];return new Ca(y,m)}(n.startAt));let l=null;return n.endAt&&(l=function(f){let m=!f.before,y=f.values||[];return new Ca(y,m)}(n.endAt)),QG(e,i,o,s,a,"F",c,l)}function Tz(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function DN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=ya(n.unaryFilter.field);return mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ya(n.unaryFilter.field);return mt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=ya(n.unaryFilter.field);return mt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=ya(n.unaryFilter.field);return mt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ne()}}(t):t.fieldFilter!==void 0?function(n){return mt.create(ya(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ne()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return br.create(n.compositeFilter.filters.map(r=>DN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne()}}(n.compositeFilter.op))}(t):ne()}function Dz(t){return pz[t]}function Sz(t){return mz[t]}function Az(t){return gz[t]}function ga(t){return{fieldPath:t.canonicalString()}}function ya(t){return gn.fromServerFormat(t.fieldPath)}function SN(t){return t instanceof mt?function(n){if(n.op==="=="){if(xx(n.value))return{unaryFilter:{field:ga(n.field),op:"IS_NAN"}};if(Rx(n.value))return{unaryFilter:{field:ga(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xx(n.value))return{unaryFilter:{field:ga(n.field),op:"IS_NOT_NAN"}};if(Rx(n.value))return{unaryFilter:{field:ga(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ga(n.field),op:Sz(n.op),value:n.value}}}(t):t instanceof br?function(n){let r=n.getFilters().map(i=>SN(i));return r.length===1?r[0]:{compositeFilter:{op:Az(n.op),filters:r}}}(t):ne()}function Rz(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function AN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Bu=class t{constructor(e,n,r,i,s=ae.min(),o=ae.min(),a=qt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Xw=class{constructor(e){this.ct=e}};function xz(t){let e=Cz({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Vw(e,e.limit,"L"):e}var Bf=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Ze(e.integerValue));else if("doubleValue"in e){let r=Ze(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),Lu(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=Qr(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(qi(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?tN(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):ne()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),Y.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Bf.bt=new Bf;var Zw=class{constructor(){this._n=new eI}addToCollectionParentIndex(e,n){return this._n.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(Qs.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(Qs.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}},eI=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Pt(ct.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Pt(ct.comparator)).toArray()}};var Ste=new Uint8Array(0);var gr=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};gr.DEFAULT_COLLECTION_PERCENTILE=10,gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gr.DEFAULT=new gr(41943040,gr.DEFAULT_COLLECTION_PERCENTILE,gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gr.DISABLED=new gr(-1,0,0);var $u=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var tI=class{constructor(){this.changes=new Gi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,qn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var nI=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var rI=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Fu(r.mutation,i,yr.empty(),It.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,we()).next(()=>r))}getLocalViewOfDocuments(e,n,r=we()){let i=Gs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Mu();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Gs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,we()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Yr(),o=Ou(),a=function(){return Ou()}();return n.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof Jr)?s=s.insert(l.key,l):d!==void 0?(o.set(l.key,d.mutation.getFieldMask()),Fu(d.mutation,l,d.mutation.getFieldMask(),It.now())):o.set(l.key,yr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,d)=>o.set(l,d)),n.forEach((l,d)=>{var f;return a.set(l,new nI(d,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Ou(),i=new et((o,a)=>o-a),s=we();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let d=r.get(c)||yr.empty();d=a.applyToLocalView(l,d),r.set(c,d);let f=(i.get(a.batchId)||we()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,f=hN();d.forEach(m=>{if(!s.has(m)){let y=vN(n.get(m),r.get(m));y!==null&&f.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):YG(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):O.resolve(Gs()),a=-1,c=s;return o.next(l=>O.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?O.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,we())).next(d=>({batchId:a,changes:dN(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let i=Mu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Mu();return this.indexManager.getCollectionParents(e,s).next(a=>O.forEach(a,c=>{let l=function(f,m){return new Da(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,l)=>{let d=l.getKey();o.get(d)===null&&(o=o.insert(d,qn.newInvalidDocument(d)))});let a=Mu();return o.forEach((c,l)=>{let d=s.get(c);d!==void 0&&Fu(d.mutation,l,yr.empty(),It.now()),sp(n,l)&&(a=a.insert(c,l))}),a})}};var iI=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return O.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ir(i.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:xz(i.bundledQuery),readTime:Ir(i.readTime)}}(n)),O.resolve()}};var sI=class{constructor(){this.overlays=new et(Y.comparator),this.hr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Gs();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),O.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){let i=Gs(),s=n.length+1,o=new Y(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new et((l,d)=>l-d),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let d=s.get(l.largestBatchId);d===null&&(d=Gs(),s=s.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=Gs(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return O.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Hw(n,r));let s=this.hr.get(n);s===void 0&&(s=we(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}};var Hu=class{constructor(){this.Pr=new Pt(at.Ir),this.Tr=new Pt(at.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new at(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new at(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new Y(new ct([])),r=new at(n,e),i=new at(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new Y(new ct([])),r=new at(n,e),i=new at(n,e+1),s=we();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new at(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},at=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return Y.comparator(e.key,n.key)||Ae(e.pr,n.pr)}static Er(e,n){return Ae(e.pr,n.pr)||Y.comparator(e.key,n.key)}};var oI=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Pt(at.Ir)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Bw(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.wr=this.wr.add(new at(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new at(n,0),i=new at(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{let a=this.Sr(o.pr);s.push(a)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Pt(Ae);return n.forEach(i=>{let s=new at(i,0),o=new at(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),O.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;Y.isDocumentKey(s)||(s=s.child(""));let o=new at(new Y(s),0),a=new Pt(Ae);return this.wr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.pr)),!0)},o),O.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){He(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return O.forEach(n.mutations,i=>{let s=new at(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new at(n,0),i=this.wr.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var aI=class{constructor(e){this.vr=e,this.docs=function(){return new et(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():qn.newInvalidDocument(n))}getEntries(e,n){let r=Yr();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():qn.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Yr(),o=n.path,a=new Y(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||UG(VG(d),r)<=0||(i.has(d.key)||sp(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ne()}Fr(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new cI(this)}getSize(e){return O.resolve(this.size)}},cI=class extends tI{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var uI=class{constructor(e){this.persistence=e,this.Mr=new Gi(n=>eE(n),tE),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Hu,this.targetCount=0,this.Lr=$u.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),O.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new $u(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.qn(n),O.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),O.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Nr.containsKey(n))}};var lI=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new Zx(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new uI(this),this.indexManager=new Zw,this.remoteDocumentCache=function(i){return new aI(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Xw(n),this.$r=new iI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new oI(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);let i=new dI(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return O.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},dI=class extends Cw{constructor(e){super(),this.currentSequenceNumber=e}},hI=class t{constructor(e){this.persistence=e,this.zr=new Hu,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw ne()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),O.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Jr,r=>{let i=Y.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,ae.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return O.or([()=>O.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var fI=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=we(),i=we();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var pI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var mI=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return tR()?8:BG(ft())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new pI;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Nu()<=pe.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",ma(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),O.resolve()):(Nu()<=pe.DEBUG&&H("QueryEngine","Query:",ma(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Nu()<=pe.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",ma(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wr(n))):O.resolve())}ji(e,n){if(kx(n))return O.resolve(null);let r=wr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Vw(n,null,"F"),r=wr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=we(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.Zi(n,a);return this.Xi(n,l,o,c.readTime)?this.ji(e,Vw(n,null,"F")):this.es(e,l,n,c)}))})))}Hi(e,n,r,i){return kx(n)||i.isEqual(ae.min())?O.resolve(null):this.zi.getDocuments(e,r).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,r,i)?O.resolve(null):(Nu()<=pe.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ma(n)),this.es(e,o,n,LG(i,-1)).next(a=>a))})}Zi(e,n){let r=new Pt(uN(e));return n.forEach((i,s)=>{sp(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return Nu()<=pe.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",ma(n)),this.zi.getDocumentsMatchingQuery(e,n,Qs.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var gI=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new et(Ae),this.rs=new Gi(s=>eE(s),tE),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rI(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function Nz(t,e,n,r){return new gI(t,e,n,r)}function RN(t,e){return v(this,null,function*(){let n=oe(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=we();for(let l of i){o.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of s){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})})}function Mz(t,e){let n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let f=l.batch,m=f.keys(),y=O.resolve();return m.forEach(E=>{y=y.next(()=>d.getEntry(c,E)).next(x=>{let R=l.docVersions.get(E);He(R!==null),x.version.compareTo(R)<0&&(f.applyToRemoteDocument(x,l),x.isValidDocument()&&(x.setReadTime(l.commitVersion),d.addEntry(x)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=we();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function xN(t){let e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function Pz(t,e){let n=oe(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((d,f)=>{let m=i.get(f);if(!m)return;a.push(n.Qr.removeMatchingKeys(s,d.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,d.addedDocuments,f)));let y=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(qt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(f,y),function(x,R,F){return x.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(m,y,d)&&a.push(n.Qr.updateTargetData(s,y))});let c=Yr(),l=we();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(kz(s,o,e.documentUpdates).next(d=>{c=d.cs,l=d.ls})),!r.isEqual(ae.min())){let d=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return O.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.ns=i,s))}function kz(t,e,n){let r=we(),i=we();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Yr();return n.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ae.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):H("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:o,ls:i}})}function Oz(t,e){let n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Fz(t,e){let n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Bu(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function yI(t,e,n){return v(this,null,function*(){let r=oe(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Xu(o))throw o;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function Gx(t,e,n){let r=oe(t),i=ae.min(),s=we();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,d){let f=oe(c),m=f.rs.get(d);return m!==void 0?O.resolve(f.ns.get(m)):f.Qr.getTargetData(l,d)}(r,o,wr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:ae.min(),n?s:we())).next(a=>(Lz(r,XG(e),a),{documents:a,hs:s})))}function Lz(t,e,n){let r=t.ss.get(e)||ae.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}var $f=class{constructor(){this.activeTargetIds=iz()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var _I=class{constructor(){this.no=new $f,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new $f,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var vI=class{io(e){}shutdown(){}};var Hf=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Tf=null;function fw(){return Tf===null?Tf=function(){return 268435456+Math.round(2147483648*Math.random())}():Tf++,"0x"+Tf.toString(16)}var Vz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var wI=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var Mt="WebChannelConnection",II=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){let a=fw(),c=this.vo(n,r.toUriEncodedString());H("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,c,l,i).then(d=>(H("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw wa("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ma}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){let i=Vz[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){let s=fw();return new Promise((o,a)=>{let c=new ow;c.setWithCredentials(!0),c.listenOnce(cw.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case xu.NO_ERROR:let d=c.getResponseJson();H(Mt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case xu.TIMEOUT:H(Mt,`RPC '${e}' ${s} timed out`),a(new K(P.DEADLINE_EXCEEDED,"Request time out"));break;case xu.HTTP_ERROR:let f=c.getStatus();if(H(Mt,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let E=function(R){let F=R.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(F)>=0?F:P.UNKNOWN}(y.status);a(new K(E,y.message))}else a(new K(P.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new K(P.UNAVAILABLE,"Connection failed."));break;default:ne()}}finally{H(Mt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);H(Mt,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",l,r,15)})}Oo(e,n,r){let i=fw(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=dw(),a=lw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.xmlHttpFactory=new aw({})),this.Fo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let d=s.join("");H(Mt,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=o.createWebChannel(d,c),m=!1,y=!1,E=new wI({lo:R=>{y?H(Mt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(H(Mt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),H(Mt,`RPC '${e}' stream ${i} sending:`,R),f.send(R))},ho:()=>f.close()}),x=(R,F,q)=>{R.listen(F,B=>{try{q(B)}catch(G){setTimeout(()=>{throw G},0)}})};return x(f,pa.EventType.OPEN,()=>{y||(H(Mt,`RPC '${e}' stream ${i} transport opened.`),E.mo())}),x(f,pa.EventType.CLOSE,()=>{y||(y=!0,H(Mt,`RPC '${e}' stream ${i} transport closed`),E.po())}),x(f,pa.EventType.ERROR,R=>{y||(y=!0,wa(Mt,`RPC '${e}' stream ${i} transport errored:`,R),E.po(new K(P.UNAVAILABLE,"The operation could not be completed")))}),x(f,pa.EventType.MESSAGE,R=>{var F;if(!y){let q=R.data[0];He(!!q);let B=q,G=B.error||((F=B[0])===null||F===void 0?void 0:F.error);if(G){H(Mt,`RPC '${e}' stream ${i} received error:`,G);let xe=G.status,re=function(w){let b=ot[w];if(b!==void 0)return IN(b)}(xe),C=G.message;re===void 0&&(re=P.INTERNAL,C="Unknown error status: "+xe+" with message "+G.message),y=!0,E.po(new K(re,C)),f.close()}else H(Mt,`RPC '${e}' stream ${i} received:`,q),E.yo(q)}}),x(a,uw.STAT_EVENT,R=>{R.stat===bf.PROXY?H(Mt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===bf.NOPROXY&&H(Mt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.fo()},0),E}};function pw(){return typeof document<"u"?document:null}function op(t){return new Ww(t,!0)}var qf=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&H("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var Gf=class{constructor(e,n,r,i,s,o,a,c){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new qf(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return v(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return v(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){return v(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===P.RESOURCE_EXHAUSTED?(Kr(n.toString()),Kr("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{let i=new K(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){let r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(()=>v(this,null,function*(){this.state=0,this.start()}))}c_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},EI=class extends Gf{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();let n=vz(this.serializer,e),r=function(s){if(!("targetChange"in s))return ae.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?Ir(o.readTime):ae.min()}(e);return this.listener.h_(n,r)}P_(e){let n={};n.database=Jw(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=Lw(c)?{documents:Ez(s,c)}:{query:bz(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=EN(s,o.resumeToken);let l=Kw(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=jf(s,o.snapshotVersion.toTimestamp());let l=Kw(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=Tz(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){let n={};n.database=Jw(this.serializer),n.removeTarget=e,this.i_(n)}},bI=class extends Gf{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(He(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let n=Iz(e.writeResults,e.commitTime),r=Ir(e.commitTime);return this.listener.A_(r,n)}return He(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=Jw(this.serializer),this.i_(e)}d_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>wz(this.serializer,r))};this.i_(n)}};var CI=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new K(P.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,Qw(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K(P.UNKNOWN,s.toString())})}xo(e,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,Qw(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(P.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},TI=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Kr(n),this.y_=!1):H("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var DI=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(()=>v(this,null,function*(){eo(this)&&(H("RemoteStore","Restarting streams for network reachability change."),yield function(c){return v(this,null,function*(){let l=oe(c);l.M_.add(4),yield Zu(l),l.N_.set("Unknown"),l.M_.delete(4),yield ap(l)})}(this))}))}),this.N_=new TI(r,i)}};function ap(t){return v(this,null,function*(){if(eo(t))for(let e of t.x_)yield e(!0)})}function Zu(t){return v(this,null,function*(){for(let e of t.x_)yield e(!1)})}function NN(t,e){let n=oe(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),aE(n)?oE(n):ka(n).Xo()&&sE(n,e))}function iE(t,e){let n=oe(t),r=ka(n);n.F_.delete(e),r.Xo()&&MN(n,e),n.F_.size===0&&(r.Xo()?r.n_():eo(n)&&n.N_.set("Unknown"))}function sE(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ka(t).P_(e)}function MN(t,e){t.L_.xe(e),ka(t).I_(e)}function oE(t){t.L_=new zw({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ka(t).start(),t.N_.w_()}function aE(t){return eo(t)&&!ka(t).Zo()&&t.F_.size>0}function eo(t){return oe(t).M_.size===0}function PN(t){t.L_=void 0}function Uz(t){return v(this,null,function*(){t.N_.set("Online")})}function jz(t){return v(this,null,function*(){t.F_.forEach((e,n)=>{sE(t,e)})})}function Bz(t,e){return v(this,null,function*(){PN(t),aE(t)?(t.N_.D_(e),oE(t)):t.N_.set("Unknown")})}function $z(t,e,n){return v(this,null,function*(){if(t.N_.set("Online"),e instanceof Vf&&e.state===2&&e.cause)try{yield function(i,s){return v(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.F_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))})}(t,e)}catch(r){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield zf(t,r)}else if(e instanceof va?t.L_.Ke(e):e instanceof Lf?t.L_.He(e):t.L_.We(e),!n.isEqual(ae.min()))try{let r=yield xN(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.L_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.F_.get(l);d&&s.F_.set(l,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let d=s.F_.get(c);if(!d)return;s.F_.set(c,d.withResumeToken(qt.EMPTY_BYTE_STRING,d.snapshotVersion)),MN(s,c);let f=new Bu(d.target,c,l,d.sequenceNumber);sE(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){H("RemoteStore","Failed to raise snapshot:",r),yield zf(t,r)}})}function zf(t,e,n){return v(this,null,function*(){if(!Xu(e))throw e;t.M_.add(1),yield Zu(t),t.N_.set("Offline"),n||(n=()=>xN(t.localStore)),t.asyncQueue.enqueueRetryable(()=>v(this,null,function*(){H("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield ap(t)}))})}function kN(t,e){return e().catch(n=>zf(t,n,e))}function cp(t){return v(this,null,function*(){let e=oe(t),n=zi(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;Hz(e);)try{let i=yield Oz(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,qz(e,i)}catch(i){yield zf(e,i)}ON(e)&&FN(e)})}function Hz(t){return eo(t)&&t.v_.length<10}function qz(t,e){t.v_.push(e);let n=zi(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function ON(t){return eo(t)&&!zi(t).Zo()&&t.v_.length>0}function FN(t){zi(t).start()}function Gz(t){return v(this,null,function*(){zi(t).V_()})}function zz(t){return v(this,null,function*(){let e=zi(t);for(let n of t.v_)e.d_(n.mutations)})}function Wz(t,e,n){return v(this,null,function*(){let r=t.v_.shift(),i=$w.from(r,e,n);yield kN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield cp(t)})}function Kz(t,e){return v(this,null,function*(){e&&zi(t).E_&&(yield function(r,i){return v(this,null,function*(){if(function(o){return dz(o)&&o!==P.ABORTED}(i.code)){let s=r.v_.shift();zi(r).t_(),yield kN(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield cp(r)}})}(t,e)),ON(t)&&FN(t)})}function zx(t,e){return v(this,null,function*(){let n=oe(t);n.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");let r=eo(n);n.M_.add(3),yield Zu(n),r&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield ap(n)})}function Qz(t,e){return v(this,null,function*(){let n=oe(t);e?(n.M_.delete(2),yield ap(n)):e||(n.M_.add(2),yield Zu(n),n.N_.set("Unknown"))})}function ka(t){return t.B_||(t.B_=function(n,r,i){let s=oe(n);return s.f_(),new EI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:Uz.bind(null,t),To:jz.bind(null,t),Ao:Bz.bind(null,t),h_:$z.bind(null,t)}),t.x_.push(e=>v(this,null,function*(){e?(t.B_.t_(),aE(t)?oE(t):t.N_.set("Unknown")):(yield t.B_.stop(),PN(t))}))),t.B_}function zi(t){return t.k_||(t.k_=function(n,r,i){let s=oe(n);return s.f_(),new bI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:Gz.bind(null,t),Ao:Kz.bind(null,t),R_:zz.bind(null,t),A_:Wz.bind(null,t)}),t.x_.push(e=>v(this,null,function*(){e?(t.k_.t_(),yield cp(t)):(yield t.k_.stop(),t.v_.length>0&&(H("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var SI=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new _r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function cE(t,e){if(Kr("AsyncQueue",`${e}: ${t}`),Xu(t))return new K(P.UNAVAILABLE,`${e}: ${t}`);throw t}var Wf=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=Mu(),this.sortedSet=new et(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Kf=class{constructor(){this.q_=new et(Y.comparator)}track(e){let n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):ne():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}},Na=class t{constructor(e,n,r,i,s,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,Wf.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ip(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var AI=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},RI=class{constructor(){this.queries=new Gi(e=>cN(e),ip),this.onlineState="Unknown",this.z_=new Set}};function Yz(t,e){return v(this,null,function*(){let n=oe(t),r=3,i=e.query,s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new AI,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield n.onListen(i,!0);break;case 1:s.K_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=cE(o,`Initialization of query '${ma(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&uE(n)})}function Jz(t,e){return v(this,null,function*(){let n=oe(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function Xz(t,e){let n=oe(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&uE(n)}function Zz(t,e,n){let r=oe(t),i=r.queries.get(e);if(i)for(let s of i.U_)s.onError(n);r.queries.delete(e)}function uE(t){t.z_.forEach(e=>{e.next()})}var xI,Wx;(Wx=xI||(xI={})).J_="default",Wx.Cache="cache";var NI=class{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Na(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=Na.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==xI.Cache}};var Qf=class{constructor(e){this.key=e}},Yf=class{constructor(e){this.key=e}},MI=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=we(),this.mutatedKeys=we(),this.Ia=uN(e),this.Ta=new Wf(this.Ia)}get Ea(){return this.la}da(e,n){let r=n?n.Aa:new Kf,i=n?n.Ta:this.Ta,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let m=i.get(d),y=sp(this.query,f)?f:null,E=!!m&&this.mutatedKeys.has(m.key),x=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?E!==x&&(r.track({type:3,doc:y}),R=!0):this.Ra(m,y)||(r.track({type:2,doc:y}),R=!0,(c&&this.Ia(y,c)>0||l&&this.Ia(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(c||l)&&(a=!0)),R&&(y?(o=o.add(y),s=x?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let o=e.Aa.Q_();o.sort((d,f)=>function(y,E){let x=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne()}};return x(y)-x(E)}(d.type,f.type)||this.Ia(d.doc,f.doc)),this.Va(r),i=i!=null&&i;let a=n&&!i?this.ma():[],c=this.Pa.size===0&&this.current&&!i?1:0,l=c!==this.ha;return this.ha=c,o.length!==0||l?{snapshot:new Na(this.query,e.Ta,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Kf,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=we(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new Yf(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new Qf(r))}),n}pa(e){this.la=e.hs,this.Pa=we();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return Na.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},PI=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},kI=class{constructor(e){this.key=e,this.wa=!1}},OI=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Gi(a=>cN(a),ip),this.Da=new Map,this.Ca=new Set,this.va=new et(Y.comparator),this.Fa=new Map,this.Ma=new Hu,this.xa={},this.Oa=new Map,this.Na=$u.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function eW(t,e,n=!0){return v(this,null,function*(){let r=$N(t),i,s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield LN(r,e,n,!0),i})}function tW(t,e){return v(this,null,function*(){let n=$N(t);yield LN(n,e,!0,!1)})}function LN(t,e,n,r){return v(this,null,function*(){let i=yield Fz(t.localStore,wr(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield nW(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&NN(t.remoteStore,i),a})}function nW(t,e,n,r,i){return v(this,null,function*(){t.Ba=(f,m,y)=>function(x,R,F,q){return v(this,null,function*(){let B=R.view.da(F);B.Xi&&(B=yield Gx(x.localStore,R.query,!1).then(({documents:C})=>R.view.da(C,B)));let G=q&&q.targetChanges.get(R.targetId),xe=q&&q.targetMismatches.get(R.targetId)!=null,re=R.view.applyChanges(B,x.isPrimaryClient,G,xe);return Qx(x,R.targetId,re.fa),re.snapshot})}(t,f,m,y);let s=yield Gx(t.localStore,e,!0),o=new MI(e,s.hs),a=o.da(s.documents),c=ju.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,c);Qx(t,n,l.fa);let d=new PI(e,n,o);return t.ba.set(e,d),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),l.snapshot})}function rW(t,e,n){return v(this,null,function*(){let r=oe(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!ip(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield yI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&iE(r.remoteStore,i.targetId),FI(r,i.targetId)}).catch(Ju))):(FI(r,i.targetId),yield yI(r.localStore,i.targetId,!0))})}function iW(t,e){return v(this,null,function*(){let n=oe(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),iE(n.remoteStore,r.targetId))})}function sW(t,e,n){return v(this,null,function*(){let r=hW(t);try{let i=yield function(o,a){let c=oe(o),l=It.now(),d=a.reduce((y,E)=>y.add(E.key),we()),f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let E=Yr(),x=we();return c.os.getEntries(y,d).next(R=>{E=R,E.forEach((F,q)=>{q.isValidDocument()||(x=x.add(F))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,E)).next(R=>{f=R;let F=[];for(let q of a){let B=lz(q,f.get(q.key).overlayedDocument);B!=null&&F.push(new Jr(q.key,B,nN(B.value.mapValue),Ws.exists(!0)))}return c.mutationQueue.addMutationBatch(y,l,F,a)}).next(R=>{m=R;let F=R.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(y,R.batchId,F)})}).then(()=>({batchId:m.batchId,changes:dN(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.xa[o.currentUser.toKey()];l||(l=new et(Ae)),l=l.insert(a,c),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),yield el(r,i.changes),yield cp(r.remoteStore)}catch(i){let s=cE(i,"Failed to persist write");n.reject(s)}})}function VN(t,e){return v(this,null,function*(){let n=oe(t);try{let r=yield Pz(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Fa.get(s);o&&(He(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?He(o.wa):i.removedDocuments.size>0&&(He(o.wa),o.wa=!1))}),yield el(n,r,e)}catch(r){yield Ju(r)}})}function Kx(t,e,n){let r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ba.forEach((s,o)=>{let a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=oe(o);c.onlineState=a;let l=!1;c.queries.forEach((d,f)=>{for(let m of f.U_)m.j_(a)&&(l=!0)}),l&&uE(c)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function oW(t,e,n){return v(this,null,function*(){let r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Fa.get(e),s=i&&i.key;if(s){let o=new et(Y.comparator);o=o.insert(s,qn.newNoDocument(s,ae.min()));let a=we().add(s),c=new Ff(ae.min(),new Map,new et(Ae),o,a);yield VN(r,c),r.va=r.va.remove(s),r.Fa.delete(e),lE(r)}else yield yI(r.localStore,e,!1).then(()=>FI(r,e,n)).catch(Ju)})}function aW(t,e){return v(this,null,function*(){let n=oe(t),r=e.batch.batchId;try{let i=yield Mz(n.localStore,e);jN(n,r,null),UN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield el(n,i)}catch(i){yield Ju(i)}})}function cW(t,e,n){return v(this,null,function*(){let r=oe(t);try{let i=yield function(o,a){let c=oe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(He(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);jN(r,e,n),UN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield el(r,i)}catch(i){yield Ju(i)}})}function UN(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function jN(t,e,n){let r=oe(t),i=r.xa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function FI(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||BN(t,r)})}function BN(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(iE(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),lE(t))}function Qx(t,e,n){for(let r of n)r instanceof Qf?(t.Ma.addReference(r.key,e),uW(t,r)):r instanceof Yf?(H("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||BN(t,r.key)):ne()}function uW(t,e){let n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(H("SyncEngine","New document in limbo: "+n),t.Ca.add(r),lE(t))}function lE(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new Y(ct.fromString(e)),r=t.Na.next();t.Fa.set(r,new kI(n)),t.va=t.va.insert(n,r),NN(t.remoteStore,new Bu(wr(nE(n.path)),r,"TargetPurposeLimboResolution",Zx.oe))}}function el(t,e,n){return v(this,null,function*(){let r=oe(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,c)=>{o.push(r.Ba(c,e,n).then(l=>{if((l||n)&&r.isPrimaryClient){let d=l&&!l.fromCache;r.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(l){i.push(l);let d=fI.Ki(c.targetId,l);s.push(d)}}))}),yield Promise.all(o),r.Sa.h_(i),yield function(c,l){return v(this,null,function*(){let d=oe(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>O.forEach(l,m=>O.forEach(m.qi,y=>d.persistence.referenceDelegate.addReference(f,m.targetId,y)).next(()=>O.forEach(m.Qi,y=>d.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))}catch(f){if(!Xu(f))throw f;H("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let m=f.targetId;if(!f.fromCache){let y=d.ns.get(m),E=y.snapshotVersion,x=y.withLastLimboFreeSnapshotVersion(E);d.ns=d.ns.insert(m,x)}}})}(r.localStore,s))})}function lW(t,e){return v(this,null,function*(){let n=oe(t);if(!n.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());let r=yield RN(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(c=>{c.reject(new K(P.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield el(n,r.us)}})}function dW(t,e){let n=oe(t),r=n.Fa.get(e);if(r&&r.wa)return we().add(r.key);{let i=we(),s=n.Da.get(e);if(!s)return i;for(let o of s){let a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function $N(t){let e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=VN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oW.bind(null,e),e.Sa.h_=Xz.bind(null,e.eventManager),e.Sa.ka=Zz.bind(null,e.eventManager),e}function hW(t){let e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cW.bind(null,e),e}var Jf=class{constructor(){this.synchronizeTabs=!1}initialize(e){return v(this,null,function*(){this.serializer=op(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Nz(this.persistence,new mI,e.initialUser,this.serializer)}createPersistence(e){return new lI(hI.Hr,this.serializer)}createSharedClientState(e){return new _I}terminate(){return v(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var LI=class{initialize(e,n){return v(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Kx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=lW.bind(null,this.syncEngine),yield Qz(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new RI}()}createDatastore(e){let n=op(e.databaseInfo.databaseId),r=function(s){return new II(s)}(e.databaseInfo);return function(s,o,a,c){return new CI(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new DI(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Kx(this.syncEngine,n,0),function(){return Hf.D()?new Hf:new vI}())}createSyncEngine(e,n){return function(i,s,o,a,c,l,d){let f=new OI(i,s,o,a,c,l);return d&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return v(this,null,function*(){var e;yield function(r){return v(this,null,function*(){let i=oe(r);H("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield Zu(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var VI=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Kr("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var UI=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=yt.UNAUTHENTICATED,this.clientId=Rf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>v(this,null,function*(){H("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(H("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new K(P.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new _r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=cE(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function mw(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>v(this,null,function*(){r.isEqual(i)||(yield RN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function Yx(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield pW(t);H("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>zx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>zx(e.remoteStore,i)),t._onlineComponents=e})}function fW(t){return t.name==="FirebaseError"?t.code===P.FAILED_PRECONDITION||t.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function pW(t){return v(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{yield mw(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!fW(n))throw n;wa("Error using user provided cache. Falling back to memory cache: "+n),yield mw(t,new Jf)}}else H("FirestoreClient","Using default OfflineComponentProvider"),yield mw(t,new Jf);return t._offlineComponents})}function HN(t){return v(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),yield Yx(t,t._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),yield Yx(t,new LI))),t._onlineComponents})}function mW(t){return HN(t).then(e=>e.syncEngine)}function gW(t){return v(this,null,function*(){let e=yield HN(t),n=e.eventManager;return n.onListen=eW.bind(null,e.syncEngine),n.onUnlisten=rW.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=tW.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=iW.bind(null,e.syncEngine),n})}function yW(t,e,n={}){let r=new _r;return t.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(s,o,a,c,l){let d=new VI({next:m=>{o.enqueueAndForget(()=>Jz(s,f));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new K(P.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&c&&c.source==="server"?l.reject(new K(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),f=new NI(nE(a.path),d,{includeMetadataChanges:!0,ra:!0});return Yz(s,f)}(yield gW(t),t.asyncQueue,e,n,r)})),r.promise}function qN(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var Jx=new Map;function _W(t,e,n){if(!n)throw new K(P.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function vW(t,e,n,r){if(e===!0&&r===!0)throw new K(P.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Xx(t){if(!Y.isDocumentKey(t))throw new K(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function dE(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne()}function qu(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=dE(t);throw new K(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Xf=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vW("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new K(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new K(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new K(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Gu=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new K(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new K(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new gw;switch(r.type){case"firstParty":return new ww(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=Jx.get(n);r&&(H("ComponentProvider","Removing Datastore"),Jx.delete(n),r.terminate())}(this),Promise.resolve()}};function GN(t,e,n,r={}){var i;let s=(t=qu(t,Gu))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&wa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=yt.MOCK_USER;else{a=ca(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new K(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new yt(l)}t._authCredentials=new yw(new Af(a,c))}}var jI=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},An=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},zu=class t extends jI{constructor(e,n,r){super(e,n,nE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new An(this.firestore,null,new Y(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function zN(t,e,...n){if(t=We(t),arguments.length===1&&(e=Rf.newId()),_W("doc","path",e),t instanceof Gu){let r=ct.fromString(e,...n);return Xx(r),new An(t,null,new Y(r))}{if(!(t instanceof An||t instanceof zu))throw new K(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ct.fromString(e,...n));return Xx(r),new An(t.firestore,t instanceof zu?t.converter:null,new Y(r))}}var BI=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new qf(this,"async_queue_retry"),this.hu=()=>{let n=pw();n&&H("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=pw();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=pw();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new _r;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return v(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Xu(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Kr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let i=SI.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&ne()}verifyOperationInProgress(){}du(){return v(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};var Wu=class extends Gu{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new BI}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||QN(this),this._firestoreClient.terminate()}};function WN(t,e){let n=typeof t=="object"?t:dr(),r=typeof t=="string"?t:e||"(default)",i=Br(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=aa("firestore");s&&GN(i,...s)}return i}function KN(t){return t._firestoreClient||QN(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function QN(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,l,d){return new Tw(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,qN(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new UI(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Ku=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(qt.fromBase64String(e))}catch(n){throw new K(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Qu=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Zf=class{constructor(e){this._methodName=e}};var Yu=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}};var wW=/^__.*__$/,$I=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Jr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Zs(e,this.data,n,this.fieldTransforms)}};function YN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne()}}var HI=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return ep(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(YN(this.fu)&&wW.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},qI=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||op(e)}Fu(e,n,r,i=!1){return new HI({fu:e,methodName:n,vu:r,path:gn.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function IW(t){let e=t._freezeSettings(),n=op(t._databaseId);return new qI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function EW(t,e,n,r,i,s={}){let o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);eM("Data must be an object, but it was:",o,r);let a=XN(r,o),c,l;if(s.merge)c=new yr(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let f of s.mergeFields){let m=bW(e,f,n);if(!o.contains(m))throw new K(P.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);TW(d,m)||d.push(m)}c=new yr(d),l=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=o.fieldTransforms;return new $I(new Hn(a),c,l)}function JN(t,e){if(ZN(t=We(t)))return eM("Unsupported field value:",e,t),XN(t,e);if(t instanceof Zf)return function(r,i){if(!YN(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=JN(a,i.bu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=We(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return sz(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=It.fromDate(r);return{timestampValue:jf(i.serializer,s)}}if(r instanceof It){let s=new It(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jf(i.serializer,s)}}if(r instanceof Yu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ku)return{bytesValue:EN(i.serializer,r._byteString)};if(r instanceof An){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:rE(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${dE(r)}`)}(t,e)}function XN(t,e){let n={};return eN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pa(t,(r,i)=>{let s=JN(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function ZN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof It||t instanceof Yu||t instanceof Ku||t instanceof An||t instanceof Zf)}function eM(t,e,n){if(!ZN(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=dE(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function bW(t,e,n){if((e=We(e))instanceof Qu)return e._internalPath;if(typeof e=="string")return tM(t,e);throw ep("Field path arguments must be of type string or ",t,!1,void 0,n)}var CW=new RegExp("[~\\*/\\[\\]]");function tM(t,e,n){if(e.search(CW)>=0)throw ep(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Qu(...e.split("."))._internalPath}catch{throw ep(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ep(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new K(P.INVALID_ARGUMENT,a+t+c)}function TW(t,e){return t.some(n=>n.isEqual(e))}var tp=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new An(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new GI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(nM("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},GI=class extends tp{data(){return super.data()}};function nM(t,e){return typeof e=="string"?tM(t,e):e instanceof Qu?e._internalPath:e._delegate._internalPath}var zI=class{convertValue(e,n="none"){switch(Ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Pa(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Yu(Ze(e.latitude),Ze(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=XI(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Vu(e));default:return null}}convertTimestamp(e){let n=Qr(e);return new It(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=ct.fromString(e);He(AN(r));let i=new Pf(r.get(1),r.get(3)),s=new Y(r.popFirst(5));return i.isEqual(n)||Kr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function DW(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var WI=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},np=class extends tp{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new KI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(nM("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},KI=class extends np{data(e={}){return super.data(e)}};function rM(t){t=qu(t,An);let e=qu(t.firestore,Wu);return yW(KN(e),t._key).then(n=>AW(e,t,n))}var QI=class extends zI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ku(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new An(this.firestore,null,n)}};function iM(t,e,n){t=qu(t,An);let r=qu(t.firestore,Wu),i=DW(t.converter,e,n);return SW(r,[EW(IW(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ws.none())])}function SW(t,e){return function(r,i){let s=new _r;return r.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return sW(yield mW(r),i,s)})),s.promise}(KN(t),e)}function AW(t,e,n){let r=n.docs.get(e._key),i=new QI(t);return new np(t,i,e._key,r,new WI(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Ma=i})(Sn),Dn(new Nt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Wu(new _w(r.getProvider("auth-internal")),new Ew(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new K(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pf(l.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Pe(Dx,"4.6.3",e),Pe(Dx,"4.6.3","esm2017")})();var to=class{constructor(e){return e}},sM="firestore",hE=class{constructor(){return $r(sM)}};var fE=new z("angularfire2.firestore-instances");function RW(t,e){let n=Vi(sM,t,e);return n&&new to(n)}function xW(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new to(r)}}var NW={provide:hE,deps:[[new ze,fE]]},MW={provide:to,useFactory:RW,deps:[[new ze,fE],pn]};function oM(t,...e){return Pe("angularfire",Bn.full,"fst"),Wt([MW,NW,{provide:fE,useFactory:xW(t),multi:!0,deps:[Te,Rt,fr,$n,[new ze,zr],[new ze,hr],...e]}])}var pE=Xe(zN,!0);var aM=Xe(rM,!0);var cM=Xe(WN,!0);var uM=Xe(iM,!0);var Rn=(()=>{let e=class e{constructor(r,i,s){this.auth=r,this.router=i,this.firestore=s,this.hasRefreshed=!1,this.authStateSubject=new ut(null),this.authState=this.authStateSubject.asObservable(),Ix(this.auth,o=>{this.authStateSubject.next(o),o?sessionStorage.setItem("user",JSON.stringify(o)):sessionStorage.removeItem("user")})}signUpWithEmail(r,i,s,o){return v(this,null,function*(){return alert("Thanks for signing up. You will now be navigated to your dashboard"),vx(this.auth,r.trim(),i.trim()).then(a=>v(this,null,function*(){sessionStorage.setItem("user",JSON.stringify(a.user));let c=pE(this.firestore,`users/${a.user.uid}`);return yield uM(c,{email:a.user.email,firstName:s,lastName:o,createdAt:new Date}),a}))})}login(r,i){return alert("Welcome!"),Ex(this.auth,r.trim(),i.trim())}signOut(){return v(this,null,function*(){try{yield bx(this.auth),this.router.navigate(["/login"]),console.log("User signed out"),this.hasRefreshed=!1}catch(r){console.error("Error signing out:",r.message)}})}getUserDetails(r){return v(this,null,function*(){let i=pE(this.firestore,`users/${r}`),s=yield aM(i);return s.exists()?s.data():null})}};e.\u0275fac=function(i){return new(i||e)(X(mn),X(wt),X(to))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Fa=(()=>{let e=class e{constructor(r,i){this.router=r,this.authService=i,this.darkMode=!1}ngOnInit(){if(typeof localStorage<"u"){let r=localStorage.getItem("darkMode");r!==null&&(this.darkMode=JSON.parse(r),this.applyDarkMode())}else console.error("localStorage is not available.")}toggleDarkMode(){this.darkMode=!this.darkMode,this.applyDarkMode(),localStorage.setItem("darkMode",JSON.stringify(this.darkMode))}applyDarkMode(){this.darkMode?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}};e.\u0275fac=function(i){return new(i||e)($(wt),$(Rn))},e.\u0275cmp=je({type:e,selectors:[["app-root"]],standalone:!0,features:[Be],decls:1,vars:0,template:function(i,s){i&1&&ce(0,"router-outlet")},dependencies:[j_],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;font-family:Arial,sans-serif}.btn-sign-in[_ngcontent-%COMP%]{margin-top:20px;padding:10px 20px;font-size:18px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease}.btn-sign-in[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]});let t=e;return t})();var dM=()=>["/dashboard"],hM=()=>["#"];function kW(t,e){if(t&1){let n=Ci();M(0,"div",10)(1,"a",11),V(2,"Home"),N(),M(3,"a",12),V(4,"Your Account"),N(),M(5,"a",13),Ie("click",function(i){tr(n);let s=Ti();return nr(s.toggleDarkMode(i))}),V(6,"Dark"),N(),M(7,"a",13),Ie("click",function(i){tr(n);let s=Ti();return nr(s.signOut(i))}),V(8,"Sign Out"),N()()}if(t&2){let n=Ti();Fe(3),xt("routerLink",n.isLoggedIn?rr(1,dM):rr(2,hM))}}var La=(()=>{let e=class e{constructor(r,i){this.AppComponent=r,this.authService=i,this.isLoggedIn=!1,this.isMenuOpen=!1}ngOnInit(){this.authService.authState.subscribe(r=>{this.isLoggedIn=!!r})}toggleDarkMode(r){r.preventDefault(),this.AppComponent.toggleDarkMode()}signOut(r){r.preventDefault(),this.isLoggedIn?this.authService.signOut():alert("Not Logged In")}toggleMenu(){this.isMenuOpen=!this.isMenuOpen,console.log(this.isMenuOpen)}};e.\u0275fac=function(i){return new(i||e)($(Fa),$(Rn))},e.\u0275cmp=je({type:e,selectors:[["app-navbar-general"]],standalone:!0,features:[Be],decls:18,vars:4,consts:[[1,"bg-white","dark:bg-zinc-950","shadow-sm","shadow-rose-100","dark:shadow-rose-950","px-4","py-7","fixed","w-full","top-0","z-20","transition-all","duration-500","ease-in-out"],[1,"container","mx-auto","flex","justify-between","items-center"],["routerLink","/",1,"text-rose-600","dark:text-rose-600","dark:hover:text-rose-800","font-bold","lg:text-2xl","md:text-xl"],[1,"hidden","lg:flex"],["routerLink","/home",1,"text-rose-600","hover:text-rose-900","font-semibold","dark:text-rose-600","dark:hover:text-rose-800","lg:px-4","sm:px-4"],[1,"text-rose-600","hover:text-rose-900","font-semibold","dark:text-rose-600","dark:hover:text-rose-800","lg:px-4","sm:px-4",3,"routerLink"],["href","#",1,"text-rose-600","hover:text-rose-900","font-semibold","dark:text-rose-600","dark:hover:text-rose-800","lg:px-4","sm:px-4",3,"click"],[1,"lg:hidden"],[1,"text-rose-600","dark:text-rose-600","focus:outline-none","text-xl",3,"click"],["class","lg:hidden absolute top-full left-0 w-full bg-white dark:bg-zinc-950 shadow-md transition-all duration-500 ease-in-out text-center",4,"ngIf"],[1,"lg:hidden","absolute","top-full","left-0","w-full","bg-white","dark:bg-zinc-950","shadow-md","transition-all","duration-500","ease-in-out","text-center"],["routerLink","/home",1,"block","py-2","px-4","text-rose-600","hover:text-rose-900","font-semibold","dark:text-rose-600","dark:hover:text-rose-800"],[1,"block","py-2","px-4","text-rose-600","hover:text-rose-900","font-semibold","dark:text-rose-600","dark:hover:text-rose-800",3,"routerLink"],["href","#",1,"block","py-2","px-4","text-rose-600","hover:text-rose-900","font-semibold","dark:text-rose-600","dark:hover:text-rose-800",3,"click"]],template:function(i,s){i&1&&(M(0,"nav",0)(1,"div",1)(2,"div")(3,"a",2),V(4,"Angular Banking"),N()(),M(5,"div",3)(6,"a",4),V(7,"Home"),N(),M(8,"a",5),V(9,"Your Account"),N(),M(10,"a",6),Ie("click",function(a){return s.toggleDarkMode(a)}),V(11,"Dark/Light Mode"),N(),M(12,"a",6),Ie("click",function(a){return s.signOut(a)}),V(13,"Sign Out"),N()(),M(14,"div",7)(15,"button",8),Ie("click",function(){return s.toggleMenu()}),V(16," \u2630 "),N()(),bi(17,kW,9,3,"div",9),N()()),i&2&&(Fe(8),xt("routerLink",s.isLoggedIn?rr(2,dM):rr(3,hM)),Fe(9),xt("ngIf",s.isMenuOpen))},dependencies:[Oi,dn,Yo]});let t=e;return t})();var Wi=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=je({type:e,selectors:[["app-footer"]],standalone:!0,features:[Be],decls:5,vars:0,consts:[[1,"bg-rose-700","dark:bg-zinc-950","text-white","dark:text-gray-300","text-center","py-4","shadow-inner","shadow-slate-300","dark:shadow-rose-950","transition-all","duration-500","ease-in-out"],[1,"container","mx-auto"],["href","https://hakeemellis.com/","target","_blank"],[1,"text-md","font-semibold"]],template:function(i,s){i&1&&(M(0,"footer",0)(1,"div",1)(2,"a",2)(3,"p",3),V(4,"\xA9 2024 Angular Banking - Hakeem Ellis | All Rights Reserved"),N()()()())}});let t=e;return t})();var fM=(()=>{let e=class e{constructor(r){this.router=r}navigateToLogin(){this.router.navigate(["login"])}};e.\u0275fac=function(i){return new(i||e)($(wt))},e.\u0275cmp=je({type:e,selectors:[["app-root"]],standalone:!0,features:[Be],decls:13,vars:0,consts:[[1,"h-screen","relative","bg-cover","bg-center",2,"background-image","url('assets/photo/main.jpg')"],[1,"absolute","inset-0","bg-black","bg-opacity-70"],[1,"relative","z-10","flex","items-center","justify-center","h-full"],[1,"text-center","lg:mt-10","mt-0"],[1,"text-6xl","text-rose-700"],[1,"text-lg","text-gray-300","lg:mt-0","mt-20"],[1,"btn-sign-in","mt-4",3,"click"]],template:function(i,s){i&1&&(ce(0,"app-navbar-general"),M(1,"div",0),ce(2,"div",1),M(3,"div",2)(4,"div",3)(5,"h1",4),V(6,"Welcome to Angular Banking"),N(),ce(7,"br"),M(8,"p",5),V(9,"Please sign in to access your account."),N(),M(10,"button",6),Ie("click",function(){return s.navigateToLogin()}),V(11,"Sign In"),N()()()(),ce(12,"app-footer"))},dependencies:[La,Wi],styles:[".container1[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;font-family:Arial,sans-serif}.btn-sign-in[_ngcontent-%COMP%]{margin-top:20px;padding:10px 20px;font-size:18px;background-color:#be123c;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease}.btn-sign-in[_ngcontent-%COMP%]:hover{background-color:#881337}"]});let t=e;return t})();var pM=(()=>{let e=class e{constructor(r,i){this.router=r,this.authService=i,this.hasRefreshed=!1}signIn(r,i,s){r.preventDefault(),this.authService.login(i,s).then(()=>{alert("Thanks for logging in"),this.router.navigate(["/dashboard"]),this.hasRefreshed||setTimeout(()=>{window.location.reload(),this.hasRefreshed=!0,console.log(this.hasRefreshed)},1)}).catch(o=>{console.error("Error signing in:",o.message),alert("Sign in failed. Please try again.")}).finally(()=>{i="",s=""})}};e.\u0275fac=function(i){return new(i||e)($(wt),$(Rn))},e.\u0275cmp=je({type:e,selectors:[["app-login"]],standalone:!0,features:[Be],decls:24,vars:0,consts:[["email",""],["password",""],[1,"h-screen","relative","bg-cover","bg-center",2,"background-image","url('assets/photo/login.jpg')"],[1,"absolute","inset-0","bg-black","bg-opacity-70"],[1,"login-container","relative"],[1,"pb-5","text-3xl","font-semibold","text-rose-700"],[1,"form-lg","text-center",3,"submit"],[1,"m-0","mx-auto","my-auto"],[1,"form-group"],["for","username",1,"text-gray-300"],["type","email","id","username","name","username","required","",1,"border-2","border-black","rounded-md","px-7","text-center"],["for","password",1,"ml","text-gray-300"],["type","password","id","password","name","password","required","",1,"border-2","border-black","rounded-md","px-7","text-center","ml-2"],["type","submit",1,"btn-login"],[1,"text-white","text-xl","font-semibold","mt-4"],["routerLink","/signup",1,"btn-login","mt-3"]],template:function(i,s){if(i&1){let o=Ci();ce(0,"app-navbar-general"),M(1,"div",2),ce(2,"div",3),M(3,"div",4)(4,"h2",5),V(5,"Welcome!"),N(),M(6,"form",6),Ie("submit",function(c){tr(o);let l=Or(12),d=Or(17);return nr(s.signIn(c,l.value,d.value))}),M(7,"div",7)(8,"div",8)(9,"label",9),V(10,"Username: "),N(),ce(11,"input",10,0),N(),M(13,"div",8)(14,"label",11),V(15,"Password:"),N(),ce(16,"input",12,1),N()(),M(18,"button",13),V(19,"Login"),N()(),M(20,"p",14),V(21,"or"),N(),M(22,"button",15),V(23,"Signup"),N()()()}},dependencies:[Oi,La],styles:[".login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;margin-top:20px}.form-group[_ngcontent-%COMP%]{margin:0 auto 20px}.btn-login[_ngcontent-%COMP%]{padding:5px 70px;font-size:18px;background-color:#be123c;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease}.btn-login[_ngcontent-%COMP%]:hover{background-color:#881337}"]});let t=e;return t})();var mM=()=>["/dashboard"],gM=()=>["#"];function OW(t,e){if(t&1){let n=Ci();M(0,"div",10)(1,"a",11),V(2,"Home"),N(),M(3,"a",12),V(4,"Dashboard"),N(),M(5,"a",13),Ie("click",function(i){tr(n);let s=Ti();return nr(s.toggleDarkMode(i))}),V(6,"Dark/Light"),N(),M(7,"a",13),Ie("click",function(i){tr(n);let s=Ti();return nr(s.signOut(i))}),V(8,"Sign Out"),N()()}if(t&2){let n=Ti();Fe(3),xt("routerLink",n.isLoggedIn?rr(1,mM):rr(2,gM))}}var Va=(()=>{let e=class e{constructor(r,i){this.AppComponent=r,this.authService=i,this.isLoggedIn=!1,this.isMenuOpen=!1}ngOnInit(){this.authService.authState.subscribe(r=>{this.isLoggedIn=!!r})}toggleDarkMode(r){r.preventDefault(),this.AppComponent.toggleDarkMode()}signOut(r){r.preventDefault(),this.authService.signOut()}toggleMenu(){this.isMenuOpen=!this.isMenuOpen,console.log(this.isMenuOpen)}};e.\u0275fac=function(i){return new(i||e)($(Fa),$(Rn))},e.\u0275cmp=je({type:e,selectors:[["app-navbar"]],standalone:!0,features:[Be],decls:18,vars:4,consts:[[1,"bg-white","dark:bg-zinc-950","shadow-sm","shadow-rose-100","dark:shadow-rose-950","px-4","py-7","fixed","w-full","top-0","z-20","transition-all","duration-500","ease-in-out"],[1,"container","mx-auto","flex","justify-between","items-center"],["routerLink","/",1,"text-rose-600","dark:text-rose-600","dark:hover:text-rose-800","font-bold","lg:text-2xl","md:text-xl"],[1,"hidden","lg:flex"],["routerLink","/",1,"text-rose-600","hover:text-rose-900","font-semibold","dark:text-rose-600","dark:hover:text-rose-800","lg:px-4","sm:px-4"],[1,"text-rose-600","hover:text-rose-900","font-semibold","dark:text-rose-600","dark:hover:text-rose-800","lg:px-4","sm:px-4",3,"routerLink"],["href","#",1,"text-rose-600","hover:text-rose-900","font-semibold","dark:text-rose-600","dark:hover:text-rose-800","lg:px-4","sm:px-4",3,"click"],[1,"lg:hidden"],[1,"text-rose-600","dark:text-rose-600","focus:outline-none","text-xl",3,"click"],["class","lg:hidden absolute top-full left-0 w-full bg-white dark:bg-zinc-950 shadow-md transition-all duration-500 ease-in-out text-center",4,"ngIf"],[1,"lg:hidden","absolute","top-full","left-0","w-full","bg-white","dark:bg-zinc-950","shadow-md","transition-all","duration-500","ease-in-out","text-center"],["routerLink","/",1,"block","py-2","px-4","text-rose-600","hover:text-rose-900","font-semibold","dark:text-rose-600","dark:hover:text-rose-800"],[1,"block","py-2","px-4","text-rose-600","hover:text-rose-900","font-semibold","dark:text-rose-600","dark:hover:text-rose-800",3,"routerLink"],["href","#",1,"block","py-2","px-4","text-rose-600","hover:text-rose-900","font-semibold","dark:text-rose-600","dark:hover:text-rose-800",3,"click"]],template:function(i,s){i&1&&(M(0,"nav",0)(1,"div",1)(2,"div")(3,"a",2),V(4,"Angular Banking"),N()(),M(5,"div",3)(6,"a",4),V(7,"Home"),N(),M(8,"a",5),V(9,"Dashboard"),N(),M(10,"a",6),Ie("click",function(a){return s.toggleDarkMode(a)}),V(11,"Dark/Light"),N(),M(12,"a",6),Ie("click",function(a){return s.signOut(a)}),V(13,"Sign Out"),N()(),M(14,"div",7)(15,"button",8),Ie("click",function(){return s.toggleMenu()}),V(16," \u2630 "),N()(),bi(17,OW,9,3,"div",9),N()()),i&2&&(Fe(8),xt("routerLink",s.isLoggedIn?rr(2,mM):rr(3,gM)),Fe(9),xt("ngIf",s.isMenuOpen))},dependencies:[Oi,dn,Yo],styles:[".dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:calc(100% + 10px);left:0;z-index:10;background-color:#fff;border:1px solid #e5e7eb;box-shadow:0 2px 4px #0000001a;padding:8px 0;width:100%}.dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:8px 16px;color:#333;text-decoration:none;transition:background-color .3s ease}.dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#f3f4f6}.dropdown-menu-dark[_ngcontent-%COMP%]{position:absolute;top:calc(100% + 10px);left:0;z-index:10;background-color:#000;border:1px solid #e5e7eb;box-shadow:0 2px 4px #0000001a;padding:8px 0;width:100%}.dropdown-menu-dark[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:8px 16px;color:#333;text-decoration:none;transition:background-color .3s ease}.dropdown-menu-dark[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#f3f4f6}"]});let t=e;return t})();var yM="@firebase/database",_M="1.0.5";var yb="";function FW(t){yb=t}var EE=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),pt(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:oa(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var bE=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return cr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var JM=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new EE(e)}}catch{}return new bE},ro=JM("localStorage"),CE=JM("sessionStorage");var Ba=new ur("@firebase/database"),LW=function(){let t=1;return function(){return t++}}(),XM=function(t){let e=aR(t),n=new zh;n.update(e);let r=n.digest();return Wh.encodeByteArray(r)},gl=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=gl.apply(null,r):typeof r=="object"?e+=pt(r):e+=r,e+=" "}return e},so=null,vM=!0,VW=function(t,e){k(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Ba.logLevel=pe.VERBOSE,so=Ba.log.bind(Ba),e&&CE.set("logging_enabled",!0)):typeof t=="function"?so=t:(so=null,CE.remove("logging_enabled"))},kt=function(...t){if(vM===!0&&(vM=!1,so===null&&CE.get("logging_enabled")===!0&&VW(!0)),so){let e=gl.apply(null,t);so(e)}},yl=function(t){return function(...e){kt(t,...e)}},TE=function(...t){let e="FIREBASE INTERNAL ERROR: "+gl(...t);Ba.error(e)},Xr=function(...t){let e=`FIREBASE FATAL ERROR: ${gl(...t)}`;throw Ba.error(e),new Error(e)},Zt=function(...t){let e="FIREBASE WARNING: "+gl(...t);Ba.warn(e)},UW=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Zt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ZM=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},jW=function(t){if(ar()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},qa="[MIN_NAME]",oo="[MAX_NAME]",Ja=function(t,e){if(t===e)return 0;if(t===qa||e===oo)return-1;if(e===qa||t===oo)return 1;{let n=wM(t),r=wM(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},BW=function(t,e){return t===e?0:t<e?-1:1},tl=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+pt(e))},_b=function(t){if(typeof t!="object"||t===null)return pt(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=pt(e[r]),n+=":",n+=_b(t[e[r]]);return n+="}",n},eP=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function en(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var tP=function(t){k(!ZM(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let d=l.join(""),f="";for(c=0;c<64;c+=8){let m=parseInt(d.substr(c,8),2).toString(16);m.length===1&&(m="0"+m),f=f+m}return f.toLowerCase()},$W=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},HW=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function qW(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var GW=new RegExp("^-?(0*)\\d{1,10}$"),zW=-2147483648,WW=2147483647,wM=function(t){if(GW.test(t)){let e=Number(t);if(e>=zW&&e<=WW)return e}return null},Xa=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw Zt("Exception was thrown by user callback.",n),e},Math.floor(0))}},KW=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ol=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var DE=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Zt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var SE=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(kt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Zt(e)}},al=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),lp="5",nP="v",rP="s",iP="r",sP="f",oP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,aP="ls",cP="p",AE="ac",uP="websocket",lP="long_polling";var dp=class{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ro.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ro.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function QW(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function dP(t,e,n){k(typeof e=="string","typeof type must == string"),k(typeof n=="object","typeof params must == object");let r;if(e===uP)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===lP)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);QW(t)&&(n.ns=t.namespace);let i=[];return en(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var RE=class{constructor(){this.counters_={}}incrementCounter(e,n=1){cr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return JA(this.counters_)}};var mE={},gE={};function vb(t){let e=t.toString();return mE[e]||(mE[e]=new RE),mE[e]}function YW(t,e){let n=t.toString();return gE[n]||(gE[n]=e()),gE[n]}var xE=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Xa(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var IM="start",JW="close",XW="pLPCommand",ZW="pRTLPCB",hP="id",fP="pw",pP="ser",e3="cb",t3="seg",n3="ts",r3="d",i3="dframe",mP=1870,gP=30,s3=mP-gP,o3=25e3,a3=3e4,NE=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=yl(e),this.stats_=vb(n),this.urlFn=c=>(this.appCheckToken&&(c[AE]=this.appCheckToken),dP(n,lP,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new xE(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(a3)),jW(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ME((...s)=>{let[o,a,c,l,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===IM)this.id=a,this.password=c;else if(o===JW)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[IM]="t",r[pP]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[e3]=this.scriptTagHolder.uniqueCallbackIdentifier),r[nP]=lp,this.transportSessionId&&(r[rP]=this.transportSessionId),this.lastSessionId&&(r[aP]=this.lastSessionId),this.applicationId&&(r[cP]=this.applicationId),this.appCheckToken&&(r[AE]=this.appCheckToken),typeof location<"u"&&location.hostname&&oP.test(location.hostname)&&(r[iP]=sP);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return ar()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!$W()&&!HW()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=pt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=J_(n),i=eP(r,s3);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(ar())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[i3]="t",r[hP]=e,r[fP]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=pt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},ME=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,ar())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=LW(),window[XW+this.uniqueCallbackIdentifier]=e,window[ZW+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){kt("frame writing exception"),a.stack&&kt(a.stack),kt(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||kt("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[hP]=this.myID,e[fP]=this.myPW,e[pP]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+gP+r.length<=mP;){let o=this.pendingSegs.shift();r=r+"&"+t3+i+"="+o.seg+"&"+n3+i+"="+o.ts+"&"+r3+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(o3)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){ar()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{kt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var c3=16384,u3=45e3,hp=null;typeof MozWebSocket<"u"?hp=MozWebSocket:typeof WebSocket<"u"&&(hp=WebSocket);var nl=(()=>{class t{constructor(n,r,i,s,o,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=yl(this.connId),this.stats_=vb(r),this.connURL=t.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[nP]=lp,!ar()&&typeof location<"u"&&location.hostname&&oP.test(location.hostname)&&(a[iP]=sP),r&&(a[rP]=r),i&&(a[aP]=i),s&&(a[AE]=s),o&&(a[cP]=o),dP(n,uP,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ro.set("previous_websocket_failure",!0);try{let i;if(ar()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${lp}/${yb}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new hp(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&hp!==null&&!t.forceDisallow_}static previouslyFailed(){return ro.isInMemoryStorage||ro.get("previous_websocket_failure")===!0}markConnectionHealthy(){ro.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=oa(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(k(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=pt(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=eP(r,c3);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(u3))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),l3=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[NE,nl]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=nl&&nl.isAvailable(),i=r&&!nl.previouslyFailed();if(n.webSocketOnly&&(r||Zt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[nl];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),d3=6e4,h3=5e3,f3=10*1024,p3=100*1024,yE="t",EM="d",m3="s",bM="r",g3="e",CM="o",TM="a",DM="n",SM="p",y3="h",PE=class{constructor(e,n,r,i,s,o,a,c,l,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=yl("c:"+this.id+":"),this.transportManager_=new l3(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ol(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>p3?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>f3?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(yE in e){let n=e[yE];n===TM?this.upgradeIfSecondaryHealthy_():n===bM?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===CM&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=tl("t",e),r=tl("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:SM,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:TM,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:DM,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=tl("t",e),r=tl("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=tl(yE,e);if(EM in e){let r=e[EM];if(n===y3){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===DM){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===m3?this.onConnectionShutdown_(r):n===bM?this.onReset_(r):n===g3?TE("Server Error: "+r):n===CM?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):TE("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),lp!==r&&Zt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ol(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(d3))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ol(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(h3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:SM,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ro.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var fp=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var pp=class{constructor(e){this.allowedEvents_=e,this.listeners_={},k(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){k(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var mp=class t extends pp{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!mu()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return k(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var AM=32,RM=768,ke=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function Re(){return new ke("")}function me(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Qi(t){return t.pieces_.length-t.pieceNum_}function qe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ke(t.pieces_,e)}function yP(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function _3(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function _P(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function vP(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ke(e,0)}function gt(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ke)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new ke(n,0)}function ye(t){return t.pieceNum_>=t.pieces_.length}function Xt(t,e){let n=me(t),r=me(e);if(n===null)return e;if(n===r)return Xt(qe(t),qe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function wb(t,e){if(Qi(t)!==Qi(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function zn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Qi(t)>Qi(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var kE=class{constructor(e,n){this.errorPrefix_=n,this.parts_=_P(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=_u(this.parts_[r]);wP(this)}};function v3(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=_u(e),wP(t)}function w3(t){let e=t.parts_.pop();t.byteLength_-=_u(e),t.parts_.length>0&&(t.byteLength_-=1)}function wP(t){if(t.byteLength_>RM)throw new Error(t.errorPrefix_+"has a key path longer than "+RM+" bytes ("+t.byteLength_+").");if(t.parts_.length>AM)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+AM+") or object contains a cycle "+no(t))}function no(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var OE=class t extends pp{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return k(e==="visible","Unknown event type: "+e),[this.visible_]}};var rl=1e3,I3=60*5*1e3,xM=30*1e3,E3=1.3,b3=3e4,C3="server_kill",NM=3,Ib=(()=>{class t extends fp{constructor(n,r,i,s,o,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=yl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=rl,this.maxReconnectDelay_=I3,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!ar())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");OE.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&mp.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(pt(o)),k(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new Fi,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),k(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),k(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,d=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(d,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&cr(n,"w")){let i=Os(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Zt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||sR(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=xM)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=iR(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),k(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+pt(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):TE("Unrecognized action received from server: "+pt(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){k(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=rl,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=rl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>b3&&(this.reconnectDelay_=rl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*E3)}this.onConnectStatus_(!1)}establishConnection_(){return v(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},d=function(m){k(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(m)};this.realtime_={close:l,sendRequest:d};let f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[m,y]=yield Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);a?kt("getToken() completed but was canceled"):(kt("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=y&&y.token,c=new PE(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,E=>{Zt(E+" ("+this.repoInfo_.toString()+")"),this.interrupt(C3)},o))}catch(m){this.log_("Failed to get token: "+m),a||(this.repoInfo_.nodeAdmin&&Zt(m),l())}}})}interrupt(n){kt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){kt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],gu(this.interruptReasons_)&&(this.reconnectDelay_=rl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>_b(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new ke(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){kt("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=NM&&(this.reconnectDelay_=xM,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){kt("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=NM&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";ar()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+yb.replace(/\./g,"-")]=1,mu()?n["framework.cordova"]=1:Qh()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=mp.getInstance().currentlyOnline();return gu(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),ge=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var Ga=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new ge(qa,e),i=new ge(qa,n);return this.compare(r,i)!==0}minPost(){return ge.MIN}};var up,gp=class extends Ga{static get __EMPTY_NODE(){return up}static set __EMPTY_NODE(e){up=e}compare(e,n){return Ja(e.name,n.name)}isDefinedOn(e){throw ks("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ge.MIN}maxPost(){return new ge(oo,up)}makePost(e,n){return k(typeof e=="string","KeyIndex indexValue must always be a string."),new ge(e,up)}toString(){return".key"}},$a=new gp;var ja=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Gn=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??xn.EMPTY_NODE,this.right=o??xn.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return xn.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return xn.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),FE=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new Gn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},xn=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Gn.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Gn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ja(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ja(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ja(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ja(this.root_,null,this.comparator_,!0,e)}};xn.EMPTY_NODE=new FE;function T3(t,e){return Ja(t.name,e.name)}function Eb(t,e){return Ja(t,e)}var LE;function D3(t){LE=t}var IP=function(t){return typeof t=="number"?"number:"+tP(t):"string:"+t},EP=function(t){if(t.isLeafNode()){let e=t.val();k(typeof e=="string"||typeof e=="number"||typeof e=="object"&&cr(e,".sv"),"Priority must be a string or number.")}else k(t===LE||t.isEmpty(),"priority of unexpected type.");k(t===LE||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var MM,za=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,k(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),EP(this.priorityNode_)}static set __childrenNodeConstructor(n){MM=n}static get __childrenNodeConstructor(){return MM}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return ye(n)?this:me(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=me(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(k(i!==".priority"||Qi(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(qe(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+IP(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=tP(this.value_):n+=this.value_,this.lazyHash_=XM(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(k(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return k(s>=0,"Unknown leaf type: "+r),k(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),bP,CP;function S3(t){bP=t}function A3(t){CP=t}var VE=class extends Ga{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Ja(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ge.MIN}maxPost(){return new ge(oo,new za("[PRIORITY-POST]",CP))}makePost(e,n){let r=bP(e);return new ge(n,new za("[PRIORITY-POST]",r))}toString(){return".priority"}},tt=new VE;var R3=Math.log(2),UE=class{constructor(e){let n=s=>parseInt(Math.log(s)/R3,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},yp=function(t,e,n,r){t.sort(e);let i=function(c,l){let d=l-c,f,m;if(d===0)return null;if(d===1)return f=t[c],m=n?n(f):f,new Gn(m,f.node,Gn.BLACK,null,null);{let y=parseInt(d/2,10)+c,E=i(c,y),x=i(y+1,l);return f=t[y],m=n?n(f):f,new Gn(m,f.node,Gn.BLACK,E,x)}},s=function(c){let l=null,d=null,f=t.length,m=function(E,x){let R=f-E,F=f;f-=E;let q=i(R+1,F),B=t[R],G=n?n(B):B;y(new Gn(G,B.node,x,null,q))},y=function(E){l?(l.left=E,l=E):(d=E,l=E)};for(let E=0;E<c.count;++E){let x=c.nextBitIsOne(),R=Math.pow(2,c.count-(E+1));x?m(R,Gn.BLACK):(m(R,Gn.BLACK),m(R,Gn.RED))}return d},o=new UE(t.length),a=s(o);return new xn(r||e,a)};var _E,Ua={},Wa=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return k(Ua&&tt,"ChildrenNode.ts has not been loaded"),_E=_E||new t({".priority":Ua},{".priority":tt}),_E}get(e){let n=Os(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof xn?n:null}hasIndex(e){return cr(this.indexSet_,e.toString())}addIndex(e,n){k(e!==$a,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(ge.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=yp(r,e.getCompare()):a=Ua;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let d=Object.assign({},this.indexes_);return d[c]=a,new t(d,l)}addToIndexes(e,n){let r=yu(this.indexes_,(i,s)=>{let o=Os(this.indexSet_,s);if(k(o,"Missing index implementation for "+s),i===Ua)if(o.isDefinedOn(e.node)){let a=[],c=n.getIterator(ge.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),yp(a,o.getCompare())}else return Ua;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new ge(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=yu(this.indexes_,i=>{if(i===Ua)return i;{let s=n.get(e.name);return s?i.remove(new ge(e.name,s)):i}});return new t(r,this.indexSet_)}};var il,le=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&EP(this.priorityNode_),this.children_.isEmpty()&&k(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return il||(il=new t(new xn(Eb),null,Wa.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||il}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?il:r}}getChild(n){let r=me(n);return r===null?this:this.getImmediateChild(r).getChild(qe(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(k(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new ge(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?il:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=me(n);if(i===null)return r;{k(me(n)!==".priority"||Qi(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(qe(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(tt,(a,c)=>{r[a]=c.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+IP(this.getPriority().val())+":"),this.forEachChild(tt,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":XM(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new ge(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new ge(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new ge(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,ge.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,ge.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===_l?-1:0}withIndex(n){if(n===$a||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===$a||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(tt),s=r.getIterator(tt),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===$a?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),jE=class extends le{constructor(){super(new xn(Eb),le.EMPTY_NODE,Wa.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return le.EMPTY_NODE}isEmpty(){return!1}},_l=new jE;Object.defineProperties(ge,{MIN:{value:new ge(qa,le.EMPTY_NODE)},MAX:{value:new ge(oo,_l)}});gp.__EMPTY_NODE=le.EMPTY_NODE;za.__childrenNodeConstructor=le;D3(_l);A3(_l);var x3=!0;function Et(t,e=null){if(t===null)return le.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),k(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new za(n,Et(e))}if(!(t instanceof Array)&&x3){let n=[],r=!1;if(en(t,(o,a)=>{if(o.substring(0,1)!=="."){let c=Et(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new ge(o,c)))}}),n.length===0)return le.EMPTY_NODE;let s=yp(n,T3,o=>o.name,Eb);if(r){let o=yp(n,tt.getCompare());return new le(s,Et(e),new Wa({".priority":o},{".priority":tt}))}else return new le(s,Et(e),Wa.Default)}else{let n=le.EMPTY_NODE;return en(t,(r,i)=>{if(cr(t,r)&&r.substring(0,1)!=="."){let s=Et(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Et(e))}}S3(Et);var BE=class extends Ga{constructor(e){super(),this.indexPath_=e,k(!ye(e)&&me(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Ja(e.name,n.name):s}makePost(e,n){let r=Et(e),i=le.EMPTY_NODE.updateChild(this.indexPath_,r);return new ge(n,i)}maxPost(){let e=le.EMPTY_NODE.updateChild(this.indexPath_,_l);return new ge(oo,e)}toString(){return _P(this.indexPath_,0).join("/")}};var $E=class extends Ga{compare(e,n){let r=e.node.compareTo(n.node);return r===0?Ja(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ge.MIN}maxPost(){return ge.MAX}makePost(e,n){let r=Et(e);return new ge(n,r)}toString(){return".value"}},N3=new $E;function TP(t){return{type:"value",snapshotNode:t}}function Ka(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function dl(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function hl(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function M3(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var fl=class{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){k(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(dl(n,a)):k(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Ka(n,r)):o.trackChildChange(hl(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(tt,(i,s)=>{n.hasChild(i)||r.trackChildChange(dl(i,s))}),n.isLeafNode()||n.forEachChild(tt,(i,s)=>{if(e.hasChild(i)){let o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(hl(i,s,o))}else r.trackChildChange(Ka(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?le.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var _p=class t{constructor(e){this.indexedFilter_=new fl(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new ge(n,r))||(r=le.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=le.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(le.EMPTY_NODE);let s=this;return n.forEachChild(tt,(o,a)=>{s.matches(new ge(o,a))||(i=i.updateImmediateChild(o,le.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var HE=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new _p(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new ge(n,r))||(r=le.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=le.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=le.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(le.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,le.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){let f=this.index_.getCompare();o=(m,y)=>f(y,m)}else o=this.index_.getCompare();let a=e;k(a.numChildren()===this.limit_,"");let c=new ge(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(c);if(a.hasChild(n)){let f=a.getImmediateChild(n),m=i.getChildAfterChild(this.index_,l,this.reverse_);for(;m!=null&&(m.name===n||a.hasChild(m.name));)m=i.getChildAfterChild(this.index_,m,this.reverse_);let y=m==null?1:o(m,c);if(d&&!r.isEmpty()&&y>=0)return s?.trackChildChange(hl(n,r,f)),a.updateImmediateChild(n,r);{s?.trackChildChange(dl(n,f));let x=a.updateImmediateChild(n,le.EMPTY_NODE);return m!=null&&this.rangedFilter_.matches(m)?(s?.trackChildChange(Ka(m.name,m.node)),x.updateImmediateChild(m.name,m.node)):x}}else return r.isEmpty()?e:d&&o(l,c)>=0?(s!=null&&(s.trackChildChange(dl(l.name,l.node)),s.trackChildChange(Ka(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,le.EMPTY_NODE)):e}};var qE=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=tt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return k(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return k(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:qa}hasEnd(){return this.endSet_}getIndexEndValue(){return k(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return k(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:oo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return k(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===tt}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function P3(t){return t.loadsAllData()?new fl(t.getIndex()):t.hasLimit()?new HE(t):new _p(t)}function PM(t){let e={};if(t.isDefault())return e;let n;if(t.index_===tt?n="$priority":t.index_===N3?n="$value":t.index_===$a?n="$key":(k(t.index_ instanceof BE,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=pt(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=pt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+pt(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=pt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+pt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function kM(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==tt&&(e.i=t.index_.toString()),e}var GE=class t extends fp{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=yl("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(k(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let c=PM(e._queryParams);this.restRequest_(s+".json",c,(l,d)=>{let f=d;if(l===404&&(f=null,l=null),l===null&&this.onDataUpdate_(s,f,!1,r),Os(this.listens_,o)===a){let m;l?l===401?m="permission_denied":m="rest_error:"+l:m="ok",i(m,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=PM(e._queryParams),r=e._path.toString(),i=new Fi;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ls(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=oa(a.responseText)}catch{Zt("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Zt("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var zE=class{constructor(){this.rootNode_=le.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function vp(){return{value:null,children:new Map}}function DP(t,e,n){if(ye(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=me(e);t.children.has(r)||t.children.set(r,vp());let i=t.children.get(r);e=qe(e),DP(i,e,n)}}function WE(t,e,n){t.value!==null?n(e,t.value):k3(t,(r,i)=>{let s=new ke(e.toString()+"/"+r);WE(i,s,n)})}function k3(t,e){t.children.forEach((n,r)=>{e(r,n)})}var KE=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&en(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var OM=10*1e3,O3=30*1e3,F3=5*60*1e3,QE=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new KE(e);let r=OM+(O3-OM)*Math.random();ol(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;en(e,(i,s)=>{s>0&&cr(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),ol(this.reportStats_.bind(this),Math.floor(Math.random()*2*F3))}};var Cr=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Cr||{});function SP(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function bb(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Cb(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var YE=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Cr.ACK_USER_WRITE,this.source=SP()}operationForChild(e){if(ye(this.path)){if(this.affectedTree.value!=null)return k(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new ke(e));return new t(Re(),n,this.revert)}}else return k(me(this.path)===e,"operationForChild called for unrelated child."),new t(qe(this.path),this.affectedTree,this.revert)}};var wp=class t{constructor(e,n){this.source=e,this.path=n,this.type=Cr.LISTEN_COMPLETE}operationForChild(e){return ye(this.path)?new t(this.source,Re()):new t(this.source,qe(this.path))}};var Qa=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Cr.OVERWRITE}operationForChild(e){return ye(this.path)?new t(this.source,Re(),this.snap.getImmediateChild(e)):new t(this.source,qe(this.path),this.snap)}};var Ip=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Cr.MERGE}operationForChild(e){if(ye(this.path)){let n=this.children.subtree(new ke(e));return n.isEmpty()?null:n.value?new Qa(this.source,Re(),n.value):new t(this.source,Re(),n)}else return k(me(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,qe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Zr=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ye(e))return this.isFullyInitialized()&&!this.filtered_;let n=me(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var JE=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function L3(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(M3(o.childName,o.snapshotNode))}),sl(t,i,"child_removed",e,r,n),sl(t,i,"child_added",e,r,n),sl(t,i,"child_moved",s,r,n),sl(t,i,"child_changed",e,r,n),sl(t,i,"value",e,r,n),i}function sl(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,c)=>U3(t,a,c)),o.forEach(a=>{let c=V3(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function V3(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function U3(t,e,n){if(e.childName==null||n.childName==null)throw ks("Should only compare child_ events.");let r=new ge(e.childName,e.snapshotNode),i=new ge(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function Op(t,e){return{eventCache:t,serverCache:e}}function cl(t,e,n,r){return Op(new Zr(e,n,r),t.serverCache)}function AP(t,e,n,r){return Op(t.eventCache,new Zr(e,n,r))}function XE(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ao(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var vE,j3=()=>(vE||(vE=new xn(BW)),vE),tn=class t{constructor(e,n=j3()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return en(e,(r,i)=>{n=n.set(new ke(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Re(),value:this.value};if(ye(e))return null;{let r=me(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(qe(e),n);return s!=null?{path:gt(new ke(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ye(e))return this;{let n=me(e),r=this.children.get(n);return r!==null?r.subtree(qe(e)):new t(null)}}set(e,n){if(ye(e))return new t(n,this.children);{let r=me(e),s=(this.children.get(r)||new t(null)).set(qe(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(ye(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=me(e),r=this.children.get(n);if(r){let i=r.remove(qe(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(ye(e))return this.value;{let n=me(e),r=this.children.get(n);return r?r.get(qe(e)):null}}setTree(e,n){if(ye(e))return n;{let r=me(e),s=(this.children.get(r)||new t(null)).setTree(qe(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(Re(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(gt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Re(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(ye(e))return null;{let s=me(e),o=this.children.get(s);return o?o.findOnPath_(qe(e),gt(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Re(),n)}foreachOnPath_(e,n,r){if(ye(e))return this;{this.value&&r(n,this.value);let i=me(e),s=this.children.get(i);return s?s.foreachOnPath_(qe(e),gt(n,i),r):new t(null)}}foreach(e){this.foreach_(Re(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(gt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var Wn=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new tn(null))}};function ul(t,e,n){if(ye(e))return new Wn(new tn(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=Xt(i,e);return s=s.updateChild(o,n),new Wn(t.writeTree_.set(i,s))}else{let i=new tn(n),s=t.writeTree_.setTree(e,i);return new Wn(s)}}}function FM(t,e,n){let r=t;return en(n,(i,s)=>{r=ul(r,gt(e,i),s)}),r}function LM(t,e){if(ye(e))return Wn.empty();{let n=t.writeTree_.setTree(e,new tn(null));return new Wn(n)}}function ZE(t,e){return uo(t,e)!=null}function uo(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Xt(n.path,e)):null}function VM(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(tt,(r,i)=>{e.push(new ge(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new ge(r,i.value))}),e}function Ki(t,e){if(ye(e))return t;{let n=uo(t,e);return n!=null?new Wn(new tn(n)):new Wn(t.writeTree_.subtree(e))}}function eb(t){return t.writeTree_.isEmpty()}function Ya(t,e){return RP(Re(),t.writeTree_,e)}function RP(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(k(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=RP(gt(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(gt(t,".priority"),r)),n}}function Tb(t,e){return PP(e,t)}function B3(t,e,n,r,i){k(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=ul(t.visibleWrites,e,n)),t.lastWriteId=r}function $3(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function H3(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);k(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&q3(a,r.path)?i=!1:zn(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return G3(t),!0;if(r.snap)t.visibleWrites=LM(t.visibleWrites,r.path);else{let a=r.children;en(a,c=>{t.visibleWrites=LM(t.visibleWrites,gt(r.path,c))})}return!0}else return!1}function q3(t,e){if(t.snap)return zn(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&zn(gt(t.path,n),e))return!0;return!1}function G3(t){t.visibleWrites=xP(t.allWrites,z3,Re()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function z3(t){return t.visible}function xP(t,e,n){let r=Wn.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)zn(n,o)?(a=Xt(n,o),r=ul(r,a,s.snap)):zn(o,n)&&(a=Xt(o,n),r=ul(r,Re(),s.snap.getChild(a)));else if(s.children){if(zn(n,o))a=Xt(n,o),r=FM(r,a,s.children);else if(zn(o,n))if(a=Xt(o,n),ye(a))r=FM(r,Re(),s.children);else{let c=Os(s.children,me(a));if(c){let l=c.getChild(qe(a));r=ul(r,Re(),l)}}}else throw ks("WriteRecord should have .snap or .children")}}return r}function NP(t,e,n,r,i){if(!r&&!i){let s=uo(t.visibleWrites,e);if(s!=null)return s;{let o=Ki(t.visibleWrites,e);if(eb(o))return n;if(n==null&&!ZE(o,Re()))return null;{let a=n||le.EMPTY_NODE;return Ya(o,a)}}}else{let s=Ki(t.visibleWrites,e);if(!i&&eb(s))return n;if(!i&&n==null&&!ZE(s,Re()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(zn(l.path,e)||zn(e,l.path))},a=xP(t.allWrites,o,e),c=n||le.EMPTY_NODE;return Ya(a,c)}}}function W3(t,e,n){let r=le.EMPTY_NODE,i=uo(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(tt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=Ki(t.visibleWrites,e);return n.forEachChild(tt,(o,a)=>{let c=Ya(Ki(s,new ke(o)),a);r=r.updateImmediateChild(o,c)}),VM(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=Ki(t.visibleWrites,e);return VM(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function K3(t,e,n,r,i){k(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=gt(e,n);if(ZE(t.visibleWrites,s))return null;{let o=Ki(t.visibleWrites,s);return eb(o)?i.getChild(n):Ya(o,i.getChild(n))}}function Q3(t,e,n,r){let i=gt(e,n),s=uo(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=Ki(t.visibleWrites,i);return Ya(o,r.getNode().getImmediateChild(n))}else return null}function Y3(t,e){return uo(t.visibleWrites,e)}function J3(t,e,n,r,i,s,o){let a,c=Ki(t.visibleWrites,e),l=uo(c,Re());if(l!=null)a=l;else if(n!=null)a=Ya(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let d=[],f=o.getCompare(),m=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),y=m.getNext();for(;y&&d.length<i;)f(y,r)!==0&&d.push(y),y=m.getNext();return d}else return[]}function X3(){return{visibleWrites:Wn.empty(),allWrites:[],lastWriteId:-1}}function Ep(t,e,n,r){return NP(t.writeTree,t.treePath,e,n,r)}function Db(t,e){return W3(t.writeTree,t.treePath,e)}function UM(t,e,n,r){return K3(t.writeTree,t.treePath,e,n,r)}function bp(t,e){return Y3(t.writeTree,gt(t.treePath,e))}function Z3(t,e,n,r,i,s){return J3(t.writeTree,t.treePath,e,n,r,i,s)}function Sb(t,e,n){return Q3(t.writeTree,t.treePath,e,n)}function MP(t,e){return PP(gt(t.treePath,e),t.writeTree)}function PP(t,e){return{treePath:t,writeTree:e}}var tb=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;k(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),k(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,hl(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,dl(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Ka(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,hl(r,e.snapshotNode,i.oldSnap));else throw ks("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var nb=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},kP=new nb,pl=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Zr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Sb(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ao(this.viewCache_),s=Z3(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function e9(t){return{filter:t}}function t9(t,e){k(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),k(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function n9(t,e,n,r,i){let s=new tb,o,a;if(n.type===Cr.OVERWRITE){let l=n;l.source.fromUser?o=rb(t,e,l.path,l.snap,r,i,s):(k(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!ye(l.path),o=Cp(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===Cr.MERGE){let l=n;l.source.fromUser?o=i9(t,e,l.path,l.children,r,i,s):(k(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=ib(t,e,l.path,l.children,r,i,a,s))}else if(n.type===Cr.ACK_USER_WRITE){let l=n;l.revert?o=a9(t,e,l.path,r,i,s):o=s9(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===Cr.LISTEN_COMPLETE)o=o9(t,e,n.path,r,s);else throw ks("Unknown operation type: "+n.type);let c=s.getChanges();return r9(e,o,c),{viewCache:o,changes:c}}function r9(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=XE(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(TP(XE(e)))}}function OP(t,e,n,r,i,s){let o=e.eventCache;if(bp(r,n)!=null)return e;{let a,c;if(ye(n))if(k(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=ao(e),d=l instanceof le?l:le.EMPTY_NODE,f=Db(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{let l=Ep(r,ao(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=me(n);if(l===".priority"){k(Qi(n)===1,"Can't have a priority with additional path components");let d=o.getNode();c=e.serverCache.getNode();let f=UM(r,n,d,c);f!=null?a=t.filter.updatePriority(d,f):a=o.getNode()}else{let d=qe(n),f;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let m=UM(r,n,o.getNode(),c);m!=null?f=o.getNode().getImmediateChild(l).updateChild(d,m):f=o.getNode().getImmediateChild(l)}else f=Sb(r,l,e.serverCache);f!=null?a=t.filter.updateChild(o.getNode(),l,f,d,i,s):a=o.getNode()}}return cl(e,a,o.isFullyInitialized()||ye(n),t.filter.filtersNodes())}}function Cp(t,e,n,r,i,s,o,a){let c=e.serverCache,l,d=o?t.filter:t.filter.getIndexedFilter();if(ye(n))l=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){let y=c.getNode().updateChild(n,r);l=d.updateFullNode(c.getNode(),y,null)}else{let y=me(n);if(!c.isCompleteForPath(n)&&Qi(n)>1)return e;let E=qe(n),R=c.getNode().getImmediateChild(y).updateChild(E,r);y===".priority"?l=d.updatePriority(c.getNode(),R):l=d.updateChild(c.getNode(),y,R,E,kP,null)}let f=AP(e,l,c.isFullyInitialized()||ye(n),d.filtersNodes()),m=new pl(i,f,s);return OP(t,f,n,i,m,a)}function rb(t,e,n,r,i,s,o){let a=e.eventCache,c,l,d=new pl(i,e,s);if(ye(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=cl(e,l,!0,t.filter.filtersNodes());else{let f=me(n);if(f===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=cl(e,l,a.isFullyInitialized(),a.isFiltered());else{let m=qe(n),y=a.getNode().getImmediateChild(f),E;if(ye(m))E=r;else{let x=d.getCompleteChild(f);x!=null?yP(m)===".priority"&&x.getChild(vP(m)).isEmpty()?E=x:E=x.updateChild(m,r):E=le.EMPTY_NODE}if(y.equals(E))c=e;else{let x=t.filter.updateChild(a.getNode(),f,E,m,d,o);c=cl(e,x,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function jM(t,e){return t.eventCache.isCompleteForChild(e)}function i9(t,e,n,r,i,s,o){let a=e;return r.foreach((c,l)=>{let d=gt(n,c);jM(e,me(d))&&(a=rb(t,a,d,l,i,s,o))}),r.foreach((c,l)=>{let d=gt(n,c);jM(e,me(d))||(a=rb(t,a,d,l,i,s,o))}),a}function BM(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function ib(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;ye(n)?l=r:l=new tn(null).setTree(n,r);let d=e.serverCache.getNode();return l.children.inorderTraversal((f,m)=>{if(d.hasChild(f)){let y=e.serverCache.getNode().getImmediateChild(f),E=BM(t,y,m);c=Cp(t,c,new ke(f),E,i,s,o,a)}}),l.children.inorderTraversal((f,m)=>{let y=!e.serverCache.isCompleteForChild(f)&&m.value===null;if(!d.hasChild(f)&&!y){let E=e.serverCache.getNode().getImmediateChild(f),x=BM(t,E,m);c=Cp(t,c,new ke(f),x,i,s,o,a)}}),c}function s9(t,e,n,r,i,s,o){if(bp(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(ye(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Cp(t,e,n,c.getNode().getChild(n),i,s,a,o);if(ye(n)){let l=new tn(null);return c.getNode().forEachChild($a,(d,f)=>{l=l.set(new ke(d),f)}),ib(t,e,n,l,i,s,a,o)}else return e}else{let l=new tn(null);return r.foreach((d,f)=>{let m=gt(n,d);c.isCompleteForPath(m)&&(l=l.set(d,c.getNode().getChild(m)))}),ib(t,e,n,l,i,s,a,o)}}function o9(t,e,n,r,i){let s=e.serverCache,o=AP(e,s.getNode(),s.isFullyInitialized()||ye(n),s.isFiltered());return OP(t,o,n,r,kP,i)}function a9(t,e,n,r,i,s){let o;if(bp(r,n)!=null)return e;{let a=new pl(r,e,i),c=e.eventCache.getNode(),l;if(ye(n)||me(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=Ep(r,ao(e));else{let f=e.serverCache.getNode();k(f instanceof le,"serverChildren would be complete if leaf node"),d=Db(r,f)}d=d,l=t.filter.updateFullNode(c,d,s)}else{let d=me(n),f=Sb(r,d,e.serverCache);f==null&&e.serverCache.isCompleteForChild(d)&&(f=c.getImmediateChild(d)),f!=null?l=t.filter.updateChild(c,d,f,qe(n),a,s):e.eventCache.getNode().hasChild(d)?l=t.filter.updateChild(c,d,le.EMPTY_NODE,qe(n),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Ep(r,ao(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||bp(r,Re())!=null,cl(e,l,o,t.filter.filtersNodes())}}var sb=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new fl(r.getIndex()),s=P3(r);this.processor_=e9(s);let o=n.serverCache,a=n.eventCache,c=i.updateFullNode(le.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(le.EMPTY_NODE,a.getNode(),null),d=new Zr(c,o.isFullyInitialized(),i.filtersNodes()),f=new Zr(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Op(f,d),this.eventGenerator_=new JE(this.query_)}get query(){return this.query_}};function c9(t){return t.viewCache_.serverCache.getNode()}function u9(t,e){let n=ao(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ye(e)&&!n.getImmediateChild(me(e)).isEmpty())?n.getChild(e):null}function $M(t){return t.eventRegistrations_.length===0}function l9(t,e){t.eventRegistrations_.push(e)}function HM(t,e,n){let r=[];if(n){k(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){let o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function qM(t,e,n,r){e.type===Cr.MERGE&&e.source.queryId!==null&&(k(ao(t.viewCache_),"We should always have a full cache before handling merges"),k(XE(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=n9(t.processor_,i,e,n,r);return t9(t.processor_,s.viewCache),k(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,FP(t,s.changes,s.viewCache.eventCache.getNode(),null)}function d9(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(tt,(s,o)=>{r.push(Ka(s,o))}),n.isFullyInitialized()&&r.push(TP(n.getNode())),FP(t,r,n.getNode(),e)}function FP(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return L3(t.eventGenerator_,e,n,i)}var Tp,ob=class{constructor(){this.views=new Map}};function h9(t){k(!Tp,"__referenceConstructor has already been defined"),Tp=t}function f9(){return k(Tp,"Reference.ts has not been loaded"),Tp}function p9(t){return t.views.size===0}function Ab(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return k(s!=null,"SyncTree gave us an op for an invalid query."),qM(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(qM(o,e,n,r));return s}}function m9(t,e,n,r,i){let s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=Ep(n,i?r:null),c=!1;a?c=!0:r instanceof le?(a=Db(n,r),c=!1):(a=le.EMPTY_NODE,c=!1);let l=Op(new Zr(a,c,!1),new Zr(r,i,!1));return new sb(e,l)}return o}function g9(t,e,n,r,i,s){let o=m9(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),l9(o,n),d9(o,n)}function y9(t,e,n,r){let i=e._queryIdentifier,s=[],o=[],a=Yi(t);if(i==="default")for(let[c,l]of t.views.entries())o=o.concat(HM(l,n,r)),$M(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{let c=t.views.get(i);c&&(o=o.concat(HM(c,n,r)),$M(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!Yi(t)&&s.push(new(f9())(e._repo,e._path)),{removed:s,events:o}}function LP(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Ha(t,e){let n=null;for(let r of t.views.values())n=n||u9(r,e);return n}function VP(t,e){if(e._queryParams.loadsAllData())return Fp(t);{let r=e._queryIdentifier;return t.views.get(r)}}function UP(t,e){return VP(t,e)!=null}function Yi(t){return Fp(t)!=null}function Fp(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var Dp;function _9(t){k(!Dp,"__referenceConstructor has already been defined"),Dp=t}function v9(){return k(Dp,"Reference.ts has not been loaded"),Dp}var w9=1,Sp=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new tn(null),this.pendingWriteTree_=X3(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function jP(t,e,n,r,i){return B3(t.pendingWriteTree_,e,n,r,i),i?vl(t,new Qa(SP(),e,n)):[]}function io(t,e,n=!1){let r=$3(t.pendingWriteTree_,e);if(H3(t.pendingWriteTree_,e)){let s=new tn(null);return r.snap!=null?s=s.set(Re(),!0):en(r.children,o=>{s=s.set(new ke(o),!0)}),vl(t,new YE(r.path,s,n))}else return[]}function Lp(t,e,n){return vl(t,new Qa(bb(),e,n))}function I9(t,e,n){let r=tn.fromObject(n);return vl(t,new Ip(bb(),e,r))}function E9(t,e){return vl(t,new wp(bb(),e))}function b9(t,e,n){let r=xb(t,n);if(r){let i=Nb(r),s=i.path,o=i.queryId,a=Xt(s,e),c=new wp(Cb(o),a);return Mb(t,s,c)}else return[]}function ab(t,e,n,r,i=!1){let s=e._path,o=t.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||UP(o,e))){let c=y9(o,e,n,r);p9(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));let l=c.removed;if(a=c.events,!i){let d=l.findIndex(m=>m._queryParams.loadsAllData())!==-1,f=t.syncPointTree_.findOnPath(s,(m,y)=>Yi(y));if(d&&!f){let m=t.syncPointTree_.subtree(s);if(!m.isEmpty()){let y=D9(m);for(let E=0;E<y.length;++E){let x=y[E],R=x.query,F=HP(t,x);t.listenProvider_.startListening(ll(R),Ap(t,R),F.hashFn,F.onComplete)}}}!f&&l.length>0&&!r&&(d?t.listenProvider_.stopListening(ll(e),null):l.forEach(m=>{let y=t.queryToTagMap.get(Vp(m));t.listenProvider_.stopListening(ll(m),y)}))}S9(t,l)}return a}function C9(t,e,n,r){let i=xb(t,r);if(i!=null){let s=Nb(i),o=s.path,a=s.queryId,c=Xt(o,e),l=new Qa(Cb(a),c,n);return Mb(t,o,l)}else return[]}function T9(t,e,n,r){let i=xb(t,r);if(i){let s=Nb(i),o=s.path,a=s.queryId,c=Xt(o,e),l=tn.fromObject(n),d=new Ip(Cb(a),c,l);return Mb(t,o,d)}else return[]}function GM(t,e,n,r=!1){let i=e._path,s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(m,y)=>{let E=Xt(m,i);s=s||Ha(y,E),o=o||Yi(y)});let a=t.syncPointTree_.get(i);a?(o=o||Yi(a),s=s||Ha(a,Re())):(a=new ob,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;s!=null?c=!0:(c=!1,s=le.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((y,E)=>{let x=Ha(E,Re());x&&(s=s.updateImmediateChild(y,x))}));let l=UP(a,e);if(!l&&!e._queryParams.loadsAllData()){let m=Vp(e);k(!t.queryToTagMap.has(m),"View does not exist, but we have a tag");let y=A9();t.queryToTagMap.set(m,y),t.tagToQueryMap.set(y,m)}let d=Tb(t.pendingWriteTree_,i),f=g9(a,e,n,d,s,c);if(!l&&!o&&!r){let m=VP(a,e);f=f.concat(R9(t,e,m))}return f}function Rb(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let c=Xt(o,e),l=Ha(a,c);if(l)return l});return NP(i,e,s,n,!0)}function vl(t,e){return BP(e,t.syncPointTree_,null,Tb(t.pendingWriteTree_,Re()))}function BP(t,e,n,r){if(ye(t.path))return $P(t,e,n,r);{let i=e.get(Re());n==null&&i!=null&&(n=Ha(i,Re()));let s=[],o=me(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){let l=n?n.getImmediateChild(o):null,d=MP(r,o);s=s.concat(BP(a,c,l,d))}return i&&(s=s.concat(Ab(i,t,r,n))),s}}function $P(t,e,n,r){let i=e.get(Re());n==null&&i!=null&&(n=Ha(i,Re()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=n?n.getImmediateChild(o):null,l=MP(r,o),d=t.operationForChild(o);d&&(s=s.concat($P(d,a,c,l)))}),i&&(s=s.concat(Ab(i,t,r,n))),s}function HP(t,e){let n=e.query,r=Ap(t,n);return{hashFn:()=>(c9(e)||le.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?b9(t,n._path,r):E9(t,n._path);{let s=qW(i,n);return ab(t,n,null,s)}}}}function Ap(t,e){let n=Vp(e);return t.queryToTagMap.get(n)}function Vp(t){return t._path.toString()+"$"+t._queryIdentifier}function xb(t,e){return t.tagToQueryMap.get(e)}function Nb(t){let e=t.indexOf("$");return k(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ke(t.substr(0,e))}}function Mb(t,e,n){let r=t.syncPointTree_.get(e);k(r,"Missing sync point for query tag that we're tracking");let i=Tb(t.pendingWriteTree_,e);return Ab(r,n,i,null)}function D9(t){return t.fold((e,n,r)=>{if(n&&Yi(n))return[Fp(n)];{let i=[];return n&&(i=LP(n)),en(r,(s,o)=>{i=i.concat(o)}),i}})}function ll(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(v9())(t._repo,t._path):t}function S9(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=Vp(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function A9(){return w9++}function R9(t,e,n){let r=e._path,i=Ap(t,e),s=HP(t,n),o=t.listenProvider_.startListening(ll(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)k(!Yi(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,d,f)=>{if(!ye(l)&&d&&Yi(d))return[Fp(d).query];{let m=[];return d&&(m=m.concat(LP(d).map(y=>y.query))),en(f,(y,E)=>{m=m.concat(E)}),m}});for(let l=0;l<c.length;++l){let d=c[l];t.listenProvider_.stopListening(ll(d),Ap(t,d))}}return o}var cb=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},ub=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=gt(this.path_,e);return new t(this.syncTree_,n)}node(){return Rb(this.syncTree_,this.path_)}},x9=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},zM=function(t,e,n){if(!t||typeof t!="object")return t;if(k(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return N9(t[".sv"],e,n);if(typeof t[".sv"]=="object")return M9(t[".sv"],e);k(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},N9=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:k(!1,"Unexpected server value: "+t)}},M9=function(t,e,n){t.hasOwnProperty("increment")||k(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&k(!1,"Unexpected increment value: "+r);let i=e.node();if(k(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},P9=function(t,e,n,r){return Pb(e,new ub(n,t),r)},qP=function(t,e,n){return Pb(t,new cb(e),n)};function Pb(t,e,n){let r=t.getPriority().val(),i=zM(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=zM(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new za(a,Et(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new za(i))),o.forEachChild(tt,(a,c)=>{let l=Pb(c,e.getImmediateChild(a),n);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var ml=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function kb(t,e){let n=e instanceof ke?e:new ke(e),r=t,i=me(n);for(;i!==null;){let s=Os(r.node.children,i)||{children:{},childCount:0};r=new ml(i,r,s),n=qe(n),i=me(n)}return r}function Za(t){return t.node.value}function GP(t,e){t.node.value=e,lb(t)}function zP(t){return t.node.childCount>0}function k9(t){return Za(t)===void 0&&!zP(t)}function Up(t,e){en(t.node.children,(n,r)=>{e(new ml(n,t,r))})}function WP(t,e,n,r){n&&!r&&e(t),Up(t,i=>{WP(i,e,!0,r)}),n&&r&&e(t)}function O9(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function wl(t){return new ke(t.parent===null?t.name:wl(t.parent)+"/"+t.name)}function lb(t){t.parent!==null&&F9(t.parent,t.name,t)}function F9(t,e,n){let r=k9(n),i=cr(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,lb(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,lb(t))}var L9=/[\[\].#$\/\u0000-\u001F\u007F]/,V9=/[\[\].#$\u0000-\u001F\u007F]/,wE=10*1024*1024,KP=function(t){return typeof t=="string"&&t.length!==0&&!L9.test(t)},QP=function(t){return typeof t=="string"&&t.length!==0&&!V9.test(t)},U9=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),QP(t)};var YP=function(t,e,n,r){r&&e===void 0||Ob(Yh(t,"value"),e,n)},Ob=function(t,e,n){let r=n instanceof ke?new kE(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+no(r));if(typeof e=="function")throw new Error(t+"contains a function "+no(r)+" with contents = "+e.toString());if(ZM(e))throw new Error(t+"contains "+e.toString()+" "+no(r));if(typeof e=="string"&&e.length>wE/3&&_u(e)>wE)throw new Error(t+"contains a string greater than "+wE+" utf8 bytes "+no(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(en(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!KP(o)))throw new Error(t+" contains an invalid key ("+o+") "+no(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);v3(r,o),Ob(t,a,r),w3(r)}),i&&s)throw new Error(t+' contains ".value" child '+no(r)+" in addition to actual children.")}};var JP=function(t,e,n,r){if(!(r&&n===void 0)&&!QP(n))throw new Error(Yh(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},j9=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),JP(t,e,n,r)},XP=function(t,e){if(me(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},B9=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!KP(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!U9(n))throw new Error(Yh(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var db=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Fb(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!wb(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function ZP(t,e,n){Fb(t,n),ek(t,r=>wb(r,e))}function ei(t,e,n){Fb(t,n),ek(t,r=>zn(r,e)||zn(e,r))}function ek(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?($9(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function $9(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();so&&kt("event: "+n.toString()),Xa(r)}}}var H9="repo_interrupt",q9=25,hb=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new db,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=vp(),this.transactionQueueTree_=new ml,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function G9(t,e,n){if(t.stats_=vb(t.repoInfo_),t.forceRestClient_||KW())t.server_=new GE(t.repoInfo_,(r,i,s,o)=>{WM(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>KM(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{pt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Ib(t.repoInfo_,e,(r,i,s,o)=>{WM(t,r,i,s,o)},r=>{KM(t,r)},r=>{z9(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=YW(t.repoInfo_,()=>new QE(t.stats_,t.server_)),t.infoData_=new zE,t.infoSyncTree_=new Sp({startListening:(r,i,s,o)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Lp(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Vb(t,"connected",!1),t.serverSyncTree_=new Sp({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);ei(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function tk(t){let n=t.infoData_.getNode(new ke(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Lb(t){return x9({timestamp:tk(t)})}function WM(t,e,n,r,i){t.dataUpdateCount++;let s=new ke(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let c=yu(n,l=>Et(l));o=T9(t.serverSyncTree_,s,c,i)}else{let c=Et(n);o=C9(t.serverSyncTree_,s,c,i)}else if(r){let c=yu(n,l=>Et(l));o=I9(t.serverSyncTree_,s,c)}else{let c=Et(n);o=Lp(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=jp(t,s)),ei(t.eventQueue_,a,o)}function KM(t,e){Vb(t,"connected",e),e===!1&&K9(t)}function z9(t,e){en(e,(n,r)=>{Vb(t,n,r)})}function Vb(t,e,n){let r=new ke("/.info/"+e),i=Et(n);t.infoData_.updateSnapshot(r,i);let s=Lp(t.infoSyncTree_,r,i);ei(t.eventQueue_,r,s)}function nk(t){return t.nextWriteId_++}function W9(t,e,n,r,i){Ub(t,"set",{path:e.toString(),value:n,priority:r});let s=Lb(t),o=Et(n,r),a=Rb(t.serverSyncTree_,e),c=qP(o,a,s),l=nk(t),d=jP(t.serverSyncTree_,e,c,l,!0);Fb(t.eventQueue_,d),t.server_.put(e.toString(),o.val(!0),(m,y)=>{let E=m==="ok";E||Zt("set at "+e+" failed: "+m);let x=io(t.serverSyncTree_,l,!E);ei(t.eventQueue_,e,x),J9(t,i,m,y)});let f=ak(t,e);jp(t,f),ei(t.eventQueue_,f,[])}function K9(t){Ub(t,"onDisconnectEvents");let e=Lb(t),n=vp();WE(t.onDisconnect_,Re(),(i,s)=>{let o=P9(i,s,t.serverSyncTree_,e);DP(n,i,o)});let r=[];WE(n,Re(),(i,s)=>{r=r.concat(Lp(t.serverSyncTree_,i,s));let o=ak(t,i);jp(t,o)}),t.onDisconnect_=vp(),ei(t.eventQueue_,Re(),r)}function Q9(t,e,n){let r;me(e._path)===".info"?r=GM(t.infoSyncTree_,e,n):r=GM(t.serverSyncTree_,e,n),ZP(t.eventQueue_,e._path,r)}function fb(t,e,n){let r;me(e._path)===".info"?r=ab(t.infoSyncTree_,e,n):r=ab(t.serverSyncTree_,e,n),ZP(t.eventQueue_,e._path,r)}function Y9(t){t.persistentConnection_&&t.persistentConnection_.interrupt(H9)}function Ub(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),kt(n,...e)}function J9(t,e,n,r){e&&Xa(()=>{if(n==="ok")e(null);else{let i=(n||"error").toUpperCase(),s=i;r&&(s+=": "+r);let o=new Error(s);o.code=i,e(o)}})}function rk(t,e,n){return Rb(t.serverSyncTree_,e,n)||le.EMPTY_NODE}function jb(t,e=t.transactionQueueTree_){if(e||Bp(t,e),Za(e)){let n=sk(t,e);k(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&X9(t,wl(e),n)}else zP(e)&&Up(e,n=>{jb(t,n)})}function X9(t,e,n){let r=n.map(l=>l.currentWriteId),i=rk(t,e,r),s=i,o=i.hash();for(let l=0;l<n.length;l++){let d=n[l];k(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let f=Xt(e,d.path);s=s.updateChild(f,d.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;t.server_.put(c.toString(),a,l=>{Ub(t,"transaction put response",{path:c.toString(),status:l});let d=[];if(l==="ok"){let f=[];for(let m=0;m<n.length;m++)n[m].status=2,d=d.concat(io(t.serverSyncTree_,n[m].currentWriteId)),n[m].onComplete&&f.push(()=>n[m].onComplete(null,!0,n[m].currentOutputSnapshotResolved)),n[m].unwatcher();Bp(t,kb(t.transactionQueueTree_,e)),jb(t,t.transactionQueueTree_),ei(t.eventQueue_,e,d);for(let m=0;m<f.length;m++)Xa(f[m])}else{if(l==="datastale")for(let f=0;f<n.length;f++)n[f].status===3?n[f].status=4:n[f].status=0;else{Zt("transaction at "+c.toString()+" failed: "+l);for(let f=0;f<n.length;f++)n[f].status=4,n[f].abortReason=l}jp(t,e)}},o)}function jp(t,e){let n=ik(t,e),r=wl(n),i=sk(t,n);return Z9(t,i,r),r}function Z9(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=Xt(n,c.path),d=!1,f;if(k(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,f=c.abortReason,i=i.concat(io(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=q9)d=!0,f="maxretry",i=i.concat(io(t.serverSyncTree_,c.currentWriteId,!0));else{let m=rk(t,c.path,o);c.currentInputSnapshot=m;let y=e[a].update(m.val());if(y!==void 0){Ob("transaction failed: Data returned ",y,c.path);let E=Et(y);typeof y=="object"&&y!=null&&cr(y,".priority")||(E=E.updatePriority(m.getPriority()));let R=c.currentWriteId,F=Lb(t),q=qP(E,m,F);c.currentOutputSnapshotRaw=E,c.currentOutputSnapshotResolved=q,c.currentWriteId=nk(t),o.splice(o.indexOf(R),1),i=i.concat(jP(t.serverSyncTree_,c.path,q,c.currentWriteId,c.applyLocally)),i=i.concat(io(t.serverSyncTree_,R,!0))}else d=!0,f="nodata",i=i.concat(io(t.serverSyncTree_,c.currentWriteId,!0))}ei(t.eventQueue_,n,i),i=[],d&&(e[a].status=2,function(m){setTimeout(m,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(f),!1,null))))}Bp(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Xa(r[a]);jb(t,t.transactionQueueTree_)}function ik(t,e){let n,r=t.transactionQueueTree_;for(n=me(e);n!==null&&Za(r)===void 0;)r=kb(r,n),e=qe(e),n=me(e);return r}function sk(t,e){let n=[];return ok(t,e,n),n.sort((r,i)=>r.order-i.order),n}function ok(t,e,n){let r=Za(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Up(e,i=>{ok(t,i,n)})}function Bp(t,e){let n=Za(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,GP(e,n.length>0?n:void 0)}Up(e,r=>{Bp(t,r)})}function ak(t,e){let n=wl(ik(t,e)),r=kb(t.transactionQueueTree_,e);return O9(r,i=>{IE(t,i)}),IE(t,r),WP(r,i=>{IE(t,i)}),n}function IE(t,e){let n=Za(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(k(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(k(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(io(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?GP(e,void 0):n.length=s+1,ei(t.eventQueue_,wl(e),i);for(let o=0;o<r.length;o++)Xa(r[o])}}function e6(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function t6(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Zt(`Invalid query segment '${n}' in query '${t}'`)}return e}var QM=function(t,e){let n=n6(t),r=n.namespace;n.domain==="firebase.com"&&Xr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Xr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||UW();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new dp(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new ke(n.pathString)}},n6=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let d=t.indexOf("/");d===-1&&(d=t.length);let f=t.indexOf("?");f===-1&&(f=t.length),e=t.substring(0,Math.min(d,f)),d<f&&(i=e6(t.substring(d,f)));let m=t6(t.substring(Math.min(t.length,f)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let y=e.slice(0,l);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{let E=e.indexOf(".");r=e.substring(0,E).toLowerCase(),n=e.substring(E+1),s=r}"ns"in m&&(s=m.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var YM="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",r6=function(){let t=0,e=[];return function(n){let r=n===t;t=n;let i,s=new Array(8);for(i=7;i>=0;i--)s[i]=YM.charAt(n%64),n=Math.floor(n/64);k(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=YM.charAt(e[i]);return k(o.length===20,"nextPushId: Length should be 20."),o}}();var Rp=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+pt(this.snapshot.exportVal())}},xp=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Np=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return k(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var pb=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return ye(this._path)?null:yP(this._path)}get ref(){return new ti(this._repo,this._path)}get _queryIdentifier(){let e=kM(this._queryParams),n=_b(e);return n==="{}"?"default":n}get _queryObject(){return kM(this._queryParams)}isEqual(e){if(e=We(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=wb(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+_3(this._path)}};var ti=class t extends pb{constructor(e,n){super(e,n,new qE,!1)}get parent(){let e=vP(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Mp=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new ke(e),r=co(this.ref,e);return new t(this._node.getChild(n),r,tt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,co(this.ref,r),tt)))}hasChild(e){let n=new ke(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function ck(t,e){return t=We(t),t._checkNotDeleted("ref"),e!==void 0?co(t._root,e):t._root}function co(t,e){return t=We(t),me(t._path)===null?j9("child","path",e,!1):JP("child","path",e,!1),new ti(t._repo,gt(t._path,e))}function uk(t,e){t=We(t),XP("push",t._path),YP("push",e,t._path,!0);let n=tk(t._repo),r=r6(n),i=co(t,r),s=co(t,r),o;return e!=null?o=Bb(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function Bb(t,e){t=We(t),XP("set",t._path),YP("set",e,t._path,!1);let n=new Fi;return W9(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}var Pp=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new Rp("value",this,new Mp(e.snapshotNode,new ti(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new xp(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},kp=class t{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new xp(this,e,n):null}createEvent(e,n){k(e.childName!=null,"Child events should have a childName.");let r=co(new ti(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new Rp(e.type,this,new Mp(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function Il(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){let c=n,l=(d,f)=>{fb(t._repo,t,a),c(d,f)};l.userCallback=n.userCallback,l.context=n.context,n=l}let o=new Np(n,s||void 0),a=e==="value"?new Pp(o):new kp(e,o);return Q9(t._repo,t,a),()=>fb(t._repo,t,a)}function $p(t,e,n,r){return Il(t,"value",e,n,r)}function $b(t,e,n,r){return Il(t,"child_added",e,n,r)}function Hb(t,e,n,r){return Il(t,"child_changed",e,n,r)}function qb(t,e,n,r){return Il(t,"child_moved",e,n,r)}function Gb(t,e,n,r){return Il(t,"child_removed",e,n,r)}function zb(t,e,n){let r=null,i=n?new Np(n):null;e==="value"?r=new Pp(i):e&&(r=new kp(e,i)),fb(t._repo,t,r)}h9(ti);_9(ti);var i6="FIREBASE_DATABASE_EMULATOR_HOST",mb={},s6=!1;function o6(t,e,n,r){t.repoInfo_=new dp(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function a6(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Xr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),kt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=QM(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[i6]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=QM(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let d=i&&c?new al(al.OWNER):new SE(t.name,t.options,e);B9("Invalid Firebase Database URL",o),ye(o.path)||Xr("Database URL must point to the root of a Firebase Database (not including a child path).");let f=u6(a,t,d,new DE(t.name,n));return new gb(f,t)}function c6(t,e){let n=mb[e];(!n||n[t.key]!==t)&&Xr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Y9(t),delete n[t.key]}function u6(t,e,n,r){let i=mb[e.name];i||(i={},mb[e.name]=i);let s=i[t.toURLString()];return s&&Xr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new hb(t,s6,n,r),i[t.toURLString()]=s,s}var gb=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(G9(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ti(this._repo,Re())),this._rootInternal}_delete(){return this._rootInternal!==null&&(c6(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Xr("Cannot call "+e+" on a deleted database.")}};function lk(t=dr(),e){let n=Br(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=aa("database");r&&dk(n,...r)}return n}function dk(t,e,n,r={}){t=We(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Xr("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Xr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new al(al.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:ca(r.mockUserToken,t.app.options.projectId);s=new al(o)}o6(i,e,n,s)}function l6(t){FW(Sn),Dn(new Nt("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return a6(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Pe(yM,_M,t),Pe(yM,_M,"esm2017")}Ib.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Ib.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};l6();var lo,ho=function(t){return t.added="child_added",t.removed="child_removed",t.changed="child_changed",t.moved="child_moved",t.value="value",t}(ho||{}),h6=Object.freeze((lo={},lo[ho.added]=$b,lo[ho.removed]=Gb,lo[ho.changed]=Hb,lo[ho.moved]=qb,lo[ho.value]=$p,lo));function hk(t,e){return new J(function(n){var r=h6[e](t,function(i,s){n.next({snapshot:i,prevKey:s,event:e})},n.error.bind(n));return{unsubscribe:function(){zb(t,e,r)}}}).pipe(Wm(0))}var Hp=function(){return Hp=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Hp.apply(this,arguments)};function fk(t,e){return e===void 0&&(e={}),hk(t,ho.value).pipe(se(function(n){return pk(n,e)}))}function pk(t,e){var n;e===void 0&&(e={});var r=t.snapshot.val();return!t.snapshot.exists()||typeof r!="object"?r:Hp(Hp({},r),e.keyField?(n={},n[e.keyField]=t.snapshot.key,n):null)}var Kn=class{constructor(e){return e}},mk="database",Wb=class{constructor(){return $r(mk)}};var Kb=new z("angularfire2.database-instances");function f6(t,e){let n=Vi(mk,t,e);return n&&new Kn(n)}function p6(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Kn(r)}}var m6={provide:Wb,deps:[[new ze,Kb]]},g6={provide:Kn,useFactory:f6,deps:[[new ze,Kb],pn]};function gk(t,...e){return Pe("angularfire",Bn.full,"rtdb"),Wt([g6,m6,{provide:Kb,useFactory:p6(t),multi:!0,deps:[Te,Rt,fr,$n,[new ze,zr],[new ze,hr],...e]}])}var qp=Xe(fk,!0);var yk=Xe(lk,!0);var _k=Xe($p,!0);var Gp=Xe(uk,!0);var Ji=Xe(ck,!0);var ec=Xe(Bb,!0);var zp=(()=>{let e=class e{constructor(r,i){this.db=r,this.auth=i;let s=sessionStorage.getItem("user");if(s&&s!=="null"){let a=JSON.parse(s)?.uid;a?(this.balanceRef=Ji(this.db,`users/${a}/chequing/balance`),this.transactionHistoryRef=Ji(this.db,`users/${a}/chequing/transactions`),this.chequingbalance$=qp(this.balanceRef).pipe(se(c=>c??0),an(c=>(console.error("Error retrieving balance:",c),Z(0))))):(console.error("User UID not found."),this.chequingbalance$=new J(c=>{c.next(null)}))}else console.error("User is not authenticated."),this.chequingbalance$=new J(o=>{o.next(null)})}getBalance(){return this.chequingbalance$}deposit(r){return v(this,null,function*(){this.chequingbalance$.pipe(lt(1)).subscribe(i=>v(this,null,function*(){let s=(i??0)+r;yield ec(this.balanceRef,s),yield this.logTransaction("deposit",r)}))})}withdraw(r){return v(this,null,function*(){this.chequingbalance$.pipe(lt(1)).subscribe(i=>v(this,null,function*(){let s=(i??0)-r;s>=0?(yield ec(this.balanceRef,s),yield this.logTransaction("withdrawal",r)):(alert("Insufficient funds"),console.error("Insufficient funds"))}))})}logTransaction(r,i){return v(this,null,function*(){let s=Date.now(),o={type:r,amount:i,timestamp:s};yield Gp(this.transactionHistoryRef,o)})}};e.\u0275fac=function(i){return new(i||e)(X(Kn),X(mn))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Wp=(()=>{let e=class e{constructor(r,i){this.db=r,this.auth=i;let s=sessionStorage.getItem("user");if(s&&s!=="null"){let a=JSON.parse(s)?.uid;a?(this.balanceRef=Ji(this.db,`users/${a}/savings/balance`),this.transactionHistoryRef=Ji(this.db,`users/${a}/savings/transactions`),this.savingsbalance$=qp(this.balanceRef).pipe(se(c=>c??0),an(c=>(console.error("Error retrieving balance:",c),Z(0))))):(console.error("User UID not found."),this.savingsbalance$=new J(c=>{c.next(null)}))}else console.error("User is not authenticated."),this.savingsbalance$=new J(o=>{o.next(null)})}getBalance(){return this.savingsbalance$}deposit(r){return v(this,null,function*(){this.savingsbalance$.pipe(lt(1)).subscribe(i=>v(this,null,function*(){let s=(i??0)+r;yield ec(this.balanceRef,s),yield this.logTransaction("deposit",r)}))})}withdraw(r){return v(this,null,function*(){this.savingsbalance$.pipe(lt(1)).subscribe(i=>v(this,null,function*(){let s=(i??0)-r;s>=0?(yield ec(this.balanceRef,s),yield this.logTransaction("withdrawal",r)):(alert("Insufficient funds"),console.error("Insufficient funds"))}))})}logTransaction(r,i){return v(this,null,function*(){let s=Date.now(),o={type:r,amount:i,timestamp:s};yield Gp(this.transactionHistoryRef,o)})}};e.\u0275fac=function(i){return new(i||e)(X(Kn),X(mn))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ik=(()=>{let e=class e{constructor(r,i,s){this.authService=r,this.chequingService=i,this.savingsService=s,this.firstName="",this.chequingbalance$=this.chequingService.getBalance(),this.savingsbalance$=this.savingsService.getBalance()}ngOnInit(){let r=JSON.parse(sessionStorage.getItem("user")||"{}");r&&r.uid&&this.authService.getUserDetails(r.uid).then(i=>{i&&i.firstName&&(this.firstName=i.firstName)})}logAnchorClick(){console.log("Anchor tag clicked!")}alertClick(){alert("Coming Soon")}};e.\u0275fac=function(i){return new(i||e)($(Rn),$(zp),$(Wp))},e.\u0275cmp=je({type:e,selectors:[["app-dashboard"]],standalone:!0,features:[Be],decls:43,vars:11,consts:[[1,"flex","flex-col","min-h-screen","lg:pt-20","pt-10"],[1,"flex-grow","bg-gray-100","dark:bg-black","transition-all","duration-500","ease-in-out"],[1,"container","mx-auto","px-4","py-8","mt-7","md:mt-5"],[1,"text-3xl","font-bold","mb-4","text-gray-700","dark:text-rose-600"],[1,"text-3xl","font-semibold","mb-4","mt-7","text-gray-700","dark:text-rose-600"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],["routerLink","/chequing",3,"click"],[1,"bg-white","dark:bg-zinc-950","rounded-lg","shadow-md","dark:shadow-rose-950","p-4","transition-all","duration-500","ease-in-out"],[1,"text-xl","dark:text-gray-300","font-semibold","mb-2","text-gray-700"],[1,"flex","justify-between","items-center","mt-10"],[1,"dark:text-gray-300","text-gray-700","font-bold","text-xl"],["routerLink","/savings",3,"click"],[3,"click"],[1,"mt-7"],[1,"dark:text-gray-300","font-semibold"]],template:function(i,s){i&1&&(ce(0,"app-navbar"),M(1,"div",0)(2,"div",1)(3,"div",2)(4,"h1",3),V(5,"Dashboard"),N(),M(6,"h2",4),V(7),N(),M(8,"div",5)(9,"a",6),Ie("click",function(){return s.logAnchorClick()}),M(10,"div",7)(11,"h2",8),V(12,"Chequing"),N(),ce(13,"br"),M(14,"div",9)(15,"p",10),V(16,"Balance:"),N(),M(17,"span",10),V(18),Bt(19,"async"),Bt(20,"currency"),N()()()(),M(21,"a",11),Ie("click",function(){return s.logAnchorClick()}),M(22,"div",7)(23,"h2",8),V(24,"Savings"),N(),ce(25,"br"),M(26,"div",9)(27,"p",10),V(28,"Balance:"),N(),M(29,"span",10),V(30),Bt(31,"async"),Bt(32,"currency"),N()()()(),M(33,"a",12),Ie("click",function(){return s.alertClick()}),M(34,"div",7)(35,"h2",8),V(36,"E-Transfer"),N(),M(37,"div",13),ce(38,"br")(39,"br"),M(40,"p",14),V(41,"Send funds with ease via email."),N()()()()()()(),ce(42,"app-footer"),N()),i&2&&(Fe(7),Si("Welcome ",s.firstName,"!"),Fe(11),Di(Jt(20,5,Jt(19,3,s.chequingbalance$))),Fe(12),Di(Jt(32,9,Jt(31,7,s.savingsbalance$))))},dependencies:[Oi,Va,Wi,dn,xi,Ni]});let t=e;return t})();function y6(t,e){if(t&1&&(M(0,"div")(1,"p",4),V(2),Bt(3,"date"),N(),M(4,"p"),V(5),N(),M(6,"p",5),V(7),Bt(8,"currency"),N(),ce(9,"hr"),N()),t&2){let n=e.$implicit;Fe(2),Si("Date: ",xS(3,3,n.timestamp,"short"),""),Fe(3),Si("Type: ",n.type,""),Fe(2),Si("Amount: ",Jt(8,6,n.amount),"")}}function _6(t,e){if(t&1&&(M(0,"div",2),bi(1,y6,10,8,"div",3),N()),t&2){let n=e.ngIf;Fe(),xt("ngForOf",n)}}var tc=(()=>{let e=class e{constructor(r){this.db=r,this.type="chequing"}ngOnInit(){let r=sessionStorage.getItem("user");if(r&&r!=="null"){let s=JSON.parse(r)?.uid;if(s){let o=Ji(this.db,`users/${s}/${this.type}/transactions`);this.transactionHistory$=new J(a=>{_k(o,c=>{let l=c.val();if(l){let f=Object.keys(l).map(m=>U({id:m},l[m])).sort((m,y)=>y.timestamp-m.timestamp);a.next(f)}else a.next([])})})}else console.error("User UID not found."),this.transactionHistory$=new J(o=>{o.next([])})}else console.error("User is not authenticated."),this.transactionHistory$=new J(i=>{i.next([])})}};e.\u0275fac=function(i){return new(i||e)($(Kn))},e.\u0275cmp=je({type:e,selectors:[["app-transaction-history"]],inputs:{type:"type"},standalone:!0,features:[Be],decls:4,vars:3,consts:[[1,"text-lg","font-semibold","mb-2","text-center","text-gray-600","dark:text-gray-300"],["class","text-gray-600 dark:text-gray-300",4,"ngIf"],[1,"text-gray-600","dark:text-gray-300"],[4,"ngFor","ngForOf"],[1,"text-md","font-semibold"],[1,"font-bold"]],template:function(i,s){i&1&&(M(0,"h3",0),V(1,"Transaction History"),N(),bi(2,_6,2,1,"div",1),Bt(3,"async")),i&2&&(Fe(2),xt("ngIf",Jt(3,1,s.transactionHistory$)))},dependencies:[dn,rA,Yo,xi,Ni,iA]});let t=e;return t})();var Rk=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)($(bs),$(wi))},e.\u0275dir=cn({type:e});let t=e;return t})(),xk=(()=>{let e=class e extends Rk{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=zo(e)))(s||e)}})(),e.\u0275dir=cn({type:e,features:[Cs]});let t=e;return t})(),eC=new z("");var v6={provide:eC,useExisting:Ho(()=>rc),multi:!0};function w6(){let t=Ur()?Ur().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var I6=new z(""),rc=(()=>{let e=class e extends Rk{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!w6())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)($(bs),$(wi),$(I6,8))},e.\u0275dir=cn({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&Ie("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[ph([v6]),Cs]});let t=e;return t})();var E6=new z(""),b6=new z("");function Nk(t){return t!=null}function Mk(t){return Ai(t)?Je(t):t}function Pk(t){let e={};return t.forEach(n=>{e=n!=null?U(U({},e),n):e}),Object.keys(e).length===0?null:e}function kk(t,e){return e.map(n=>n(t))}function C6(t){return!t.validate}function Ok(t){return t.map(e=>C6(e)?e:n=>e.validate(n))}function T6(t){if(!t)return null;let e=t.filter(Nk);return e.length==0?null:function(n){return Pk(kk(n,e))}}function Fk(t){return t!=null?T6(Ok(t)):null}function D6(t){if(!t)return null;let e=t.filter(Nk);return e.length==0?null:function(n){let r=kk(n,e).map(Mk);return Gm(r).pipe(se(Pk))}}function Lk(t){return t!=null?D6(Ok(t)):null}function Ek(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function S6(t){return t._rawValidators}function A6(t){return t._rawAsyncValidators}function Yb(t){return t?Array.isArray(t)?t:[t]:[]}function Qp(t,e){return Array.isArray(t)?t.includes(e):t===e}function bk(t,e){let n=Yb(e);return Yb(t).forEach(i=>{Qp(n,i)||n.push(i)}),n}function Ck(t,e){return Yb(e).filter(n=>!Qp(t,n))}var Yp=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Fk(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Lk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Jb=class extends Yp{get formDirective(){return null}get path(){return null}},Cl=class extends Yp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Xb=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},R6={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},ose=Oe(U({},R6),{"[class.ng-submitted]":"isSubmitted"}),Jp=(()=>{let e=class e extends Xb{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)($(Cl,2))},e.\u0275dir=cn({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&Fy("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Cs]});let t=e;return t})();var El="VALID",Kp="INVALID",nc="PENDING",bl="DISABLED";function x6(t){return(Xp(t)?t.validators:t)||null}function N6(t){return Array.isArray(t)?Fk(t):t||null}function M6(t,e){return(Xp(e)?e.asyncValidators:t)||null}function P6(t){return Array.isArray(t)?Lk(t):t||null}function Xp(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var Zb=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===El}get invalid(){return this.status===Kp}get pending(){return this.status==nc}get disabled(){return this.status===bl}get enabled(){return this.status!==bl}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(bk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(bk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Ck(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Ck(e,this._rawAsyncValidators))}hasValidator(e){return Qp(this._rawValidators,e)}hasAsyncValidator(e){return Qp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=nc,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=bl,this.errors=null,this._forEachChild(r=>{r.disable(Oe(U({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Oe(U({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=El,this._forEachChild(r=>{r.enable(Oe(U({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Oe(U({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===El||this.status===nc)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?bl:El}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=nc,this._hasOwnPendingAsyncValidator=!0;let n=Mk(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Vt,this.statusChanges=new Vt}_calculateStatus(){return this._allControlsDisabled()?bl:this.errors?Kp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(nc)?nc:this._anyControlsHaveStatus(Kp)?Kp:El}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Xp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=N6(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=P6(this._rawAsyncValidators)}};var Vk=new z("CallSetDisabledState",{providedIn:"root",factory:()=>tC}),tC="always";function k6(t,e){return[...e.path,t]}function O6(t,e,n=tC){L6(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),V6(t,e),j6(t,e),U6(t,e),F6(t,e)}function Tk(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function F6(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function L6(t,e){let n=S6(t);e.validator!==null?t.setValidators(Ek(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=A6(t);e.asyncValidator!==null?t.setAsyncValidators(Ek(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Tk(e._rawValidators,i),Tk(e._rawAsyncValidators,i)}function V6(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&Uk(t,e)})}function U6(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&Uk(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function Uk(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function j6(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function B6(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function $6(t){return Object.getPrototypeOf(t.constructor)===xk}function H6(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===rc?n=s:$6(s)?r=s:i=s}),i||r||n||null}function Dk(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Sk(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var q6=class extends Zb{constructor(e=null,n,r){super(x6(n),M6(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Xp(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Sk(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Dk(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Dk(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Sk(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var G6={provide:Cl,useExisting:Ho(()=>Tl)},Ak=Promise.resolve(),Tl=(()=>{let e=class e extends Cl{constructor(r,i,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new q6,this._registered=!1,this.name="",this.update=new Vt,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=H6(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),B6(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){O6(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){Ak.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&Ss(i);Ak.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?k6(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)($(Jb,9),$(E6,10),$(b6,10),$(eC,10),$(Ri,8),$(Vk,8))},e.\u0275dir=cn({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[jt.None,"disabled","isDisabled"],model:[jt.None,"ngModel","model"],options:[jt.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ph([G6]),Cs,Es]});let t=e;return t})();var z6={provide:eC,useExisting:Ho(()=>Dl),multi:!0},Dl=(()=>{let e=class e extends xk{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=zo(e)))(s||e)}})(),e.\u0275dir=cn({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,s){i&1&&Ie("input",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},features:[ph([z6]),Cs]});let t=e;return t})();var W6=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ws({type:e}),e.\u0275inj=vs({});let t=e;return t})();var Zp=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Vk,useValue:r.callSetDisabledState??tC}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ws({type:e}),e.\u0275inj=vs({imports:[W6]});let t=e;return t})();var Bk=(()=>{let e=class e{constructor(r){this.chequingService=r,this.depositAmount=0,this.withdrawAmount=0,this.chequingbalance$=this.chequingService.getBalance()}ngOnInit(){}deposit(){this.depositAmount>0&&(this.chequingService.deposit(this.depositAmount),this.depositAmount=0)}withdraw(){this.withdrawAmount>0&&(this.chequingService.withdraw(this.withdrawAmount),this.withdrawAmount=0)}};e.\u0275fac=function(i){return new(i||e)($(zp))},e.\u0275cmp=je({type:e,selectors:[["app-chequing"]],standalone:!0,features:[Be],decls:32,vars:8,consts:[[1,"flex","flex-col","min-h-screen","bg-gray-100","mx-auto","pt-20","py-8","bg-white","dark:bg-black","transition-all","duration-500","ease-in-out"],[1,"text-3xl","font-bold","text-gray-700","mt-10","mb-4","rounded-lg","p-4","dark:text-rose-600"],[1,"container","mx-auto","bg-white","rounded-lg","shadow-md","dark:shadow-rose-950","p-4","mb-4","max-w-md","justify-center","items-center","dark:bg-zinc-950","transition-all","duration-500","ease-in-out"],[1,"text-xl","font-semibold","mb-2","flex","justify-between","items-center"],[1,"text-gray-600","dark:text-gray-300"],[1,"ml-auto","dark:text-gray-300"],[1,"container","flex","mx-auto","justify-center","items-center"],[1,"md:flex","justify-between","gap-20","mt-2","mb-5"],[1,"bg-white","rounded-lg","shadow-md","dark:shadow-rose-950","p-4","mb-4","max-w-xs","justify-center","items-center","dark:bg-zinc-950","transition-all","duration-500","ease-in-out"],[1,"text-xl","font-semibold","mb-2","flex","justify-center","items-center"],["type","number","placeholder","Amount",1,"border","p-2","rounded-md","mb-2",3,"ngModelChange","ngModel"],[1,"bg-red-500","text-white","p-2","rounded-md",3,"click"],[1,"bg-green-500","text-white","p-2","rounded-md",3,"click"],[1,"container","bg-white","dark:bg-zinc-950","mx-auto","rounded-lg","shadow-md","dark:shadow-rose-950","p-4","mb-4","max-w-2xl","transition-all","duration-500","ease-in-out"],[3,"type"]],template:function(i,s){i&1&&(ce(0,"app-navbar"),M(1,"div",0)(2,"h2",1),V(3,"Chequing Account"),N(),ce(4,"br"),M(5,"div",2)(6,"h3",3)(7,"span",4),V(8,"Balance"),N(),M(9,"span",5),V(10),Bt(11,"async"),Bt(12,"currency"),N()()(),M(13,"div",6)(14,"div",7)(15,"div",8)(16,"h3",9)(17,"span",4),V(18,"Withdraw"),N()(),M(19,"input",10),Ds("ngModelChange",function(a){return Ko(s.withdrawAmount,a)||(s.withdrawAmount=a),a}),N(),M(20,"button",11),Ie("click",function(){return s.withdraw()}),V(21,"Withdraw"),N()(),M(22,"div",8)(23,"h3",9)(24,"span",4),V(25,"Deposit"),N()(),M(26,"input",10),Ds("ngModelChange",function(a){return Ko(s.depositAmount,a)||(s.depositAmount=a),a}),N(),M(27,"button",12),Ie("click",function(){return s.deposit()}),V(28,"Deposit"),N()()()(),M(29,"div",13),ce(30,"app-transaction-history",14),N()(),ce(31,"app-footer")),i&2&&(Fe(10),Di(Jt(12,6,Jt(11,4,s.chequingbalance$))),Fe(9),Ts("ngModel",s.withdrawAmount),Fe(7),Ts("ngModel",s.depositAmount),Fe(4),xt("type","chequing"))},dependencies:[dn,xi,Ni,Zp,rc,Dl,Jp,Tl,tc,Va,Wi]});let t=e;return t})();var $k=(()=>{let e=class e{constructor(r,i){this.authService=r,this.router=i,this.hasRefreshed=!1}signUp(r,i,s,o,a,c){if(r.preventDefault(),console.log("Form submitted:",i,s,o,a,c),a!==c){alert("Passwords do not match!");return}this.authService.signUpWithEmail(i,a,s,o).then(()=>{this.router.navigate(["/dashboard"]),this.hasRefreshed||setTimeout(()=>{window.location.reload(),this.hasRefreshed=!0,console.log(this.hasRefreshed)},1)}).catch(l=>{console.error("Error signing up:",l.message),alert("Sign up failed. Please try again.")}).finally(()=>{i="",a=""})}};e.\u0275fac=function(i){return new(i||e)($(Rn),$(wt))},e.\u0275cmp=je({type:e,selectors:[["app-signup"]],standalone:!0,features:[Be],decls:35,vars:0,consts:[["fname",""],["lname",""],["email",""],["password",""],["confirmPassword",""],[1,"min-h-screen","relative","bg-cover","bg-center",2,"background-image","url('assets/photo/signup.jpg')"],[1,"absolute","inset-0","bg-black","bg-opacity-70"],[1,"signup-container","relative"],[1,"pb-5","text-3xl","font-semibold","text-rose-700"],[1,"form-lg","text-center",3,"submit"],[1,"m-0","mx-auto","my-auto"],[1,"form-group"],["for","email",1,"text-gray-300"],["type","text","id","fname","name","fname","required","",1,"border-2","border-black","rounded-md","px-7","text-center"],["type","text","id","lname","name","lname","required","",1,"border-2","border-black","rounded-md","px-7","text-center"],["type","email","id","email","name","email","required","",1,"border-2","border-black","rounded-md","px-7","text-center"],["for","password",1,"text-gray-300"],["type","password","id","password","name","password","required","",1,"border-2","border-black","rounded-md","px-7","text-center","ml-2"],["for","confirmPassword",1,"text-gray-300"],["type","password","id","confirmPassword","name","confirmPassword","required","",1,"border-2","border-black","rounded-md","px-7","text-center","ml-2"],["type","submit",1,"btn-signup"]],template:function(i,s){if(i&1){let o=Ci();ce(0,"app-navbar-general"),M(1,"div",5),ce(2,"div",6),M(3,"div",7)(4,"h2",8),V(5,"Create an Account!"),N(),M(6,"form",9),Ie("submit",function(c){tr(o);let l=Or(12),d=Or(17),f=Or(22),m=Or(27),y=Or(32);return nr(s.signUp(c,f.value,l.value,d.value,m.value,y.value))}),M(7,"div",10)(8,"div",11)(9,"label",12),V(10,"First Name: "),N(),ce(11,"input",13,0),N(),M(13,"div",11)(14,"label",12),V(15,"Last Name: "),N(),ce(16,"input",14,1),N(),M(18,"div",11)(19,"label",12),V(20,"Email: "),N(),ce(21,"input",15,2),N(),M(23,"div",11)(24,"label",16),V(25,"Password:"),N(),ce(26,"input",17,3),N(),M(28,"div",11)(29,"label",18),V(30,"Confirm Password:"),N(),ce(31,"input",19,4),N()(),M(33,"button",20),V(34,"Sign Up"),N()()()()}},dependencies:[La],styles:[".signup-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;margin-top:30px}.form-group[_ngcontent-%COMP%]{margin:0 auto 20px}.btn-signup[_ngcontent-%COMP%]{padding:10px 20px;font-size:18px;background-color:#be123c;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease}.btn-signup[_ngcontent-%COMP%]:hover{background-color:#881337}"]});let t=e;return t})();var Hk=(()=>{let e=class e{constructor(r){this.savingsService=r,this.depositAmount=0,this.withdrawAmount=0,this.savingsbalance$=this.savingsService.getBalance()}ngOnInit(){}deposit(){this.depositAmount>0&&(this.savingsService.deposit(this.depositAmount),this.depositAmount=0)}withdraw(){this.withdrawAmount>0&&(this.savingsService.withdraw(this.withdrawAmount),this.withdrawAmount=0)}};e.\u0275fac=function(i){return new(i||e)($(Wp))},e.\u0275cmp=je({type:e,selectors:[["app-savings"]],standalone:!0,features:[Be],decls:32,vars:8,consts:[[1,"flex","flex-col","min-h-screen","bg-gray-100","mx-auto","pt-20","py-8","bg-white","dark:bg-black","transition-all","duration-500","ease-in-out"],[1,"text-3xl","font-bold","text-gray-700","mt-10","mb-4","rounded-lg","p-4","dark:text-rose-600"],[1,"container","mx-auto","bg-white","rounded-lg","shadow-md","dark:shadow-rose-950","p-4","mb-4","max-w-md","justify-center","items-center","dark:bg-zinc-950","transition-all","duration-500","ease-in-out"],[1,"text-xl","font-semibold","mb-2","flex","justify-between","items-center"],[1,"text-gray-600","dark:text-gray-300"],[1,"ml-auto","dark:text-gray-300"],[1,"container","flex","mx-auto","justify-center","items-center"],[1,"md:flex","justify-between","gap-20","mt-2","mb-5"],[1,"bg-white","rounded-lg","shadow-md","dark:shadow-rose-950","p-4","mb-4","max-w-xs","justify-center","items-center","dark:bg-zinc-950","transition-all","duration-500","ease-in-out"],[1,"text-xl","font-semibold","mb-2","flex","justify-center","items-center"],["type","number","placeholder","Amount",1,"border","p-2","rounded-md","mb-2",3,"ngModelChange","ngModel"],[1,"bg-red-500","text-white","p-2","rounded-md",3,"click"],[1,"bg-green-500","text-white","p-2","rounded-md",3,"click"],[1,"container","bg-white","dark:bg-zinc-950","mx-auto","rounded-lg","shadow-md","dark:shadow-rose-950","p-4","mb-4","max-w-2xl","transition-all","duration-500","ease-in-out"],[3,"type"]],template:function(i,s){i&1&&(ce(0,"app-navbar"),M(1,"div",0)(2,"h2",1),V(3,"Savings Account"),N(),ce(4,"br"),M(5,"div",2)(6,"h3",3)(7,"span",4),V(8,"Balance"),N(),M(9,"span",5),V(10),Bt(11,"async"),Bt(12,"currency"),N()()(),M(13,"div",6)(14,"div",7)(15,"div",8)(16,"h3",9)(17,"span",4),V(18,"Withdraw"),N()(),M(19,"input",10),Ds("ngModelChange",function(a){return Ko(s.withdrawAmount,a)||(s.withdrawAmount=a),a}),N(),M(20,"button",11),Ie("click",function(){return s.withdraw()}),V(21,"Withdraw"),N()(),M(22,"div",8)(23,"h3",9)(24,"span",4),V(25,"Deposit"),N()(),M(26,"input",10),Ds("ngModelChange",function(a){return Ko(s.depositAmount,a)||(s.depositAmount=a),a}),N(),M(27,"button",12),Ie("click",function(){return s.deposit()}),V(28,"Deposit"),N()()()(),M(29,"div",13),ce(30,"app-transaction-history",14),N()(),ce(31,"app-footer")),i&2&&(Fe(10),Di(Jt(12,6,Jt(11,4,s.savingsbalance$))),Fe(9),Ts("ngModel",s.withdrawAmount),Fe(7),Ts("ngModel",s.depositAmount),Fe(4),xt("type","savings"))},dependencies:[dn,xi,Ni,Zp,rc,Dl,Jp,Tl,tc,Va,Wi]});let t=e;return t})();var qk=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=je({type:e,selectors:[["app-cannotaccess"]],standalone:!0,features:[Be],decls:6,vars:0,consts:[[1,"flex","items-center","justify-center","min-h-screen","bg-red-100","dark:bg-black"],[1,"text-center"],[1,"text-4xl","font-bold","text-red-500"],[1,"text-lg","mt-4","dark:text-white"]],template:function(i,s){i&1&&(M(0,"div",0)(1,"div",1)(2,"h1",2),V(3,"CANNOT ACCESS"),N(),M(4,"p",3),V(5,"You do not have permission to view this page."),N()()())}});let t=e;return t})();var Gk=(()=>{let e=class e{constructor(r){this.router=r,this.previousUrl="",this.currentUrl="",this.currentUrl=this.router.url,r.events.pipe(on(i=>i instanceof sr)).subscribe(i=>{this.previousUrl=this.currentUrl,this.currentUrl=i.url})}getPreviousUrl(){return this.previousUrl}};e.\u0275fac=function(i){return new(i||e)(X(wt))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var zk=(t,e)=>{let n=j(mn),r=j(wt),i=j(Gk),s=sessionStorage.getItem("user"),o=s?JSON.parse(s):null;return console.log("Current User:",o),o?!0:(r.navigate(["/cannotaccess"]),alert("Sorry. You will have to login first to access here"),setTimeout(()=>{let a=i.getPreviousUrl();console.log(a),console.log("Works Though"),r.navigate([a||"/login"])},2500),!1)};var Wk=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:fM},{path:"login",component:pM},{path:"dashboard",component:Ik,canActivate:[zk]},{path:"chequing",component:Bk},{path:"savings",component:Hk},{path:"transactionhistory",component:tc},{path:"signup",component:$k},{path:"cannotaccess",component:qk},{path:"**",redirectTo:"cannotaccess"}];var Zk="firebasestorage.googleapis.com",K6="storageBucket",Q6=2*60*1e3,Y6=10*60*1e3;var Tr=class t extends Ht{constructor(e,n,r=0){super(nC(e),`Firebase Storage: ${n} (${nC(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return nC(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},ri=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(ri||{});function nC(t){return"storage/"+t}function J6(){let t="An unknown error occurred, please check the error payload for server response.";return new Tr(ri.UNKNOWN,t)}function X6(){return new Tr(ri.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Z6(){return new Tr(ri.CANCELED,"User canceled the upload/download.")}function e5(t){return new Tr(ri.INVALID_URL,"Invalid URL '"+t+"'.")}function t5(t){return new Tr(ri.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Kk(t){return new Tr(ri.INVALID_ARGUMENT,t)}function eO(){return new Tr(ri.APP_DELETED,"The Firebase app was deleted.")}function n5(t){return new Tr(ri.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var ni=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw t5(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(G){G.path.charAt(G.path.length-1)==="/"&&(G.path_=G.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function l(G){G.path_=decodeURIComponent(G.path)}let d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp(`^https?://${f}/${d}/b/${i}/o${m}`,"i"),E={bucket:1,path:3},x=n===Zk?"(?:storage.googleapis.com|storage.cloud.google.com)":n,R="([^?#]*)",F=new RegExp(`^https?://${x}/${i}/${R}`,"i"),B=[{regex:a,indices:c,postModify:s},{regex:y,indices:E,postModify:l},{regex:F,indices:{bucket:1,path:2},postModify:l}];for(let G=0;G<B.length;G++){let xe=B[G],re=xe.regex.exec(e);if(re){let C=re[xe.indices.bucket],_=re[xe.indices.path];_||(_=""),r=new t(C,_),xe.postModify(r);break}}if(r==null)throw e5(e);return r}},rC=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function r5(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let l=!1;function d(...R){l||(l=!0,e.apply(null,R))}function f(R){i=setTimeout(()=>{i=null,t(y,c())},R)}function m(){s&&clearTimeout(s)}function y(R,...F){if(l){m();return}if(R){m(),d.call(null,R,...F);return}if(c()||o){m(),d.call(null,R,...F);return}r<64&&(r*=2);let B;a===1?(a=2,B=0):B=(r+Math.random())*1e3,f(B)}let E=!1;function x(R){E||(E=!0,m(),!l&&(i!==null?(R||(a=2),clearTimeout(i),f(0)):R||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,x(!0)},n),x}function i5(t){t(!1)}function s5(t){return t!==void 0}function Qk(t,e,n,r){if(r<e)throw Kk(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Kk(`Invalid value for '${t}'. Expected ${n} or less.`)}function o5(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var iC=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(iC||{});function a5(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}var sC=class{constructor(e,n,r,i,s,o,a,c,l,d,f,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=d,this.connectionFactory_=f,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,E)=>{this.resolve_=y,this.reject_=E,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new ic(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===iC.NO_ERROR,c=s.getStatus();if(!a||a5(c,this.additionalRetryCodes_)&&this.retry){let d=s.getErrorCode()===iC.ABORT;r(!1,new ic(!1,null,d));return}let l=this.successCodes_.indexOf(c)!==-1;r(!0,new ic(l,s))})},n=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());s5(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=J6();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){let c=this.appDelete_?eO():Z6();o(c)}else{let c=X6();o(c)}};this.canceled_?n(!1,new ic(!1,null,!0)):this.backoffId_=r5(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&i5(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},ic=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function c5(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function u5(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function l5(t,e){e&&(t["X-Firebase-GMPID"]=e)}function d5(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function h5(t,e,n,r,i,s,o=!0){let a=o5(t.urlParams),c=t.url+a,l=Object.assign({},t.headers);return l5(l,e),c5(l,n),u5(l,s),d5(l,r),new sC(c,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}function f5(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function p5(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}var Gse=256*1024;var oC=class t{constructor(e,n){this._service=e,n instanceof ni?this._location=n:this._location=ni.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new ni(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return p5(this._location.path)}get storage(){return this._service}get parent(){let e=f5(this._location.path);if(e===null)return null;let n=new ni(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw n5(e)}};function Yk(t,e){let n=e?.[K6];return n==null?null:ni.makeFromBucketSpec(n,t)}function m5(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:ca(i,t.app.options.projectId))}var aC=class{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Zk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Q6,this._maxUploadRetryTime=Y6,this._requests=new Set,i!=null?this._bucket=ni.makeFromBucketSpec(i,this._host):this._bucket=Yk(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ni.makeFromBucketSpec(this._url,e):this._bucket=Yk(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Qk("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Qk("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return v(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return v(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new oC(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new rC(eO());{let o=h5(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return v(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},Jk="@firebase/storage",Xk="0.12.5";var tO="storage";function nO(t=dr(),e){t=We(t);let r=Br(t,tO).getImmediate({identifier:e}),i=aa("storage");return i&&rO(r,...i),r}function rO(t,e,n,r={}){m5(t,e,n,r)}function g5(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new aC(n,r,i,e,Sn)}function y5(){Dn(new Nt(tO,g5,"PUBLIC").setMultipleInstances(!0)),Pe(Jk,Xk,""),Pe(Jk,Xk,"esm2017")}y5();var Sl=class{constructor(e){return e}},iO="storage",cC=class{constructor(){return $r(iO)}};var uC=new z("angularfire2.storage-instances");function _5(t,e){let n=Vi(iO,t,e);return n&&new Sl(n)}function v5(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Sl(r)}}var w5={provide:cC,deps:[[new ze,uC]]},I5={provide:Sl,useFactory:_5,deps:[[new ze,uC],pn]};function sO(t,...e){return Pe("angularfire",Bn.full,"gcs"),Wt([I5,w5,{provide:uC,useFactory:v5(t),multi:!0,deps:[Te,Rt,fr,$n,[new ze,zr],[new ze,hr],...e]}])}var oO=Xe(nO,!0);var aO={production:!1,firebaseConfig:{apiKey:"AIzaSyAiPN-xGHJGT36J8V14fLaCV6cqq431Gp4",authDomain:"bankingapp-49ab9.firebaseapp.com",databaseURL:"https://bankingapp-49ab9-default-rtdb.firebaseio.com",projectId:"bankingapp-49ab9",storageBucket:"bankingapp-49ab9.appspot.com",messagingSenderId:"762026356516",appId:"1:762026356516:web:7515d017e975d555748db1"}};var cO={providers:[KA(Wk),ER(()=>bR(aO.firebaseConfig)),_x(()=>wx()),oM(()=>cM()),gk(()=>yk()),sO(()=>oO())]};fA(Fa,cO).catch(t=>console.error(t));
